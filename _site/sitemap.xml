<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dusko Pijetlovic</title>
    <description>Dusko Pijetlovic - My Personal Web Space</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/sitemap.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 31 Aug 2022 17:19:38 -0700</pubDate>
    <lastBuildDate>Wed, 31 Aug 2022 17:19:38 -0700</lastBuildDate>
    <generator>Jekyll v3.9.0</generator>
    
      <item>
        <title>How To Run diagrams.net (aka draw.io or drawio) Locally with Docker on FreeBSD 13 with vm-bhyve and Debian GNU/Linux</title>
        <description>&lt;p&gt;Host OS: FreeBSD 13, Shell: csh  &lt;br /&gt;
Guest OS: Debian GNU/Linux, Shell: bash&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Prerequsites:&lt;/p&gt;

&lt;p&gt;In Debian GNU/Linux VM guest (running inside bhyve):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Docker installed&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker.service&lt;/code&gt; running&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;containerd.service&lt;/code&gt; running&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can follow instructions outlined here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/freebsd/docker/vm/virtualization/howto/diagram/2022/02/24/freebsd-docker-linux-kroki-diagrams.html&quot;&gt;How to Run Kroki on FreeBSD 13 with vm-bhyve and Debian GNU/Linux VM&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    2048M   -    No         Stopped 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm start debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm console debianvm1
---- snip ----

debianvm1 login: dusko
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
docker run -d -p 9000:9000 -v \
/var/run/docker.sock:/var/run/docker.sock -v \
portainer_data:/data portainer/portainer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -an | grep 9000
tcp   LISTEN 0      4096    0.0.0.0:9000             0.0.0.0:*
tcp   LISTEN 0      4096    [::]:9000                [::]:*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
docker \
run -it --rm --name=&quot;draw&quot; \
-p 8080:8080 -p 8443:8443 \
jgraph/drawio
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IP address of the guest VM (GNU/Linux Debian) is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.8.18&lt;/code&gt;.
The network interface name assigned by the OS is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enp0s5&lt;/code&gt;, and 
when you run the following inside the guest, you get its IP address:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip address show dev enp0s5 | grep -w inet 
    inet 192.168.8.18/24 brd 192.168.8.255 scope global dynamic enp0s5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use a Web browser on the FreeBSD host and open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://192.168.8.18:8080/&lt;/code&gt; 
or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://192.168.8.18:8443/&lt;/code&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jgraph.github.io/drawio/&quot;&gt;drawio&lt;/a&gt;
(Source to app.diagrams.net, &lt;a href=&quot;https://www.diagrams.net/&quot;&gt;www.diagrams.net&lt;/a&gt;) 
(Retrieved on Aug 28, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;draw.io, this project, is a configurable diagramming/whiteboarding 
visualization application. draw.io is owned and developed by JGraph Ltd, 
a UK based software company.&lt;/p&gt;

  &lt;p&gt;As well as running this project, we run a production-grade deployment 
of the diagramming interface at https://app.diagrams.net.&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;Scope of the Project&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;draw.io is a diagramming or whiteboarding application, depending on 
which theme is selected.  It is not an SVG editing app, the SVG export 
is designed only for embedding in web pages, not for further editing 
in other tools.&lt;/p&gt;

  &lt;p&gt;The application is designed to be used largely as-is.  It’s possible to 
alter the major parts of the interface, but if you’re looking for an 
editor with very specific editing features, the project is likely not 
a good base to use.&lt;/p&gt;

  &lt;p&gt;That is to say, if you wanted to create/deploy a whiteboard or 
diagramming application where the functionality in the main canvas is 
as this project provides, it more likely to be a good base to use. 
The default libraries, the menus, the toolbar, the default colours, 
the storage location, these can all be changed.&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;Running&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;One way to run diagrams.net is to fork this project, &lt;a href=&quot;https://help.github.com/categories/github-pages-basics/&quot;&gt;publish the master 
branch to GitHub pages&lt;/a&gt; and the &lt;a href=&quot;https://jgraph.github.io/drawio/src/main/webapp/index.html&quot;&gt;pages sites&lt;/a&gt; will have the full editor 
functionality (sans the integrations).&lt;/p&gt;

  &lt;p&gt;Another way is to use &lt;a href=&quot;https://github.com/jgraph/docker-drawio&quot;&gt;the recommended Docker project&lt;/a&gt; or to download &lt;a href=&quot;https://get.diagrams.net/&quot;&gt;draw.io Desktop&lt;/a&gt;.&lt;/p&gt;

  &lt;p&gt;The full packaged .war of the client and servlets is built when the 
project is tagged and available on the &lt;a href=&quot;https://github.com/jgraph/draw.io/releases&quot;&gt;releases page&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Sun, 28 Aug 2022 11:27:04 -0700</pubDate>
        <link>http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/tex/latex/visualization/sysadmin/documentation/2022/08/28/run-diagrams-dot-net-aka-drawio-locally.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/tex/latex/visualization/sysadmin/documentation/2022/08/28/run-diagrams-dot-net-aka-drawio-locally.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>java</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>tex</category>
        
        <category>latex</category>
        
        <category>visualization</category>
        
        <category>sysadmin</category>
        
        <category>documentation</category>
        
      </item>
    
      <item>
        <title>How To Run diagrams.net (aka draw.io or drawio) Locally with a war File on FreeBSD 13</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell: csh&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;From the draw.io project’s 
&lt;a href=&quot;https://github.com/jgraph/drawio#readme&quot;&gt;Readme&lt;/a&gt; file:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The full packaged .war of the client and servlets is built when the 
project is tagged and available on the &lt;a href=&quot;https://github.com/jgraph/draw.io/releases&quot;&gt;releases page&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As of Aug 27, 2022, the latest draw.io version is 20.2.6.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mkdir drawio
% cd drawio
% fetch https://github.com/jgraph/drawio/releases/download/v20.2.6/draw.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file draw.war
draw.war: Zip archive data, at least v1.0 to extract, compression method=store
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% unzip draw.war 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pwd
/usr/home/dusko/drawio
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig
---- snip ----
ue0: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500 
  options=68009b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,
  LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
---- snip ----
        inet 192.168.1.9 netmask 0xffffff00 broadcast 192.168.1.255
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For example, to run it with python3 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module on port &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;8081&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python3.9 -m http.server 8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use a Web browser and open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:8081&lt;/code&gt; or
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://127.0.0.1:8081/&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://192.168.1.9:8081/&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Alternatively, on this system I could also run it with 
python 3.8. &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python3.8 -m http.server 8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;   If you use python2, to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SimpleHTTPServer&lt;/code&gt; module, 
you need to run this command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python2 -m SimpleHTTPServer 8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h2&gt;

&lt;p&gt;[1] About Python versions on this system:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg info --regex python 
python38-3.8.13_2
python39-3.9.13
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python; type python; whereis python; which python
python: not found
python:
python: Command not found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python3.8; type python3.8; whereis python3.8; which python3.8
/usr/local/bin/python3.8
python3.8 is /usr/local/bin/python3.8
python3.8: /usr/local/bin/python3.8 /usr/local/man/man1/python3.8.1.gz
/usr/local/bin/python3.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python3.9; type python3.9; whereis python3.9; which python3.9
/usr/local/bin/python3.9
python3.9 is /usr/local/bin/python3.9
python3.9: /usr/local/bin/python3.9 /usr/local/man/man1/python3.9.1.gz
/usr/local/bin/python3.9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/bin/python*
-r-xr-xr-x  1 root  wheel   5.1K Jul  3 05:11 /usr/local/bin/python3.8
-r-xr-xr-x  1 root  wheel   3.1K Jul  3 05:11 /usr/local/bin/python3.8-config
-r-xr-xr-x  1 root  wheel   5.1K Jul  2 18:17 /usr/local/bin/python3.9
-r-xr-xr-x  1 root  wheel   3.1K Jul  2 18:18 /usr/local/bin/python3.9-config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sat, 27 Aug 2022 10:34:06 -0700</pubDate>
        <link>http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/tex/latex/visualization/sysadmin/documentation/2022/08/27/run-diagrams-dot-net-aka-drawio-with-java-war-image.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/tex/latex/visualization/sysadmin/documentation/2022/08/27/run-diagrams-dot-net-aka-drawio-with-java-war-image.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>java</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>tex</category>
        
        <category>latex</category>
        
        <category>visualization</category>
        
        <category>sysadmin</category>
        
        <category>documentation</category>
        
      </item>
    
      <item>
        <title>Fonts in X11 - aka Fonts in X (Xorg)</title>
        <description>&lt;p&gt;OS: FreeBSD 13   &lt;br /&gt;
Shell: csh&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;iconv&lt;/li&gt;
  &lt;li&gt;python; e.g.:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(b.decode(&quot;utf8&quot;))&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Perl&lt;/li&gt;
  &lt;li&gt;Also, basically all or most from here:
&lt;a href=&quot;https://charbase.com/02b7-unicode-modifier-letter-small-w&quot;&gt;https://charbase.com/02b7-unicode-modifier-letter-small-w&lt;/a&gt;:  &lt;strong&gt;Decomposition&lt;/strong&gt;, Index, Class, Block, Java escape, Javascript escape, Python escape, HTML escapes, URL encoded, UTF8, UTF16&lt;/li&gt;
  &lt;li&gt;xterm tests - from e.g. Thomas E. Dickey &lt;a href=&quot;http://invisible-island.net/ncurses/&quot;&gt;http://invisible-island.net/ncurses/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;fonts-in-x11-x-window-system-aka-x&quot;&gt;Fonts in X11 (X Window System, aka X)&lt;/h2&gt;

&lt;p&gt;From “Linux in a Windows World” by Roderick W Smith
(O’Reilly Media, Inc. February 2005):&lt;/p&gt;

&lt;p&gt;Two font systems:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The X core fonts (a.k.a. X fonts)
    &lt;ul&gt;
      &lt;li&gt;Designed with bitmap fonts in mind, meaning that individual characters
were designed for display at a specific size in pixels.
        &lt;ul&gt;
          &lt;li&gt;To support scaleable fonts, which can be resized, multiple bitmap
font files are required, one for each size. X servers ship with
several bitmap fonts in a variety of sizes, designed for both
72 dots per inch (dpi) and 100-dpi displays.&lt;/li&gt;
          &lt;li&gt;Most modern fonts, though, use scaleable font (a.k.a. outline font)
technologies, in which the font is described in terms of mathematical
descriptions of lines and curves.  These descriptions provide an
outline of a character, which the font renderer can scale to any
desired resolution and fill in.
            &lt;ul&gt;
              &lt;li&gt;The two most common scaleable font formats today are
&lt;strong&gt;PostScript Type 1&lt;/strong&gt; (a.k.a. Adobe Type Manager or ATM) fonts and
&lt;strong&gt;TrueType&lt;/strong&gt; fonts (TTF).&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Xft fonts (aka outline fonts or scalable fonts)
    &lt;ul&gt;
      &lt;li&gt;Designed around the FreeType library, which was originally a tool for
rendering TrueType fonts.  Today, though, Xft supports both TrueType
and Type 1 fonts.&lt;/li&gt;
      &lt;li&gt;Improved limitations in the X core fonts:
        &lt;ul&gt;
          &lt;li&gt;X core fonts can’t readily handle more than two colors per font
(Required a font technology known as font smoothing or anti-aliasing.
 Font smoothing uses shades of gray to deliberately blur fonts,
 which has the subjective effect of improving the appearance of
 fonts because it tends to hide the jagged edges along diagonal
 lines and curves.)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Installing the X core fonts can be tricky.&lt;/li&gt;
      &lt;li&gt;X core fonts were not designed with printing in mind, and coordinating
the display and print fonts can be a challenge when using these fonts.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;
Individual X-based programs sometimes employ their own font-handling systems.&lt;/p&gt;

&lt;h2 id=&quot;installing-x-core-fonts-aka-traditional-x-fonts&quot;&gt;Installing X Core Fonts (aka “Traditional” X Fonts)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  ORDER&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Install font; that is, copy its files&lt;/li&gt;
  &lt;li&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkfontdir&lt;/code&gt; to recreate the font database&lt;/li&gt;
  &lt;li&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkfontscale&lt;/code&gt; to recreate an index of scalable font files for X&lt;/li&gt;
  &lt;li&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xset fp+ /path/to/the/new/font&lt;/code&gt;  to append it to the font path&lt;/li&gt;
  &lt;li&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xset fp rehash&lt;/code&gt; to  reread the font databases in the font path&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;file-fontsdir----todo&quot;&gt;File fonts.dir    &lt;strong&gt;[TODO]&lt;/strong&gt;&lt;/h3&gt;

&lt;h3 id=&quot;file-fontsscale--todo&quot;&gt;File fonts.scale  &lt;strong&gt;[TODO]&lt;/strong&gt;&lt;/h3&gt;

&lt;h3 id=&quot;refresh-rehash-the-font-databases&quot;&gt;Refresh (Rehash) the Font Databases&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset fp rehash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xset(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fp rehash
        The rehash argument resets the font path to its current value,
        causing the server to reread the font databases in the current
        font path.  This is generally only used when adding new fonts
        to a font directory (after running mkfontdir to recreate the
        font database).
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
To reset the font path to the server’s (that is, X server’s) default:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset fp default
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;xlsfonts1---server-font-list-displayer-for-x&quot;&gt;xlsfonts(1) - Server Font List Displayer for X&lt;/h3&gt;

&lt;p&gt;List all X core fonts on the system:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xlsfonts | wc -l
   25462
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo xlsfonts | wc -l
Password:
   25462
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;converting-a-file-from-an-8-bit-character-set-for-example-iso_8859-1-to-utf-8-without-posting-the-file-to-a-remote-server&quot;&gt;Converting a File from an 8-bit Character Set (For Example ISO_8859-1) to UTF-8 without POSTing the File to a Remote server&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://www.acc.umu.se/~saasha/charconv/&quot;&gt;Converting a file from an 8-bit character set (for example ISO_8859-1) to UTF-8 without POSTing the file to a remote server&lt;/a&gt; (Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt; In many cases, the most obvious way to solve such a problem is to save 
the file, open a terminal, move to the directory where the file resides 
(with cd …) and use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iconv&lt;/code&gt; similarly to:&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iconv -f iso88591 -t utf8 fileToConvert.txt &amp;gt; convertedFile.txt&lt;/code&gt;&lt;/p&gt;

  &lt;p&gt;Unfortunately, finding out how to start a terminal is not always easy 
in today’s GUI’s!&lt;/p&gt;

  &lt;p&gt;Here, you are given the opportunity to achieve such a conversion locally. 
Choose a character set (charset, encoding) in the list below and choose 
the file you wish to convert.  The JavaScript program linked to by this 
page will try to make your browser convert the file to UTF-8. 
If the conversion succeeds, you will be given the opportunity to save 
the converted file.&lt;/p&gt;

  &lt;p&gt;You do not need any Internet connection to achieve this conversion. 
You can save this page locally together with (in the same directory than) 
the JavaScript program it is linked to and open it in a browser to 
achieve the conversions even without any Internet connection.&lt;/p&gt;

  &lt;p&gt;Comments and suggestions may be sent to saasha@acc.umu.se.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;installing-xft-fonts-aka-fontconfig&quot;&gt;Installing Xft Fonts (aka Fontconfig)&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/share/fonts/ | wc -l
      42

% ls -lh /usr/local/share/fonts/ | wc -l
      40
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /usr/local/etc/fonts/
drwxr-xr-x  4 root  wheel  7 Feb  3  2022 /usr/local/etc/fonts/

% ls -alh /usr/local/etc/fonts/ | wc -l
       8

% ls -lh /usr/local/etc/fonts/ | wc -l
       6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/fonts/
total 79
drwxr-xr-x  2 root  wheel    51B Feb  3  2022 conf.avail
drwxr-xr-x  2 root  wheel    33B Feb  3  2022 conf.d
-rw-r--r--  1 root  wheel   2.6K Jan 21  2022 fonts.conf
-rw-r--r--  1 root  wheel   2.6K Jan 21  2022 fonts.conf.sample
-rw-r--r--  1 root  wheel   8.1K Dec  3  2020 fonts.dtd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/fonts/conf.avail/ | wc -l
      52

% ls -lh /usr/local/etc/fonts/conf.avail/ | wc -l
      50
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/fonts/conf.d/ | wc -l
      34

% ls -lh /usr/local/etc/fonts/conf.d/ | wc -l
      32
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/fonts/conf.d/README
conf.d/README

Each file in this directory is a fontconfig configuration file.  Fontconfig
scans this directory, loading all files of the form [0-9][0-9]*.conf.
These files are normally installed in /usr/local/etc/fonts/conf.avail
and then symlinked here, allowing them to be easily installed and then
enabled/disabled by adjusting the symlinks.

The files are loaded in numeric order, the structure of the configuration
has led to the following conventions in usage:

 Files beginning with:  Contain:

 00 through 09          Font directories
 10 through 19          system rendering defaults (AA, etc)
 20 through 29          font rendering options
 30 through 39          family substitution
 40 through 49          generic identification, map family-&amp;gt;generic
 50 through 59          alternate config file loading
 60 through 69          generic aliases, map generic-&amp;gt;family
 70 through 79          select font (adjust which fonts are available)
 80 through 89          match target=&quot;scan&quot; (modify scanned patterns)
 90 through 99          font synthesis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/fonts/fonts.conf*
-rw-r--r--  1 root  wheel   2.6K Jan 21  2022 /usr/local/etc/fonts/fonts.conf
-rw-r--r--  1 root  wheel   2.6K Jan 21  2022 /usr/local/etc/fonts/fonts.conf.sample
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff /usr/local/etc/fonts/fonts.conf.sample /usr/local/etc/fonts/fonts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file /usr/local/etc/fonts/fonts.conf
/usr/local/etc/fonts/fonts.conf: XML 1.0 document, ASCII text
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l /usr/local/etc/fonts/fonts.conf
     103 /usr/local/etc/fonts/fonts.conf

% sed &apos;/^[[:space:]]*$/d&apos; /usr/local/etc/fonts/fonts.conf | grep -v \# | wc -l
      87
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed &apos;/^[[:space:]]*$/d&apos; /usr/local/etc/fonts/fonts.conf | grep -v \#
&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;
&amp;lt;!DOCTYPE fontconfig SYSTEM &quot;urn:fontconfig:fonts.dtd&quot;&amp;gt;
&amp;lt;!-- /etc/fonts/fonts.conf file to configure system font access --&amp;gt;
&amp;lt;fontconfig&amp;gt;
        &amp;lt;description&amp;gt;Default configuration file&amp;lt;/description&amp;gt;
&amp;lt;!--
        DO NOT EDIT THIS FILE.
        IT WILL BE REPLACED WHEN FONTCONFIG IS UPDATED.
        LOCAL CHANGES BELONG IN &apos;local.conf&apos;.
        The intent of this standard configuration file is to be adequate for
        most environments.  If you have a reasonably normal environment and
        have found problems with this configuration, they are probably
        things that others will also want fixed.  Please submit any
        problems to the fontconfig bugzilla system located at fontconfig.org
        Note that the normal &apos;make install&apos; procedure for fontconfig is to
        replace any existing fonts.conf file with the new version.  Place
        any local customizations in local.conf which this file references.
        Keith Packard
--&amp;gt;
&amp;lt;!-- Font directory list --&amp;gt;
        &amp;lt;dir&amp;gt;/usr/local/share/fonts&amp;lt;/dir&amp;gt;
        &amp;lt;dir&amp;gt;/usr/local/lib/X11/fonts&amp;lt;/dir&amp;gt;
        &amp;lt;dir prefix=&quot;xdg&quot;&amp;gt;fonts&amp;lt;/dir&amp;gt;
        &amp;lt;!-- the following element will be removed in the future --&amp;gt;
        &amp;lt;dir&amp;gt;~/.fonts&amp;lt;/dir&amp;gt;
&amp;lt;!--
  Accept deprecated &apos;mono&apos; alias, replacing it with &apos;monospace&apos;
--&amp;gt;
        &amp;lt;match target=&quot;pattern&quot;&amp;gt;
                &amp;lt;test qual=&quot;any&quot; name=&quot;family&quot;&amp;gt;
                        &amp;lt;string&amp;gt;mono&amp;lt;/string&amp;gt;
                &amp;lt;/test&amp;gt;
                &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot; binding=&quot;same&quot;&amp;gt;
                        &amp;lt;string&amp;gt;monospace&amp;lt;/string&amp;gt;
                &amp;lt;/edit&amp;gt;
        &amp;lt;/match&amp;gt;
&amp;lt;!--
  Accept alternate &apos;sans serif&apos; spelling, replacing it with &apos;sans-serif&apos;
--&amp;gt;
        &amp;lt;match target=&quot;pattern&quot;&amp;gt;
                &amp;lt;test qual=&quot;any&quot; name=&quot;family&quot;&amp;gt;
                        &amp;lt;string&amp;gt;sans serif&amp;lt;/string&amp;gt;
                &amp;lt;/test&amp;gt;
                &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot; binding=&quot;same&quot;&amp;gt;
                        &amp;lt;string&amp;gt;sans-serif&amp;lt;/string&amp;gt;
                &amp;lt;/edit&amp;gt;
        &amp;lt;/match&amp;gt;
&amp;lt;!--
  Accept deprecated &apos;sans&apos; alias, replacing it with &apos;sans-serif&apos;
--&amp;gt;
        &amp;lt;match target=&quot;pattern&quot;&amp;gt;
                &amp;lt;test qual=&quot;any&quot; name=&quot;family&quot;&amp;gt;
                        &amp;lt;string&amp;gt;sans&amp;lt;/string&amp;gt;
                &amp;lt;/test&amp;gt;
                &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot; binding=&quot;same&quot;&amp;gt;
                        &amp;lt;string&amp;gt;sans-serif&amp;lt;/string&amp;gt;
                &amp;lt;/edit&amp;gt;
        &amp;lt;/match&amp;gt;
&amp;lt;!--
  Accept alternate &apos;system ui&apos; spelling, replacing it with &apos;system-ui&apos;
--&amp;gt;
        &amp;lt;match target=&quot;pattern&quot;&amp;gt;
                &amp;lt;test qual=&quot;any&quot; name=&quot;family&quot;&amp;gt;
                        &amp;lt;string&amp;gt;system ui&amp;lt;/string&amp;gt;
                &amp;lt;/test&amp;gt;
                &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot; binding=&quot;same&quot;&amp;gt;
                        &amp;lt;string&amp;gt;system-ui&amp;lt;/string&amp;gt;
                &amp;lt;/edit&amp;gt;
        &amp;lt;/match&amp;gt;
&amp;lt;!--
  Load local system customization file
--&amp;gt;
        &amp;lt;include ignore_missing=&quot;yes&quot;&amp;gt;conf.d&amp;lt;/include&amp;gt;
&amp;lt;!-- Font cache directory list --&amp;gt;
        &amp;lt;cachedir&amp;gt;/var/db/fontconfig&amp;lt;/cachedir&amp;gt;
        &amp;lt;cachedir prefix=&quot;xdg&quot;&amp;gt;fontconfig&amp;lt;/cachedir&amp;gt;
        &amp;lt;!-- the following element will be removed in the future --&amp;gt;
        &amp;lt;cachedir&amp;gt;~/.fontconfig&amp;lt;/cachedir&amp;gt;
        &amp;lt;config&amp;gt;
&amp;lt;!--
  Rescan configuration every 30 seconds when FcFontSetList is called
 --&amp;gt;
                &amp;lt;rescan&amp;gt;
                        &amp;lt;int&amp;gt;30&amp;lt;/int&amp;gt;
                &amp;lt;/rescan&amp;gt;
        &amp;lt;/config&amp;gt;
&amp;lt;/fontconfig&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /etc/fonts/fonts.conf
ls: /etc/fonts/fonts.conf: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;font-directory-list&quot;&gt;Font Directory List&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n &apos;Font directory list&apos; /usr/local/etc/fonts/fonts.conf
25:&amp;lt;!-- Font directory list --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 25,35p /usr/local/etc/fonts/fonts.conf
&amp;lt;!-- Font directory list --&amp;gt;

        &amp;lt;dir&amp;gt;/usr/local/share/fonts&amp;lt;/dir&amp;gt;
        &amp;lt;dir&amp;gt;/usr/local/lib/X11/fonts&amp;lt;/dir&amp;gt;


        &amp;lt;dir prefix=&quot;xdg&quot;&amp;gt;fonts&amp;lt;/dir&amp;gt;
        &amp;lt;!-- the following element will be removed in the future --&amp;gt;
        &amp;lt;dir&amp;gt;~/.fonts&amp;lt;/dir&amp;gt;

&amp;lt;!--
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.fonts&lt;/code&gt; directory will be removed in the future:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n removed /usr/local/etc/fonts/fonts.conf
32:     &amp;lt;!-- the following element will be removed in the future --&amp;gt;
91:     &amp;lt;!-- the following element will be removed in the future --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 32,34p /usr/local/etc/fonts/fonts.conf
        &amp;lt;!-- the following element will be removed in the future --&amp;gt;
        &amp;lt;dir&amp;gt;~/.fonts&amp;lt;/dir&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/share/fonts/ | wc -l
      42

% ls -lh /usr/local/share/fonts/ | wc -l
      40
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls /usr/local/share/fonts/
100dpi                  gnu-unifont             SourceHanSansK
75dpi                   ipamjm                  SourceHanSansSC
adobe-cmaps             jmk-x11-fonts           SourceHanSansTC
bitstream-vera          Liberation              SourceSansPro
Caladea                 LinLibertineG           symbola
cantarell               misc                    terminus-font
Carlito                 Monoid                  TerminusTTF
ChromeOS                nanum-coding-ttf        TTF
comic-neue              nanum-ttf               twemoji-color-font-ttf
cyrillic                noto                    Type1
dejavu                  OTF                     uw-ttyp0
encodings               SourceCodePro           vlgothic
GentiumBasic            SourceHanSans           wqy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /usr/local/lib/X11/fonts
ls: /usr/local/lib/X11/fonts: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld ~/.fonts/
drwxr-xr-x  3 dusko  dusko  214 Nov 22  2021 /home/dusko/.fonts/

% ls -alh ~/.fonts/ | wc -l
     215

% ls -lh ~/.fonts/ | wc -l
     213
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;font-cache-directory-list&quot;&gt;Font Cache Directory List&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n -i list /usr/local/etc/fonts/fonts.conf
25:&amp;lt;!-- Font directory list --&amp;gt;
87:&amp;lt;!-- Font cache directory list --&amp;gt;
96:  Rescan configuration every 30 seconds when FcFontSetList is called
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 87,94p /usr/local/etc/fonts/fonts.conf
&amp;lt;!-- Font cache directory list --&amp;gt;

        &amp;lt;cachedir&amp;gt;/var/db/fontconfig&amp;lt;/cachedir&amp;gt;
        &amp;lt;cachedir prefix=&quot;xdg&quot;&amp;gt;fontconfig&amp;lt;/cachedir&amp;gt;
        &amp;lt;!-- the following element will be removed in the future --&amp;gt;
        &amp;lt;cachedir&amp;gt;~/.fontconfig&amp;lt;/cachedir&amp;gt;

        &amp;lt;config&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.fontconfig&lt;/code&gt; directory will be removed in the future:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n removed /usr/local/etc/fonts/fonts.conf
32:     &amp;lt;!-- the following element will be removed in the future --&amp;gt;
91:     &amp;lt;!-- the following element will be removed in the future --&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 91,92p /usr/local/etc/fonts/fonts.conf
        &amp;lt;!-- the following element will be removed in the future --&amp;gt;
        &amp;lt;cachedir&amp;gt;~/.fontconfig&amp;lt;/cachedir&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /var/db/fontconfig/
drwxr-xr-x  2 root  wheel  57 Mar 31 13:49 /var/db/fontconfig/

% ls -alh /var/db/fontconfig/ | wc -l
      58

% ls -lh /var/db/fontconfig/ | wc -l
      56
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /var/db/fontconfig/CACHEDIR.TAG
Signature: 8a477f597d28d172789f06886806bc55
# This file is a cache directory tag created by fontconfig.
# For information about cache directory tags, see:
#       http://www.brynosaurus.com/cachedir/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld ~/.fontconfig
ls: /home/dusko/.fontconfig: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;file--fontsalias&quot;&gt;File:  fonts.alias&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo locate fonts.alias
/usr/local/share/fonts/100dpi/fonts.alias
/usr/local/share/fonts/75dpi/fonts.alias
/usr/local/share/fonts/cyrillic/fonts.alias
/usr/local/share/fonts/misc/fonts.alias
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;list-information-about-current-fonts-configuration-font-path&quot;&gt;List Information about Current Fonts Configuration, Font Path&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xset -q | grep -n Font
22:Font Path:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xset -q | sed -n 22,23p
Font Path:
  /usr/local/share/fonts/misc/,/usr/local/share/fonts/TTF/,/usr/local/share/fonts/OTF/,/usr/local/share/fonts/Type1/,/usr/local/share/fonts/100dpi/,/usr/local/share/fonts/75dpi/,catalogue:/usr/local/etc/X11/fontpath.d,built-ins,/usr/local/share/fonts/100dpi,/usr/local/share/fonts/75dpi,/usr/local/share/fonts/adobe-cmaps,/usr/local/share/fonts/bitstream-vera,/usr/local/share/fonts/Caladea,/usr/local/share/fonts/cantarell,/usr/local/share/fonts/Carlito,/usr/local/share/fonts/ChromeOS,/usr/local/share/fonts/comic-neue,/usr/local/share/fonts/cyrillic,/usr/local/share/fonts/dejavu,/usr/local/share/fonts/GentiumBasic,/usr/local/share/fonts/gnu-unifont,/usr/local/share/fonts/ipamjm,/usr/local/share/fonts/jmk-x11-fonts,/usr/local/share/fonts/Liberation,/usr/local/share/fonts/LinLibertineG,/usr/local/share/fonts/misc,/usr/local/share/fonts/Monoid,/usr/local/share/fonts/nanum-coding-ttf,/usr/local/share/fonts/nanum-ttf,/usr/local/share/fonts/noto,/usr/local/share/fonts/OTF,/usr/local/share/fonts/SourceCodePro,/usr/local/share/fonts/SourceHanSans,/usr/local/share/fonts/SourceHanSansK,/usr/local/share/fonts/SourceHanSansSC,/usr/local/share/fonts/SourceHanSansTC,/usr/local/share/fonts/SourceSansPro,/usr/local/share/fonts/symbola,/usr/local/share/fonts/terminus-font,/usr/local/share/fonts/TerminusTTF,/usr/local/share/fonts/TTF,/usr/local/share/fonts/twemoji-color-font-ttf,/usr/local/share/fonts/Type1,/usr/local/share/fonts/uw-ttyp0,/usr/local/share/fonts/vlgothic,/usr/local/share/fonts/wqy,/usr/home/dusko/.fonts/knxt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;fc-cache1---build-font-information-cache-files&quot;&gt;fc-cache(1) - Build Font Information Cache Files&lt;/h3&gt;

&lt;p&gt;To refresh only system fonts:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-cache -sv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-cache(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DESCRIPTION
       fc-cache scans the font directories on the system and builds font
       information cache files for applications using fontconfig for their
       font handling.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-s     Only scan system-wide directories, omitting the places located
       in the user&apos;s home directory.

-v     Display status information while busy.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To force refresh fonts cache:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-cache -fv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-f     Force re-generation of apparently up-to-date cache files,
       overriding the timestamp checking.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Erase all existing cache files and rescan:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-cache -rv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;fc-list1---list-available-fonts&quot;&gt;fc-list(1) - List Available Fonts&lt;/h3&gt;

&lt;p&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DESCRIPTION
       fc-list lists fonts and styles available on the system for applications
       using fontconfig.  If any elements are specified, only those are
       printed.  Otherwise family and style are printed, unless verbose output
       is requested.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Number of &lt;strong&gt;fontconfig&lt;/strong&gt; fonts available to the user (lists all font faces):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-list | wc -l
    3182
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Number of &lt;strong&gt;fontconfig&lt;/strong&gt; fonts available to root user (lists all font faces):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo fc-list | wc -l
Password:
    2966
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;fc-conflist1---show-the-ruleset-files-information-on-the-system&quot;&gt;fc-conflist(1) - Show the ruleset files information on the system&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-conflist | wc -l
      51

% sudo fc-conflist | wc -l
      50
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-conflist | grep dusko
+ /home/dusko/.config/fontconfig/fonts.conf: No description
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo fc-conflist | grep dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /home/dusko/.config/fontconfig/fonts.conf
-rw-r--r--  1 dusko  dusko   1.8K Oct 21  2021 /home/dusko/.config/fontconfig/fonts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;: Courtesy of &lt;strong&gt;vermaden&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l /home/dusko/.config/fontconfig/fonts.conf
      52 /home/dusko/.config/fontconfig/fonts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /home/dusko/.config/fontconfig/fonts.conf
&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;
&amp;lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&amp;gt;

&amp;lt;fontconfig&amp;gt;

  &amp;lt;!-- ANTIALIAS ALL FONTS --&amp;gt;
  &amp;lt;match target=&quot;font&quot;&amp;gt;
    &amp;lt;edit name=&quot;antialias&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;bool&amp;gt;true&amp;lt;/bool&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;edit name=&quot;hinting&quot;   mode=&quot;assign&quot;&amp;gt;&amp;lt;bool&amp;gt;false&amp;lt;/bool&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;edit name=&quot;hintstyle&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;int&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;edit name=&quot;dpi&quot;       mode=&quot;assign&quot;&amp;gt;&amp;lt;double&amp;gt;75&amp;lt;/double&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;edit name=&quot;rgba&quot;      mode=&quot;assign&quot;&amp;gt;&amp;lt;const&amp;gt;none&amp;lt;/const&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;!-- REPLACE THESE WITH A BETTER LOOKING FONT (MONO) --&amp;gt;
  &amp;lt;match target=&quot;pattern&quot;&amp;gt;
    &amp;lt;test name=&quot;family&quot;    qual=&quot;any&quot;&amp;gt;&amp;lt;string&amp;gt;Courier [Adobe]&amp;lt;/string&amp;gt;&amp;lt;/test&amp;gt;
    &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;string&amp;gt;Courier 10 Pitch&amp;lt;/string&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;match target=&quot;pattern&quot;&amp;gt;
    &amp;lt;test name=&quot;family&quot;    qual=&quot;any&quot;&amp;gt;&amp;lt;string&amp;gt;Fixed&amp;lt;/string&amp;gt;&amp;lt;/test&amp;gt;
    &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;string&amp;gt;Courier 10 Pitch&amp;lt;/string&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;match target=&quot;pattern&quot;&amp;gt;
    &amp;lt;test name=&quot;family&quot;    qual=&quot;any&quot;&amp;gt;&amp;lt;string&amp;gt;courier&amp;lt;/string&amp;gt;&amp;lt;/test&amp;gt;
    &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;string&amp;gt;Courier 10 Pitch&amp;lt;/string&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;!-- REPLACE THESE WITH A BETTER LOOKING FONT (SANS) --&amp;gt;
  &amp;lt;match target=&quot;pattern&quot;&amp;gt;
    &amp;lt;test name=&quot;family&quot;    qual=&quot;any&quot;&amp;gt;&amp;lt;string&amp;gt;helvetica&amp;lt;/string&amp;gt;&amp;lt;/test&amp;gt;
    &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;string&amp;gt;arial&amp;lt;/string&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;match target=&quot;pattern&quot;&amp;gt;
    &amp;lt;test name=&quot;family&quot;    qual=&quot;any&quot;&amp;gt;&amp;lt;string&amp;gt;times&amp;lt;/string&amp;gt;&amp;lt;/test&amp;gt;
    &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;string&amp;gt;garamond&amp;lt;/string&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;match target=&quot;pattern&quot;&amp;gt;
    &amp;lt;test name=&quot;family&quot;    qual=&quot;any&quot;&amp;gt;&amp;lt;string&amp;gt;lucida&amp;lt;/string&amp;gt;&amp;lt;/test&amp;gt;
    &amp;lt;edit name=&quot;family&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;string&amp;gt;trebuchet ms&amp;lt;/string&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

  &amp;lt;!-- DISABLE EMBEDDED BITMAPS --&amp;gt;
  &amp;lt;match target=&quot;font&quot; &amp;gt;
    &amp;lt;edit name=&quot;embeddedbitmap&quot; mode=&quot;assign&quot;&amp;gt;&amp;lt;bool&amp;gt;false&amp;lt;/bool&amp;gt;&amp;lt;/edit&amp;gt;
    &amp;lt;/match&amp;gt;

&amp;lt;/fontconfig&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;useful-tools-commands-and-code-snippets-for-exploring-fonts-in-x11&quot;&gt;Useful Tools, Commands and Code Snippets for Exploring Fonts in X11&lt;/h2&gt;

&lt;p&gt;Start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xterm&lt;/code&gt; with red cursor, font Source Code Pro and font size 18:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xterm -cr red -fa &apos;Source Code Pro&apos; -fs 18
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fa&lt;/code&gt; option enables &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xterm&lt;/code&gt; to render &lt;strong&gt;Xft&lt;/strong&gt; fonts 
(a.k.a. fontconfig).&lt;/p&gt;

&lt;p&gt;The venerable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file /usr/local/share/fonts/SourceCodePro/SourceCodePro-Regular.ttf
/usr/local/share/fonts/SourceCodePro/SourceCodePro-Regular.ttf: TrueType Font data, digitally signed, 15 tables, 1st &quot;BASE&quot;, 72 names, Microsoft, language 0x408, type 256 string, \261\300\273\314 a\261\300\273\314 gi &amp;amp; l \274\265 \261\272\301\265\274\314\275\265\302\243\254\
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Report information about OpenType fonts with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;otfinfo(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% otfinfo --info /usr/local/share/fonts/SourceCodePro/SourceCodePro-Regular.ttf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% otfinfo --features /usr/local/share/fonts/SourceCodePro/SourceCodePro-Regular.ttf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print supported scripts and languages:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% otfinfo --scripts /usr/local/share/fonts/SourceCodePro/SourceCodePro-Regular.ttf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DFLT            Default
cyrl            Cyrillic
cyrl.SRB        Cyrillic/Serbian
grek            Greek
latn            Latin
latn.ATH        Latin/Athapaskan
latn.NSM        Latin/Northern Sami
latn.SKS        Latin/Skolt Sami
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Other interesting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;otfinfo&lt;/code&gt;’s options:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-g, --glyphs
     Print the name of every glyph in each font, one per line.

-u, --unicode
     Print each Unicode code point supported by the font, followed by
     the glyph number representing that code point (and, if present,
     the name of the corresponding glyph).

-t, --tables
     Print the size and name of every OpenType table in the font.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-z, --optical-size
     Print optical size information.

-p, --postscript-name
      Print each font&apos;s PostScript name.

-a, --family
     Print each font&apos;s family name.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xset -q
Keyboard Control:
  auto repeat:  on    key click percent:  0    LED mask:  00000000
  XKB indicators:
    00: Caps Lock:   off    01: Num Lock:    off    02: Scroll Lock: off
    03: Compose:     off    04: Kana:        off    05: Sleep:       off
    06: Suspend:     off    07: Mute:        off    08: Misc:        off
    09: Mail:        off    10: Charging:    off    11: Shift Lock:  off
    12: Group 2:     off    13: Mouse Keys:  off
  auto repeat delay:  660    repeat rate:  25
  auto repeating keys:  00ffffffdffffbbf
                        fadfffefffedffff
                        9fffffffffffffff
                        fff7ffffffffffff
  bell percent:  0    bell pitch:  400    bell duration:  100
Pointer Control:
  acceleration:  2/1    threshold:  4
Screen Saver:
  prefer blanking:  yes    allow exposures:  yes
  timeout:  600    cycle:  600
Colors:
  default colormap:  0x22    BlackPixel:  0x0    WhitePixel:  0xffffff
Font Path:
  /usr/local/share/fonts/misc/,/usr/local/share/fonts/TTF/,/usr/local/share/fonts/OTF/,/usr/local/share/fonts/Type1/,/usr/local/share/fonts/100dpi/,/usr/local/share/fonts/75dpi/,catalogue:/usr/local/etc/X11/fontpath.d,built-ins,/usr/local/share/fonts/100dpi,/usr/local/share/fonts/75dpi,/usr/local/share/fonts/adobe-cmaps,/usr/local/share/fonts/bitstream-vera,/usr/local/share/fonts/Caladea,/usr/local/share/fonts/cantarell,/usr/local/share/fonts/Carlito,/usr/local/share/fonts/ChromeOS,/usr/local/share/fonts/comic-neue,/usr/local/share/fonts/cyrillic,/usr/local/share/fonts/dejavu,/usr/local/share/fonts/GentiumBasic,/usr/local/share/fonts/gnu-unifont,/usr/local/share/fonts/ipamjm,/usr/local/share/fonts/jmk-x11-fonts,/usr/local/share/fonts/Liberation,/usr/local/share/fonts/LinLibertineG,/usr/local/share/fonts/misc,/usr/local/share/fonts/Monoid,/usr/local/share/fonts/nanum-coding-ttf,/usr/local/share/fonts/nanum-ttf,/usr/local/share/fonts/noto,/usr/local/share/fonts/OTF,/usr/local/share/fonts/politika-otf,/usr/local/share/fonts/politika-ttf,/usr/local/share/fonts/SourceCodePro,/usr/local/share/fonts/SourceHanSans,/usr/local/share/fonts/SourceHanSansK,/usr/local/share/fonts/SourceHanSansSC,/usr/local/share/fonts/SourceHanSansTC,/usr/local/share/fonts/SourceSansPro,/usr/local/share/fonts/symbola,/usr/local/share/fonts/terminus-font,/usr/local/share/fonts/TerminusTTF,/usr/local/share/fonts/TTF,/usr/local/share/fonts/twemoji-color-font-ttf,/usr/local/share/fonts/Type1,/usr/local/share/fonts/uw-ttyp0,/usr/local/share/fonts/vlgothic,/usr/local/share/fonts/wqy,/usr/home/dusko/.fonts/knxt
DPMS (Energy Star):
  Standby: 600    Suspend: 600    Off: 600
  DPMS is Enabled
  Monitor is On
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt; the content of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Font Path:&lt;/code&gt; line.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xrdb -query
! screen-independent resources
XTerm*saveLines:        1048576
XTerm*loginShell:       true
XTerm*charClass:        33:48,35:48,37:48,43:48,45-47:48,64:48,95:48,126:48
XTerm*eightBitInput:    false
XTerm*borderWidth:      4
Xcursor.theme:  Vanilla-DMZ
XTerm*cursorBlink:      true
XTerm*scrollKey:        true
XTerm*colorUL:  Yellow
XTerm*colorULMode:      true
XTerm*cursorColor:      Cyan
XTerm*background:       Black
XTerm*foreground:       White
XTerm*locale:   UTF-8
XTerm*faceNameDoublesize:       Noto Serif CJK JP
XTerm*scrollTtyOutput:  false
XTerm*selectToClipboard:        true
Xft.autohint:   0
Xft.antialias:  1
Xft.hinting:    1
Xft.rgba:       rgb
Xft.hintstyle:  hintlight
Xft.lcdfilter:  lcddefault
*VT100.Translations:    #override Button1 &amp;lt;Btn3Down&amp;gt;: select-end(PRIMARY,CUT_BUFFER0,CLIPBOARD) \n !Shift &amp;lt;Btn2Up&amp;gt;: insert-selection(CLIPBOARD) \n ~Shift ~Ctrl ~Meta &amp;lt;Btn2Up&amp;gt;: insert-selection(PRIMARY,CUT_BUFFER0) \n &amp;lt;Key&amp;gt;F3: string(&quot;cd ~/scratch/tmpscratch2&quot;) string(0x0d) \n Alt &amp;lt;Key&amp;gt;t: string(&quot;date | dzen2 -xs 2 -p 5 -bg blue&quot;) string(0x0d)
Xmessage*Scrollbar.thumb:       vlines2
Xmessage*Scrollbar.width:       2

! screen 0 resources
#if SCREEN_NUM == 0
#endif

! screen 1 resources
#if SCREEN_NUM == 1
#endif
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; This environment has two monitors so there are references to 
both of them: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#if SCREEN_NUM == 0&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#if SCREEN_NUM == 1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*VT100.Translations:&lt;/code&gt; is my own customization.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;List all monospaced fonts:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ fc-list | cut -f2 -d: | sort -u | grep -i Mono&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Print out the fixed width fonts that are available:&lt;/strong&gt; 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ fc-list :scalable=true:spacing=mono:&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Print out the fixed width fonts that are available with their family name:&lt;/strong&gt; 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ fc-list :scalable=true:spacing=mono: family&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Sort and page through the available fonts - not only fixed width fonts:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ fc-list | cut -f2 -d: | sort -u | less&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;To test the status of your colour support in XTerm:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ tput colors
80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;References: &lt;br /&gt;
(Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.futurile.net/2016/06/14/xterm-setup-and-truetype-font-configuration/&quot;&gt;XTerm introduction and TrueType fonts configuration&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.futurile.net/2016/06/15/xterm-256color-themes-molokai-terminal-theme/&quot;&gt;XTerm colour set-up and Molokai theme&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;installing-an-xft-font-aka-fontconfig---a-full-example&quot;&gt;Installing an Xft Font (aka Fontconfig) - A Full Example&lt;/h3&gt;

&lt;p&gt;OS:  FreeBSD 13.0 &lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list | wc -l
    3186
 
$ sudo fc-list | wc -l
    2968
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list | grep -i hermit
$ sudo fc-list | grep -i hermit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xlsfonts | wc -l
   25462
 
$ sudo xlsfonts | wc -l
   25462
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xlsfonts | grep -i hermit
$ sudo xlsfonts | grep -i hermit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ pkg search hermit
hermit-font-2.0_1      Monospaced font for programmers by a programmer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install hermit-font
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list | wc -l
    3192
 
$ sudo fc-list | wc -l
    2974
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list | grep -i hermit | wc -l
       6

$ sudo fc-list | grep -i hermit | wc -l
       6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list | grep -i hermit
/usr/local/share/fonts/hermit/Hermit-LightItalic.otf: Hermit,Hermit LightItalic:style=LightItalic,Regular
/usr/local/share/fonts/hermit/Hermit-Bold.otf: Hermit:style=Bold
/usr/local/share/fonts/hermit/Hermit-Regular.otf: Hermit:style=Regular
/usr/local/share/fonts/hermit/Hermit-RegularItalic.otf: Hermit:style=RegularItalic,Italic
/usr/local/share/fonts/hermit/Hermit-Light.otf: Hermit,Hermit Light:style=Light,Regular
/usr/local/share/fonts/hermit/Hermit-BoldItalic.otf: Hermit:style=BoldItalic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xlsfonts | wc -l
   25462

$ sudo xlsfonts | wc -l
   25462
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xlsfonts | grep -i hermit
$ sudo xlsfonts | grep -i hermit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list : fullname | grep -i hermit | wc -l
       6

$ fc-list : fullname | grep -i hermit
:fullname=Hermit Bold
:fullname=Hermit Light
:fullname=Hermit RegularItalic
:fullname=Hermit BoldItalic
:fullname=Hermit LightItalic
:fullname=Hermit Regular
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list : postscriptname | grep -i hermit | wc -l
       6

$ fc-list : postscriptname | grep -i hermit
:postscriptname=Hermit-Regular
:postscriptname=Hermit-RegularItalic
:postscriptname=Hermit-LightItalic
:postscriptname=Hermit-Bold
:postscriptname=Hermit-Light
:postscriptname=Hermit-BoldItalic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-match hermit 
Hermit-Regular.otf: &quot;Hermit&quot; &quot;Regular&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-match Hermit
Hermit-Regular.otf: &quot;Hermit&quot; &quot;Regular&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-query /usr/local/share/fonts/hermit/Hermit-Regular.otf | wc -l
      41
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-query /usr/local/share/fonts/hermit/Hermit-Regular.otf 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ file /usr/local/share/fonts/hermit/Hermit-Regular.otf
/usr/local/share/fonts/hermit/Hermit-Regular.otf: OpenType font data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --info /usr/local/share/fonts/hermit/Hermit-Regular.otf
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --features /usr/local/share/fonts/hermit/Hermit-Regular.otf
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --scripts /usr/local/share/fonts/hermit/Hermit-Regular.otf
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --glyphs /usr/local/share/fonts/hermit/Hermit-Regular.otf | wc -l
     393
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --glyphs /usr/local/share/fonts/hermit/Hermit-Regular.otf | wc -l
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --unicode /usr/local/share/fonts/hermit/Hermit-Regular.otf | wc -l
     391
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --unicode /usr/local/share/fonts/hermit/Hermit-Regular.otf 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --font-version /usr/local/share/fonts/hermit/Hermit-Regular.otf
Version 2.000;PS 002.000;hotconv 1.0.88;makeotf.lib2.5.64775
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --optical-size /usr/local/share/fonts/hermit/Hermit-Regular.otf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ otfinfo --postscript-name /usr/local/share/fonts/hermit/Hermit-Regular.otf
Hermit-Regular
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list -v Hermit-Regular charset 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fc-list -v Hermit-Regular
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xfd -fa Hermit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xterm -fa Hermit -fs 14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xterm -fa &apos;Hermit:light&apos; -fs 14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Font face size (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fs&lt;/code&gt; option for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xterm&lt;/code&gt;) and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pixelsize&lt;/code&gt; are 
not the same so the following two are different:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xterm -fa &apos;Hermit:light:pixelsize=14:antialias=true:autohint=true&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xterm -fa &apos;Hermit:light:antialias=true:autohint=true&apos; -fs 14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This table gives an approximate conversion between points and pixels:&lt;br /&gt;
&lt;a href=&quot;https://reeddesign.co.uk/test/points-pixels.html&quot;&gt;Approximate conversion from points to pixels - ReedDesign&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Here’s a chart that converts points to pixels (and ems and %). 
It’s an approximation, which will depend on font, browser and OS, but 
it’s a good starting point.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As per that table, 14pt is approximately 19px:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xterm -fa &apos;Hermit:light:pixelsize=19:antialias=true:autohint=true&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and that’s the same (similar) to the font face size of 14: &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ xterm -fa &apos;Hermit:light:antialias=true:autohint=true&apos; -fs 14&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Hermit font setup reference: &lt;br /&gt;
&lt;a href=&quot;http://eradman.com/posts/openbsd-workstation.html&quot;&gt;Eric Radman - Workstation Notes&lt;/a&gt; (Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;h2 id=&quot;converting-unicode-to-utf-8&quot;&gt;Converting Unicode to UTF-8&lt;/h2&gt;

&lt;h3 id=&quot;a-short-introduction&quot;&gt;A Short Introduction&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Not going into details about different operating systems, 
different shells, different fonts, locales, different editors, 
different ordering and byte format (7-bit, 8-bit, single byte, 
double byte, multi-byte), double-wide characters, collation, 
endianness, composing &amp;amp; decomposing, UTF-8 vs. UTF-16 vs. UTF-32
&lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, etc.&lt;/p&gt;

&lt;p&gt;Here’s just a few references to illustrate how complex this area is:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;amp;id=UnicodeSupport&quot;&gt;Software requirements for different levels of Unicode Support&lt;/a&gt; (Retrieved on Apr 17, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Vim supports editing Unicode in the GUI version and in terminals that 
support UTF-8.  Double-wide characters can be used, and up to two 
composing characters are supported.  When reading a file, Vim can often 
detect how it is encoded and convert the text when necessary. 
UTF-8 files are edited without conversion.  Other Unicode formats 
(16 bit and 32 bit) are converted internally.  Conversion is also used 
to edit files in just about any encoding, using an external converter.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://invisible-island.net/ncurses/ncurses.faq.html&quot;&gt;About Vim’s Unicode support - from What is ncurses? - by Thomas E. Dickey, developer and maintainer of xterm&lt;/a&gt; &lt;br /&gt;
(Updated on Mar 16, 2022) (Retrieved on Apr 17, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Vim &lt;br /&gt;
Vim’s developers provide their own termcap definitions, just in case 
there is nothing good enough on the system, and provide features for 
overriding the system’s termcap capabilities even when using the system 
definition as a starting point.  Because of this, vim has had little 
impact on ncurses development; the change-log does not mention vim. 
On the other hand, unlike screen, the source-code for vim still contains 
a comment about a bug in ncurses which was addressed in late 1997, 
before ncurses 4.2 was released.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://vi.stackexchange.com/questions/341/what-is-the-relation-between-vi-nvi-and-vim&quot;&gt;History of - What is the relation between vi, nvi and vim? - Vi and Vim Stack Exchange&lt;/a&gt; (Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;http://ex-vi.sourceforge.net/&quot;&gt;The Traditional Vi&lt;/a&gt; (Retrieved on Apr 17, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;This port of vi has generally preserved the original style, terminal 
control, and feature set.  It adds &lt;strong&gt;support for international character 
sets, including multibyte encodings such as UTF-8&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;), 
and some minor enhancements that were not present in BSD vi 3.7, but had 
been included in later vi versions for System V or in POSIX.2.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;http://ex-vi.sourceforge.net/README&quot;&gt;The Traditional Vi README&lt;/a&gt; (Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Welcome to the ex/vi port!
==========================

This implementation is derived from ex/vi 3.7 of 6/7/85 and the BSD
termcap library, originally from the 2.11BSD distribution. All of them
were changed to compile and run on newer POSIX compatible Unix systems.
Support for international character sets was added, including support
for multibyte locales (based on UTF-8 or East Asian encodings), and some
changes were made to get closer to the POSIX.2 guidelines for ex and
vi. Some issues that were clearly bugs and not features have also been
resolved; see the Changes file for details.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On FreeBSD 13.1 - RELEASE:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v vi; type vi; whereis vi; which vi
/usr/bin/vi
vi is /usr/bin/vi
vi: /usr/bin/vi /usr/share/man/man1/vi.1.gz
/usr/bin/vi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/bin/vi
-r-xr-xr-x  6 root  wheel   463K Jul 27 11:06 /usr/bin/vi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v nvi; type nvi; whereis nvi; which nvi
/usr/bin/nvi
nvi is /usr/bin/nvi
nvi: /usr/bin/nvi /usr/share/man/man1/nvi.1.gz
/usr/bin/nvi
 
% ls -lh /usr/bin/nvi
-r-xr-xr-x  6 root  wheel   463K Jul 27 11:06 /usr/bin/nvi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff /usr/bin/vi /usr/bin/nvi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference:  &lt;br /&gt;
From a FreeBSD Forum post started on Dec 24, 2014 &lt;br /&gt;
&lt;a href=&quot;https://forums.freebsd.org/threads/how-do-i-type-in-special-characters-such-as-in-the-terminal-in-vi.49659/&quot;&gt;How do I type in special characters, such as ∞ in the terminal in vi?&lt;/a&gt;, 
post #3 &lt;a href=&quot;https://forums.FreeBSD.org/threads/how-do-i-type-in-special-characters-such-as-in-the-terminal-in-vi.49659/post-277491&quot;&gt;https://forums.FreeBSD.org/threads/how-do-i-type-in-special-characters-such-as-in-the-terminal-in-vi.49659/post-277491&lt;/a&gt; (Retrieved on Apr 17, 2022): &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;For a complete and detailed list of differences and improvements, 
here’s the official &lt;a href=&quot;https://vimhelp.org/vi_diff.txt.html#vi-differences&quot;&gt;Differences between Vim and Vi&lt;/a&gt; document at the &lt;a href=&quot;https://vimhelp.org/&quot;&gt;Vim help files&lt;/a&gt; site (an HTML version of the Vim help pages).&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;converting-unicode-to-utf-8-when-you-know-unicode-code-point&quot;&gt;Converting Unicode to UTF-8 When You Know Unicode Code Point&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  Code point is also known as codepoint or code position.&lt;/p&gt;

&lt;h4 id=&quot;converting-with-od1&quot;&gt;Converting with od(1)&lt;/h4&gt;

&lt;p&gt;OS: FreeBSD 13.1 &lt;br /&gt;
Shell: csh&lt;/p&gt;

&lt;p&gt;For example, use the character U+02B7: MODIFIER LETTER SMALL W for testing: &lt;br /&gt;
&lt;a href=&quot;https://charbase.com/02b7-unicode-modifier-letter-small-w&quot;&gt;U+02B7: MODIFIER LETTER SMALL W&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://charbase.com/&quot;&gt;Charbase - A visual Unicode database&lt;/a&gt;
(Retrieved on Apr 17, 2022)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Charbase is a visual database of characters from the Unicode 6.1 
standard, made available without clutter.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;With &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uni.pl&lt;/code&gt; Perl script, obtained from Leah Neukirchen’s dotfiles and bin section:  &lt;br /&gt;
&lt;a href=&quot;https://leahneukirchen.org/dotfiles/bin/uni&quot;&gt;uni PATTERN - list unicode symbols matching PATTERN&lt;/a&gt;) (Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl ʷ
ʷ       02B7    MODIFIER LETTER SMALL W
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ʷ &amp;gt; chartest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat chartest
ʷ% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -ac chartest
0000000   ca  b7
           ʷ  **
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n ʷ &amp;gt; chartest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat chartest
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -ac chartest
0000000   ca  b7  nl
           ʷ  **  \n
0000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -N 1 -ac chartest
0000000   ca
         312
0000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a 2-byte character:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -N 2 -ac chartest
0000000   ca  b7
           ʷ  **
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In &lt;strong&gt;UTF-8&lt;/strong&gt;, this character is  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CA B7&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -N 2 -t x1 chartest
0000000    ca  b7
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -N 2 -c -t x1 chartest
0000000    ʷ  **
           ca  b7
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -N 2 -ab chartest
0000000   ca  b7
          312 267
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt;&lt;br /&gt;
For POSIX compliance, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;echo&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/65803/why-is-printf-better-than-echo&quot;&gt;Why is printf better than echo?&lt;/a&gt; (Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.in-ulm.de/%7Emascheck/various/echo+printf/&quot;&gt;echo(1) and printf(1)&lt;/a&gt; (Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.etalabs.net/sh_tricks.html&quot;&gt;Rich’s sh (POSIX shell) tricks&lt;/a&gt; (Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;p&gt;For POSIX compliance, for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt; you need &lt;strong&gt;octal&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Not going into details about different operating systems, 
different shells, different fonts, locales, etc.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\312\267&apos;
ʷ%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\312\267\n&apos;
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  On FreeBSD 13.1-RELEASE in csh:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v printf; type printf; whereis printf; which printf
printf
printf is a shell builtin
printf: /usr/bin/printf /usr/share/man/man1/printf.1.gz
/usr/bin/printf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% freebsd-version
13.1-RELEASE

% ps $$
  PID TT  STAT    TIME COMMAND
22492  9  Ss   0:00.17 -csh (csh)

% printf %s\\n &quot;$SHELL&quot;
/bin/csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt;  You can use the Posix-standard &lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/9699919799/utilities/command.html&quot;&gt;command&lt;/a&gt; command to avoid the use of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt; builtin: &lt;br /&gt;
  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;command printf&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;You can also do it directly by specifying the complete path to the 
non-builtin &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt;:  &lt;br /&gt;
  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/bin/printf&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Discussion about this (retrieved on Apr 17, 2022): &lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/27652458/whats-the-best-way-to-embed-a-unicode-character-in-a-posix-shell-script&quot;&gt;What’s the best way to embed a Unicode character in a POSIX shell script?&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Per this reference (retrieved on Apr 17, 2022):  &lt;br /&gt;
&lt;a href=&quot;https://askubuntu.com/questions/601137/how-to-print-an-octal-values-corresponding-utf-8-character-in-bash&quot;&gt;https://askubuntu.com/questions/601137/how-to-print-an-octal-values-corresponding-utf-8-character-in-bash&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%b\n&quot; &apos;\312\267&apos;
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% awk &apos;BEGIN {print &quot;\312\267&quot;}&apos;
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;converting-unicode-to-utf-8-when-you-dont-know-unicode-code-point&quot;&gt;Converting Unicode to UTF-8 When You Don’t Know Unicode Code Point&lt;/h3&gt;

&lt;p&gt;From 
&lt;a href=&quot;https://unix.stackexchange.com/questions/55770/does-hexdump-respect-the-endianness-of-its-system&quot;&gt;Does hexdump respect the endianness of its system?&lt;/a&gt; 
(Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The traditional BSD hexdump utility uses the platform’s endianness so 
the output you see means your machine is little-endian.&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hexdump -C&lt;/code&gt; (or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;od -t x1&lt;/code&gt;) to get &lt;strong&gt;consistent byte-by-byte output 
irrespective of the platform’s endianness&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Therefore:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ʷ | hexdump -C
00000000  ca b7                                             |..|
00000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ʷ | od -t x1
0000000    ca  b7
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From here, follow the instructions above for:  &lt;br /&gt;
&lt;a href=&quot;#converting-unicode-to-utf-8-when-you-know-unicode-code-point&quot;&gt;Converting Unicode to UTF-8 When You Know Unicode Code Point&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also, from the same question - different answer:  &lt;br /&gt;
&lt;a href=&quot;https://unix.stackexchange.com/questions/55770/does-hexdump-respect-the-endianness-of-its-system/55771#55771&quot;&gt;https://unix.stackexchange.com/questions/55770/does-hexdump-respect-the-endianness-of-its-system/55771#55771&lt;/a&gt;
(Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;p&gt;Your output is little-endian (least significant byte first), which is also the endianness of the x86 and x86_64 architectures, which you are probably using.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  If no format strings are specified, the default display 
in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hexdump(1)&lt;/code&gt; is equivalent to specifying the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt; option – From the 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hexdump(1)&lt;/code&gt; manpage:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-x      Two-byte hexadecimal display.  Display the input offset in hexa‐
        decimal, followed by eight, space separated, four column, zero-
        filled, two-byte quantities of input data, in hexadecimal, per
        line.

... 

If no format strings are specified, the default display is equivalent 
to specifying the -x option.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ʷ | hexdump
0000000 b7ca
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;troubleshooting-fonts&quot;&gt;Troubleshooting Fonts&lt;/h2&gt;

&lt;h3 id=&quot;try-a-different-application&quot;&gt;Try a Different Application&lt;/h3&gt;

&lt;p&gt;Even though you can list a font with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list(1)&lt;/code&gt; and then grep for it,
sometimes it will not be available in some applications, or if it’s
available it will not work.&lt;/p&gt;

&lt;p&gt;Possible fix: try a different app.
For example, I had a problem with a font in TEA &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;
and LibreOffice &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; – The fix was to use
AbiWord &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;, which worked fine with that font.&lt;/p&gt;

&lt;h3 id=&quot;useful-tools-commands-and-code-snippets-for-troubleshooting-fonts-in-x11&quot;&gt;Useful Tools, Commands and Code Snippets for Troubleshooting Fonts in X11&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Search for a font by its name:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list : fullname | grep -i FontNameHere&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Search for a font by its PostScript name:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list : postscriptname | grep -i FontNameHere&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Show the list of supported characters in a font:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list -v &apos;FontName: style=Regular&apos; charset&lt;/code&gt;   &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list -v &apos;FontName&apos; charset&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Query the font:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-query /usr/local/share/fonts/FontNameHere/FontFile.ttf&lt;/code&gt;
Number of elts (size) that pattern has, family, style (e.g. Regular),
fullname, slant, weight, width, foundry, is it outline, is it scalable,
charset, lang (supported languages), fontversion, postscriptname,
is it color.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Display the font (display all the characters) in an X core font:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd -fn FontName&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Display the font (display all the characters) in an Xft font:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd -fa FontName&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Check if the current terminal and font support a Unicode character
(with Perl) (e.g. “ʷ” U+02B7: Modifier Letter Small W):&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;perl -C -e &apos;print chr 0x02B7&apos;&lt;/code&gt;
    or
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;perl -C -e &apos;print pack(&quot;U&quot;,0x02b7).&quot;\n&quot;&apos;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Reference:  Create unicode character with pack &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;6&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;A simple Perl one-liner:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -e &apos;print chr(0x02b7); print &quot;\n&quot;&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Wide character in print at -e line 1.
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -e &apos;print &quot;\x{02b7}\n&quot;&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Wide character in print at -e line 1.
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  “Wide character in print at …”
Perl warns you if you print a string that has a character with an ordinal
value greater than 255 (hence it is a “wide” character that requires more
than one byte of storage).
Explicitly &lt;a href=&quot;https://en.wikibooks.org/wiki/Perl_Programming/Unicode_UTF-8#3._Encoding_and_output&quot;&gt;encode your output&lt;/a&gt; to avoid this warning:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -e &apos;binmode STDOUT, &quot;:encoding(utf8)&quot;; print &quot;\x{02b7}\n&quot;&apos;
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -e &apos;binmode STDOUT, &quot;:encoding(utf8)&quot;; print chr(0x02b7); print &quot;\n&quot;&apos;
ʷ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;From &lt;a href=&quot;https://stackoverflow.com/questions/31198425/perl-pack-a-utf-8-chinese-character-how-to-unpack-to-get-this-character&quot;&gt;perl pack a utf-8 Chinese Character how to unpack to get this Character?&lt;/a&gt; (Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat unpack.pl
#!/usr/local/bin/perl

use utf8;
binmode STDOUT,&quot;:utf8&quot;;

my $packed = pack(&quot;U*&quot;, 0x02b7);
print &quot;$packed\n&quot;;  # ʷ

my $unpacked = unpack(&quot;U*&quot;, &quot;ʷ&quot;);
printf &quot;0x%X\n&quot;, $unpacked;  # 0x02b7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% chmod 0744 unpack.pl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./unpack.pl
ʷ
0x2B7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another useful Perl Unicode code snippet:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -MDevel::Peek -e &apos;Dump(pack(&quot;U&quot;, 0x02b7));&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SV = PV(0x800e28060) at 0x800e5f7b0
  REFCNT = 1
  FLAGS = (PADTMP,POK,READONLY,PROTECT,pPOK,UTF8)
  PV = 0x800f16480 &quot;\312\267&quot;\0 [UTF8 &quot;\x{2b7}&quot;]
  CUR = 2
  LEN = 32
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Check if the current terminal and font support a Unicode character
(with Python):&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python; which python
python: Command not found.

% command -v python2; which python2
python2: Command not found.

% command -v python3; which python3
python3: Command not found.

% command -v python3.7; which python3.7
python3.7: Command not found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python3.8; which python3.8
/usr/local/bin/python3.8
/usr/local/bin/python3.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python3.8 -c &apos;print(u&quot;\u02B7&quot;)&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python3.8 -c &apos;print(u&quot;\u02B7\n&quot;)&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;From “Beyond Linux® From Scratch (System V Edition) - Version r11.1-906 - Chapter 24. Graphical Environments”, &lt;a href=&quot;https://www.linuxfromscratch.org/blfs/view/svn/x/tuning-fontconfig.html&quot;&gt;Tuning Fontconfig&lt;/a&gt;
(retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list | less&lt;/code&gt;: show a list of all available fonts (/path/to/filename:
Font Name:style).  If you installed a font more than 30 seconds ago but
it does not show, then it or one of its directories is not readable by
your user.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-match &apos;Font Name&apos;&lt;/code&gt;: will tell you which font will be used if the named
font is requested.  Typically you would use this to see what happens if a
font you have not installed is requested, but you can also use it if the
system is giving you a different font from what you expected (perhaps
because fontconfig does not agree that the font supports your language).&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-match -a &apos;Type&apos; | less&lt;/code&gt;: will provide a list of all fonts which can be
used for that type (Monospace, Sans, Serif).  Note that in-extremis
fontconfig will take a glyph from any available font, even if it is not of
the specified type, and unless it knows about the font’s type it will
assume it is Sans.&lt;/p&gt;

&lt;p&gt;If you wish to know which font will be used for a string of text (i.e. one
or more glyphs, preceded by a space), paste the following command and
replace the xyz by the text you care about:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FC_DEBUG=4 pango-view --font=monospace -t xyz | grep family&lt;/code&gt;: this requires
&lt;a href=&quot;https://www.linuxfromscratch.org/blfs/view/svn/x/pango.html&quot;&gt;Pango-1.50.8&lt;/a&gt;
and &lt;a href=&quot;https://www.linuxfromscratch.org/blfs/view/svn/general/imagemagick.html&quot;&gt;ImageMagick-7.1.0-25&lt;/a&gt; - it will invoke display to show the
text in a tiny window, and after closing that the last line of the output
will show which font was chosen.  This is particularly useful for CJK
languages, and you can also pass a language,
e.g. PANGO_LANGUAGE=en;ja (English, then assume Japanese) or
just zh-cn (or other variants - ‘zh’ on its own is not valid). – My Note:
This works in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bash&lt;/code&gt; and compatible shells.
For &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csh/tcsh&lt;/code&gt;, use:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env DISPLAY=:0 FC_DEBUG=4 pango-view --font=monospace -t xyz | grep family&lt;/code&gt;
    or
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env FC_DEBUG=4 pango-view --font=monospace -t xyz | grep family&lt;/code&gt;
    or (for no output, reduce debugging level to zero):
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env FC_DEBUG=0 pango-view --font=monospace -t xyz | grep family&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;tools-and-test-pages-available-online-unicode-utf-8-encodings&quot;&gt;Tools and Test Pages Available Online: Unicode, UTF-8, Encodings&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jkorpela.fi/chars/test8.htm&quot;&gt;Test page for 8-bit encodings&lt;/a&gt; &lt;br /&gt;
(Created on May 11, 2005 - Retrieved on Apr 17, 2022)
    &lt;blockquote&gt;
      &lt;p&gt;The table contains alternating rows with octets in the range 
128–255 (decimal) and ISO 8859-1 characters with the same code numbers. 
The first two rows for ISO 8859-1 have been greyed out, since those 
code positions do not contain printable characters but are reserved 
for control character purposes.&lt;/p&gt;

      &lt;p&gt;This document has no character encoding information.  This allows you 
to view it using various 8-bit encodings.  On Internet Explorer, 
&amp;lt; for example, select View, then Encoding, and then for example 
Baltic (Windows) in order to compare Windows Baltic with ISO 8859-1.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jkorpela.fi/fui.html8&quot;&gt;Full Unicode Input utility (for Unicode version 14)&lt;/a&gt; &lt;br /&gt;
(Created on Oct 2, 2012 - Retrieved on Apr 17, 2022)
    &lt;blockquote&gt;
      &lt;p&gt;This utility can be characterized as an online extended character map 
oriented towards writing characters.  It displays a table that looks 
like a set of keyboard buttons, and clicking on a button you enter the 
character in question.  The characters will be appended to the text 
input area on the right.&lt;/p&gt;

      &lt;p&gt;You can also type the Unicode number of a character in the box prefixed 
by “U+” and press Enter or click on the Add button.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;And, of course, have in mind:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://eev.ee/blog/2015/05/20/i-stared-into-the-fontconfig-and-the-fontconfig-stared-back-at-me/&quot;&gt;I stared into the fontconfig, and the fontconfig stared back at me&lt;/a&gt; - Posted: May 20, 2015 – Retrieved: Apr 17, 2022&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.reddit.com/r/linux/comments/97z73q/i_stared_into_the_fontconfig_and_the_fontconfig/&quot;&gt;I stared into the fontconfig, and the fontconfig stared back at me / fuzzy notepad - r/linux&lt;/a&gt; – Retrieved: Apr 17, 2022&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.reddit.com/r/programming/comments/36wcu7/i_stared_into_the_fontconfig_and_the_fontconfig/&quot;&gt;I stared into the fontconfig, and the fontconfig stared back at me - r/programming&lt;/a&gt; – Retrieved: Apr 17, 2022&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;From blog post:
&lt;a href=&quot;https://eev.ee/blog/2015/05/20/i-stared-into-the-fontconfig-and-the-fontconfig-stared-back-at-me/&quot;&gt;I stared into the fontconfig, and the fontconfig stared back at me&lt;/a&gt; - Posted: May 20, 2015 – Retrieved: Apr 17, 2022:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Some hot parting tips&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-cache&lt;/code&gt; will force fontconfig to pick up any changes.  There’s a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-f&lt;/code&gt;,
but in all my fighting with fontconfig it never once made a difference.&lt;/p&gt;

&lt;p&gt;As far as I can tell, there is no reason to ever run sudo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-cache -vf&lt;/code&gt;.
This has been floating around the Internet for years, but it seems to be
apocryphal copy/paste.  You don’t need to flush root’s fontconfig cache
unless you’re running GUI stuff as root.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-match &amp;lt;font&amp;gt;&lt;/code&gt; will tell you what font will be used in practice.
You might think that’s what &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-query&lt;/code&gt; does, and you’d be wrong.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-query&lt;/code&gt;’s primary use is to produce bizarre error messages when you
accidentally use it instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-match&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It is really fxxxing difficult to figure out what font will be used for
a specific glyph.  There are two approaches:&lt;/p&gt;

&lt;p&gt;1. Do it in a [web] browser.  Make a URL like this (that is, enter it in the
browser’s address bar):
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data:text/html,&amp;lt;meta charset=&quot;utf8&quot;&amp;gt;&amp;lt;p style=&quot;font-family: monospace;&quot;&amp;gt;☺&amp;lt;/p&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Then pop open your dev tools, and look for where it tells you the fonts
that are actually being used.  Firefox’s Inspector has a dedicated “fonts”
tab in the panel on the right; Chromium’s Elements lists fonts at the
bottom of the “computed” tab.&lt;/p&gt;

&lt;p&gt;Fair warning: this is one level removed from fontconfig, because CSS font
rules may interfere.  This bit me above when I tried to confirm my new
cursive font in Firefox!&lt;/p&gt;

&lt;p&gt;Another warning: while Firefox picks up fontconfig changes more or less
instantly (after an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-cache&lt;/code&gt;), Chromium does not.  Worse, Chromium seems
to outright ignore fontconfig when it feels like it, such as when it used
a sans serif Japanese font for text styled as serif.&lt;/p&gt;

&lt;p&gt;2. You can also do this nonsense in a terminal:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISPLAY=:0 FC_DEBUG=4 pango-view --font=monospace -t ☺ | grep family:&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;My note:&lt;/strong&gt; -&amp;gt; for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csh/tcsh&lt;/code&gt;:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env DISPLAY=:0 FC_DEBUG=4 pango-view --font=monospace -t ☺ | grep family:&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pango-view&lt;/code&gt; is a tiny program that just pops open a window containing
some text in a particular font.  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FC_DEBUG&lt;/code&gt; is an environment variable to
make fontconfig spit out mountains of fxxxing text on stdout.  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt;
cuts it down to something a little more manageable.  Most likely the last
family you see listed is the font actually being used to render your
favourite glyph.&lt;/p&gt;

&lt;p&gt;If you’re really curious how the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;match&amp;gt;&lt;/code&gt; blocks work, good news:
they are the one thing the &lt;a href=&quot;http://www.freedesktop.org/software/fontconfig/fontconfig-user.html&quot;&gt;fontconfig docs&lt;/a&gt; actually kind of explain.
And of course your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/fonts/conf.d&lt;/code&gt;
(&lt;strong&gt;my note:&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/fonts/conf.d&lt;/code&gt; on FreeBSD) is probably full
of real-world practical examples.&lt;/p&gt;

&lt;p&gt;…&lt;/p&gt;

&lt;p&gt;From the same blog:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;I haven’t put my fontconfig font config (…) in my
&lt;a href=&quot;https://github.com/eevee/rc/&quot;&gt;rc.git&lt;/a&gt;; it seems pretty specific to my
desktop’s particular setup.
But here’s &lt;a href=&quot;https://gist.github.com/eevee/ba231c1b9b64e6ced70d&quot;&gt;the whole thing in a gist&lt;/a&gt;, if you’re interested.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h2&gt;

&lt;p&gt;[1] A nice overview and discussion about UTF-8, UTF-16 and UTF-32 on StackOverflow:  &lt;a href=&quot;https://stackoverflow.com/questions/496321/utf-8-utf-16-and-utf-32&quot;&gt;UTF-8, UTF-16, and UTF-32&lt;/a&gt; (Posted on Jan 30, 2009; Retrieved on Apr 17, 2022)&lt;/p&gt;

&lt;p&gt;[2] From a FreeBSD Forum post started on Dec 24, 2014 &lt;a href=&quot;https://forums.freebsd.org/threads/how-do-i-type-in-special-characters-such-as-in-the-terminal-in-vi.49659/&quot;&gt;How do I type in special characters, such as ∞ in the terminal in vi?&lt;/a&gt;, 
post #3 &lt;a href=&quot;https://forums.FreeBSD.org/threads/how-do-i-type-in-special-characters-such-as-in-the-terminal-in-vi.49659/post-277491&quot;&gt;https://forums.FreeBSD.org/threads/how-do-i-type-in-special-characters-such-as-in-the-terminal-in-vi.49659/post-277491&lt;/a&gt; (Retrieved on Apr 17, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Which vi?  vi on Linux is just a soft link to Vim.  On BSDs vi is 
symbolic link to nvi (new vi) which is a re-implementation of the 
“classic Berkeley vi”.  “Classical Berkeley vi” has multiple versions 
IIRC one of which is personal copy of Bill Joy.  Solaris’ version of vi 
could also be considered classical as well as traditional vi 
&lt;a href=&quot;http://ex-vi.sourceforge.net/&quot;&gt;http://ex-vi.sourceforge.net/&lt;/a&gt;. 
Reading documentation of traditional vi project is a good start.&lt;/p&gt;

  &lt;p&gt;To make matters more confusing BSD projects continue to use nvi 
version 1.79 due to licensing issues between Berkeley Database 1.85 and 
the later versions by Sleepycat Software.  nvi has a support for Unicode 
but I am not sure if the version 1.79 includes or not as I have never 
used Unicode with nvi.
Now &lt;a href=&quot;https://forums.freebsd.org/members/scottro.1587/&quot;&gt;scottro&lt;/a&gt; made 
a major mistake mentioning Unicode as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$\infty$&lt;/code&gt; as written in TeX is 
extended ASCII character and one doesn’t need Unicode to type it. 
I do not know how would you type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$\infty$&lt;/code&gt; in nvi as a professional 
mathematician I have never seen any mathematical symbols or mathematical 
text typing without serious text typing system such as TeX or Troff. 
TeX is de-facto standard for typing mathematics adopted since 
1979 by AMS.  Troff uses mathematical pre-processor and is definitely 
able to produce all special mathematical characters.  On the web we use 
MathJax, a cross-browser JavaScript library that displays in web, 
using MathML, LaTeX and ASCIIMathML markup to write mathematics.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[3] Retrieved on Apr 17, 2022: &lt;br /&gt;
    &lt;a href=&quot;https://tea.ourproject.org/&quot;&gt;TEA - text editor&lt;/a&gt;    &lt;br /&gt;
    &lt;a href=&quot;https://en.wikipedia.org/wiki/TEA_%28text_editor%29&quot;&gt;TEA (text editor) - Wikipedia&lt;/a&gt;   &lt;br /&gt;
    &lt;a href=&quot;https://www.linuxinsider.com/story/tea-a-smooth-text-editor-that-hits-the-sweet-spot-74677.html&quot;&gt;TEA: A Smooth Text Editor That Hits the Sweet Spot&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[4] Retrieved on Apr 17, 2022:  &lt;br /&gt;
    &lt;a href=&quot;https://www.libreoffice.org/&quot;&gt;LibreOffice&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[5] Retrieved on Apr 17, 2022:  &lt;br /&gt;
    &lt;a href=&quot;http://www.abisource.com/&quot;&gt;AbiWord&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;[6] Retrieved on Apr 17, 2022:  &lt;br /&gt;
    &lt;a href=&quot;https://stackoverflow.com/questions/30851728/create-unicode-character-with-pack&quot;&gt;Create unicode character with pack&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sun, 17 Apr 2022 09:14:33 -0700</pubDate>
        <link>http://localhost:4000/font/freebsd/unix/x11/xorg/dotfiles/2022/04/17/x-fonts.html</link>
        <guid isPermaLink="true">http://localhost:4000/font/freebsd/unix/x11/xorg/dotfiles/2022/04/17/x-fonts.html</guid>
        
        
        <category>font</category>
        
        <category>freebsd</category>
        
        <category>unix</category>
        
        <category>x11</category>
        
        <category>xorg</category>
        
        <category>dotfiles</category>
        
      </item>
    
      <item>
        <title>FVWM - F Virtual Window Manager</title>
        <description>&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install fvwm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;About FVWM - from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pkg info --regex --full fvwm&lt;/code&gt; 3 &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;/&lt;sub&gt;4&lt;/sub&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt; &lt;br /&gt;
Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mydotfiles...&lt;/code&gt; with
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fetch https://zensites.net/fvwm/guide/fvwm-guide-icons.tar.bz2&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cp -rf \
 /mnt/usbflashdrive/mydotfiles/FVWM.freebsd.lenovo.x280.2022_07_10_2200/THEME-2-ARCTIC/.fvwm/* \
 ~/.fvwm/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -n icons ~/.fvwm/config
36:#   2. Place all icons in this directory:
37:#        /usr/local/share/icons/gnant
38:#   3. It might take a couple of minutes for some icons in the dock
40:#      clock icons.
49:SetEnv  fvwm_icon               /usr/local/share/icons/$[fvm_gnome_icon_theme]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -n fvm_gnome_icon_theme ~/.fvwm/config
48:SetEnv  fvm_gnome_icon_theme    gnant
49:SetEnv  fvwm_icon               /usr/local/share/icons/$[fvm_gnome_icon_theme]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fetch https://strog.org/files/gnant-0.2.tar.bz2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ tar xf gnant-0.2.tar.bz2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mv gnant /usr/local/share/icons/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rm -i gnant-0.2.tar.bz2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fetch https://zensites.net/fvwm/guide/fvwm-guide-icons.tar.bz2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ tar xf fvwm-guide-icons.tar.bz2 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh
total 198
drwxr-xr-x   3 dusko  wheel     4B Apr 16 08:25 .
drwxrwxrwt  37 root   wheel   570B Apr 16 08:23 ..
drwxr-xr-x   7 dusko  wheel     8B Aug  5  2004 .fvwm
-rw-r--r--   1 dusko  wheel    73K Jan 14  2008 fvwm-guide-icons.tar.bz2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh .fvwm/
total 20
drwxr-xr-x  7 dusko  wheel     8B Aug  5  2004 .
drwxr-xr-x  3 dusko  wheel     4B Jul 11 19:25 ..
-rw-r--r--  1 dusko  wheel    17K Aug  5  2004 fvwm2rc-guide
drwxr-xr-x  5 dusko  wheel     5B Aug  5  2004 icons
drwxr-xr-x  5 dusko  wheel     5B Aug  5  2004 images
drwxr-xr-x  2 dusko  wheel     2B Aug  4  2004 screenshot
drwxr-xr-x  2 dusko  wheel     2B Aug  4  2004 scripts
drwxr-xr-x  2 dusko  wheel     2B Aug  4  2004 tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh .fvwm/icons/
total 35
drwxr-xr-x  5 dusko  wheel     5B Aug  5  2004 .
drwxr-xr-x  7 dusko  wheel     8B Aug  5  2004 ..
drwxr-xr-x  2 dusko  wheel    10B Aug  5  2004 48x48
drwxr-xr-x  2 dusko  wheel    28B Aug  5  2004 menu
drwxr-xr-x  2 dusko  wheel     7B Aug  5  2004 mini
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo cp -rf .fvwm/icons/menu /usr/local/share/icons/gnant/
$ sudo cp -rf .fvwm/icons/mini /usr/local/share/icons/gnant/
$ sudo cp -rf .fvwm/icons/48x48/* /usr/local/share/icons/gnant/48x48/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rm -rf .fvwm/
$ rm -i fvwm-guide-icons.tar.bz2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install rox-filer
% sudo pkg install 3ddesktop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;pre&gt;&lt;code class=&quot;language-`&quot;&gt;% pkill Xorg
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Start X:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exec xinit 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exec startx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h2&gt;

&lt;p&gt;[1] From &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pkg info --regex --full fvwm&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;WWW            : http://www.fvwm.org/
Comment        : Popular virtual window manager for X

Description    :
Fvwm is a very famous window manager for X, which provides a
virtual/multiple disjoint desktop, a 3-D look for windows decorations,
shaped/color icons. It gives a very good emulation of mwm. A nice
button-bar can be used to provide convenient access to frequently used
functions or programs.

WWW: http://www.fvwm.org/

Jason C. Wells
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From &lt;a href=&quot;https://www.fvwm.org/&quot;&gt;https://www.fvwm.org/&lt;/a&gt; (Retrieved on Apr 16, 2022):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Fvwm is a virtual window manager for the X windows system. It was 
originally a feeble fork of TWM by Robert Nation in 1993 (fvwm history), 
and has evolved into the fantastic, fabulous, famous, flexible, and so on, 
window manager we have today.

Fvwm is ICCCM-compliant and highly configurable. Starting from a minimal 
configuration, Fvwm can be configured with both internal tools and third 
party software to customize most aspects of a desktop.

This site is an archive of documentation for Fvwm version 2.6.x, which is 
the current frozen release. For information about the development of Fvwm 
version 3, check out fvwmorg/fvwm3 on GitHub.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sat, 16 Apr 2022 08:12:34 -0700</pubDate>
        <link>http://localhost:4000/2022/04/16/fvwm.html</link>
        <guid isPermaLink="true">http://localhost:4000/2022/04/16/fvwm.html</guid>
        
        
      </item>
    
      <item>
        <title>Converting Traditional sysV Init Scripts to systemd Unit Files</title>
        <description>&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;(All references retrieved on Apr 9, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://0pointer.de/blog/projects/systemd-for-admins-3.html&quot;&gt;How Do I Convert A SysV Init Script Into A systemd Service File? (systemd for Administrators, Part III)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.redhat.com/en/blog/converting-traditional-sysv-init-scripts-red-hat-enterprise-linux-7-systemd-unit-files&quot;&gt;Converting traditional sysV init scripts to Red Hat Enterprise Linux 7 systemd unit files&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.golinuxcloud.com/create-systemd-service-example/&quot;&gt;Create systemd service in Linux [Explained with Example]&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sat, 09 Apr 2022 09:03:31 -0700</pubDate>
        <link>http://localhost:4000/systemd/linux/howto/cli/terminal/shell/rhel/centos/sysadmin/2022/04/09/convert-sysvinit-to-systemd-service.html</link>
        <guid isPermaLink="true">http://localhost:4000/systemd/linux/howto/cli/terminal/shell/rhel/centos/sysadmin/2022/04/09/convert-sysvinit-to-systemd-service.html</guid>
        
        
        <category>systemd</category>
        
        <category>linux</category>
        
        <category>howto</category>
        
        <category>cli</category>
        
        <category>terminal</category>
        
        <category>shell</category>
        
        <category>rhel</category>
        
        <category>centos</category>
        
        <category>sysadmin</category>
        
      </item>
    
      <item>
        <title>TWM - Tab Window Manager for the X Window System</title>
        <description>&lt;p&gt;OS: FreeBSD 13.0  &lt;br /&gt;
Shell: csh/tcsh&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat ~/.twmrc
RestartPreviousState      # Reiconify iconified windows on startup
UsePPosition        &quot;on&quot;  # Use program-specified size hints accepted
NoTitle                   # No titlebars
BorderWidth         1     # Number of pixels for border around entire window
DontMoveOff               # Disallow moving windows off the visible screen
IconifyByUnmapping        # Iconifying a window sends it to the Icon Manager
AutoRelativeResize        # Don&apos;t wait until the window edge is crossed
NoGrabServer
RandomPlacement

IconManagerFont           &quot;a14&quot;
IconRegion                &quot;90x44-0+0&quot; North East 40 30 
IconManagerGeometry       &quot;90x44-0+0&quot; 1

IconManagerDontShow
{
  &quot;xclock&quot; &quot;xload&quot;
}

Color
{
    BorderColor &quot;red&quot;
    {
      &quot;XTerm&quot; &quot;red&quot;       # Active xterm window border: red
    }

    BorderColor           &quot;yellow&quot;
    BorderTileBackground  &quot;yellow&quot;
    BorderTileForeground  &quot;yellow&quot;

    DefaultBackground     &quot;rgb:2/a/9&quot;
    DefaultForeground     &quot;gray85&quot;
    TitleBackground       &quot;rgb:2/a/9&quot;
    TitleForeground       &quot;gray85&quot;
    MenuBackground        &quot;rgb:2/a/9&quot;
    MenuForeground        &quot;gray85&quot;
    MenuBorderColor       &quot;slategrey&quot;
    MenuTitleBackground   &quot;gray70&quot;
    MenuTitleForeground   &quot;rgb:2/a/9&quot;
    IconBackground        &quot;rgb:2/a/9&quot;
    IconForeground        &quot;gray85&quot;
    IconBorderColor       &quot;gray85&quot;

    IconManagerHighlight  &quot;white&quot;

    IconManagerBackground &quot;rgb:2/a/9&quot;
    {
      &quot;XTerm&quot;             &quot;#ff595e&quot;
      &quot;tea&quot;               &quot;#1982c4&quot;
      &quot;KeePassXC&quot;         &quot;#ffca3a&quot;
      &quot;Thunderbird&quot;       &quot;#6a4c93&quot;
      &quot;Firefox&quot;           &quot;#8ac926&quot; 
      &quot;LibreOffice&quot;       &quot;#deff0a&quot;
      &quot;soffice.bin&quot;       &quot;#deff0a&quot;
      &quot;Zathura&quot;           &quot;#be0aff&quot;
    }

    IconManagerForeground &quot;gray85&quot;
    {
      &quot;XTerm&quot;             &quot;#fae0e4&quot;
      &quot;tea&quot;               &quot;#84DE02&quot;
      &quot;KeePassXC&quot;         &quot;#219ebc&quot; 
      &quot;Thunderbird&quot;       &quot;#ff595e&quot;
      &quot;Firefox&quot;           &quot;#ffff3f&quot;
      &quot;LibreOffice&quot;       &quot;#ff595e&quot;
      &quot;soffice.bin&quot;       &quot;#ff595e&quot;
      &quot;Zathura&quot;           &quot;#0aff99&quot;
    }
}

Cursors
{
  Frame     &quot;left_ptr&quot;
  Title     &quot;left_ptr&quot;
  Icon      &quot;left_ptr&quot;
  IconMgr   &quot;left_ptr&quot;
  Move      &quot;fleur&quot;
  Resize    &quot;fleur&quot;
  Menu      &quot;hand1&quot;
  Button    &quot;hand2&quot;
  Wait      &quot;clock&quot;
  Select    &quot;dot&quot;
  Destroy   &quot;pirate&quot;
}

# ----  Mouse and keyboard bindings  ----
# Mouse:     Button1=left, Button2=middle, Button3=right
# Keyboard:  m=meta (alt), c=ctrl, s=shift, m4=mod4 (Win)

Button1 =   : root    : f.menu &quot;defops&quot;
Button1 =   : iconmgr : f.iconify
Button1 = m : window  : f.move      # Alt + left mouse button
Button3 = m : window  : f.resize    # Alt + right mouse button

&quot;s&quot; =     m : all : f.showiconmgr   # Show the Icon Manager  (Alt + s)
&quot;s&quot; = s | m : all : f.hideiconmgr   # Hide the Icon Manager  (Alt + Shift + s)
&quot;r&quot; =     m : all : f.raiselower    # Raise window if behind (Alt + r)
&quot;v&quot; =     m : all : f.iconify       # &quot;Minimize&quot; window      (Alt + v)

# Cycle through windows with vi(1)-style key bindings 
# NOTE: For best results, make sure that the Icon Manager is *not* hidden
#       when the Icon Manager is hidden, only &quot;l&quot; and &quot;j&quot; work 
&quot;h&quot; =     m : all : f.backiconmgr  # previous column
&quot;l&quot; =     m : all : f.forwiconmgr  # next column
&quot;k&quot; =     m : all : f.upiconmgr    # previous row
&quot;j&quot; =     m : all : f.downiconmgr  # next row

# Use keyboard arrow keys to change the input focus between windows
# NOTE: For best results, make sure that the Icon Manager is *not* hidden
&quot;Left&quot;  = m : all : f.backiconmgr  # previous column
&quot;Right&quot; = m : all : f.forwiconmgr  # next column
&quot;Up&quot;    = m : all : f.upiconmgr    # previous row
&quot;Down&quot;  = m : all : f.downiconmgr  # next row

# Show time and date (local and UTC):  Press Ctrl + Alt + t
&quot;t&quot; =  m | c: all : f.exec &quot;(date; echo &apos;&apos;; date -u) | \
/usr/local/bin/xmessage -bg \&quot;#DE3163\&quot; -fg \&quot;#F6EABE\&quot; -rv -fn \
\&quot;-b&amp;amp;h-lucidatypewriter-bold-r-normal-sans-26-190-100-100-m-159-iso10646-1\&quot; \
-geometry -0+0 -buttons OK:1 -default OK -file - &amp;amp;&quot;

# Display virtual desktop number:      Press Ctrl + Alt + d
&quot;d&quot; =  m | c: all : f.exec &quot;(vdesk) | \
/usr/local/bin/xmessage -bg \&quot;#DE3163\&quot; -fg \&quot;#F6EABE\&quot; -rv -fn \
\&quot;-b&amp;amp;h-lucidatypewriter-bold-r-normal-sans-26-190-100-100-m-159-iso10646-1\&quot; \
-geometry -0+0 -buttons &apos; &apos; -default OK -file - &amp;amp;&quot;

# Launch dmenu with Alt + p
&quot;p&quot; = m      : all : f.exec &quot;/usr/local/bin/dmenu_run&quot;

&quot;i&quot; = m      : all : f.identify   # Alt + i
&quot;d&quot; = m      : all : f.delete     # For closing e.g. &quot;About&quot; windows
&quot;h&quot; = s | m4 : all : f.leftzoom   # [Shift + mod4 (Win)] + h
&quot;l&quot; = s | m4 : all : f.rightzoom  # [Shift + mod4 (Win)] + l
&quot;k&quot; = s | m4 : all : f.topzoom    # [Shift + mod4 (Win)] + k
&quot;j&quot; = s | m4 : all : f.bottomzoom # [Shift + mod4 (Win)] + j
&quot;f&quot; = s | m4 : all : f.fullzoom   # [Shift + mod4 (Win)] + o
&quot;m&quot; = s | m4 : all : f.zoom       # [Shift + mod4 (Win)] + m &amp;lt;- Zoom vertically
&quot;c&quot; = s | m4 : all : f.circledown # [Shift + mod4 (Win)] + c
&quot;u&quot; = s | m4 : all : f.circleup   # [Shift + mod4 (Win)] + u

# QUIT menu
# Defined here, used in the &quot;Main Menu&quot; (below),
#      i.e.  it&apos;s a sub-menu of the Main Menu
menu &quot;quitmenu&quot;
{
 &quot;Really Quit?&quot;   f.title
 &quot;No&quot;             f.nop
 &quot;Yes&quot;            f.quit
}

# Add a menu with the usual things
menu &quot;defops&quot;
{
  &quot;Twm&quot;           f.title
  &quot;Iconify&quot;       f.iconify
  &quot;Resize&quot;        f.resize
  &quot;Move&quot;          f.move
  &quot;Raise&quot;         f.raise
  &quot;Lower&quot;         f.lower
  &quot;&quot;              f.nop
  &quot;Focus&quot;         f.focus
  &quot;Unfocus&quot;       f.unfocus
  &quot;Show Iconmgr&quot;  f.showiconmgr
  &quot;Hide Iconmgr&quot;  f.hideiconmgr
  &quot;&quot;              f.nop
  &quot;Xterm&quot;         f.exec &quot;exec xterm &amp;amp;&quot;
  &quot;&quot;              f.nop
  &quot;Kill&quot;          f.destroy
  &quot;Delete&quot;        f.delete
  &quot;&quot;              f.nop
  &quot;Restart&quot;       f.restart
  &quot;Exit&quot;          f.menu &quot;quitmenu&quot;
}

# Virtual desktops with vdesk  ---- http://offog.org/code/vdesk.html -----

function &quot;set-desktop-1&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 1&quot;
}
    
function &quot;set-desktop-2&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 2&quot;
}
  
function &quot;set-desktop-3&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 3&quot;
}

function &quot;set-desktop-4&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 4&quot;
}

function &quot;set-desktop-5&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 5&quot;
}

function &quot;set-desktop-6&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 6&quot;
}

function &quot;set-desktop-7&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 7&quot;
}

function &quot;set-desktop-8&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 8&quot;
}

function &quot;set-desktop-9&quot;
{
   f.exec &quot;/usr/local/bin/vdesk 0 `xwininfo -tree -root | grep xclock | awk &apos;{print $1}&apos;`&quot;
   f.exec &quot;vdesk 9&quot;
}

function &quot;desktop-back&quot;
{
   f.exec &quot;A=$((`vdesk`-1)); if [ $A = 0 ] ; then A=9 ; fi ; vdesk $A&quot;
}

# To switch to one of nine virtual desktop: Alt + [1-9]:
&quot;1&quot;     =     m : all : f.function &quot;set-desktop-1&quot;
&quot;2&quot;     =     m : all : f.function &quot;set-desktop-2&quot;
&quot;3&quot;     =     m : all : f.function &quot;set-desktop-3&quot;
&quot;4&quot;     =     m : all : f.function &quot;set-desktop-4&quot;
&quot;5&quot;     =     m : all : f.function &quot;set-desktop-5&quot;
&quot;6&quot;     =     m : all : f.function &quot;set-desktop-6&quot;
&quot;7&quot;     =     m : all : f.function &quot;set-desktop-7&quot;
&quot;8&quot;     =     m : all : f.function &quot;set-desktop-8&quot;
&quot;9&quot;     =     m : all : f.function &quot;set-desktop-9&quot;

# To cycle forward through virtual desktops:
#     Ctrl + Meta (Win key) + right arrow key
&quot;Right&quot; = c | m : all : f.function &quot;desktop-forward&quot;
# To cycle backwards through virtual desktops:
#     Ctrl + Meta (Win key) + left arrow key
&quot;Left&quot;  = c | m : all : f.function &quot;desktop-back&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat ~/.xinitrc
xrdb -load $HOME/.Xresources 

xsetroot -solid slategrey
xset b off

# Add fonts
for m in `ls /usr/local/share/fonts/`; do
    if [ -d &quot;/usr/local/share/fonts/$m&quot; ]; then
        xset fp+ &quot;/usr/local/share/fonts/$m&quot;
    fi
done

exec twm &amp;gt; /tmp/twmrclog 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to have a clock or clocks, add one or more of the following
four lines to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.xinitrc&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;exec /usr/local/bin/xclock -digital -strftime &quot;Vancouver: %a %d %b %H:%M:%S&quot; \
  -update 1 -face mono:size=10 -bg &quot;#002020&quot; -fg &quot;red&quot; -geometry -0-2 &amp;amp;
exec env TZ=Europe/Belgrade xclock -digital -strftime \
  &quot;Belgrade: %a %d %b %H:%M&quot; -face mono:size=10 -bg &quot;#002020&quot; -fg &quot;gold&quot; \
  -geometry -256-2 &amp;amp;
exec env TZ=UTC /usr/local/bin/xclock -digital -strftime \
  &apos;UTC: %a %d %b %H:%M&apos; -face mono:size=10 -bg &apos;#002020&apos; -fg &apos;#f6eabe&apos; \
  -geometry -480-2 &amp;amp; 
exec env TZ=GMT /usr/local/bin/xclock -digital -strftime \
  &apos;GMT: %a %d %b %H:%M&apos; -face mono:size=10 -bg &apos;#002020&apos; -fg &apos;#aaaaaa&apos; \
  -geometry -664-2 &amp;amp; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to have xload, you first need to install it (with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo pkg install xload&lt;/code&gt;), and after that add this line to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.xinitrc&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;exec xload -bg steelblue -fg &apos;#001013&apos; -nolabel -geometry 224x33-840-2 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X&lt;/code&gt; with:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exec startx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exec xinit 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Man pages:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;twm(1) - Tab Window Manager for the X Window System&lt;/li&gt;
  &lt;li&gt;xterm(1) - terminal emulator for X&lt;/li&gt;
  &lt;li&gt;xwininfo(1) - window information utility for X&lt;/li&gt;
  &lt;li&gt;Xsecurity(7) - X display access control, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.Xauthority&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Xserver(1) - X Window System display server&lt;/li&gt;
  &lt;li&gt;X(7) - Keyboards, modifiers and keysym - section KEYBOARDS&lt;/li&gt;
  &lt;li&gt;Xorg(1) - X11R7 X server&lt;/li&gt;
  &lt;li&gt;XOrgFoundation(7) -  X.Org Foundation information&lt;/li&gt;
  &lt;li&gt;xinit(1) - X Window System initializer&lt;/li&gt;
  &lt;li&gt;x11perf(1) - X11 server performance test program&lt;/li&gt;
  &lt;li&gt;xauth(1) - X authority file utility&lt;/li&gt;
  &lt;li&gt;showrgb(1) - display an rgb color-name database&lt;/li&gt;
  &lt;li&gt;xkbwatch(1) - XKB extension user utility&lt;/li&gt;
  &lt;li&gt;xkbevd(1) - XKB event daemon&lt;/li&gt;
  &lt;li&gt;xkbvleds(1) - display the state of LEDs on an XKB keyboard&lt;/li&gt;
  &lt;li&gt;xkill(1) - kill a client by its X resource&lt;/li&gt;
  &lt;li&gt;xlsatoms(1) - list interned atoms defined on server&lt;/li&gt;
  &lt;li&gt;xprop(1) - property displayer for X&lt;/li&gt;
  &lt;li&gt;xmodmap(1) - utility for modifying keymaps and pointer button mappings in X&lt;/li&gt;
  &lt;li&gt;xrdb(1) - X server resource database utility&lt;/li&gt;
  &lt;li&gt;xset(1) - user preference utility for X&lt;/li&gt;
  &lt;li&gt;xrefresh(1) - refresh all or part of an X screen&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Retrieved on Apr 3, 2022:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.custompc.plus.com/twm/twmrc.htm&quot;&gt;Graham’s TWM Page!&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.custompc.plus.com/twm2/Grahams_TWM_page2.html&quot;&gt;Graham’s TWM Page! - Updated for 2021&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://offog.org/code/vdesk/&quot;&gt;vdesk -  a virtual desktop manager&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;word-cloud&quot;&gt;Word Cloud&lt;/h3&gt;

&lt;p&gt;X(7), libX11, modifier, keysum, the vmodmap array, locale, 
XkbLatchModifiers(3)&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sun, 03 Apr 2022 09:27:31 -0700</pubDate>
        <link>http://localhost:4000/wm/x11/xorg/freebsd/unix/dotfiles/2022/04/03/twm.html</link>
        <guid isPermaLink="true">http://localhost:4000/wm/x11/xorg/freebsd/unix/dotfiles/2022/04/03/twm.html</guid>
        
        
        <category>wm</category>
        
        <category>x11</category>
        
        <category>xorg</category>
        
        <category>freebsd</category>
        
        <category>unix</category>
        
        <category>dotfiles</category>
        
      </item>
    
      <item>
        <title>How To Setup Two Separate Bridges for a QEMU Guest with Two NICs Connected to Two Different Networks</title>
        <description>&lt;hr /&gt;
&lt;p&gt;Host OS: RHEL 8.5 - Shell: csh  &lt;br /&gt;
Guest OS: CentOS Linux 7.9 - Shell: bash&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Assumptions:&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The host server was already configured for virtualization.  It had the 
following packages installed on it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ipxe-roms-qemu, libvirt-daemon-driver-qemu, qemu-guest-agent, qemu-img, 
qemu-kvm, qemu-kvm-block-curl, qemu-kvm-block-gluster, qemu-kvm-block-iscsi, 
qemu-kvm-block-rbd, qemu-kvm-block-ssh, qemu-kvm-common, qemu-kvm-core,
libvirt, virt-install, virt-manager, libguestfs-tools, libguestfs-gfs2, 
libguestfs-rescue, ibguestfs-rsync libguestfs-xfs,
virt-dib, virt-v2v, virt-p2v-maker, virt-viewer, virt-who, virt-top, virtio-win

minicom 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;about-bridge-switch-bridge-mode-of-qemu-bridged-networking-tun-connection-tap-mode-tap-device-nat-mode&quot;&gt;About Bridge Switch, Bridge Mode of QEMU, Bridged Networking, TUN Connection, TAP Mode (TAP Device), NAT Mode&lt;/h3&gt;

&lt;p&gt;A &lt;strong&gt;bridge&lt;/strong&gt; is a &lt;strong&gt;network switch&lt;/strong&gt; but implemented in software.&lt;/p&gt;

&lt;p&gt;From the &lt;a href=&quot;https://wiki.archlinux.org/index.php/Network_bridge&quot;&gt;Arch Wiki&lt;/a&gt; (Retrieved on Apr 2, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A &lt;strong&gt;bridge&lt;/strong&gt; is a piece of software used to &lt;strong&gt;unite&lt;/strong&gt; two or 
more &lt;strong&gt;network segments&lt;/strong&gt;.&lt;/p&gt;

  &lt;p&gt;A bridge behaves like a virtual network &lt;strong&gt;switch&lt;/strong&gt;, working 
transparently (other machines do not need to know about its 
existence).  Any real devices (e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth0&lt;/code&gt;) and virtual devices
(e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tap0&lt;/code&gt;) can be connected to it.&lt;/p&gt;

  &lt;p&gt;[…]   &lt;br /&gt;
When the bridge is fully set up, it can be &lt;strong&gt;assigned an IP address&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Or as per &lt;a href=&quot;https://wiki.linuxfoundation.org/networking/bridge&quot;&gt;Bridge - The Linux Foundation Wiki&lt;/a&gt; (Retrieved on Apr 2, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;[…] a bridge connects two or more physical Ethernets together to 
form one &lt;strong&gt;bigger (logical) Ethernet&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;When you install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libvirt&lt;/code&gt;, a &lt;strong&gt;virtual bridge&lt;/strong&gt; (aka &lt;strong&gt;virtual network 
switch&lt;/strong&gt;), the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt;, is automatically created.  When you later 
create virtual machines, they connect to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; bridge.&lt;/p&gt;

&lt;p&gt;By default, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; uses &lt;strong&gt;NAT&lt;/strong&gt; mode and gets assigned an 
IP address 192.168.122.1.  Also, it can provide DHCP service for 
other virtual interfaces that connect to it.&lt;/p&gt;

&lt;p&gt;From the &lt;a href=&quot;https://wiki.archlinux.org/title/Network_bridge&quot;&gt;Arch Wiki&lt;/a&gt;: 
a bridge is a network switch but implemented in software.  Any real 
devices (e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth0&lt;/code&gt;) and virtual devices (e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tap0&lt;/code&gt;) can be connected 
to it.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://wiki.qemu.org/Documentation/Networking/NAT&quot;&gt;NAT Networking - QEMU Documentation&lt;/a&gt; (Retrieved on Apr 2, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;NAT &lt;br /&gt;
Configuring Network Address Translation (NAT) is a useful way to network 
virtual machines in a desktop environment (particularly, when using 
wireless networking).  A NAT network will allow your guests to fully 
access the network, allow networking between your host and guests, but 
&lt;strong&gt;prevent the guests&lt;/strong&gt; from being directly &lt;strong&gt;visible&lt;/strong&gt; on the physical network.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;References:&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/523245/whats-the-function-of-virbr0-and-virbr0-nic&quot;&gt;What’s the function of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0-nic&lt;/code&gt;?&lt;/a&gt; &lt;br /&gt;
(Retrieved on Apr 2, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://listman.redhat.com/archives/libvirt-users/2012-September/msg00038.html&quot;&gt;[libvirt-users] virtual networking - virbr0-nic interface&lt;/a&gt; &lt;br /&gt;
(Retrieved on Apr 2, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/378264/what-is-virtual-bridge-with-nic-in-the-end-of-name/444863#444863&quot;&gt;What is virtual bridge with -nic in the end of name&lt;/a&gt; &lt;br /&gt;
(Retrieved on Apr 2, 2022)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli
eno1: connected to eno1
[...]
eno2: connected to eno2
[...]
virbr0: connected (externally) to virbr0
        &quot;virbr0&quot;
        bridge, 52:54:00:11:22:33, sw, mtu 1500
        inet4 192.168.122.1/24
        route4 192.168.122.0/24
eno3: disconnected
[...]
eno4: disconnected
[...]
lo: unmanaged
        &quot;lo&quot;
        loopback (unknown), 00:00:00:00:00:00, sw, mtu 65536

virbr0-nic: unmanaged
        &quot;virbr0-nic&quot;
        tun, 52:54:00:11:22:33, sw, mtu 1500

DNS configuration:
        servers: 208.67.222.222, 208.67.220.220  &amp;lt;-- Will list your DNS servers
        interface: eno1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show virbr0
GENERAL.DEVICE:               virbr0
GENERAL.TYPE:                 bridge
[...]
GENERAL.STATE:                100 (connected (externally))
GENERAL.CONNECTION:           virbr0
[...]
IP4.ADDRESS[1]:               192.168.122.1/24
IP4.GATEWAY:                  --
IP4.ROUTE[1]:                 dst = 192.168.122.0/24, nh = 0.0.0.0, mt = 0
IP6.GATEWAY:                  --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The network &lt;strong&gt;interface&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0-nic&lt;/code&gt; (virtual network interface) is not 
a bridge.  It is a regular Ethernet interface (although a virtual one, 
created with ip add type &lt;a href=&quot;https://man7.org/linux/man-pages/man4/veth.4.html&quot;&gt;veth&lt;/a&gt;).  It’s there so that the bridge has at least one interface beneath it to 
use its MAC address from.  It doesn’t pass real traffic since it’s not 
really connected to any physical device.
The bridge would work without it but then it could change its MAC address 
as interfaces enter and exit the bridge, and when the MAC of the bridge 
changes, external switches may be confused, making the host lose network 
for some time.&lt;/p&gt;

&lt;p&gt;According to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nmcli device show&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip -details link show&lt;/code&gt; commands, 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0-nic&lt;/code&gt; virtual network interface is a &lt;strong&gt;TUN&lt;/strong&gt; device:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GENERAL.DEVICE:               virbr0-nic
GENERAL.TYPE:                 tun
GENERAL.HWADDR:               52:54:00:11:22:33
GENERAL.MTU:                  1500
GENERAL.STATE:                10 (unmanaged)
GENERAL.CONNECTION:           --
GENERAL.CON-PATH:             --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip -details link show virbr0-nic | \
egrep -woi &quot;tun|tap|bridge|bridge_slave|vlan_tunnel&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tun
tap
bridge_slave
vlan_tunnel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IP forwarding &lt;a href=&quot;#footnotes&quot;&gt;¹&lt;/a&gt; was already enabled on this server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo /sbin/sysctl --all | grep &apos;net.ipv4.ip_forward&apos;
net.ipv4.ip_forward = 1
net.ipv4.ip_forward_update_priority = 1
net.ipv4.ip_forward_use_pmtu = 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additional package that you need to install is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bridge-utils&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install bridge-utils
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It provides &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brctl&lt;/code&gt; tool.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf whatprovides /usr/sbin/brctl
[...]
bridge-utils-1.5-9.el7.x86_64 : Utilities for configuring the linux 
                              : ethernet bridge
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ command -V brctl; type brctl; which brctl; whereis brctl
brctl is /usr/sbin/brctl
brctl is /usr/sbin/brctl
/usr/sbin/brctl
brctl: /usr/sbin/brctl /usr/share/man/man8/brctl.8.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brctl(8)&lt;/code&gt; tool is used for the Ethernet bridge administration. 
From its man page:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
DESCRIPTION
    brctl is used to set up, maintain, and inspect the ethernet bridge 
    configuration in the linux kernel.

    An ethernet bridge is a device commonly used to connect different  
    networks of ethernets together, so that these ethernets will appear 
    as one ethernet to the participants.

    Each of the ethernets being connected corresponds to one physical
    interface in the bridge.  These individual ethernets are bundled into
    one bigger (&apos;logical&apos;) ethernet, this bigger ethernet corresponds to
    the bridge network interface.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Currently, this server has one bridge device (named virbr0) installed by 
the libvirt library so the output of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brctl show&lt;/code&gt; and  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brctl show virbr0&lt;/code&gt; 
is the same.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show 
bridge name     bridge id               STP enabled     interfaces
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show virbr0
bridge name     bridge id               STP enabled     interfaces
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;qemu-networking&quot;&gt;QEMU Networking&lt;/h2&gt;

&lt;p&gt;Two parts:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The front-end.  The virtual network device; e.g. a PCI network card
(aka NIC - network interface controller) that the guest sees.&lt;/li&gt;
  &lt;li&gt;The network back-end on the host side; that is, the interface that QEMU uses 
to exchange network packets with the outside (like other QEMU instances
or other real hosts in your intranet or the internet).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;QEMU supports networking by emulating some popular network cards
(aka NICs - network interface controllers) and establishing virtual
LANs (VLAN). There are four ways that QEMU guests can be connected:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;User mode (SLiRP)&lt;/li&gt;
  &lt;li&gt;Tap&lt;/li&gt;
  &lt;li&gt;Socket redirection&lt;/li&gt;
  &lt;li&gt;VDE networking&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;References:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.qemu.org/2018/05/31/nic-parameter/&quot;&gt;QEMU’s new -nic command line option&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wiki.qemu.org/Documentation/Networking&quot;&gt;Networking - QEMU Documentation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikibooks.org/wiki/QEMU/Networking&quot;&gt;Networking - QEMU on wikibooks.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The difference between &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-nic&lt;/code&gt; options of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu&lt;/code&gt; command:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net&lt;/code&gt; option can create either a front-end or a back-end (and also does other things)&lt;/li&gt;
  &lt;li&gt;the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; can only create a back-end&lt;/li&gt;
  &lt;li&gt;a single occurrence of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-nic&lt;/code&gt; creates both a front-end and a back-end&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;slirp-user-networking&quot;&gt;SLiRP (user networking)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Provides access to the host’s network via NAT&lt;/li&gt;
  &lt;li&gt;It doesn’t support protocols other than TCP and UDP so e.g. ping and other ICMP utilities won’t work from the guest&lt;/li&gt;
  &lt;li&gt;A virtual DHCP server on 10.0.2.2&lt;/li&gt;
  &lt;li&gt;A virtual DNS server on 10.0.2.3&lt;/li&gt;
  &lt;li&gt;Gateway: 10.0.2.3&lt;/li&gt;
  &lt;li&gt;An IP address starting from 10.0.2.15&lt;/li&gt;
  &lt;li&gt;NO tap0 on the host&lt;/li&gt;
  &lt;li&gt;ssh from the guest to the host&lt;/li&gt;
  &lt;li&gt;By default it acts as a firewall and does not permit any incoming traffic&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;starting-a-qemu-vm-with-slirp-user-networking&quot;&gt;Starting a QEMU VM with SLiRP (User Networking)&lt;/h4&gt;

&lt;p&gt;With the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev user,id=network0 \
-device e1000,netdev=network0 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you don’t specify any network configuration options, then QEMU creates 
a SLiRP user network back-end and an appropriate virtual network device 
for the guest (e.g. an E1000 PCI card for most x86 PC guests):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, you can use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net&lt;/code&gt; (&lt;a href=&quot;https://www.qemu.org/2018/05/31/nic-parameter/&quot;&gt;QEMU’s new -nic command line option&lt;/a&gt;) instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-net nic \
-net user \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;tap&quot;&gt;Tap&lt;/h3&gt;

&lt;h4 id=&quot;how-to-create-a-bridged-networking-tun-device-in-tap-mode-for-qemu-with-an-ip-address-provided-by-libvirts-bridge-virbr0&quot;&gt;How To Create a Bridged Networking (Tun Device in Tap Mode) for QEMU with an IP Address Provided by libvirt’s Bridge virbr0&lt;/h4&gt;

&lt;p&gt;References: &lt;br /&gt;
&lt;a href=&quot;https://wiki.qemu.org/Features/HelperNetworking&quot;&gt;Helper Networking&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Allows the guest to directly access the host’s network&lt;/li&gt;
  &lt;li&gt;ICMP utilities (e.g. ping) working&lt;/li&gt;
  &lt;li&gt;192.168.122.x (gw: 192.168.122.254)&lt;/li&gt;
  &lt;li&gt;tap0 on the host&lt;/li&gt;
  &lt;li&gt;IP address visible on the host’s network -&amp;gt; ssh from the guest to the host&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When you install the libvirt &lt;a href=&quot;#footnotes&quot;&gt;²&lt;/a&gt; package, a virtual network 
switch named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; is created.&lt;/p&gt;

&lt;p&gt;To allow unprivileged user access to the bridge from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt;
tool, create or modify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/qemu-kvm/bridge.conf&lt;/code&gt; (in other Linux 
distributions, the location of this configuration file might be different, 
for example, /etc/qemu/bridge.conf).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &quot;allow virbr0&quot; | sudo tee -a /etc/qemu-kvm/bridge.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bridge.conf&lt;/code&gt; are in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-kvm-common&lt;/code&gt; package:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ dnf repoquery --file /etc/qemu-kvm/bridge.conf 
[...]
qemu-kvm-common-15:2.12.0-63.module+el8+2833+c7d6d092.x86_64

$ dnf repoquery --file /usr/libexec/qemu-bridge-helper
[...]
qemu-kvm-common-15:2.12.0-63.module+el8+2833+c7d6d092.x86_64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both examples below use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; option for the back-end, together 
with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-device&lt;/code&gt; for the front-end.  That combination configures a network 
connection where the emulated NIC is directly connected to a host network
back-end, without a hub in between (as opposed to a network connection 
created with the legacy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net&lt;/code&gt; option).&lt;/p&gt;

&lt;h4 id=&quot;tap-with-virbr0-default-virtual-network-switch-created-by-the-libvirt-library---method-1&quot;&gt;Tap with virbr0 (Default Virtual Network Switch Created by the libvirt Library) - Method 1&lt;/h4&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br=&amp;lt;bridge name&amp;gt;&lt;/code&gt; in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; option.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev bridge,br=virbr0,id=hn0 \
-device virtio-net-pci,netdev=hn0,id=nic1 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;tap-with-virbr0-default-virtual-network-switch-created-by-the-libvirt-library---method-2&quot;&gt;Tap with virbr0 (Default Virtual Network Switch Created by the libvirt Library) - Method 2&lt;/h4&gt;

&lt;p&gt;In the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; option, for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tap&lt;/code&gt; specify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;helper&lt;/code&gt; and point &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--br&lt;/code&gt; to 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; because by default the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; expects that the 
bridge name is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=virbr0&quot;,id=hn0 \
-device virtio-net-pci,netdev=hn0,id=nic1 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-create-a-bridged-networking-tun-device-in-tap-mode-for-qemu-with-an-ip-address-visible-on-the-hosts-network-and-via-a-bridge-interface-you-created&quot;&gt;How To Create a Bridged Networking (Tun Device in Tap Mode) for QEMU with an IP Address Visible on the Host’s Network and via a Bridge Interface You Created&lt;/h3&gt;

&lt;p&gt;When you don’t want to use the [default] bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; provided by the 
libvirt library, you need to configure the new bridge &lt;em&gt;before&lt;/em&gt; running qemu.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Steps:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Create a network bridge device and bind your default-route NIC to it.&lt;/li&gt;
  &lt;li&gt;Create a tap device attached to the bridge for QEMU to use.
    &lt;ul&gt;
      &lt;li&gt;Instead of setting it up manually, you can let QEMU to set up
the necessary &lt;strong&gt;tap&lt;/strong&gt; device using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; tool
(location on this host with the operating system RHEL 8.5:
 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/libexec/qemu-bridge-helper&lt;/code&gt;).  This example shows this, that is,
it leaves the tap device creation and deletion to QEMU.&lt;/li&gt;
      &lt;li&gt;To set up a bridge as a regular user, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; tool 
must be run as root so you have to add the setuid bit; that is, 
permission (access) needs to be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(4755/-rwsr-xr-x)&lt;/code&gt;.  On this system
I didn’t have to do it as the helper was already configured with the setuid.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Configure the host’s firewall to allow packets to move across the bridge.
I didn’t have to make changes for this item because IP forwarding
&lt;a href=&quot;#footnotes&quot;&gt;¹&lt;/a&gt; was already enabled on this host.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ lsmod | grep ^bridge
bridge                192512  0

$ lsmod | grep ^tun
tun                    53248  1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip tuntap list
virbr0-nic: tap persist
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:  &lt;br /&gt;
I haven’t tried network bridging with wireless interface.&lt;/p&gt;

&lt;p&gt;As per &lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/ch-configure_network_bridging&quot;&gt;Configure Network Bridging - Red Hat Product Documentation (RHEL 7)&lt;/a&gt; (Retrieved on Apr 2, 2022), network bridging doesn’t work with Wi-Fi in Ad-Hoc or Infrastructure modes:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Note that a bridge cannot be established over Wi-Fi networks operating 
in Ad-Hoc or Infrastructure modes.  This is due to the IEEE 802.11 
standard that specifies the use of 3-address frames in Wi-Fi for the 
efficient use of airtime.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To configure bridged networking with a wireless adapter on the host, use NAT:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.qemu.org/Documentation/Networking#How_to_use_tap_with_a_wireless_adapter_on_the_host&quot;&gt;How to use tap with a wireless adapter on the host&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.qemu.org/Documentation/Networking/NAT&quot;&gt;QEMU Documentation - Networking - NAT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bbs.archlinux.org/viewtopic.php?id=207907&quot;&gt;[SOLVED] qemu vm tap networking with internet via host wifi&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;create-a-new-bridge-connection&quot;&gt;Create a New Bridge Connection&lt;/h4&gt;

&lt;p&gt;This new bridge connection will be linked to the eno1 network interface.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip address show
[...]
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 08:94:ef:f4:00:04 brd ff:ff:ff:ff:ff:ff
    inet 123.12.23.148/24 brd 123.12.23.254 scope global noprefixroute eno1
       valid_lft forever preferred_lft forever
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a new bridge connection named br0.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection add type bridge con-name br0 ifname br0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig | grep -w br0
br0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.000000000000       yes
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eno1&lt;/code&gt; network interface to the bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection add type bridge-slave ifname eno1 master br0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli -f bridge connection show br0
bridge.mac-address:                     --
bridge.stp:                             yes
bridge.priority:                        32768
bridge.forward-delay:                   15
bridge.hello-time:                      2
bridge.max-age:                         20
bridge.ageing-time:                     300
bridge.group-forward-mask:              0
bridge.multicast-snooping:              yes
bridge.vlan-filtering:                  no
bridge.vlan-default-pvid:               1
bridge.vlans:                           --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;convert-settings-from-nic-network-interface-controller-to-bridge-interface&quot;&gt;Convert Settings from NIC (Network Interface Controller) to Bridge Interface&lt;/h5&gt;

&lt;p&gt;Allocate a static IP address to the new br0 interface.  (If the DHCP server 
is available, it would provide IP addresses and other settings but since 
this is a server, I chose a set up with a static IP address.)&lt;/p&gt;

&lt;p&gt;In this example, network settings of the existing network interface 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eno1&lt;/code&gt; are converted to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt; bridge settings.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show eno1 | grep &apos;ipv4.addresses&apos;
ipv4.addresses:   123.12.23.148/24

$ nmcli connection show eno1 | grep gateway
ipv4.gateway:     123.12.23.254

$ nmcli connection show eno1 | grep &apos;ipv4.dns&apos;
ipv4.dns:         208.67.222.222,208.67.220.220  &amp;lt;-- Will show your DNS servers

$ nmcli connection show eno1 | grep &apos;ipv4.method&apos;
ipv4.method:                            manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection modify br0 ipv4.addresses &apos;123.12.23.148/24&apos;
$ sudo nmcli connection modify br0 ipv4.gateway &apos;123.12.23.254&apos;
$ sudo nmcli connection modify br0 ipv4.dns &apos;208.67.222.222,208.67.220.220&apos;
$ sudo nmcli connection modify br0 ipv4.method manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection up br0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Connection successfully activated (master waiting for slaves) 
(D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/28)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.0894eff40004       yes             eno1
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show
NAME               UUID                                  TYPE      DEVICE 
eno1               4d928341-...........................  ethernet  eno1   
eno2               e94a2707-...........................  ethernet  eno2   
br0                07d25404-...........................  bridge    br0    
virbr0             3216d7f0-...........................  bridge    virbr0 
bridge-slave-eno1  02132481-...........................  ethernet  --     
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip address show br0
40: br0: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc noqueue 
      state DOWN group default qlen 1000
      link/ether 5a:18:0d:a2:18:26 brd ff:ff:ff:ff:ff:ff
      inet 123.12.23.148/24 brd 123.12.23.255 scope global noprefixroute br0
      valid_lft forever preferred_lft forever
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eno1&lt;/code&gt; network interface because now the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt; bridge 
has a static IP address and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eno1&lt;/code&gt; will be in forwarding state.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection delete eno1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Allow a regular user access to the new bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt; from 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt;.  Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allow br0&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bridge.conf&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;allow br0&quot; | sudo tee -a /etc/qemu-kvm/bridge.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/qemu-kvm/bridge.conf
allow virbr0
allow br0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: &lt;br /&gt;
You don’t need to create a tap device (a.k.a. a tap interface) manually 
because the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; tool (location on the host’s OS, RHEL 8.5: 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/libexec/qemu-bridge-helper&lt;/code&gt;) creates it automatically when you 
start a guest VM.  By default the helper assumes that the bridge name 
is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt;.  Also, the name of a tap device that the helper automatically 
creates when the guest VM is started is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tap0&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev bridge,br=br0,id=hn0 \
-device virtio-net-pci,netdev=hn0,id=nic1 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(NOTE:   You can skip &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br=br0&lt;/code&gt; because the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; tool assumes that the name of the bridge is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt;.   Also, you can skip &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id=nic1&lt;/code&gt;.)&lt;/p&gt;

&lt;p&gt;Explanation for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;device&lt;/code&gt; options:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-netdev bridge,br=br0,id=hn0&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Create a bridge network back-end (with id hn0) via bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt;. 
This will connect to a tap interface tap0 device (aka tap0 interface), 
which will be automatically setup with the helper &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-device virtio-net-pci,netdev=hn0,id=nic1&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Create a NIC (of a model &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virtio-net-pci&lt;/code&gt; and with id nic1) and connect 
to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hn0&lt;/code&gt; back-end created by the previous parameter.&lt;/p&gt;

&lt;p&gt;NOTE:  To list all devices, including network devices, 
run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/libexec/qemu-kvm -device help&lt;/code&gt;, which shows help on possible 
drivers and properties (in this case, since you’d be interested in network devices, you’d look under the section titled “Network devices”).&lt;/p&gt;

&lt;p&gt;While the guest VM is running, start another shell on the host.
Run the following set of commands on the host system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig | egrep &quot;^br|^virbr|^tap&quot;
br0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
tap0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig -a | egrep &quot;^br|^virbr|^tap&quot;
br0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
tap0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
virbr0-nic: flags=4098&amp;lt;BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection | egrep -i &quot;bridge|tun|tap|type&quot;
NAME               UUID                                  TYPE      DEVICE 
br0                07d25404-5b85-4006-bdbc-272c63b9aaf0  bridge    br0    
virbr0             3216d7f0-124e-4c66-a6de-5b218d18377c  bridge    virbr0 
bridge-slave-eno1  02132481-584a-413d-97f5-46b161a4de9f  ethernet  eno1   
tap0               37ddcf4a-1105-4ab4-b076-0b62f87df4a8  tun       tap0   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show br0 | egrep -wi &quot;type|mode|name|master|slave&quot;
connection.type:                    bridge
connection.interface-name:          br0
connection.master:                  --
connection.slave-type:              --
ipv6.addr-gen-mode:                 stable-privacy
GENERAL.NAME:                       br0
GENERAL.MASTER-PATH:                --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show tap0 | egrep -wi &quot;type|mode|name|master|slave&quot;
connection.type:                    tun
connection.interface-name:          tap0
connection.master:                  br0
connection.slave-type:              bridge
bridge-port.hairpin-mode:           no
tun.mode:                           2 (tap)
GENERAL.NAME:                       tap0
GENERAL.MASTER-PATH:                /org/freedesktop/NetworkManager/Devices/34
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device | egrep -i &quot;bridge|tun|type&quot;
DEVICE      TYPE      STATE                   CONNECTION        
br0         bridge    connected               br0               
virbr0      bridge    connected (externally)  virbr0            
eno1        ethernet  connected               bridge-slave-eno1 
tap0        tun       connected (externally)  tap0              
virbr0-nic  tun       unmanaged               --                
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show br0
GENERAL.DEVICE:         br0
GENERAL.TYPE:           bridge
GENERAL.HWADDR:         08:94:EF:F4:00:04
GENERAL.MTU:            1500
GENERAL.STATE:          100 (connected)
GENERAL.CONNECTION:     br0
GENERAL.CON-PATH:       /org/freedesktop/NetworkManager/ActiveConnection/28
IP4.ADDRESS[1]:         123.12.23.148/24 
IP4.GATEWAY:            123.12.23.254
IP4.ROUTE[1]:           dst = 123.12.23.0/24, nh = 0.0.0.0, mt = 426
IP4.ROUTE[2]:           dst = 0.0.0.0/0, nh = 123.12.23.254, mt = 426
IP4.DNS[1]:             208.67.222.222
IP4.DNS[2]:             208.67.220.220
IP6.ADDRESS[1]:         fe80::c929:3169:74dd:2429/64
IP6.GATEWAY:            fe80::a68c:dbff:fede:1301
IP6.ROUTE[1]:           dst = fe80::/64, nh = ::, mt = 426
IP6.ROUTE[2]:           dst = ::/0, nh = fe80::a68c:dbff:fede:1301, mt = 426
IP6.ROUTE[3]:           dst = ff00::/8, nh = ::, mt = 256, table=255
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show tap0
GENERAL.DEVICE:         tap0
GENERAL.TYPE:           tun
GENERAL.HWADDR:         FE:90:76:81:BE:CF
GENERAL.MTU:            1500
GENERAL.STATE:          100 (connected (externally))
GENERAL.CONNECTION:     tap0
GENERAL.CON-PATH:       /org/freedesktop/NetworkManager/ActiveConnection/30
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.0894eff40004       yes             eno1
                                                        tap0
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip link show master br0
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc mq master br0 
    state UP mode DEFAULT group default qlen 1000
    link/ether 08:94:ef:f4:00:04 brd ff:ff:ff:ff:ff:ff
44: tap0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc fq_codel 
    master br0 state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether fe:90:76:81:be:cf brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bridge link show
[...]
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 master br0 
     state forwarding priority 32 cost 100 
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 master br0 hwmode VEPA 
[...]
44: tap0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 master br0 
      state forwarding priority 32 cost 100 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show br0 | grep -i type
GENERAL.TYPE:                           bridge

$ nmcli device show tap0 | grep -i type
GENERAL.TYPE:                           tun

$ nmcli device show eno1 | grep -i type
GENERAL.TYPE:                           ethernet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Return to the first shell, and in the guest VM, power off the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back on the host system, after the VM is powered off:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig | egrep &quot;^br|^virbr|^tap&quot;
br0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig -a | egrep &quot;^br|^virbr|^tap&quot;
br0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
virbr0-nic: flags=4098&amp;lt;BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection | egrep -i &quot;bridge|tun|tap|type&quot;
NAME               UUID                                  TYPE      DEVICE 
br0                07d25404-5b85-4006-bdbc-272c63b9aaf0  bridge    br0    
virbr0             3216d7f0-124e-4c66-a6de-5b218d18377c  bridge    virbr0 
bridge-slave-eno1  02132481-584a-413d-97f5-46b161a4de9f  ethernet  eno1   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device | egrep -i &quot;bridge|tun|tap|type&quot;
DEVICE      TYPE      STATE                   CONNECTION        
br0         bridge    connected               br0               
virbr0      bridge    connected (externally)  virbr0            
eno1        ethernet  connected               bridge-slave-eno1 
virbr0-nic  tun       unmanaged               --                
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.0894eff40004       yes             eno1
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip link show master br0
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc mq master br0 
    state UP mode DEFAULT group default qlen 1000
    link/ether 08:94:ef:f4:00:04 brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bridge link show
[...]
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 master br0 
     state forwarding priority 32 cost 100 
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 master br0 hwmode VEPA 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;create-a-second-bridge-connection&quot;&gt;Create a Second Bridge Connection&lt;/h3&gt;

&lt;p&gt;This new bridge connection will be linked to the eno2 network interface, 
which is used for a non-routable private network (for a cluster of compute 
nodes).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip address show
[...]
5: eno2: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc mq state UP 
      group default qlen 1000
    link/ether 08:94:ef:00:11:22 brd ff:ff:ff:ff:ff:ff
    inet 192.168.80.210/24 brd 192.168.80.255 scope global noprefixroute eno2
       valid_lft forever preferred_lft forever
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a new bridge connection named br1 on the host system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection add type bridge con-name br1 ifname br1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;convert-settings-from-nic-network-interface-controller-to-bridge-interface-1&quot;&gt;Convert Settings from NIC (Network Interface Controller) to Bridge Interface&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show eno2 | grep &apos;ipv4.addresses&apos;
ipv4.addresses :                  192.168.80.210/24

$ nmcli connection show eno2 | grep &apos;ipv4.gateway&apos; 
ipv4.gateway:                     --

$ nmcli connection show eno2 | grep &apos;ipv4.dns&apos;
ipv4.dns:                         --

$ nmcli connection show eno2 | grep &apos;ipv4.method&apos;
ipv4.method:                      manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection add type bridge-slave ifname eno2 master br1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection modify br1 ipv4.addresses &apos;192.168.80.210/24&apos;
$ sudo nmcli connection modify br1 ipv4.method manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection delete eno2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip address show br1
53: br1: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc noqueue 
      state DOWN group default qlen 1000
    link/ether 52:c3:05:11:22:33 brd ff:ff:ff:ff:ff:ff
    inet 192.168.80.210/24 brd 192.168.80.255 scope global noprefixroute br1
       valid_lft forever preferred_lft forever
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show
NAME               UUID                                  TYPE      DEVICE
br0                07d25404-...........................  bridge    br0
br1                1f0c11be-...........................  bridge    br1
virbr0             3216d7f0-...........................  bridge    virbr0
bridge-slave-eno1  02132481-...........................  ethernet  eno1
bridge-slave-eno2  6f94adf1-...........................  ethernet  eno2
eno3               70568f00-...........................  ethernet  --
eno4               39d9c6c1-...........................  ethernet  --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device
DEVICE      TYPE      STATE                   CONNECTION
br0         bridge    connected               br0
br1         bridge    connected               br1
virbr0      bridge    connected (externally)  virbr0
eno1        ethernet  connected               bridge-slave-eno1
eno2        ethernet  connected               bridge-slave-eno2
eno3        ethernet  disconnected            --
eno4        ethernet  disconnected            --
lo          loopback  unmanaged               --
virbr0-nic  tun       unmanaged               --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;allow br1&quot; | sudo tee  -a /etc/qemu-kvm/bridge.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/qemu-kvm/bridge.conf
allow virbr0
allow br0
allow br1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl restart NetworkManager
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You might need to restart dhcpd service too.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl restart dhcpd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After you launch an instance of QEMU guest VM that uses the both bridge 
devices (br0 and br1) you’ve created (see section below), QEMU automatically
creates TUN devices named tun0 and tun1.  Run the following three commands
on the host while the guest virtual machine is running.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection
NAME               UUID                                  TYPE      DEVICE
br0                07d25404-...........................  bridge    br0
br1                1f0c11be-...........................  bridge    br1
virbr0             3216d7f0-...........................  bridge    virbr0
bridge-slave-eno1  02132481-...........................  ethernet  eno1
bridge-slave-eno2  6f94adf1-...........................  ethernet  eno2
tap0               4da9861f-...........................  tun       tap0
tap1               9837b7c2-...........................  tun       tap1
eno3               70568f00-...........................  ethernet  --
eno4               39d9c6c1-...........................  ethernet  --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device
DEVICE      TYPE      STATE                   CONNECTION
br0         bridge    connected               br0
br1         bridge    connected               br1
virbr0      bridge    connected (externally)  virbr0
eno1        ethernet  connected               bridge-slave-eno1
eno2        ethernet  connected               bridge-slave-eno2
tap0        tun       connected (externally)  tap0
tap1        tun       connected (externally)  tap1
eno3        ethernet  disconnected            --
eno4        ethernet  disconnected            --
lo          loopback  unmanaged               --
virbr0-nic  tun       unmanaged               --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.0894eff40004       yes             eno1
                                                        tap0
br1             8000.0894eff40005       yes             eno2
                                                        tap1
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-launch-a-qemu-instance-in-bridge-network-with-two-nics-in-two-separate-networks-via-tap-network-connections---aka-configure-host-tap-network-backendshost-tap-interfaces&quot;&gt;How To Launch a QEMU Instance in Bridge Network with Two NICs in Two Separate Networks via TAP Network Connections - aka Configure Host TAP Network Backends/Host TAP Interfaces&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  &lt;br /&gt;
You can use the same bridge on the host for connecting two guest NICs to it,
in which case the both guest network connections get IP address assigned from
the host’s bridge subnet.&lt;/p&gt;

&lt;p&gt;This example shows a different configuration, where the guest VM needs to 
be connected to two different networks so one of two guest NICs is 
connected to one bridge and the other guest NIC is connected to the other 
bridge on the host side.&lt;/p&gt;

&lt;h4 id=&quot;two-bridges---method-1&quot;&gt;Two Bridges - Method 1&lt;/h4&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;Launch a QEMU instance with two NICs, each connected to a TAP device.
Use the default network script but instead of using the script’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; 
bridge, connect the both TAP devices to bridgess &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br1&lt;/code&gt;,
respectively:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br0&quot;,id=hn0 \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br1&quot;,id=hn1 \
-device virtio-net-pci,netdev=hn0 \
-device virtio-net-pci,netdev=hn1 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When it starts the guest VM, QEMU automatically creates two &lt;strong&gt;TUN&lt;/strong&gt;
connections (aka tun devices) of type &lt;strong&gt;TAP&lt;/strong&gt;.  In this case QEMU names
these two devices tap0 and tap1.  You can obtain the details by starting
a separate shell (while the guest VM is running) and by using the 
following commands: 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip --details address show&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip --details link show&lt;/code&gt;, 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip --details tuntap&lt;/code&gt;, 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nmcli connection&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nmcli device&lt;/code&gt;,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nmcli device show&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brctl show&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&quot;two-bridges---method-2&quot;&gt;Two Bridges - Method 2&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev bridge,br=br0,id=hn0 \
-netdev bridge,br=br1,id=hn1 \
-device virtio-net-pci,netdev=hn0 \
-device virtio-net-pci,netdev=hn1 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;vde-networking&quot;&gt;VDE Networking&lt;/h3&gt;

&lt;p&gt;From &lt;a href=&quot;https://wiki.qemu.org/Documentation/Networking&quot;&gt;Networking - QEMU Wiki - Documentation&lt;/a&gt; (Retrieved on Apr 2, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;VDE&lt;/p&gt;

  &lt;p&gt;The VDE networking backend uses the &lt;a href=&quot;https://github.com/virtualsquare/vde-2&quot;&gt;Virtual Distributed Ethernet&lt;/a&gt; infrastructure to network guests. 
Unless you specifically know that you want to use VDE, it is probably 
not the right backend to use.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;redirecting-ports&quot;&gt;Redirecting Ports&lt;/h3&gt;

&lt;h4 id=&quot;how-to-get-ssh-access-to-a-guest-with-port-forwarding&quot;&gt;How to Get SSH Access to a Guest with Port Forwarding&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;No tap0 on the guest.&lt;/li&gt;
  &lt;li&gt;IP address in the guest:  10.0.2.x  (gw: 10.0.2.254)&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-device e1000,netdev=net0 \
-netdev user,id=net0,hostfwd=tcp::5555-:22 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first line creates a virtual e1000 network device, while the second 
line created one user typed backend, forwarding local port 5555 to guest 
port 22.  Then from the host:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh -p 5555 username@localhost
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to have SSH access to guest after its network setup (if there are any 
firewalls in the guest or host, disable them or allow the needed ports).&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;how-to-start-a-qemu-vm-with-bridged-networking-with-the-legacy--net-option-aka-via-hub&quot;&gt;How To Start a QEMU VM with Bridged Networking (with the Legacy -net Option, aka via Hub)&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Task:&lt;/em&gt;  Start a guest VM with the virtual network bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; 
(installed by the libvirt).&lt;/p&gt;

&lt;p&gt;When QEMU starts (e.g. when you invoke it by starting a VM via QEMU), 
it runs the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-bridge-helper&lt;/code&gt; tool, which automatically creates 
a new tap device, which is effectively a virtual NIC (network interface
controller) with its own MAC address, and connects that device to the bridge.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;NOTE:&lt;/em&gt; &lt;br /&gt;
This example shows the use of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net&lt;/code&gt; &lt;a href=&quot;#footnotes&quot;&gt;³&lt;/a&gt; legacy option.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Possible to ping from the guest VM&lt;/li&gt;
  &lt;li&gt;The NIC is an e1000 by default on the PC target so if you want to emulate 
an e1000 NIC in the guest you can skip &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-model=e1000&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net nic&lt;/code&gt; option.
As such, in the example below, you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net nic&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net nic,model=e1000&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;The emulated NIC and the host back-end are not &lt;em&gt;directly&lt;/em&gt; connected.
They are rather both connected to an emulated &lt;strong&gt;hub&lt;/strong&gt; (called “vlan” in older versions of QEMU).&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-global ide-hd.physical_block_size=4096 \
-m 4G \
-net nic,model=e1000 \
-net bridge,br=virbr0 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)
  CentOS Linux (0-rescue-d01c41227ec248b983c9ea19758c73b0) 7 (Core)


  Use the ↑ and ↓ keys to change the selection.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to the guest VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

xcatmn login: root
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Networking information in the guest VM:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ifconfig | grep -w inet
    inet 192.168.122.76  netmask 255.255.255.0  broadcast 192.168.122.255
    inet 127.0.0.1  netmask 255.0.0.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli connection 
NAME  UUID                                  TYPE      DEVICE 
ens3  e5ec08b7-...........................  ethernet  ens3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip address show ens3 | grep -w inet
    inet 192.168.122.76/24 brd 192.168.122.255 scope global noprefixroute dynam3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/sysconfig/network-scripts/ifcfg-ens3
TYPE=&quot;Ethernet&quot;
PROXY_METHOD=&quot;none&quot;
BROWSER_ONLY=&quot;no&quot;
BOOTPROTO=&quot;dhcp&quot;
DEFROUTE=&quot;yes&quot;
IPV4_FAILURE_FATAL=&quot;no&quot;
IPV6INIT=&quot;no&quot;
IPV6_AUTOCONF=&quot;yes&quot;
IPV6_DEFROUTE=&quot;yes&quot;
IPV6_FAILURE_FATAL=&quot;no&quot;
IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;
NAME=&quot;ens3&quot;
UUID=&quot;e5ec08b7-...........................&quot;
DEVICE=&quot;ens3&quot;
ONBOOT=&quot;yes&quot;
DNS1=&quot;208.67.222.222&quot;  &amp;lt;-- Will list your DNS1 server
DNS2=&quot;208.67.220.220&quot;  &amp;lt;-- Will list your DNS2 server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli device show ens3 | grep DNS
IP4.DNS[1]:         192.168.122.1  
IP4.DNS[2]:         208.67.222.222    &amp;lt;-- Will show your DNS2 server
IP4.DNS[3]:         208.67.220.220    &amp;lt;-- Will show your DNS3 server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The kernel routing tables:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# netstat -rn
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
0.0.0.0         192.168.122.1   0.0.0.0         UG        0 0          0 ens3
192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 ens3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# route -e
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         gateway         0.0.0.0         UG        0 0          0 ens3
192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 ens3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or with the new tool &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip(8)&lt;/code&gt;, from the iproute2 package (a collection of 
userspace utilities for controlling and monitoring various aspects of 
networking in the Linux kernel):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip route
default via 192.168.122.1 dev ens3 proto dhcp metric 100 
192.168.122.0/24 dev ens3 proto kernel scope link src 192.168.122.76 metric 100 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/resolv.conf 
# Generated by NetworkManager
search yourdomain.org
nameserver 192.168.122.1
nameserver 208.67.222.222   &amp;lt;-- Will list your nameserver1
nameserver 208.67.220.220   &amp;lt;-- Will list your nameserver2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;virbr0-nic-ethernet-interface-and-tap0-device-are-created-automatically-when-guest-vm-is-running&quot;&gt;virbr0-nic Ethernet Interface and tap0 Device are Created Automatically when Guest VM is Running&lt;/h4&gt;

&lt;p&gt;While the guest VM is running, start another shell on the host.&lt;/p&gt;

&lt;p&gt;On the host system, run the following commands, which show that 
the &lt;strong&gt;tun&lt;/strong&gt; device named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tap0&lt;/code&gt; (a.k.a. network interface of type 
&lt;strong&gt;tun&lt;/strong&gt; - tun mode &lt;strong&gt;tap&lt;/strong&gt; ) is created automatically (as a slave 
of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; bridge) when the guest VM is powered on.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig | egrep -i &quot;virbr|tap&quot;
tap0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig -a | egrep -i &quot;virbr|tap&quot;
tap0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
virbr0-nic: flags=4098&amp;lt;BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection | egrep -i &quot;bridge|tun|tap|type&quot;
NAME    UUID                                  TYPE      DEVICE
virbr0  3216d7f0-124e-4c66-a6de-5b218d18377c  bridge    virbr0
tap0    72e1da4b-5a73-40ec-9cce-c480078f3c68  tun       tap0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show virbr0 | egrep -wi &quot;type|mode|name|master|slave&quot;
connection.type:                    bridge
connection.interface-name:          virbr0
connection.master:                  --
connection.slave-type:              --
ipv6.addr-gen-mode:                 stable-privacy
GENERAL.NAME:                       virbr0
GENERAL.MASTER-PATH:                --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show tap0 | egrep -wi &quot;type|mode|name|master|slave&quot;
connection.type:                    tun
connection.interface-name:          tap0
connection.master:                  virbr0
connection.slave-type:              bridge
bridge-port.hairpin-mode:           no
tun.mode:                           2 (tap)
GENERAL.NAME:                       tap0
GENERAL.MASTER-PATH:                /org/freedesktop/NetworkManager/Devices/6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device | egrep -i &quot;bridge|tun|type&quot;
DEVICE      TYPE      STATE                   CONNECTION
virbr0      bridge    connected (externally)  virbr0
tap0        tun       connected (externally)  tap0
virbr0-nic  tun       unmanaged               --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show virbr0
GENERAL.DEVICE:           virbr0
GENERAL.TYPE:             bridge
[...]
GENERAL.STATE:            100 (connected (externally))
GENERAL.CONNECTION:       virbr0
[...]
IP4.ADDRESS[1]:           192.168.122.1/24
IP4.GATEWAY:              --
IP4.ROUTE[1]:             dst = 192.168.122.0/24, nh = 0.0.0.0, mt = 0
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show virbr0-nic
GENERAL.DEVICE:           virbr0-nic
GENERAL.TYPE:             tun
[...]
GENERAL.STATE:            10 (unmanaged)
GENERAL.CONNECTION:       --
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show tap0
GENERAL.DEVICE:           tap0
GENERAL.TYPE:             tun
[...]
GENERAL.STATE:            100 (connected (externally))
GENERAL.CONNECTION:       tap0
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
virbr0          8000.525400a7c2ab       yes             tap0
                                                        virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;verification-of-bridge-creation-and-network-connection&quot;&gt;Verification of Bridge Creation and Network Connection&lt;/h4&gt;

&lt;p&gt;Use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip&lt;/code&gt; utility to display the link status of Ethernet devices that 
are ports of the bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip link show master virbr0
7: virbr0-nic: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc fq_codel master 
      virbr0 state DOWN mode DEFAULT group default qlen 1000
      link/ether 52:54:00:a7:c2:ab brd ff:ff:ff:ff:ff:ff
33: tap0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc fq_codel master 
      virbr0 state UNKNOWN mode DEFAULT group default qlen 1000
      link/ether fe:0e:7b:05:f6:b1 brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bridge&lt;/code&gt; utility to display the status of Ethernet 
devices that are ports of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; bridge device.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bridge link show 
[...]
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 hwmode VEPA 
5: eno2: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 hwmode VEPA 
7: virbr0-nic: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 master virbr0 state disabled 
     priority 32 cost 100 
33: tap0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 master virbr0 state 
     forwarding priority 32 cost 100
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device show virbr0 | grep -i type
GENERAL.TYPE:                           bridge

$ nmcli device show virbr0-nic | grep -i type
GENERAL.TYPE:                           tun

$ nmcli device show tap0 | grep -i type
GENERAL.TYPE:                           tun
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back in the first shell, in the guest VM, power off the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;virbr0-nic-network-interface-and-tap0-device-are-automatically-removed-when-guest-vm-is-powered-down&quot;&gt;virbr0-nic Network Interface and tap0 Device are Automatically Removed when Guest VM is Powered Down&lt;/h4&gt;

&lt;p&gt;Back on the host system, after the VM is powered off, run the following 
set of commands.  They show that the the &lt;strong&gt;tun&lt;/strong&gt; device named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tap0&lt;/code&gt; 
(network interface of type &lt;strong&gt;tun&lt;/strong&gt; - tun mode &lt;strong&gt;tap&lt;/strong&gt; ) is automatically 
removed after the guest VM is powered off.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig | egrep -i &quot;virbr|tap&quot;
virbr0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ifconfig -a | egrep -i &quot;virbr|tap&quot;
virbr0: flags=4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
virbr0-nic: flags=4098&amp;lt;BROADCAST,MULTICAST&amp;gt;  mtu 1500
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection | egrep -i &quot;bridge|tun|tap|type&quot;
NAME    UUID                                  TYPE      DEVICE
virbr0  3216d7f0-124e-4c66-a6de-5b218d18377c  bridge    virbr0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli device | egrep -i &quot;bridge|tun|tap|type&quot;
DEVICE      TYPE      STATE                   CONNECTION
virbr0      bridge    connected (externally)  virbr0
virbr0-nic  tun       unmanaged               --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ brctl show
bridge name     bridge id               STP enabled     interfaces
virbr0          8000.525400a7c2ab       yes             virbr0-nic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip link show master virbr0
7: virbr0-nic: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc fq_codel master virbr0 
      state DOWN mode DEFAULT group default qlen 1000
      link/ether 52:54:00:a7:c2:ab brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bridge link show
[...]
4: eno1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 hwmode VEPA 
5: eno2: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 hwmode VEPA 
7: virbr0-nic: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 master virbr0 state disabled 
      priority 32 cost 100 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;appendix&quot;&gt;Appendix&lt;/h2&gt;

&lt;p&gt;This section shows how the guest VM used in the examples was created.&lt;/p&gt;

&lt;h3 id=&quot;create-a-customized-centosrhel-dvd-iso-for-installation-in-text-mode-via-serial-console&quot;&gt;Create a Customized CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console&lt;/h3&gt;

&lt;p&gt;Download CentOS 7.9 DVD ISO image and verify the SHA256 checksum 
of the ISO image file to ensure its integrity – Verify that the SHA256 
checksum of the downloaded file matches that of the SHA256 checksum listed 
at the CentOS.org official download site.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd /tmp/

$ wget https://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Everything-2009.iso

$ wget https://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/sha256sum.txt

$ ls -lh sha256sum.txt
-rw-rw-r-- 1 dusko dusko 398 Nov  4  2020 sha256sum.txt

$ wc -l sha256sum.txt
4 sha256sum.txt

$ grep -n &apos;CentOS-7-x86_64-Everything-2009.iso&apos; sha256sum.txt
1:689531cce9cf484378481ae762fae362791a9be078fda10e4f6977bf8fa71350  CentOS-7-x86_64-Everything-2009.iso

$ grep CentOS-7-x86_64-Everything-2009.iso sha256sum.txt &amp;gt; /tmp/sha256sum.txt.tmp

$ mv /tmp/sha256sum.txt.tmp /tmp/sha256sum.txt

$ cat /tmp/sha256sum.txt
689531cce9cf484378481ae762fae362791a9be078fda10e4f6977bf8fa71350  CentOS-7-x86_64-Everything-2009.iso

$ sha256sum --check sha256sum.txt
CentOS-7-x86_64-Everything-2009.iso: OK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Customize the DVD ISO image so that the installer redirects its text output 
to the serial console, specifically to the first serial device (ttyS0), 
with baud rate of 19200. (This is to meet the requirement of the system 
that this VM is going to replicate.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir -p /mnt/{dvd,customdvd}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
mount \
-t iso9660 \
/tmp/CentOS-7-x86_64-Everything-2009.iso \
/mnt/dvd/
mount: /mnt/dvd: WARNING: device write-protected, mounted read-only.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rsync -a /mnt/dvd/ /mnt/customdvd/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh /mnt/customdvd/isolinux/
total 60M
drwxr-xr-x 2 root root  198 Oct 26  2020 .
drwxr-xr-x 8 root root  254 Oct 29  2020 ..
-r--r--r-- 1 root root 2.0K Nov  2  2020 boot.cat
-rw-r--r-- 1 root root   84 Oct 26  2020 boot.msg
-rw-r--r-- 1 root root  281 Oct 26  2020 grub.conf
-rw-r--r-- 1 root root  53M Oct 26  2020 initrd.img
-rw-r--r-- 1 root root  24K Oct 26  2020 isolinux.bin
-rw-r--r-- 1 root root 3.0K Oct 26  2020 isolinux.cfg
-rw-r--r-- 1 root root 187K Nov  5  2016 memtest
-rw-r--r-- 1 root root  186 Sep 30  2015 splash.png
-r--r--r-- 1 root root 2.2K Nov  2  2020 TRANS.TBL
-rw-r--r-- 1 root root 150K Oct 30  2018 vesamenu.c32
-rwxr-xr-x 1 root root 6.5M Oct 19  2020 vmlinuz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/isolinux/boot.msg


splash.lss

 -  Press the 01&amp;lt;ENTER&amp;gt;07 key to begin the installation process.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Delete the line with ‘splash.lss’ from the ‘boot.msg’.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo sed -i.bkp &apos;/splash.lss/d&apos; /mnt/customdvd/isolinux/boot.msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
--unified=0 \
/mnt/customdvd/isolinux/boot.msg.bkp \
/mnt/customdvd/isolinux/boot.msg
--- /mnt/customdvd/isolinux/boot.msg.bkp      2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/boot.msg    2022-04-02 08:09:31.109458847 -0700
@@ -2 +1,0 @@
-splash.lss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/isolinux/boot.msg



 -  Press the 01&amp;lt;ENTER&amp;gt;07 key to begin the installation process.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -i /mnt/customdvd/isolinux/boot.msg.bkp
rm: remove regular file &apos;/mnt/customdvd/isolinux/boot.msg.bkp&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove ‘boot.cat’. It will be regenerated in a later step.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -i /mnt/customdvd/isolinux/boot.cat
rm: remove regular file &apos;/mnt/customdvd/isolinux/boot.cat&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tell ISOLINUX to use a serial port as the console. “port” is a number
(0 = /dev/ttyS0 = COM1, etc.) or an I/O port address (e.g. 0x3F8)
(&lt;a href=&quot;https://www.syslinux.org/old/faq.php&quot;&gt;https://www.syslinux.org/old/faq.php&lt;/a&gt;,
&lt;a href=&quot;https://wiki.syslinux.org/wiki/index.php?title=SYSLINUX&quot;&gt;https://wiki.syslinux.org/wiki/index.php?title=SYSLINUX&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Here I want to use the port 0 so the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console&lt;/code&gt; statement uses tty0 and ttyS0.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vi /mnt/customdvd/isolinux/isolinux.cfg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
--unified=0 \
/mnt/dvd/isolinux/isolinux.cfg \
/mnt/customdvd/isolinux/isolinux.cfg
--- /mnt/dvd/isolinux/isolinux.cfg      2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/isolinux.cfg        2022-04-02 08:12:12.604830661 -0700
@@ -64 +64 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet console=tty0 console=ttyS0,19200
@@ -70 +70 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet console=tty0 console=ttyS0,19200
@@ -86 +86 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet console=tty0 console=ttyS0,19200
@@ -96 +96 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet console=tty0 console=ttyS0,19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /mnt/customdvd/EFI/BOOT/
total 6.0M
-rwxr--r-- 1 root root 978K Jul 31  2020 BOOTIA32.EFI
-rwxr--r-- 1 root root 1.2M Jul 31  2020 BOOTX64.EFI
drwxr-xr-x 2 root root   42 Oct 26  2020 fonts
-rw-r--r-- 1 root root 1.3K Oct 26  2020 grub.cfg
-rwxr--r-- 1 root root 745K Jul 28  2020 grubia32.efi
-rwxr--r-- 1 root root 1.1M Jul 28  2020 grubx64.efi
-rwxr--r-- 1 root root 898K Jul 31  2020 mmia32.efi
-rwxr--r-- 1 root root 1.2M Jul 31  2020 mmx64.efi
-r--r--r-- 1 root root 1.8K Nov  2  2020 TRANS.TBL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vi /mnt/customdvd/EFI/BOOT/grub.cfg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff --unified=0 /mnt/dvd/EFI/BOOT/grub.cfg /mnt/customdvd/EFI/BOOT/grub.cfg
--- /mnt/dvd/EFI/BOOT/grub.cfg  2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/EFI/BOOT/grub.cfg    2022-04-02 08:23:17.334493194 -0700
@@ -16,0 +17,4 @@
+serial --unit=0 --speed=19200 --word=8 --parity=no --stop=1
+terminal_input serial console=tty0 console=ttyS0,19200
+terminal_output serial console=tty0 console=ttyS0,19200
+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/EFI/BOOT/grub.cfg
set default=&quot;1&quot;

function load_video {
  insmod efi_gop
  insmod efi_uga
  insmod video_bochs
  insmod video_cirrus
  insmod all_video
}

load_video
set gfxpayload=keep
insmod gzio
insmod part_gpt
insmod ext2

serial --unit=0 --speed=19200 --word=8 --parity=no --stop=1
terminal_input serial console=tty0 console=ttyS0,19200
terminal_output serial console=tty0 console=ttyS0,19200

set timeout=60
### END /etc/grub.d/00_header ###

search --no-floppy --set=root -l &apos;CentOS 7 x86_64&apos;

### BEGIN /etc/grub.d/10_linux ###
menuentry &apos;Install CentOS 7&apos; --class fedora --class gnu-linux --class gnu --class os {
        linuxefi /images/pxeboot/vmlinuz inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet
        initrdefi /images/pxeboot/initrd.img
}
menuentry &apos;Test this media &amp;amp; install CentOS 7&apos; --class fedora --class gnu-linux --class gnu --class os {
        linuxefi /images/pxeboot/vmlinuz inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet
        initrdefi /images/pxeboot/initrd.img
}
submenu &apos;Troubleshooting --&amp;gt;&apos; {
        menuentry &apos;Install CentOS 7 in basic graphics mode&apos; --class fedora --class gnu-linux --class gnu --class os {
                linuxefi /images/pxeboot/vmlinuz inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet
                initrdefi /images/pxeboot/initrd.img
        }
        menuentry &apos;Rescue a CentOS system&apos; --class fedora --class gnu-linux --class gnu --class os {
                linuxefi /images/pxeboot/vmlinuz inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet
                initrdefi /images/pxeboot/initrd.img
        }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ isoinfo -d -i /tmp/CentOS-7-x86_64-Everything-2009.iso | grep &quot;Volume id&quot;
Volume id: CentOS 7 x86_64

$ isoinfo -d -i /tmp/CentOS-7-x86_64-Everything-2009.iso | grep Joliet
Joliet with UCS level 3 found

$ isoinfo -d -i /tmp/CentOS-7-x86_64-Everything-2009.iso | grep prepare
Data preparer id:

$ isoinfo -d -i /tmp/CentOS-7-x86_64-Everything-2009.iso | grep Torito
El Torito VD version 1 found, boot catalog is in sector 1430
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ blkid /tmp/CentOS-7-x86_64-Everything-2009.iso
/tmp/CentOS-7-x86_64-Everything-2009.iso: BLOCK_SIZE=&quot;2048&quot; 
  UUID=&quot;2020-11-02-15-15-23-00&quot; LABEL=&quot;CentOS 7 x86_64&quot; TYPE=&quot;iso9660&quot; 
  PTUUID=&quot;6b8b4567&quot; PTTYPE=&quot;dos&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
mkisofs \
-o /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso \
-b isolinux/isolinux.bin \
-J \
-R \
-l \
-c isolinux/boot.cat \
-no-emul-boot \
-boot-load-size 4 \
-boot-info-table \
-eltorito-alt-boot \
-e images/efiboot.img \
-no-emul-boot \
-graft-points \
-input-charset utf-8 \
-output-charset utf-8 \
-V &quot;CentOS 7 x86_64&quot; \
/mnt/customdvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo chown dusko:dusko /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ blkid /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso
/tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso: BLOCK_SIZE=&quot;2048&quot; 
  UUID=&quot;2022-04-02-08-31-52-00&quot; LABEL=&quot;CentOS 7 x86_64&quot; TYPE=&quot;iso9660&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Implant an MD5 checksum in the ISO image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ implantisomd5 /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check an MD5 checksum implanted by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implantisomd5&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ checkisomd5 --verbose /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso
[...]
The media check is complete, the result is: PASS.

It is OK to use this media.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a raw image of 60 GB in size. Using seek option creates 
a sparse file, which saves space.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ dd if=/dev/null of=xcatmn.img bs=1M seek=61440
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh xcatmn.img
-rw-rw-r-- 1 dusko dusko 60G Mar 2 08:36 xcatmn.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ command -V qemu-kvm; type qemu-kvm; which qemu-kvm; whereis qemu-kvm
/usr/bin/command: line 2: command: qemu-kvm: not found
/usr/bin/type: line 2: type: qemu-kvm: not found
qemu-kvm: Command not found.
qemu-kvm: /usr/lib64/qemu-kvm /etc/qemu-kvm /usr/libexec/qemu-kvm 
          /usr/share/qemu-kvm /usr/share/man/man1/qemu-kvm.1.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;install-centos-linux-79-on-qemu-guest-vm-image&quot;&gt;Install CentOS Linux 7.9 on QEMU Guest VM Image&lt;/h3&gt;

&lt;p&gt;Create a QEMU virtual machine with the following properties:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;for the VM’s disk use the 60GB image created in the previous step&lt;/li&gt;
  &lt;li&gt;configure the disk with the physical sector size of 4096 bytes (4 K)
(this is to meet the requirement of the system that this VM is going 
 to replicate)&lt;/li&gt;
  &lt;li&gt;4 GB RAM&lt;/li&gt;
  &lt;li&gt;virtual machine booting on the first serial device (ttyS0)&lt;/li&gt;
  &lt;li&gt;VM booting from the first CD-ROM/DVD drive&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-cdrom /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso \
-drive format=raw,file=xcatmn.img \
-global ide-hd.physical_block_size=4096 \
-m 4G \
-boot d \
-serial pty \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This opens QEMU monitor (aka QEMU console):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/1 (label serial0)
(qemu)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open a new shell and start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom&lt;/code&gt; to connect to the installer, whose 
output is redirected to the first serial device (ttyS0) to /dev/pts/1. 
(Baud rate of 19200 was configured earlier in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub.cfg&lt;/code&gt;, when you 
customized the installation DVD ISO image.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install CentOS 7.9 Linux.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[  OK  ] Started Media check on /dev/sr0.
[  OK  ] Started Show Plymouth Boot Screen.
[  OK  ] Reached target Paths.
[...]
Starting installer, one moment...
anaconda 21.48.22.159-1 for CentOS 7 started.
 * installation log files are stored in /tmp during the installation
 * shell is available on TTY2
 * when reporting a bug add logs from /tmp as separate text/plain attachments
15:43:19 Not asking for VNC because we don&apos;t have a network
=============================================================================
=============================================================================
Installation

 1) [x] Language settings                 2) [!] Time settings
        (English (United States))                (Timezone is not set.)
 3) [!] Installation source               4) [!] Software selection
        (Processing...)                          (Processing...)
 5) [!] Installation Destination          6) [x] Kdump
        (No disks selected)                      (Kdump is enabled)
 7) [ ] Network configuration             8) [!] Root password
        (Not connected)                          (Password is not set.)
 9) [!] User creation
        (No user will be created)
  Please make your choice from above [&apos;q&apos; to quit | &apos;b&apos; to begin installation |
  &apos;r&apos; to refresh]:

[anaconda] 1:main* 2:shell  3:log  4:storage-lo&amp;gt; Switch tab: Alt+Tab | Help: F1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2: Time settings &amp;gt; America/Vancouver timezone
NTP servers:
ntp1.serverinyourregion.org
ntp2.serverinyourregion.org

4: Software selection &amp;gt; Compute Node

5: Installation Destination
QEMU HARDDISK 60 GiB (sda) &amp;gt; Use All Space &amp;gt; LVM

7: Network configuration
Host name:  xcatmn.yourdomain.org

Wired (ens3)
Device configuration
DHCP
IPv6:  ignore
Nameservers:  208.67.222.222, 208.67.220.220  &amp;lt;&amp;lt;-- Use your nameservers 
[x] Connect automatically after reboot
[x] Apply configuration in installer

8: Root password

9: User creation
Create user
Fullname: dusko
Username: dusko
Use password
[X] Administrator
Groups: wheel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;=============================================================================
=============================================================================
Installation
  
 1) [x] Language settings                 2) [x] Time settings
        (English (United States))                (America/Vancouver timezone)
 3) [x] Installation source               4) [x] Software selection
        (Local media)                            (Compute Node)
 5) [x] Installation Destination          6) [x] Kdump
        (Automatic partitioning                  (Kdump is enabled)
        selected)                         8) [x] Root password
 7) [x] Network configuration                    (Password is set.)
        (Wired (ens3) connected)
 9) [x] User creation
        (Administrator dusko will be
        created)

Please make your choice from above [&apos;q&apos; to quit | &apos;b&apos; to begin installation |
&apos;r&apos; to refresh]:  b

=============================================================================
=============================================================================
Progress
Setting up the installation environment
.
Creating disklabel on /dev/sda
Creating xfs on /dev/sda1
Creating lvmpv on /dev/sda2
Creating swap on /dev/mapper/centos-swap
Creating xfs on /dev/mapper/centos-home
Creating xfs on /dev/mapper/centos-root
.
Running pre-installation scripts
.
Starting package installation process
Preparing transaction from installation source
Installing libgcc (1/483)
[...]
Installing iwl6000g2a-firmware (482/483)
Installing words (483/483)
Performing post-installation setup tasks
Installing boot loader
.
Performing post-installation setup tasks

Configuring installed system
Writing network configuration
Creating users
Configuring addons
Generating initramfs
Running post-installation scripts
.
    Use of this product is subject to the license agreement found at
      /usr/share/centos-release/EULA

     Installation complete.  Press return to quit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Press Ctr+b 2&lt;/p&gt;

&lt;p&gt;Power off the virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[anaconda root@localhost ~]# poweroff

[  OK  ] Started Show Plymouth Power Off Screen.
[  OK  ] Stopped Anaconda.
[  OK  ] Stopped target Anaconda System Services.
[...]
[  OK  ] Reached target Shutdown.
dracut Warning: Killing all remaining processes
Powering off.
[ 1909.085711] Power down.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not shown here:  QEMU console (in the first shell) automatically exits.&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h4&gt;

&lt;p&gt;[¹] IP Forwarding and libvirt Networking&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;libvirt’s default network configures an isolated bridge device to be
used by guest domains.  This default bridge creates a private network
for the virtual machines but does not connect that private network to
your physical network.  The simplest way to complete that connection is
to enable IP Forwarding in the kernel.  You can quickly enable IP
Forwarding using sysctl:&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sysctl -w net.ipv4.ip_forward=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;[²] A library providing a simple virtualization API - a C toolkit to 
interact with the virtualization capabilities of Linux. It includes the 
libvrtd server exporting the virtualization support.&lt;/p&gt;

&lt;p&gt;[³]  From &lt;a href=&quot;https://www.qemu.org/2018/05/31/nic-parameter/&quot;&gt;QEMU’s new -nic command line option&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The legacy -net option&lt;/p&gt;

  &lt;p&gt;QEMU’s initial way of configuring the network for the guest was the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net&lt;/code&gt;
option.  The emulated NIC hardware can be chosen with the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net nic,model=xyz,...&lt;/code&gt; parameter, and the host back-end with the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net &amp;lt;backend&amp;gt;,...&lt;/code&gt; parameter (e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net user&lt;/code&gt; for the SLIRP back-end).
However, the emulated NIC and the host back-end are &lt;em&gt;not directly connected&lt;/em&gt;.
They are rather both connected to an emulated &lt;strong&gt;hub&lt;/strong&gt; (called “vlan” in older
versions of QEMU).  Therefore, if you start QEMU with
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-net nic,model=e1000 -net user -net nic,model=virtio -net tap&lt;/code&gt; for example,
you get a setup where all the front-ends and back-ends are connected
together via a hub.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;(All references retrieved on Apr 2, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/523245/whats-the-function-of-virbr0-and-virbr0-nic&quot;&gt;What’s the function of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;virbr0-nic&lt;/code&gt;?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://listman.redhat.com/archives/libvirt-users/2012-September/msg00038.html&quot;&gt;[libvirt-users] virtual networking - virbr0-nic interface&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/378264/what-is-virtual-bridge-with-nic-in-the-end-of-name/444863#444863&quot;&gt;What is virtual bridge with -nic in the end of name&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://code.lardcave.net/2019/07/20/1/&quot;&gt;Bridged networking with qemu on Linux&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/title/Network_bridge&quot;&gt;Network bridge - Arch Wiki&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.linuxfoundation.org/networking/bridge&quot;&gt;Bridge - The Linux Foundation Wiki&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://bsdwiki.reedmedia.net/wiki/networking_qemu_virtual_bsd_systems.html&quot;&gt;Networking QEMU Virtual BSD Systems&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.christophersmart.com/2016/08/31/configuring-qemu-bridge-helper-after-access-denied-by-acl-file-error/&quot;&gt;Configuring QEMU bridge helper after “access denied by acl file” error&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.linux-kvm.org/page/Networking&quot;&gt;Configuring Guest Networking - KVM&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Guest (VM) networking in kvm is the same as in qemu, so it is possible 
to refer to other documentation about networking in qemu.  This page will 
try to explain how to configure the most frequent types of networking needed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://www.qemu.org/2018/05/31/nic-parameter/&quot;&gt;QEMU’s new -nic command line option&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.cyberciti.biz/faq/centos-8-add-network-bridge-br0-with-nmcli-command/&quot;&gt;CentOS 8 add network bridge (br0) with nmcli command&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.cyberciti.biz/faq/how-to-add-network-bridge-with-nmcli-networkmanager-on-linux/&quot;&gt;How to add network bridge with nmcli (NetworkManager) on Linux&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/discussions/5996181&quot;&gt;Qemu bridge/tap adapter - Red Hat Customer Portal&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/configuring-virtual-machine-network-connections_configuring-and-managing-virtualization#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections&quot;&gt;Virtual networking in bridged mode&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/configuring-a-network-bridge_configuring-and-managing-networking#configuring-a-network-bridge-using-nmcli-commands_configuring-a-network-bridge&quot;&gt;Configuring a network bridge using nmcli commands&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/extremecoders-re/e8fd8a67a515fee0c873dcafc81d811c&quot;&gt;Setting up Qemu with a tap interface&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bbs.archlinux.org/viewtopic.php?id=261207&quot;&gt;[SOLVED] KVM/QEMU - Ethernet will not bridge&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ahelpme.com/linux/howto-do-qemu-full-virtualization-with-bridged-networking/&quot;&gt;Howto do QEMU full virtualization with bridged networking&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://qemu.readthedocs.io/en/latest/system/devices/net.html&quot;&gt;Network emulation - QEMU Documentation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stty.io/2019/05/13/qemu-vm-wireguard-vpn-tun-tap-networking/&quot;&gt;Setting up TUN/TAP networking for QEMU VM’s (and bonus wireguard)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.linux-kvm.org/page/Networking&quot;&gt;Configuring Guest Networking - KVM Documentation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.kaizou.org/2018/06/qemu-bridge.html&quot;&gt;Bridging two Qemu guests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.gnu.org/archive/html/qemu-discuss/2014-06/msg00059.html&quot;&gt;[Qemu-discuss] Using multiple network interfaces on a guest&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sat, 02 Apr 2022 08:11:22 -0700</pubDate>
        <link>http://localhost:4000/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/networking/2022/04/02/qemu-networking.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/networking/2022/04/02/qemu-networking.html</guid>
        
        
        <category>howto</category>
        
        <category>virtualization</category>
        
        <category>rs232serial</category>
        
        <category>cli</category>
        
        <category>terminal</category>
        
        <category>shell</category>
        
        <category>console</category>
        
        <category>sysadmin</category>
        
        <category>server</category>
        
        <category>hardware</category>
        
        <category>networking</category>
        
      </item>
    
      <item>
        <title>Configure IP Addressing with NetworkManager (nmcli) in RHEL 8/CentOS 8</title>
        <description>&lt;p&gt;OS: RHEL 8 &lt;br /&gt;
Shell:  bash&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;static-addressing&quot;&gt;Static Addressing&lt;/h3&gt;

&lt;p&gt;For example, create a new connection named ‘eno1’. &lt;br /&gt;
Specify a name for the connection profile (con-name), the interface the 
profile should be applied to (ifname), the IP address (ip4) and optionally, 
the gateway (gw4). The IP address must be specified with the network prefix. 
The connection profile name can match the interface name. 
The connection will be activated as soon as it is created.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection add \
con-name eno1 ifname eno1 type ethernet \
ip4 123.12.23.34/24 gw4 123.12.23.254
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set up DNS servers. For example, use recursive nameservers by OpenDNS, 
208.67.222.222, 208.67.220.220.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection modify eno1 \ 
ipv4.dns &quot;208.67.222.222,208.67.220.220&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:  Some other options that you can use for your DNS resolver:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Cloudflare’s public DNS server 1.1.1.1&lt;/li&gt;
  &lt;li&gt;Google’s DNS servers 4.4.8.8, 4.4.4.4, 8.8.8.8&lt;/li&gt;
  &lt;li&gt;In Canada, &lt;a href=&quot;https://www.cira.ca/cybersecurity-services/canadian-shield&quot;&gt;CIRA Canada Shield&lt;/a&gt;:
    &lt;ul&gt;
      &lt;li&gt;Private - DNS resolution only: 149.112.121.10, 149.112.122.10&lt;/li&gt;
      &lt;li&gt;Protected - Malware and phishing protection: 149.112.121.20, 149.112.122.20&lt;/li&gt;
      &lt;li&gt;Family - Protected + blocking offensive content: 149.112.121.30, 149.112.122.30&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection modify eno1 ipv4.method manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli connection reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nmcli connection show
NAME  UUID               TYPE      DEVICE 
eno1  4d928341-........  ethernet  eno1   
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm the system is using NetworkManager.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl restart NetworkManager.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl status NetworkManager.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo nmcli networking connectivity check
full
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Sun, 27 Mar 2022 09:48:33 -0700</pubDate>
        <link>http://localhost:4000/rhel/centos/linux/networking/howto/2022/03/27/rhel8-centos8-linux-setup-static-ip-address.html</link>
        <guid isPermaLink="true">http://localhost:4000/rhel/centos/linux/networking/howto/2022/03/27/rhel8-centos8-linux-setup-static-ip-address.html</guid>
        
        
        <category>rhel</category>
        
        <category>centos</category>
        
        <category>linux</category>
        
        <category>networking</category>
        
        <category>howto</category>
        
      </item>
    
      <item>
        <title>HPC with xCAT, PBS/TORQUE, Gaussian and WebMO</title>
        <description>&lt;p&gt;High Performance Computing (HPC) with xCAT (Extreme Cloud Administration 
Toolkit), PBS (Portable Batch System) with TORQUE (Terascale Open-source 
Resource and QUEue Manager), using Gaussian software package via WebMO&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Add  merging  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/passwd&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/shadow&lt;/code&gt;,
                          &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/group&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/gshadow&lt;/code&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;About xCAT&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;xCAT is a collection of mostly script based tools to build, configure, 
administer, and maintain computing clusters.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;http://xcat.org/index.html#quickstart&quot;&gt;xCAT.org&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;xCAT is an open-source tool for automating deployment, scaling, and 
management of bare metal servers and virtual machines developed by IBM.&lt;/p&gt;

  &lt;p&gt;xCAT is an official IBM High Performance Computing (HPC) cluster
management tool.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Scenario:&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;New server hardware, Lenovo ThinkSystem SR530 - 7X08 (1U rack server),
has just been installed in the existing cluster environment.&lt;/li&gt;
  &lt;li&gt;The existing cluster consists of 28 CNs (compute nodes).&lt;/li&gt;
  &lt;li&gt;The cluster is on a private Ethernet network.  The address space is 
non-routable (unroutable) so the compute nodes are “hidden” from 
a routable network, allowing you to separate your cluster logically 
from a public network.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;About the cluster environment in this scenario:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;All of the nodes use the same hardware and the same operating system.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Tasks:&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;On the new Lenovo server:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Create a guest VM to be used as the new MN (management node)
    &lt;ul&gt;
      &lt;li&gt;On the guest VM (that is, the new MN):
        &lt;ul&gt;
          &lt;li&gt;Install the latest xCAT version&lt;/li&gt;
          &lt;li&gt;Show examples of managing IBM Blade Center&lt;/li&gt;
          &lt;li&gt;Show examples of related xCAT tables for the configuration&lt;/li&gt;
          &lt;li&gt;Remotely upgrade the OS on all CNs (computing nodes)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Where:&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Computer cluster = a set of computers that work together so they can be 
viewed as a single system.  Computer clusters have each node (computer
used as a server) set to perform the same task.&lt;/p&gt;

&lt;p&gt;MN   = Management Node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;) 
(aka head node, master node or controller node) &lt;br /&gt;
HN   = Head Node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt;)  &lt;br /&gt;
CN   = Compute Node&lt;br /&gt;
xCAT = Extreme Cluster Administration Toolkit &lt;br /&gt;
HPC  = High Performance Computing &lt;br /&gt;
BMC  = Baseboard Management Controller  &lt;br /&gt;
IMM  = Integrated Management Module - aka as only MM (Management Module) &lt;br /&gt;
AMM  = Advanced Management Module &lt;br /&gt;
IPMI = Intelligent Platform Management Interface &lt;br /&gt;
SNMP = Simple Network Management Protocol &lt;br /&gt;
BC   = BladeCenter (IBM BladeCenter line of servers)  &lt;br /&gt;
SoL (also SOL) = Serial over LAN&lt;br /&gt;
RM   = Resource Manager (also called a job scheduler)  &lt;br /&gt;
PBS =  Portable Batch System &lt;br /&gt;
Fast Ethernet = 100 Mbps  &lt;br /&gt;
Gigabit Ethernet (GbE or 1 GigE) = 1,000 Mbps (1 Gbps; that is Gigabit per second)&lt;/p&gt;

&lt;p&gt;F1 Setup = IBM BladeCenter BIOS Setup (a.k.a. System/UEFI F1
Setup) - For example:
&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.hs21.doc/hs21_install_ug.pdf&quot;&gt;BladeCenter HS21 Installation and User’s Guide&lt;/a&gt;, page 39 (Retrieved on Mar 20, 2022): “Using the Configuration/Setup Utility program”:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;When the Configuration/Setup utility message appears, press F1.  […]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Operating systems and shells:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;MN: RHEL 8.5  (Red Hat Enterprise Linux release 8.5 (Ootpa)), Shell: tcsh&lt;/li&gt;
  &lt;li&gt;CNs: Upgrading from CentOS 5.2 to CentOS Linux 7.9, Shell: bash&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In the following examples, IP addresses of network interfaces 
connected to the public network/Internet are from network subnet
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;123.12.23.0&lt;/code&gt;.  Replace those IP addresses with IP addresses of 
external interfaces in your environment.  Similarly, replace 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;123.12.23.254&lt;/code&gt; with the broadcast address for external network 
interfaces in your environment.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Configuration:&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Here is the hardware configuration in the environment:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2 x IBM BladeCenter H Chassis
    &lt;ul&gt;
      &lt;li&gt;Each chassis has 14 x IBM HS21 Blade Servers (Blades) - total
of 28 compute nodes&lt;/li&gt;
      &lt;li&gt;Each chassis has the IBM BladeCenter Advanced Management Module (AMM)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;1 x IBM x3550 xServer (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xmgmt.mydomain.com&lt;/code&gt;, old MN, kept temporary)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Newly installed server hardware: &lt;a href=&quot;https://datacentersupport.lenovo.com/de/en/products/servers/thinksystem/sr530/7x08&quot;&gt;Lenovo ThinkSystem SR530 - Type (Model) 7X08 - Product Home Page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here is the network configuration in the environment:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;eno1: Public-facing NIC.  External network (aka public VLAN): &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;123.12.23.x&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;eno2: Cluster-facing NIC.  Internal network (aka xCAT VLAN):  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.x&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Management VLAN: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.x&lt;/code&gt; (BC MM, BC AMM, BC LAN switches)&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;content&quot;&gt;Content:&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Create a QEMU VM Guest&lt;/li&gt;
  &lt;li&gt;Configure the Guest with Two NICs in Two Separate Networks Connected 
to Two Bridges on Host&lt;/li&gt;
  &lt;li&gt;Prepare the Management Node (MN)&lt;/li&gt;
  &lt;li&gt;Install and Configure xCAT (on the MN)&lt;/li&gt;
  &lt;li&gt;Stage 1: Add Your First Node and Control It with Out-Of-Band BMC Interface&lt;/li&gt;
  &lt;li&gt;Stage 2: Add Your Second Node and Configure It for SOL (Serial Over LAN) 
Operation (aka Text Mode Console)&lt;/li&gt;
  &lt;li&gt;Stage 3: Prepare Postscripts and Postbootscripts&lt;/li&gt;
  &lt;li&gt;Tests
    &lt;ul&gt;
      &lt;li&gt;Submit a Test Job to a Specific Node (Compute Node)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Setup NFS Server on the Head Node (HN) Running CentOS 8/RHEL 8
    &lt;ul&gt;
      &lt;li&gt;Configure Firewall Rules for NFS Server on CentOS 8/RHEL 8&lt;/li&gt;
      &lt;li&gt;Set Up NFS Client on Compute Nodes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;create-a-qemu-vm-guest&quot;&gt;Create a QEMU VM Guest&lt;/h2&gt;

&lt;p&gt;This VM will be the xCAT MN (management node).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Create QEMU VM guest on the new Lenovo server hardware&lt;/strong&gt; &lt;br /&gt;
  (This VM will be the new &lt;strong&gt;MN&lt;/strong&gt;)  &lt;br /&gt;
&lt;strong&gt;Note:&lt;/strong&gt;  I previously installed RHEL 8.5 on the new Lenovo server&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Install the most recent CentOS Linux version on the QEMU VM guest&lt;/strong&gt;&lt;br /&gt;
  (At the time of this writing:  CentOS 7.9 Linux)
    &lt;ul&gt;
      &lt;li&gt;Download and use CentOS DVD ISO image with everything &lt;br /&gt;
(file name: CentOS-7-x86_64-Everything-2009.iso)&lt;/li&gt;
      &lt;li&gt;Install CentOS 7.9 Linux in &lt;strong&gt;text mode&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In order to conserve the limited bandwidth available, ISO images are not 
downloadable from mirror.centos.org.  To find a mirror closest to you in 
your region, visit the CentOS Project’s website, 
&lt;a href=&quot;https://centos.org/&quot;&gt;https://centos.org/&lt;/a&gt;.  Navigate to
Download &amp;gt; CentOS LInux &amp;gt; 7-2009 &amp;gt; x86_64.  For my region, the first listed 
mirror wtth the ISO images available was:&lt;br /&gt;
http://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/.&lt;/p&gt;

&lt;p&gt;Follow these instructions: 
&lt;a href=&quot;/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html&quot;&gt;Customize CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console and Test the Image with QEMU&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Changes that you need to make in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isolinux.cfg&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub.cfg&lt;/code&gt; are shown below.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
--unified=0 \
/mnt/dvd/isolinux/isolinux.cfg \
/mnt/customdvd/isolinux/isolinux.cfg
--- /mnt/dvd/isolinux/isolinux.cfg      2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/isolinux.cfg        2022-03-20 08:59:36.911058507 -0700
@@ -64 +64 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet console=tty0 console=ttyS0,19200
@@ -70 +70 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet console=tty0 console=ttyS0,19200
@@ -86 +86 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet console=tty0 console=ttyS0,19200
@@ -96 +96 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet console=tty0 console=ttyS0,19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
--unified=0 \
/mnt/dvd/EFI/BOOT/grub.cfg \
/mnt/customdvd/EFI/BOOT/grub.cfg
--- /mnt/dvd/EFI/BOOT/grub.cfg  2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/EFI/BOOT/grub.cfg    2022-03-20 09:05:58.348907158 -0700
@@ -16,0 +17,4 @@
+serial --unit=0 --speed=19200 --word=8 --parity=no --stop=1
+terminal_input serial console=tty0 console=ttyS0,19200
+terminal_output serial console=tty0 console=ttyS0,19200
+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Continue following the instructions on the same page
(&lt;a href=&quot;/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html&quot;&gt;Customize CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console and Test the Image with QEMU&lt;/a&gt;) up to the point of creating a raw image.
Then, instead of creating an image with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;truncate&lt;/code&gt; of 272 GB in size
(as in instructions on that page), create a raw image of 80 GB in size. 
Using seek option creates a sparse file, which saves space.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ dd if=/dev/null of=xcatmn.img bs=1M seek=81920
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start CentOS 7.9 Linux installation with this command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-cdrom /tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso \
-drive format=raw,file=xcatmn.img \
-global ide-hd.physical_block_size=4096 \
-m 4G \
-boot d \
-enable-kvm \
-serial pty \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/2 (label serial0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From QEMU monitor’s output above, note where qemu redirected char
device.  In this case: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/2&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Open another shell instance, start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom&lt;/code&gt; and connect to the first 
serial device where QEMU redirected char device (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/2&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install CentOS Linux 7.9.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;==========================================================================
==========================================================================
Installation

 1) [x] Language settings                 2) [!] Time settings
        (English (United States))                (Timezone is not set.)
 3) [!] Installation source               4) [!] Software selection
        (Processing...)                          (Processing...)
 5) [!] Installation Destination          6) [x] Kdump
        (No disks selected)                      (Kdump is enabled)
 7) [ ] Network configuration             8) [!] Root password
        (Not connected)                          (Password is not set.)
 9) [!] User creation
        (No user will be created)
  Please make your choice from above [&apos;q&apos; to quit | &apos;b&apos; to begin installation |
  &apos;r&apos; to refresh]: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2) Time settings &amp;gt; Set timezone &amp;gt; America &amp;gt; Vancouver  &amp;lt;-- Use your timezone
2) Time settings &amp;gt; Configure NTP servers &amp;gt; 
     Add NTP server &amp;gt; ntp1.serverinyourregion.org
     Add NTP server &amp;gt; ntp2.serverinyourregion.org   
4) Software selection &amp;gt; 3) Infrastructure Server
5) Installation Destination &amp;gt; QEMU HARDDISK: 80 GiB (sda) &amp;gt; Use All Space &amp;gt; LVM
7) Network configuration &amp;gt; 
     Set host name &amp;gt; xcatmn.mydomain.com
     Configure device ens3 &amp;gt;
        IPv4 address or &quot;dhcp&quot; for DHCP &amp;gt; dhcp
     IPv6 address &amp;gt; ignore
     Nameservers &amp;gt; 208.67.222.222,208.67.220.220  &amp;lt;-- Will list your nameservers
     Connect automatically after reboot
     Apply configuration in installer
8) Root password &amp;gt; 
     Password: 
     Password (confirm): 
9) User creation &amp;gt; 
     Create user &amp;gt; 
     Fullname &amp;gt;                                   &amp;lt;-- Enter your name 
     Username &amp;gt;                                   &amp;lt;-- Enter your username 
     Use password &amp;gt;
     Password &amp;gt;
       Password:
       Password (confirm):
     [X] Administrator &amp;gt; Groups wheel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;==========================================================================
==========================================================================
Installation

 1) [x] Language settings                 2) [x] Time settings
        (English (United States))                (America/Vancouver timezone)
 3) [x] Installation source               4) [x] Software selection
        (Local media)                            (Infrastructure Server)
 5) [x] Installation Destination          6) [x] Kdump
        (Automatic partitioning                  (Kdump is enabled)
        selected)                         8) [x] Root password
 7) [x] Network configuration                    (Password is set.)
        (Wired (ens3) connected)
 9) [x] User creation
        (Administrator dusko will be
        created)
  Please make your choice from above [&apos;q&apos; to quit | &apos;b&apos; to begin installation |
  &apos;r&apos; to refresh]: b
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Progress
Setting up the installation environment
[...]
Installing libgcc (1/483)
Installing grub2-common (2/483)
Installing centos-release (3/483)
Installing setup (4/483)
Installing filesystem (5/483)
[...]

   Installation complete.  Press return to quit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the CentOS 7.9 Linux installer, to switch to an interactive shell 
prompt with root privileges, press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+b&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt; (two characters: 
ctrl-b, and ‘2’).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[anaconda root@localhost ~]#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Power off the VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[anaconda root@localhost ~]# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;** &lt;strong&gt;TIP:&lt;/strong&gt; **  If you cannot exit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom&lt;/code&gt; with CTRL-X, first press Esc
                and then CTRL-X.&lt;/p&gt;

&lt;p&gt;To test and to confirm that the installed CentOS Linux 
really uses the first serial device ttyS0 (COM1) for a console,
start the QEMU guest VM by specifying the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-serial pty&lt;/code&gt; option.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-enable-kvm \
-serial pty \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/2 (label serial0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open another shell instance, start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom&lt;/code&gt; and connect to the first 
serial device where QEMU redirected char device, in this case, /dev/pts/2.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you see early boot messages/kernel log messages? If yes, that confirms
that the installed CentOS Linux uses the first serial device ttyS0 (COM1)
for a console.&lt;/p&gt;

&lt;p&gt;Log in to the guest virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

xcatmn login: root
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At this point (in addition to the virtual loopback adapter
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lo0&lt;/code&gt; &lt;a href=&quot;#footnotes&quot;&gt;²&lt;/a&gt; &lt;a href=&quot;#footnotes&quot;&gt;³&lt;/a&gt;), the guest VM has one Ethernet 
adapter, a.k.a. NIC (network interface controller or network interface 
card).  The name of that NIC that the OS (CentOS Linux) gave it to in 
this case is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ens3&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli device status
DEVICE  TYPE      STATE      CONNECTION
ens3    ethernet  connected  ens3
lo      loopback  unmanaged  --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli connection show
NAME  UUID                                  TYPE      DEVICE
ens3  0bb2148d-...........................  ethernet  ens3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here, the guest is connected to the host via SLiRP (user networking), 
where the assigned IP address starts from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10.0.2.15&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip -4 address show | grep inet
inet 127.0.0.1/8 scope host lo
inet 10.0.2.15/24 brd 10.0.2.255 scope global noprefixroute dynamic ens3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Show table routes (display the kernel routing tables):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip route
default via 10.0.2.2 dev ens3 proto dhcp metric 100 
10.0.2.0/24 dev ens3 proto kernel scope link src 10.0.2.15 metric 100 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, you can display the routing tables with the legacy
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;netstat(8)&lt;/code&gt; tool:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# netstat -r
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         gateway         0.0.0.0         UG        0 0          0 ens3
10.0.2.0        0.0.0.0         255.255.255.0   U         0 0          0 ens3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Power off the guest VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;configure-the-qemu-guest-vm-with-two-nics-in-two-separate-networks-connected-to-two-bridges-on-host&quot;&gt;Configure the QEMU Guest VM with Two NICs in Two Separate Networks Connected to Two Bridges on Host&lt;/h2&gt;

&lt;p&gt;Start the guest VM. 
This time don’t use the serial device for console; rather, use only the 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-nographic&lt;/code&gt; option.&lt;/p&gt;

&lt;p&gt;The host is connected to a public network &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;123.12.23.x&lt;/code&gt; (the network
contains a DHCP server).  The guest VM is connected to that network via
the first bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br0&lt;/code&gt; and obtains a dynamic IP address.&lt;/p&gt;

&lt;p&gt;The host is also connected to another, private, cluster-facing
network, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.x&lt;/code&gt;.  The guest VM is connected to that
network via the second bridge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;br1&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br0&quot;,id=hn0 \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br1&quot;,id=hn1 \
-device virtio-net-pci,netdev=hn0 \
-device virtio-net-pci,netdev=hn1 \
-nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log into the guest OS.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

xcatmn login: root
Password: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli device status
DEVICE  TYPE      STATE                                  CONNECTION         
eth0    ethernet  connected                              Wired connection 1 
eth1    ethernet  connecting (getting IP configuration)  Wired connection 2 
lo      loopback  unmanaged                              --                 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli connection show 
NAME                UUID                                  TYPE      DEVICE 
Wired connection 2  7ef26cf9-...........................  ethernet  eth1   
Wired connection 1  a9f5c51d-...........................  ethernet  eth0   
ens3                687a79e8-...........................  ethernet  --     
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip -4 address show | grep inet
inet 127.0.0.1/8 scope host lo
inet 123.12.23.235/24 brd 123.12.23.255 scope global noprefixroute dynamic eth0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip route
default via 123.12.23.254 dev eth0 proto dhcp metric 100
123.12.23.0/24 dev eth0 proto kernel scope link src 123.12.23.235 metric 100
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# netstat -r
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         gateway         0.0.0.0         UG        0 0          0 eth0
123.12.23.0     0.0.0.0         255.255.255.0   U         0 0          0 eth0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The name given by the OS (CentOS Linux) to the network interface 
controller/network interface card (NIC) connected to the &lt;strong&gt;internal&lt;/strong&gt; 
(private/cluster-facing/xCAT, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.x&lt;/code&gt;) network is  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Set the IP address of that NIC to &lt;strong&gt;static&lt;/strong&gt; and assign it an IP address
from within &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.x&lt;/code&gt; network.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli connection show &apos;Wired connection 2&apos; | grep &apos;ipv4.method&apos;
ipv4.method:                            auto
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli \
connection modify &apos;Wired connection 2&apos; \
ip4 192.168.80.220/24 \
ipv4.method manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The name given by the OS (CentOS Linux) to the network interface 
controller/network interface card (NIC) connected to the &lt;strong&gt;public&lt;/strong&gt; 
(external/internet-facing, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;123.12.23.x&lt;/code&gt;) network is  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth0&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Set the IP address of that NIC to &lt;strong&gt;static&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli connection show &apos;Wired connection 1&apos; | grep &apos;ipv4.method&apos;
ipv4.method:                            auto
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;br /&gt;
In the next command, replace IP addresses in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nmcli&lt;/code&gt; connection’s
properties &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip4&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gw4&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ipv4.dns&lt;/code&gt; with IP addresses for those
properties in your environment.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli \
connection modify &apos;Wired connection 1&apos; \
ip4 123.12.23.235/24 gw4 123.12.23.254 \ 
ipv4.dns &apos;208.67.222.222,208.67.220.220&apos; \   &amp;lt;-- Use your DNS servers
ipv4.method manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli \
connection modify &apos;Wired connection 1&apos; \
connection.id eth0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli \
connection modify &apos;Wired connection 2&apos; \
connection.id eth1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Restart NetworkManager service.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart NetworkManager.service 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If that doesn’t refresh routing, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nmcli(1)&lt;/code&gt; to restart networking.
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networking off&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networking on&lt;/code&gt; disables and then enables
networking control by NetworkManager.  All interfaces managed by
NetworkManager are deactivated when networking is disabled.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli networking off
# nmcli networking on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check network connectivity state. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;check&lt;/code&gt; argument tells
NetworkManager to re-check the connectivity.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli networking connectivity check
full
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip route
default via 123.12.23.254 dev eth0 proto static metric 100
123.12.23.0/24 dev eth0 proto kernel scope link src 123.12.23.235 metric 100
192.168.80.0/24 dev eth1 proto kernel scope link src 192.168.80.220 metric 101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli device status
DEVICE  TYPE      STATE      CONNECTION 
eth0    ethernet  connected  eth0       
eth1    ethernet  connected  eth1       
lo      loopback  unmanaged  --         
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nmcli connection show
NAME  UUID                                  TYPE      DEVICE 
eth0  a9f5c51d-...........................  ethernet  eth0   
eth1  7ef26cf9-...........................  ethernet  eth1   
ens3  687a79e8-...........................  ethernet  --     
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test connection to a public host.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -c2 freebsd.org
PING freebsd.org (96.47.72.84) 56(84) bytes of data.
64 bytes from wfe0.nyi.freebsd.org (96.47.72.84): icmp_seq=1 ttl=50 time=76.1 ms
64 bytes from wfe0.nyi.freebsd.org (96.47.72.84): icmp_seq=2 ttl=50 time=76.1 ms
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test internal network connection.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -c2 192.168.80.210
PING 192.168.80.210 (192.168.80.210) 56(84) bytes of data.
64 bytes from 192.168.80.210: icmp_seq=1 ttl=64 time=0.477 ms
64 bytes from 192.168.80.210: icmp_seq=2 ttl=64 time=0.303 ms
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dnf(8)&lt;/code&gt;. (From its man page:  DNF  is  the  next upcoming major 
version of YUM, a package manager for RPM-based Linux distributions.
It roughly maintains CLI compatibility with YUM and defines a strict API
for extensions and plugins.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# yum install dnf dnf-data dnf-plugins-core
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
In case of a bit older IBM blade servers, instead of &lt;strong&gt;AMM&lt;/strong&gt;
(Advanced Management Module), chassis for older IBM blade servers
would have &lt;strong&gt;MM&lt;/strong&gt; (Management Module).  In that case you would need
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;telnet&lt;/code&gt; to access the &lt;strong&gt;MM&lt;/strong&gt; and you would need to install it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# dnf install telnet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;prepare-the-management-node-mn&quot;&gt;Prepare the Management Node (MN)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  After the real cluster setup is finished,
change references to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xmgmt&lt;/code&gt; (with IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.200&lt;/code&gt;) 
to the new(ly) installed server (with IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;):&lt;/p&gt;

&lt;p&gt;The cluster was partially upgraded in summer of 2021, and here’s the list 
of those upgrades:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The WebMO server hardware was replaced.  It was an IBM blade server (HS20)
in a separate IBM chassis. &lt;br /&gt;
The new server hardware is Lenovo ThinkSystem
SR530 - Type (Model) 7X08, with hostname &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt;, while the
“internal” hostname (for PBS software, TORQUE Resource Manager) is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mgmt&lt;/code&gt;,
and the IP address on the cluster-facing network is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;.
    &lt;ul&gt;
      &lt;li&gt;This server has multiple roles:
        &lt;ul&gt;
          &lt;li&gt;webserver (for running WebMO)&lt;/li&gt;
          &lt;li&gt;storage server, with a shared directory across the nodes (via NFS)&lt;/li&gt;
          &lt;li&gt;host for the majority of MN software (everything except DHCP server)
            &lt;ul&gt;
              &lt;li&gt;&lt;strong&gt;Note:&lt;/strong&gt; will move DHCP server to the new Lenove server later&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;The OS on this server (“WebMO server”) was updated from RHEL 5.2 to RHEL 8.4.&lt;/li&gt;
  &lt;li&gt;The storage server a.k.a. NFS server (named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xmgmtnfs.mydomain.com&lt;/code&gt;) 
was moved from a separate legacy IBM SAN array to the new Lenovo server 
(Lenovo ThinkSystem SR530 - 7X08).  The new storage is a 6TB ZFS shared 
to CNs (compute nodes) via NFS.  The old hostname &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xmgmtnfs.mydomain.com&lt;/code&gt; 
was retired.&lt;/li&gt;
  &lt;li&gt;All PBS &lt;strong&gt;managment&lt;/strong&gt; software and the both PBS management services
(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_server&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_sched&lt;/code&gt;) were moved to the new server.
    &lt;ul&gt;
      &lt;li&gt;The old xCAT (on the old MN, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xmgmt.mydomain.com&lt;/code&gt;) was temporarily kept
for managing BMC (two IBM chassis with 14 blades in each so 28 blades
in total)&lt;/li&gt;
      &lt;li&gt;The old MN (hostname: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xmgmt.mydomain.com&lt;/code&gt;, IP address on the
cluster-facing network: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.200&lt;/code&gt;) is kept and temporarily
used as a DHCP server.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;configure-dns-settings&quot;&gt;Configure DNS Settings&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; The hostname was set during the OS installation on the guest VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# hostname
xcatmn.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/hostname 
xcatmn.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/resolv.conf&lt;/code&gt; with DNS settings and make sure that the 
node can visit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;github&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcat&lt;/code&gt; official website.&lt;/p&gt;

&lt;p&gt;Configure any domain search strings and nameservers in 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/resolv.conf&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/resolv.conf 
# Generated by NetworkManager
search xcatmn.mydomain mydomain.com 
nameserver 208.67.222.222   &amp;lt;-- Will show your DNS server 1
nameserver 208.67.220.220   &amp;lt;-- Will show your DNS server 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Verify that your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file contains entries for all of your
management node interfaces.  Manually add any that are missing.&lt;/p&gt;

&lt;p&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn&lt;/code&gt; into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;192.168.80.220 xcatmn&quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.80.220 xcatmn xcatmn.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Power off the guest virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start and run the guest VM in the background by using QEMU’s
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-daemonize&lt;/code&gt; option.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br0&quot;,id=hn0 \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br1&quot;,id=hn1 \
-device virtio-net-pci,netdev=hn0 \
-device virtio-net-pci,netdev=hn1 \
-daemonize
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ps aux | grep -v grep | grep qemu
dusko     681555 94.6  2.1 4809628 678648 ?      Sl   15:39   0:21 /usr/libexec/qemu-kvm -drive format=raw,file=xcatmn.img -m 4G -netdev tap,helper=/usr/libexec/qemu-bridge-helper --br=br0,id=hn0 -netdev tap,helper=/usr/libexec/qemu-bridge-helper --br=br1,id=hn1 -device virtio-net-pci,netdev=hn0 -device virtio-net-pci,netdev=hn1 -daemonize
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;disable-selinux&quot;&gt;Disable SELinux&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed -i.bkp &apos;s/^SELINUX=.*$/SELINUX=disabled/&apos; /etc/selinux/config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff \
--unified=0 \
/etc/selinux/config.bkp \
/etc/selinux/config
--- /etc/selinux/config.bkp     2022-03-30 20:40:36.167508553 -0700
+++ /etc/selinux/config 2022-03-03 20:43:28.580246360 -0700
@@ -7 +7 @@
-SELINUX=enforcing
+SELINUX=disabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A reboot is the most convenient way to make the disabling of SELinux 
take effect so if you want, you can now reboot and log in again.&lt;/p&gt;

&lt;h2 id=&quot;install-and-configure-xcat&quot;&gt;Install and Configure xCAT&lt;/h2&gt;

&lt;p&gt;Based on &lt;a href=&quot;https://xcat-docs.readthedocs.io/en/latest/guides/get-started/quick_start.html&quot;&gt;xCAT Quick Start Guide&lt;/a&gt; (retrieved on Mar 20, 2022) and then slightly modified.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Prerequisites and Assumptions&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Assume there are two servers named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; and 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101.mydomain.com&lt;/code&gt;.  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; is going 
to be the MN (management node) [you can proably call it an 
“xCAT server” as well].  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101.mydomain.com&lt;/code&gt; will 
be a compute node you will be provisioning.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;They are in the same subnet &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.0&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101.mydomain.com&lt;/code&gt; is a CN (compute node), which is one of 14 blades in
 an IBM chassis.  The IBM chassis and the 14 included blades are managed
 by BMC, which the MN (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;) can access.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; has RHEL 8 installed, and uses an IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; has access to internet.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;For the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101.mydomain.com&lt;/code&gt; compute node: BMC in the chassis that hosts this blade server, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101.mydomain.com&lt;/code&gt; (and other 13 blades running compute nodes on them), has an IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.135&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Prepare a full DVD for OS provision, and not a Live CD ISO.  &lt;br /&gt;
For this example, I use a &lt;strong&gt;customized&lt;/strong&gt;
CentOS-7-x86_64-Everything-2009.iso DVD.
(See steps above.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;BMC&lt;/strong&gt;&lt;br /&gt;
MM1: 192.168.80.135 &lt;br /&gt;
MM2: empty&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;IBM BladeCenter Enclosure (Chassis)&lt;/strong&gt; &lt;br /&gt;
Product Group: BladeCenter &lt;br /&gt;
Type:  IBM BladeCenter E Type-8677&lt;br /&gt;
Part no.: 39R8561 &lt;br /&gt;
FRU no.: 39R8563 &lt;br /&gt;
MM slots: 2 &lt;br /&gt;
Blade slots: 14 &lt;br /&gt;
I/O Module slots: 4 &lt;br /&gt;
Power Module slots: 4 &lt;br /&gt;
Blower slots: 2&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;14 blades&lt;/strong&gt; (14 blade servers)&lt;br /&gt;
14 x IBM 8853-AC1 HS21 Bladeserver&lt;br /&gt;
(Each blade is Machine Type: 8853, PID: 8853AC1)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  After successul setup/test, add the info for the other chassis.&lt;/p&gt;

&lt;p&gt;All the following steps should be executed in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# wget \
https://raw.githubusercontent.com/xcat2/xcat-core/master/xCAT-server/share/xcat/tools/go-xcat \
-O - &amp;gt; \
/tmp/go-xcat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chmod +x /tmp/go-xcat
# /tmp/go-xcat install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
If you are installing/updating xCAT-genesis-base separately, not as part
of installing/updating all of xCAT, run &apos;mknb &amp;lt;arch&amp;gt;&apos; manually
[...]
Created symlink from /etc/systemd/system/multi-user.target.wants/xcatd.service
to /usr/lib/systemd/system/xcatd.service.

[...]
xCAT has been installed!
========================

If this is the very first time xCAT has been installed, run one of the
following commands to set the environment variables.

For sh:
    source /etc/profile.d/xcat.sh

For csh:
    source /etc/profile.d/xcat.csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For choosing whether to run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;For sh&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;For csh&lt;/code&gt; command (script): &lt;br /&gt;
The guest VM’s shell is bash, which is intended to be compatible with the
original UNIX Bourne Shell (/bin/sh).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ps $$
  PID TTY      STAT   TIME COMMAND
 1532 pts/0    Ss     0:00 -bash

# printf %s\\n &quot;$SHELL&quot;
/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So run the command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;For sh&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# source /etc/profile.d/xcat.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Verify xCAT installation.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsxcatd -a 
Version 2.16.3 (git commit d6c76ae5f66566409c3416c0836660e655632194, 
  built Wed Nov 10 09:58:20 EST 2021)
This is a Management Node
dbengine=SQLite
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check xCAT service status.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl status xcatd.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;xCAT creates the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networks&lt;/code&gt; table automatically.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site
[...]

# tabdump networks
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Configure the system password for the &lt;strong&gt;root&lt;/strong&gt; user on the
&lt;strong&gt;compute nodes&lt;/strong&gt;.  For example, if you wanted to set the password
to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abc!!123(??)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=system passwd.username=root passwd.password=&apos;abc!!123(??)&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump passwd
#key,username,password,cryptmethod,authdomain,comments,disable
&quot;system&quot;,&quot;root&quot;,&quot;abc!!123(??)&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;stage-1-add-your-first-node-and-control-it-with-out-of-band-bmc-interface&quot;&gt;Stage 1: Add Your First Node and Control It with Out-Of-Band BMC Interface&lt;/h2&gt;

&lt;p&gt;To get a list of data object types that are supported by xCAT:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef --help 
[...]
The following data object types are supported by xCAT:

auditlog boottarget eventlog firmware group kit kitcomponent kitrepo
monitoring network node notification osdistro osdistroupdate osimage
pdu policy rack route site taskstate zone zvmivp
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get a list of valid attribute names for each object type, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkdef&lt;/code&gt;
with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-h&lt;/code&gt; option together with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t &amp;lt;object-types&amp;gt;&lt;/code&gt; option.
For example, to get a list of valid attribute names for object type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep ^ip
ip:    The IP address of the node. This is only used in makehosts.
The rest of xCAT uses system name resolution to resolve node names
to IP addresses.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep ^mac
mac:    The mac address or addresses for which xCAT will manage static
bindings for this node.    &amp;lt;-- a.k.a. MAC address of the node
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep -w ^bmc
bmc:    The hostname of the BMC adapter.  &amp;lt;-- Or the BMC&apos;s IP address
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get the MAC address of the node with IP address 192.168.80.1:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -c2 192.168.80.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# arp -a | grep &apos;192.168.80.1&apos;
? (192.168.80.1) at 00:11:22:33:44:55 [ether] on eth1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; If you don’t have network connection with this node, you can
obtain its MAC address by logging in to the &lt;strong&gt;AMM&lt;/strong&gt;/&lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;).
From Prerequisites (assumptions) above, you already know that
the BMC IP address is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.135&lt;/code&gt;.)&lt;/p&gt;

&lt;h3 id=&quot;connecting-to-cli-on-mm-amm&quot;&gt;Connecting to CLI on MM (AMM)&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# telnet 192.168.80.135
Trying 192.168.80.135...
Connected to 192.168.80.135.
Escape character is &apos;^]&apos;.

username: YOUR_BMC_USERID
password: YOUR_BMC_PASSWORD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The CLI command prompt is displayed:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt; Is it now &lt;strong&gt;AMM&lt;/strong&gt; (advanced management module) because the BMC
was replaced on 2022-06-13?&lt;/p&gt;

&lt;p&gt;You can now enter commands for the &lt;strong&gt;AMM&lt;/strong&gt; (advanced management 
module)/&lt;strong&gt;MM&lt;/strong&gt; (management module) [depending on whether your chassis 
uses &lt;strong&gt;AMM&lt;/strong&gt; or &lt;strong&gt;MM&lt;/strong&gt;].&lt;/p&gt;

&lt;p&gt;Display information on the first blade in the blade chassis.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  Don’t type &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;system&amp;gt;&lt;/code&gt;&lt;/strong&gt; &lt;br /&gt;
It’s a BMC CLI prompt, and it’s shown here to indicate that you are 
using the AMM (or MM).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; info -T system:blade[1]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;** &lt;strong&gt;TIP:&lt;/strong&gt; **  You can shorten &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-T system:blade[1]&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-T blade[1]&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; info -T blade[1]
[...]
MAC Address 1: 00:21:5E:2C:0E:D2
MAC Address 2: 00:21:5E:2C:0E:D4
MAC Address 3: Not Available
MAC Address 4: Not Available
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log off from the AMM CLI (or MM CLI).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back in the guest VM:&lt;br /&gt;
(&lt;strong&gt;Note:&lt;/strong&gt; This is optional; just to show where you can get information 
about node attributes.)&lt;/p&gt;

&lt;p&gt;List information about &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcusername&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcpassword&lt;/code&gt; attributes for 
object type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep ^bmcusername
bmcusername:    The BMC userid.  If not specified, the key=ipmi row
in the passwd table is used as the default.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep ^bmcpassword
bmcpassword:    The BMC password.  If not specified, the key=ipmi row
in the passwd table is used as the default.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--template&lt;/code&gt; option of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsdef(1)&lt;/code&gt; command to display
the object definition templates shipped in xCAT.&lt;/p&gt;

&lt;p&gt;To list all the object definition templates:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef --template 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Continuing with the setup: &lt;br /&gt;
Create an xCAT data object definition for this node (name it &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;).&lt;br /&gt;
Explanation: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip&lt;/code&gt; = IP address of the node; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mac&lt;/code&gt; = MAC address of
the node; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmc&lt;/code&gt; = IP address of the MM (BMC); &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcusername&lt;/code&gt; = username of
BMC (MM) account; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcpassword&lt;/code&gt; = password for BMC (MM) user.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef \
-t node abacus101 \
--template x86_64-template \
ip=192.168.80.1 \
mac=00:11:22:33:44:55 \
bmc=192.168.80.135 \
bmcusername=YOUR_BMC_USERID \
bmcpassword=YOUR_BMC_PASSWORD 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The domain of the xCAT node must be provided in an xCAT network definition
or the xCAT site definition.  Otherwise, two commands in the subsequent
steps for configuring DNS (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts abacus101&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns -n&lt;/code&gt;) will
not work.&lt;/p&gt;

&lt;p&gt;Currently, the domain is not defined in site table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep domain
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; key and value (in this example &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mydomain.com)&lt;/code&gt; to
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=domain site.value=mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
Alternatively, instead of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chtab(8)&lt;/code&gt; command, you could use the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chdef(1)&lt;/code&gt; command to add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; key (and value) to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef -t site domain=mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts(8)&lt;/code&gt; command to only 
replace the lines in the file that correspond to the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makehosts abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The node’s IP address and hostname are added to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tail -1 /etc/hosts
192.168.80.1 abacus101 abacus101.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Complete DNS setup by updating DNS records with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns(8)&lt;/code&gt; command.
(This also restarts &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;named&lt;/code&gt; service.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedns -n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101
Object name: abacus101
    arch=x86_64
    bmc=192.168.80.135
    bmcpassword=YOUR_BMC_USERID
    bmcusername=YOUR_BMC_PASSWORD
    cons=ipmi
    getmac=ipmi
    groups=all
    ip=192.168.80.1
    mac=00:11:22:33:44:55
    mgt=ipmi
    netboot=xnba
    postbootscripts=otherpkgs
    postscripts=syslog,remoteshell,syncfiles
    serialport=0
    serialspeed=115200
    usercomment=the system X node definition
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get the list of data object types supported by xCAT:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef --help
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
The following data object types are supported by xCAT:
  auditlog boottarget eventlog firmware group kit kitcomponent kitrepo 
  monitoring network node notification osdistro osdistroupdate osimage 
  pdu policy rack route site taskstate zone zvmivp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get a list of valid attribute names for each object type, use the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkdef(1)&lt;/code&gt; command with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-h&lt;/code&gt; option together with the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t &amp;lt;object-types&amp;gt;&lt;/code&gt; option.&lt;/p&gt;

&lt;p&gt;For example, to get a list of valid attribute names for object type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;fix-for-blade---aka-touchup-for-blade&quot;&gt;Fix for Blade - aka Touchup for Blade&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep -w ^mgt 
mgt:    The method to use to do general hardware management of the node.
This attribute is used as the default if power or getmac is not set.  
Valid values: openbmc, ipmi, blade, hmc, ivm, fsp, bpa, kvm, esx, rhevm.  
See the power attribute for more details.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef -h -t node | grep -w ^cons
cons:    The console method. If nodehm.serialport is set, this will default
to the nodehm.mgt setting, otherwise it defaults to unused.
Valid values: cyclades, mrv, or the values valid for the mgt attribute.

# mkdef -h -t node | grep -w ^serialport
serialport:    The serial port for this node, in the linux numbering style 
(0=COM1/ttyS0, 1=COM2/ttyS1).  For SOL on IBM blades, this is typically 1.
For rackmount IBM servers, this is typically 0.

# mkdef -h -t node | grep -w ^serialspeed
serialspeed:    The speed of the serial port for this node.  
For SOL this is typically 19200.

# mkdef -h -t node | grep -w ^power
power:    The method to use to control the power of the node. If not set,
the mgt attribute will be used.  Valid values: ipmi, blade, hmc, ivm, fsp,
kvm, esx, rhevm.  If &quot;ipmi&quot;, xCAT will search for this node in the ipmi
table for more info.  If &quot;blade&quot;, xCAT will search for this node in the
mp table.  If &quot;hmc&quot;, &quot;ivm&quot;, or &quot;fsp&quot;, xCAT will search for this node in
the ppc table.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As this is a blade server, you need to change the following attributes
for the node object &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mgmt&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getmac&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cons&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In addition, this particular blade model, IBM &lt;strong&gt;HS21&lt;/strong&gt;, does &lt;strong&gt;not&lt;/strong&gt;
support &lt;strong&gt;IPMI&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;Per 
&lt;a href=&quot;https://ipmitool-devel.narkive.com/gWukmQ01/ibm-gear&quot;&gt;[Ipmitool-devel] IBM gear&lt;/a&gt; (Retrieved on Mar 20, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Unfortunately, the IBM Bladecenter does not expose IPMI over LAN. This
comes from effort to maintain backwards compatibility with the days before
IPMI existed and trying to make the POWER and x86 systems all act the same
when in a chassis. Implementing remote management for CLI/scripting use
can be done either by:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;Scripting the CLI (not bad if you set up ssh keys). […]&lt;/li&gt;
    &lt;li&gt;Using SNMP.&lt;/li&gt;
    &lt;li&gt;Using some higher level software that knows how to speak IPMI and IBM
Blade (requires extra setup).  For example with xCAT:&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;Power state of a KVM guest:&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower vmgt state
vmgt: on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;Power state of a blade:&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower h01 state
h01: on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;Also see:&lt;br /&gt;
&lt;a href=&quot;https://www.mail-archive.com/ipmitool-devel@lists.sourceforge.net/msg00951.html&quot;&gt;Re: [Ipmitool-devel] ‘ipmitool sol info’ yields ‘Invalid command’&lt;/a&gt; (Retrieved on Mar 20, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;While the blades do communicate with the management module in a blade
chassis using IPMI, they don’t support doing SOL the way other platforms
do.  Instead, to access the serial console you need to telnet to the
 management module (MM or AMM), log in and then issue this command:&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/mailman/message/24363746/&quot;&gt;Re: [xcat-user] HS21 blade BMC&lt;/a&gt; (Retrieved on Mar 20, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The BMC IP address on all shipped IBM Blades to date is not useful for
what you’d expect. The IPMI aspect of the service processor terminates
within the chassis and the AMM will aggressively change the IP
configuration of the BMCs via the dedicated management bus. For IBM
BladeCenter, IPMI is only accessible via in-band methods. All
out-of-band management is done either via SMASH CLP, SNMP (xCAT uses
SNMP to implement IBM blade support), a BladeCenter CLI via telnet or
SSH, a web interface, or IBM proprietary protocols that IBM Director uses.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://communities.vmware.com/t5/vMotion-Resource-Management/IBM-BladeCenter-H-and-IPMI/td-p/278986&quot;&gt;IBM BladeCenter H and IPMI&lt;/a&gt;
(Retrieved on Mar 20, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Instructions in this section do not apply to IBM BladeCenters.
IBM BladeCenter do not have IPMI remote access to the BMC on a Blade
(the BMC IP address is not available outside of the BladeCenter).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Continuing with the setup: &lt;br /&gt;
Instead of IPMI, for remote control of this type of blade I use the
serial port so these two attributes need to be changed as well:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serialport&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serialspeed&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus101 -i cons,mgt,getmac,serialport,serialspeed
Object name: abacus101
    cons=ipmi
    getmac=ipmi
    mgt=ipmi
    serialport=0
    serialspeed=115200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Change xCAT data object definition for this node with the specified values
for attributes &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cons&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getmac&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mgt&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serialport&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serialspeed&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef \
-t node \
-o abacus101 \
cons=blade mgt=blade getmac=blade serialport=1 serialspeed=19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus101 -i cons,mgt,getmac,serialport,serialspeed
Object name: abacus101
    cons=blade
    getmac=blade
    mgt=blade
    serialport=1
    serialspeed=19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101
Object name: abacus101
    arch=x86_64
    cons=blade
    getmac=blade
    groups=all
    ip=192.168.80.1
    mac=00:11:22:33:44:55
    mgt=blade
    netboot=xnba
    postbootscripts=otherpkgs
    postscripts=syslog,remoteshell,syncfiles
    serialport=1
    serialspeed=19200
    usercomment=the system X node definition
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; hardware control. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; power management:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower abacus101 state
no mpa defined for node abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;the-mpa-table&quot;&gt;The mpa Table&lt;/h3&gt;

&lt;p&gt;This table is where you put the information for a BladeCenter management
module (&lt;strong&gt;MM&lt;/strong&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man mpa
NAME
       mpa - a table in the xCAT database.

SYNOPSIS
       mpa Attributes:  mpa, username, password, displayname, slots, urlpath,
       comments, disable

DESCRIPTION
       Contains info about each Management Module and how to access it.
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man mp
NAME
       mp - a table in the xCAT database.

SYNOPSIS
       mp Attributes:  node, mpa, id, nodetype, comments, disable

DESCRIPTION
       Contains the hardware control info specific to blades.  This table also
       refers to the mpa table, which contains info about each Management
       Module.
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add username and password for &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;) to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; table. &lt;br /&gt;
(This is the MM from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcusername&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcpassword&lt;/code&gt; in the above
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsdef abacus101 [...]&lt;/code&gt; command.  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; attribute in the command
below is that MM’s hostname, which in this case is: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm1n&lt;/code&gt;.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
mpa=xbcmm1n \
mpa.username=YOUR_BMC_USERID \
mpa.password=YOUR_BMC_PASSWORD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mpa 
#mpa,username,password,displayname,slots,urlpath,comments,disable
&quot;xbcmm1n&quot;,&quot;YOUR_BMC_USERID&quot;,&quot;YOUR_BMC_PASSW0RD&quot;,,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the BMC (MM) node to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table.
As the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table refers to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; table, add the attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; to
the table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=xbcmm1n \
mp.mpa=xbcmm1n \
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, add attributes of the newly added node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;) to the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table: add the node’s name (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node=abacus101&lt;/code&gt;) and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt; (it’s best to make
this number the same as the node name so in this case it’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus101 \
mp.mpa=xbcmm1n \
mp.id=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mp
#node,mpa,id,nodetype,comments,disable
&quot;xbcmm1n&quot;,&quot;xbcmm1n&quot;,,,,
&quot;abacus101&quot;,&quot;xbcmm1n&quot;,&quot;1&quot;,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; attribute is now defined for node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101 | grep mpa
    mpa=xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
Alternatively, you can display only attributes you are interested in by
using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-i comma-separated-attr-list&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101 -i mpa
Object name: abacus101
    mpa=xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101
Object name: abacus101
    arch=x86_64
    cons=blade
    getmac=blade
    groups=all
    id=14
    ip=192.168.80.14
    mac=00:21:5E:2C:0A:AC
    mgt=blade
    mpa=xbcmm1n
    netboot=xnba
    postbootscripts=otherpkgs
    postscripts=syslog,remoteshell,syncfiles
    serialport=1
    serialspeed=19200
    usercomment=the system X node definition
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump passwd
#key,username,password,cryptmethod,authdomain,comments,disable
&quot;system&quot;,&quot;root&quot;,&quot;abc!!123(??)&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add username and password for &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;) to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;passwd&lt;/code&gt; table.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
key=blade \
passwd.username=YOUR_BMC_USERID \
passwd.password=YOUR_BMC_PASSWORD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump passwd
#key,username,password,cryptmethod,authdomain,comments,disable
&quot;system&quot;,&quot;root&quot;,&quot;abc!!123(??)&quot;,,,,
&quot;blade&quot;,&quot;YOUR_BMC_USERID&quot;,&quot;YOUR_BMC_PASSWORD&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Verify that your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file contains entries for all of your
management node interfaces.  Manually add any that are missing.&lt;/p&gt;

&lt;p&gt;Add &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;) hostname (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm1n&lt;/code&gt;) and its IP address
to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;192.168.80.135 xbcmm1n&quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; hardware control. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; power management:&lt;/p&gt;

&lt;p&gt;If there’s an “Unsupported security level” error like the one shown below,
you need to add the MM (BMC) to xCAT database and to register it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower abacus101 state
abacus101: [xcatmn]: Error: Unsupported security level
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To fix it, first check whether you can communicate with the MM (BMC):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpdest
Error: Invalid nodes and/or groups in noderange: xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This particular MM (BMC) has not been added to xCAT database.
For now, xCAT has only one node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels
abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef xbcmm1n
Error: [xcatmn]: Could not find an object named &apos;xbcmm1n&apos; of type &apos;node&apos;.
No object definitions have been found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Discover all networked services information &lt;strong&gt;within the cluster subnet&lt;/strong&gt;
(connected via the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth1&lt;/code&gt; network adapter with IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;)
and write output to xCAT database:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ip -4 address show eth1 | grep inet
    inet 192.168.80.220/24 brd 192.168.80.255 scope global noprefixroute eth1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsslp -i 192.168.80.220 -w
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels
Server--SNYK123456E1AB
abacus101
xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef xbcmm1n
Object name: xbcmm1n
    groups=mm,all
    id=0
    mgt=blade
    mpa=xbcmm1n
    postbootscripts=otherpkgs
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If a request for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;snmpdest&lt;/code&gt; from the MM (BMC) is empty as shown here:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpdest
xbcmm1n: SP SNMP Destination 1: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;enable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;snmpcfg&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sshcfg&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpcfg=enable sshcfg=enable
xbcmm1n: SNMP enable: OK
xbcmm1n: SSH enable: OK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After that, request for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;snmpdest&lt;/code&gt; gets answered:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpdest
xbcmm1n: SP SNMP Destination 1: 0.0.0.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpcfg
xbcmm1n: SNMP: enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n sshcfg 
xbcmm1n: SSH: enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While you are here, rename the &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;) Server–SNYK123456E1AB 
(BMC on the other chassis) node to xbcmm2:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef \
-t node \
-o Server--SNYK123456E1AB \
-n xbcmm2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add username and password for &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;) to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; table.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
mpa=xbcmm2 \
mpa.username=YOUR_BMC_USERNAME \
mpa.password=YOUR_BMC_PASSWORD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the same &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;) node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm2&lt;/code&gt;, change the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; attribute in
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table (set it to be the same as the node name, that is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm2&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab
node=xbcmm2 \
mp.mpa=xbcmm2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Verify that your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file contains entries for all of your
management node interfaces.  Manually add any that are missing.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;192.168.80.127 xbcmm2&quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back to continuing the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; provisioning:&lt;/p&gt;

&lt;p&gt;Hardware control check for power management for node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;
works now:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower abacus101 state
abacus101: on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; firmware information:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rinv abacus101 all
abacus101: Machine Type/Model: 8853AC1
abacus101: Serial Number: KQCCXBT
abacus101: MAC Address 1: 00:21:5E:2C:0E:D2
abacus101: MAC Address 2: 00:21:5E:2C:0E:D4
abacus101: Management Module firmware: 36 (BPET36M 07-02-08)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;provision-a-node-and-manage-it-with-parallel-shell&quot;&gt;Provision a Node and Manage It with Parallel Shell&lt;/h3&gt;

&lt;h4 id=&quot;configure-dhcp&quot;&gt;Configure DHCP&lt;/h4&gt;

&lt;p&gt;In order to PXE boot, you need a DHCP server to hand out IP addresses
and direct the booting system to the TFTP server where it can download
the network boot files.&lt;/p&gt;

&lt;p&gt;Which networks &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpd&lt;/code&gt; (dhcp daemon) should listen on can be controlled
by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpinterfaces&lt;/code&gt; attribute in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site(5)&lt;/code&gt; table.
Add this attribute and set it to listen to only the
internal/private/cluster-facing network, which is connected to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eth1&lt;/code&gt; NIC.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep dhcp
&quot;dhcplease&quot;,&quot;43200&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpinterfaces&lt;/code&gt; attribute to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=dhcpinterfaces site.value=eth1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep dhcp
&quot;dhcplease&quot;,&quot;43200&quot;,,
&quot;dhcpinterfaces&quot;,&quot;eth1&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A new dhcp configuration file is created by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp(8)&lt;/code&gt; command.
It requires that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networks(5)&lt;/code&gt; table is filled out properly.
Check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networks(5)&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump networks
#netname,net,mask,mgtifname,gateway,dhcpserver,tftpserver,nameservers,ntpservers,logservers,dynamicrange,staticrange,staticrangeincrement,nodehostname,ddnsdomain,vlanid,domain,mtu,comments,disable
&quot;123_12_23_0-255_255_255_0&quot;,&quot;123.12.23.0&quot;,&quot;255.255.255.0&quot;,&quot;eth0&quot;,&quot;123.12.23.254&quot;,,&quot;&amp;lt;xcatmaster&amp;gt;&quot;,,,,,,,,,,,&quot;1500&quot;,,
&quot;192_168_80_0-255_255_255_0&quot;,&quot;192.168.80.0&quot;,&quot;255.255.255.0&quot;,&quot;eth1&quot;,&quot;&amp;lt;xcatmaster&amp;gt;&quot;,,&quot;&amp;lt;xcatmaster&amp;gt;&quot;,,,,,,,,,,,&quot;1500&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While you are here, change the name of the cluster’s network:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
net=192.168.80.0 \
networks.netname=abacusnet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that before running the next command (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp -n&lt;/code&gt;), 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpd&lt;/code&gt; (dhcp daemon) service is not running:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-active dhcpd.service
inactive
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a new dhcp configuration file with a network statement for each
network the dhcp daemon should listen on. &lt;br /&gt;
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp(8)&lt;/code&gt; command will automatically restart the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpd&lt;/code&gt; 
(dhcp daemon) after this operation.  &lt;br /&gt;
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-n&lt;/code&gt; option of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp(8)&lt;/code&gt; command replaces any existing 
configuration file, making a backup of it first.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp -n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Renamed existing dhcp configuration file to  /etc/dhcp/dhcpd.conf.xcatbak

Warning: [xcatmn]: No dynamic range specified for 192.168.80.0. 
If hardware discovery is being used, a dynamic range is required.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As I’m not using hardware discovery, I don’t need to specify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dynamicrange&lt;/code&gt;
attribute in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networks&lt;/code&gt; table so I don’t have to address the warning above.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -lhrt /etc/dhcp/dhcpd.conf*
-rw-r--r-- 1 root root  117 Oct  1  2020 /etc/dhcp/dhcpd.conf.xcatbak
-rw------- 1 root root 5.4K Mar 20 19:50 /etc/dhcp/dhcpd.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep range /etc/dhcp/dhcpd.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -n subnet /etc/dhcp/dhcpd.conf
35:  subnet 192.168.80.0 netmask 255.255.255.0 {
78:  } # 192.168.80.0/255.255.255.0 subnet_end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-active dhcpd.service
active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Continuing with the setup, next two &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp(8)&lt;/code&gt; requirements have
already beeen met; see above.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Get the node IP addresses and MACs defined in the xCAT database.
    &lt;ul&gt;
      &lt;li&gt;Already done:&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101 | grep -w ip
    ip=192.168.80.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mac
#node,interface,mac,comments,disable
&quot;abacus101&quot;,,&quot;00:11:22:33:44:55&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Get the hostnames and IP addresses pushed to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; and do DNS.
    &lt;ul&gt;
      &lt;li&gt;Already done with:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts(8)&lt;/code&gt; and with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns(8)&lt;/code&gt;.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp(8)&lt;/code&gt; with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;noderange&lt;/code&gt; option.  This injects configuration data
pertinent to the specified nodes into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpd&lt;/code&gt;.  The configuration information
takes effect immediately without a restart of DHCP.&lt;/p&gt;

&lt;p&gt;So far, I’ve configured one compute node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels
[...]       &amp;lt;-- The rest of the nodes are MM nodes (not CNs)
abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For now, add only one node to the DHCP server configuration.
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dhcpd&lt;/code&gt; (dhcp daemon) does not have to be restarted after this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Query the node entries from the DHCP server configuration to confirm that
only one node is configured for now:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp -q abacus101
abacus101: ip-address = 192.168.80.1, hardware-address = 00:11:22:33:44:55 

# makedhcp -q all 
abacus101: ip-address = 192.168.80.1, hardware-address = 00:11:22:33:44:55 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the customized CentOS Linux 7.9 DVD ISO to the xCAT server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp dusko@192.168.80.210:/tmp/CentOS-7-x86_64-Everything-CUSTOM-2009.iso .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the CentOS 7.9 Linux DVD ISO to the xCAT &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/install&lt;/code&gt; directory.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# copycds CentOS-7-x86_64-Everything-CUSTOM-2009.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copycds(8)&lt;/code&gt;, the corresponding basic &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt; will be generated
automatically.  Then you can list the new osimage name here.  You can refer
to xCAT documentation on how to customize the package list or postscript
for target compute nodes. For now just use the default one:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t osimage
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;centos7.9-x86_64-install-compute  (osimage)
centos7.9-x86_64-netboot-compute  (osimage)
centos7.9-x86_64-statelite-compute  (osimage)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatprobe&lt;/code&gt; to precheck whether the xCAT &lt;strong&gt;MN&lt;/strong&gt; (&lt;strong&gt;management node&lt;/strong&gt;)
is ready for OS provision (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-i&lt;/code&gt; option: install NIC, specifying the network
interface name of provision network on MN (management node).  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-w&lt;/code&gt; option:
show each line completely; by default long lines are truncated):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatprobe -w xcatmn -i eth1
[mn]: Checking all xCAT daemons are running...                          [ OK ]
[mn]: Checking xcatd can receive command request...                     [ OK ]
[mn]: Checking &apos;site&apos; table is configured...                            [ OK ]
[mn]: Checking provision network is configured...                       [ OK ]
[mn]: Checking &apos;passwd&apos; table is configured...                          [ OK ]
[mn]: Checking important directories(installdir,tftpdir) are configured [ OK ]
[mn]: Checking SELinux is disabled...                                   [ OK ]
[mn]: Checking HTTP service is configured...                            [ OK ]
[mn]: Checking TFTP service is configured...                            [ OK ]
[mn]: Checking DNS service is configured...                             [WARN]
[mn]: DNS nameserver can not be reached
[mn]: Checking DHCP service is configured...                            [ OK ]
[mn]: Checking NTP service is configured...                             [ OK ]
[mn]: Checking rsyslog service is configured...                         [ OK ]
[mn]: Checking firewall is disabled...                                  [ OK ]
[mn]: Checking minimum disk space for xCAT [&apos;/var&apos; needs 1GB;&apos;/install&apos;
        needs 10GB;&apos;/tmp&apos; needs 1GB]...                                 [ OK ]
[mn]: Checking Linux ulimits configuration...                           [ OK ]
[mn]: Checking network kernel parameter configuration...                [ OK ]
[mn]: Checking xCAT daemon attributes configuration...                  [ OK ]
[mn]: Checking xCAT log is stored in /var/log/xcat/cluster.log...       [ OK ]
[mn]: Checking xCAT management node IP: &amp;lt;192.168.80.220&amp;gt; is configured
        to static...                                                    [ OK ]
[mn]: Checking dhcpd.leases file is less than 100M...                   [ OK ]
[mn]: Checking DB packages installation...                              [ OK ]
=================================== SUMMARY ==================================
[MN]: Checking on MN...                                                 [ OK ]
    Checking DNS service is configured...                               [WARN]
        DNS nameserver can not be reached
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Don’t worry about DNS warning.  That warning is expected
          because the DNS nameserver for the cluster is within 
	  private network 192.168.80.0/24.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; To get usage information of xcatprobe: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatprobe -h&lt;/code&gt;. &lt;br /&gt;
To list all valid sub commands for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatprobe&lt;/code&gt;, run: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatprobe -l&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;perform-the-diskful-os-deployment-scripted-install-clone&quot;&gt;Perform the Diskful OS Deployment (Scripted Install, Clone)&lt;/h3&gt;
&lt;h3 id=&quot;aka-build-nodes&quot;&gt;a.k.a Build Nodes&lt;/h3&gt;

&lt;p&gt;Begin OS provision on the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; with the specified &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt;.
Earlier, from the output of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsdef -t osimage&lt;/code&gt;, one of the images was
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;centos7.9-x86_64-install-compute&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t osimage centos7.9-x86_64-install-compute
Object name: centos7.9-x86_64-install-compute
    imagetype=linux
    osarch=x86_64
    osdistroname=centos7.9-x86_64
    osname=Linux
    osvers=centos7.9
    otherpkgdir=/install/post/otherpkgs/centos7.9/x86_64
    pkgdir=/install/centos7.9/x86_64
    pkglist=/opt/xcat/share/xcat/install/centos/compute.centos7.pkglist
    profile=compute
    provmethod=install
    template=/opt/xcat/share/xcat/install/centos/compute.centos7.tmpl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  Before starting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rinstall(8)&lt;/code&gt;, make sure that the node’s boot
order is configured so that the first boot device is &lt;strong&gt;network&lt;/strong&gt;
(or &lt;strong&gt;PXE network&lt;/strong&gt;).  As the HS21 blade server is BIOS-based 
(not UEFI-based), check the BIOS settings, and if needed, adjust the 
settings as needed. &lt;a href=&quot;#footnotes&quot;&gt;⁶&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
Alternatively, you can use xCAT’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq(1)&lt;/code&gt;, which permanently sets
the order of boot devices for BMC-based servers, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rsetboot(1)&lt;/code&gt; command,
which sets the boot device to be used for BMC-based servers for the next
boot only.&lt;/p&gt;

&lt;p&gt;However, note that on IBM BladeCenter (which is the case here), you only
have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq&lt;/code&gt; and not &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rsetboot&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.mail-archive.com/xcat-user@lists.sourceforge.net/msg05290.html&quot;&gt;Re: [xcat-user] Problem with rsetboot: unable to identify plugin&lt;/a&gt;
(Retrieved on Mar 20, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;On BladeCenter, you have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq&lt;/code&gt;.  I know, a bit peculiar, but the AMM
supports boot sequence control rather than next one time boot device
[which is controlled by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rsetboot&lt;/code&gt;].&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rbootseq abacus101 list
abacus101: net,cdrom,hd0,none
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If it’s not configured to boot from the Ethernet (net) device, you can change it with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq(1)&lt;/code&gt; command: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq abacus101 net,hd0,none,none&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower abacus101 bmcstate
abacus101: on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus101 \
nodehm.consoleenabled=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The MM (Management Module), a.k.a. BMC (Baseboard Management 
Controller), hosting this compute node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;) is named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm1n&lt;/code&gt;.
Its vitals and network settings are:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rvitals xbcmm1n all 
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n network
xbcmm1n: MM IP: 192.168.80.135
xbcmm1n: MM Hostname: xbcmm1n
xbcmm1n: Gateway: 0.0.0.0
xbcmm1n: Subnet Mask: 255.255.255.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If needed, change the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwarders&lt;/code&gt; attribute in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table.&lt;/p&gt;

&lt;p&gt;From the manual page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site(5)&lt;/code&gt; table:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwarders&lt;/code&gt;: &lt;br /&gt;
The DNS servers at your site that can provide names &lt;strong&gt;outside&lt;/strong&gt; of
the &lt;strong&gt;cluster&lt;/strong&gt;.  The makedns command will configure the DNS on the
management node to forward requests it does not know to these servers.
Note that the DNS servers on the service nodes will ignore this value
and always be configured to forward to the management node.&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nameservers&lt;/code&gt;: &lt;br /&gt;
A comma delimited list of DNS servers that each node in the cluster should
use. This value will end up in the nameserver settings of the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/resolv.conf&lt;/code&gt; &lt;strong&gt;on each node&lt;/strong&gt;. It is common (but not required) to set
this attribute value to the IP address of the xCAT management node, if
you have set up the DNS on the management node by running makedns.
In a hierarchical cluster, you can also set this attribute to
“&lt;strong&gt;&amp;lt;xcatmaster&lt;/strong&gt;&amp;gt;” to mean the DNS server for each node should be the
node that is managing it (either its service node or the management
node).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Also, from the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networks(5)&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gateway&lt;/code&gt;  The network gateway. It can be set to an ip address or the
keyword &lt;strong&gt;&amp;lt;xcatmaster&lt;/strong&gt;&amp;gt;.  The keyword &amp;lt;xcatmaster&amp;gt; indicates the
&lt;strong&gt;cluster-facing&lt;/strong&gt; ip address configured on this management node or
service node.  Leaving this field blank means that there is no gateway
for this network.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep forwarders 
&quot;forwarders&quot;,&quot;208.67.222.222,208.67.220.220&quot;,,  &amp;lt;- Should list your DNS servers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If it hasn’t been correctly set up, you can update the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;forwarders&lt;/code&gt;
attribute now with the following command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=forwarders site.value=208.67.222.222,208.67.220.220
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep forwarders
&quot;forwarders&quot;,&quot;208.67.222.222,208.67.220.220&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep nameservers
&quot;nameservers&quot;,&quot;192.168.80.220&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If it hasn’t been correctly set up, you can now update the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nameservers&lt;/code&gt;
attribute with the following command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=nameservers site.value=192.168.80.220
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep nameservers
&quot;nameservers&quot;,&quot;192.168.80.220&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Does the trio &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedhcp -n&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns -n&lt;/code&gt;
            need to be run here?&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp -n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makehosts 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedns -n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makegocons -D abacus101
[...]
Starting goconserver service ...
abacus101: Created
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After the node is registered for an instance of the console (serial console)
session with the command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makegocons -D abacus101&lt;/code&gt; above,
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;consoleenabled&lt;/code&gt; attribute has been added and set to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt; for the node
(in this case, node named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101 | grep cons
    cons=blade
    consoleenabled=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-active goconserver.service 
active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl status goconserver.service 
  goconserver.service - goconserver console daemon
   Loaded: loaded (/usr/lib/systemd/system/goconserver.service; enabled; vendor preset: disabled)
   Active: active (running) since Sun 2022-03-20 15:42:08 PDT; 1min ago
     Docs: https://github.com/xcat2/goconserver
 Main PID: 12517 (goconserver)
   CGroup: /system.slice/goconserver.service
           |-12517 /usr/bin/goconserver
           +-1253 ssh -t YOUR_BMC_USERNAME@xbcmm1n console -o -T blade[1]

Mar 20 15:42:08 xcatmn.mydomain.com systemd[1]: Started goconserver console daemon.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makegocons -q abacus101
NODE                             SERVER                           STATE
abacus101                        xcatmn.mydomain.com              connected
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Connect to the newly provisioned node (compute node):&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  For the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rcons&lt;/code&gt; to work, the node’s BIOS must be configured 
for SOL (Serial Over LAN), a.k.a. Text Mode Console. &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;10&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rcons abacus101
[Enter `^Ec?&apos; for help]
goconserver(2022-03-20T20:44:12-07:00): Hello 192.168.80.220:32998,
  welcome to the session of abacus101

CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus101 login: root
Password: 
[root@abacus101 ~]# 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log off from the compute node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The OS login banner appears.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus101 login: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  &lt;br /&gt;
&lt;strong&gt;To exit the console session, enter: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl-e&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.&lt;/code&gt;
(3 characters: Ctrl-e, ‘c’ and ‘.’)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Disconnected]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Display the OS and network interface status (On or Off status) for compute
nodes which are managed by the current xCAT &lt;strong&gt;MN&lt;/strong&gt; (&lt;strong&gt;Management Node&lt;/strong&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatstat
# Hostname:Status:Network-Interfaces:
abacus101:1:enp4s0-1:enp6s0-2 :
xbcmm1n:1:127 :
xbcmm2:1:127 :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start the diskful OS deployment:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rinstall abacus101 osimage=centos7.9-x86_64-install-compute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rinstall&lt;/code&gt; command works even though it raises this error:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rinstall abacus101 osimage=centos7.9-x86_64-install-compute
Provision node(s): abacus101
Error: [xcatmn]: rinstall plugin bug, pid 18475, process description:
  &apos;xcatd SSL: rinstall to abacus101 for root@localhost: rinstall instance&apos;
  with error &apos;Died at /opt/xcat/sbin/xcatd line 2104.&apos;
  while trying to fulfill request for the following nodes: abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This error is raised because this node is a &lt;strong&gt;&lt;em&gt;blade&lt;/em&gt;&lt;/strong&gt; node, while
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rinstall&lt;/code&gt; command is supposed to support only IPMI based node:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.mail-archive.com/xcat-user@lists.sourceforge.net/msg05288.html&quot;&gt;Re: [xcat-user] Problem with rsetboot: unable to identify plugin&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Mar 20, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Your node is a &lt;em&gt;blade&lt;/em&gt; node. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rinstall&lt;/code&gt; command only supports ipmi based node.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can monitor installation process:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rcons abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After 5-10 minutes verify that provision status is booted:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus101 -i status
Object name: abacus101
    status=booted
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xdsh(1)&lt;/code&gt; to check the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; OS version and whether OS provision
was successful:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus101 more /etc/*release
abacus101: ::::::::::::::
abacus101: /etc/centos-release
abacus101: ::::::::::::::
abacus101: CentOS Linux release 7.9.2009 (Core)
abacus101: ::::::::::::::
abacus101: /etc/os-release
abacus101: ::::::::::::::
abacus101: NAME=&quot;CentOS Linux&quot;
abacus101: VERSION=&quot;7 (Core)&quot;
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  If you get a ‘Permission denied’ error:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus101 &apos;cat /etc/redhat-release&apos;
[xcatmn]: abacus101: Permission denied (publickey,gssapi-keyex,
gssapi-with-mic,password).
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you can fix it by updating the security keys for this compute node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus101 -k
The ssh keys will be updated for &apos;root&apos; on the node(s).
Password:
abacus101: Setup ssh keys has completed.
abacus101: =============updatenode starting====================
abacus101: /tmp/FlNrhJh5uy.dsh: line 62: /var/log/xcat/xcat.log: No such file or directory
abacus101: trying to download postscripts...
abacus101: /tmp/FlNrhJh5uy.dsh: line 62: /var/log/xcat/xcat.log: No such file or directory

^C
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;** &lt;strong&gt;TIP:&lt;/strong&gt; **  If there are monitor probing errors in the console,
                showing approximately every ten seconds similar to&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;drm:radeon_vga_detect [radeon]] *ERROR* VGA-1: probed a monitor
  but no|invalid EDID
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you can remove them by adding &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nomodeset&lt;/code&gt; kernel boot line option as
explained in Footnotes at the bottom of this page &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;11&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;See also:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.dell.com/support/kbdoc/en-ca/000123893/manual-nomodeset-kernel-boot-line-option-for-linux-booting&quot;&gt;Manual “nomodeset” Kernel Boot Line Option for Linux Booting&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://serverfault.com/questions/708400/radeon-dvi-errors-filling-logs&quot;&gt;Radeon DVI errors filling logs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Back to continuing with the setup:&lt;/p&gt;

&lt;p&gt;Test ssh passwordless login to the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh root@abacus101
Last login: Sun Mar 20 16:37:45 2022

# hostname
abacus101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log off from the node (compute node).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
logout
Connection to abacus101 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;stage-2-add-your-second-node-and-configure-it-for-sol-serial-over-lan-operation-aka-text-mode-console&quot;&gt;Stage 2: Add Your Second Node and Configure It for SOL (Serial Over LAN) Operation (aka Text Mode Console)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
You could continue with your first node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus101&lt;/code&gt; and 
perform these steps on it but I want to show how to enable SOL 
(Serial Over LAN) operation (a.k.a. text mode console) on a compute 
node running CentOS Linux 5, and a different node is perfect for that 
since its OS hasn’t been upgraded yet (it’s still CentOS Linux 5.2).&lt;/p&gt;

&lt;p&gt;To prepare the IBM HS21 blade server for supporting serial console,
you need to:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;enable &lt;strong&gt;SOL (Serial Over LAN)&lt;/strong&gt; &lt;a href=&quot;#footnotes&quot;&gt;⁴&lt;/a&gt; in the &lt;strong&gt;BIOS&lt;/strong&gt;, and&lt;/li&gt;
  &lt;li&gt;configure the &lt;strong&gt;operating system&lt;/strong&gt; for SOL operation.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Assumptions:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Hostname of the node you are provisioning: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102.mydomain.com&lt;/code&gt; (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.2&lt;/code&gt;).&lt;/li&gt;
  &lt;li&gt;It’s a blade server in a slot number 2 in an IBM chassis, holding (housing) a total of 14 blades (blade servers).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;configure-ibm-hs21-blade-bios-for-sol-serial-over-lan&quot;&gt;Configure IBM HS21 Blade BIOS for SOL (Serial Over LAN)&lt;/h3&gt;

&lt;p&gt;The IBM BladeCenter HS21 blade is a &lt;strong&gt;BIOS&lt;/strong&gt;-based server (it doesn’t
support &lt;strong&gt;UEFI&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;This example shows how to use the IBM &lt;strong&gt;Advanced Settings Utility (ASU)&lt;/strong&gt;
&lt;a href=&quot;#footnotes&quot;&gt;⁵&lt;/a&gt; tool to &lt;strong&gt;remotely&lt;/strong&gt; modify basic input/output system
&lt;strong&gt;(BIOS) CMOS&lt;/strong&gt; settings.  Specifically, for SOL (Serial Over LAN) to work on this server model, the following six settings need to be changed in the BIOS:
Serial Port A, Serial Port B, Remote Console Active, Remote
Console COM Port, Remote Console After Boot, Remote Console Flow Control.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
Alternatively, you can use xCAT’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq(1)&lt;/code&gt;, which permanently sets
the order of boot devices for BMC-based servers, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rsetboot(1)&lt;/code&gt; command,
which sets the boot device to be used for BMC-based servers for the next
boot only.&lt;/p&gt;

&lt;h3 id=&quot;download-and-install-advanced-settings-utility-asu&quot;&gt;Download and Install Advanced Settings Utility (ASU)&lt;/h3&gt;

&lt;p&gt;Using your web browser, navigate from the &lt;a href=&quot;https://www.ibm.com/&quot;&gt;IBM home page&lt;/a&gt;
to the &lt;a href=&quot;https://www.ibm.com/support/home/?lnk=msu_usen&quot;&gt;Support page&lt;/a&gt;
and then to
(under section “Downloads, fixes &amp;amp; updates”) &lt;a href=&quot;https://www.ibm.com/support/fixcentral&quot;&gt;Fix Central&lt;/a&gt;.
Under “&lt;em&gt;Find product&lt;/em&gt;”, in the “&lt;em&gt;Product selector:&lt;/em&gt;” box, type “HS21”
(without quotes) to access a list of product choices.  From the list of
choices, select &lt;strong&gt;BladeCenter HS21&lt;/strong&gt;.  From the “&lt;em&gt;Product:&lt;/em&gt;” drop-down,
select &lt;strong&gt;8853&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;In the &lt;em&gt;Operating system&lt;/em&gt;, select “All”.  Click &lt;em&gt;Continue&lt;/em&gt;.
Select the 64-bit version of IBM Advanced Settings Utility (ASU) for Linux
(name: ibm_utl_asu_asut79n-9.30_linux_x86-64_rpm).&lt;/p&gt;

&lt;p&gt;The downloaded file name is H29456300.iso.  Copy this file to the xCAT
server, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; (in this example, with the IP address
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;123.12.23.235&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ scp H29456300.iso username@123.12.23.235:/tmp/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log into the xCAT server.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh username@123.12.23.235
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Mount the ISO image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /mnt/ASUISO
# mount -t iso9660 /tmp/H29456300.iso /mnt/ASUISO
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls /mnt/ASUISO/
ibm_utl_asu_asut79n-9.30_anyos_i686.chg
ibm_utl_asu_asut79n-9.30_linux_x86-64.rpm
ibm_utl_asu_asut79n-9.30_linux_x86-64.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a directory for the ASU and copy all files from the
ASU ISO image to it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /opt/asu
# cp -i /mnt/ASUISO/ibm_utl_asu_asut79n-* /opt/asu/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unmount the ASU ISO image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# umount /mnt/ASUISO/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the ASU RPM installation file to the node (this node’s IP address
is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.2&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp \
/opt/asu/ibm_utl_asu_asut79n-9.30_linux_x86-64.rpm \
root@192.168.80.2:/tmp/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log into this node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh root@192.168.80.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install the ASU from the RPM package.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /tmp
# rpm -ivh ibm_utl_asu_asut79n-9.30_linux_x86-64.rpm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List all installed packages on the system and confirm that the ASU
is installed:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpm -qa | grep asu
ibm_utl_asu-9.30-asut79N
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Find where the ASU’s RPM installs the files:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpm -qpl ibm_utl_asu_asut79n-9.30_linux_x86-64.rpm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/opt/ibm/toolscenter/asu/asu64
/opt/ibm/toolscenter/asu/cdc_interface.sh
/opt/ibm/toolscenter/asu/lic_en.txt
/opt/ibm/toolscenter/asu/rdcli-x86_64/rdmount
/opt/ibm/toolscenter/asu/rdcli-x86_64/rdumount
/opt/ibm/toolscenter/asu/savestat.def
/opt/ibm/toolscenter/asu/template.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get help for ASU:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 --help
IBM Advanced Settings Utility version 9.30.79N
[...]
Usage: ./asu [apps] &amp;lt;cmds&amp;gt; [&amp;lt;cmd_mod&amp;gt; | &amp;lt;class&amp;gt;] [&amp;lt;options&amp;gt;] [&amp;lt;connect_opts&amp;gt;]

  Note: Full description of an app:     ./asu &amp;lt;app_name&amp;gt; --help
        Full description of a command:  ./asu &amp;lt;cmds&amp;gt; --help

[apps]
  savestat [app_cmd]   - Tool Kit Store System Install State
  immcfg [app_cmd]     - Configure IMM LAN over USB (IMM-based servers only)
  fodcfg [app_cmd]     - Configure Feature on Demand(FoD)
  cmmcfg [app_cmd]     - Configure the CMM
  immapp [app_cmd]     - Immapp Configuration

&amp;lt;cmds&amp;gt;:
   --license        encrypt       patchadd       replicate  showdefault
   batch            export        patchextract   resetrsa   showgroups
   createuuid       generate      patchlist      restore    showlocation
   comparedefault   help          patchremove    save       showvalues
   delete           import        rebootimm      set        version
   deletecert       loaddefault   rebootbmc      setenc     readraw
   dump             nodes         rebootrsa      show       writeraw

*** The ASU User&apos;s Guide provides detailed command description and operation.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Show names of variable classes on the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 showgroups
bios
bmc
rsa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Show the possible values for the specified setting.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 showvalues 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Show the default value for the specified setting.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 showdefault
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Show the current value for one or all settings.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 show
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Syntax:
    show [&amp;lt;setting&amp;gt;][&amp;lt;cmdmod&amp;gt;] [&amp;lt;options&amp;gt;] [&amp;lt;connect_opts&amp;gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To prepare the IBM HS21 blade server to support serial console, you need
to enable SOL (Serial Over LAN) in BIOS.  That’s done by changing values
of six BIOS settings (names of the six settings are listed at the beginning
of this section above).&lt;/p&gt;

&lt;p&gt;Change values for the six BIOS settings:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 set CMOS_SerialA &quot;Auto-configure&quot;
# /opt/ibm/toolscenter/asu/asu64 set CMOS_SerialB &quot;Auto-configure&quot;
# /opt/ibm/toolscenter/asu/asu64 set CMOS_RemoteConsoleEnable Enabled
# /opt/ibm/toolscenter/asu/asu64 set CMOS_RemoteConsoleComPort &quot;COM 2&quot;
# /opt/ibm/toolscenter/asu/asu64 set CMOS_RemoteConsoleBootEnable Enabled
# /opt/ibm/toolscenter/asu/asu64 set CMOS_RemoteConsoleFlowCtrl Hardware 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference:&lt;br /&gt;
&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.advmgtmod.doc/kp1bd_pdf.pdf&quot;&gt;BladeCenter SOL (Serial over LAN) Setup Guide - IBM Corporation, Twelfth Edition (November 2009)&lt;/a&gt; (retrieved on Mar 22, 2022):
Chapter 2. General configuration &amp;gt; Updating and configuring the blade server BIOS&lt;/p&gt;

&lt;h4 id=&quot;configure-rhel-based-linux-distribution-for-serial-console-text-console&quot;&gt;Configure RHEL-Based Linux Distribution for Serial Console (Text Console)&lt;/h4&gt;

&lt;p&gt;In this example the operating system on the node is CentOS
Linux &lt;strong&gt;5.2&lt;/strong&gt; (64-bit).&lt;/p&gt;

&lt;p&gt;To configure Linux for SOL operation, you must configure it to expose
the Linux initialization (booting) process.  This enables users to
log in to the Linux console using an SOL session and directs Linux output
to the serial console.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; This procedure is based on a default installation of
&lt;strong&gt;RHEL 5.2&lt;/strong&gt;
(Red Hat Enterprise Linux 5.2).  The file names, structures, and commands
might be different for other versions of RHEL-based Linux distributions.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Hardware flow control prevents character loss during communication over a
serial connection.  You must enable it when using a Linux operating system.
Add the following line to the end of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# Run gettys in standard runlevels&lt;/code&gt;
section of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/inittab&lt;/code&gt; file.  This enables hardware flow control and
enables users to log in through the SOL console.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;7:2345:respawn:/sbin/agetty -h ttyS1 19200 vt102&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following line at the bottom of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/securetty&lt;/code&gt; file to
enable a user to log in as the root user through the SOL console: &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ttyS1&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;grub-configuration&quot;&gt;GRUB Configuration&lt;/h4&gt;

&lt;p&gt;Complete the following steps to modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/grub/grub.conf&lt;/code&gt; file:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Comment out the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;splashimage=...&lt;/code&gt; line by adding a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#&lt;/code&gt; at the beginning of this line.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following line before the first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; line:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# This will allow you to only monitor the OS boot via SOL&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following text to the end of first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; line:  &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SOL Monitor&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following text to the end of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kernel /...&lt;/code&gt; line of
the first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; section: &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=ttyS1,19200 console=tty1&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following lines after the frst &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; section:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# This will allow you to interact with the OS boot via SOL
title CentOS (2.6.18-92.el5) SOL Interactive
    root (hd0,0)
    kernel /boot/vmlinuz-2.6.18-92.el5 ro root=LABEL=/ rhgb quiet console=tty1
console=ttyS1,19200
    initrd /boot/initrd-2.6.18-92.el5.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The entry beginning with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kernel /boot/vmlinuz...&lt;/code&gt; is shown with a line break
after &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=tty1&lt;/code&gt;.  In your file, the entire entry must all be on one line.&lt;/p&gt;

&lt;p&gt;Modified &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/grub/grub.conf&lt;/code&gt; contents:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You do not have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /, eg.
#          root (hd0,0)
#          kernel /boot/vmlinuz-version ro root=/dev/sda1
#          initrd /boot/initrd-version.img
#boot=/dev/sda
default=0
timeout=5
#splashimage=(hd0,0)/boot/grub/splash.xpm.gz
hiddenmenu
# This will allow you to only monitor the OS boot via SOL
title CentOS (2.6.18-92.el5) SOL Monitor
    root (hd0,0)
    kernel /boot/vmlinuz-2.6.18-92.el5 ro root=LABEL=/ rhgb quiet
console=ttyS1,19200 console=tty1
    initrd /boot/initrd-2.6.18-92.el5.img

# This will allow you to interact with the OS boot via SOL
title CentOS (2.6.18-92.el5) SOL Interactive
    root (hd0,0)
    kernel /boot/vmlinuz-2.6.18-92.el5 ro root=LABEL=/ rhgb quiet
console=tty1 console=ttyS1,19200
    initrd /boot/initrd-2.6.18-92.el5.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The entries beginning with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kernel /boot/vmlinuz...&lt;/code&gt; are shown
with a line break.  In the actual &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub.conf&lt;/code&gt; file, the both entries are
actually on one line.&lt;/p&gt;

&lt;p&gt;You must reboot the Linux operating system after completing these
procedures for the changes to take effect and to enable SOL.
However, instead of doing it from the OS, I want to confirm that the SOL
setup worked by performing a test with establishing a SOL connection to
the command console of this blade server.  Steps listed below show how to
do that.&lt;/p&gt;

&lt;p&gt;Log on to the management module (&lt;strong&gt;MM&lt;/strong&gt;) via the CLI (command line
interface) by following instructions listed
above (&lt;a href=&quot;#connecting-to-cli-on-mm&quot;&gt;“Connecting to CLI on MM”&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Power cycle this blade server, blade 2 (which is in a blade chassis,
holding a total of 14 blades) to command console.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cycle&lt;/code&gt; option: power off, then on.  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-c&lt;/code&gt; option: enter &lt;strong&gt;console&lt;/strong&gt;
mode at power on (used on blades with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-on&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cycle&lt;/code&gt;).  The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-T&lt;/code&gt; option:
target (in this case blade number 2).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; power -cycle -c -T system:blade[2]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you see output similar to the following, the SOL setup works:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;IPMI kcs interface initialized

                                             CP: 17RN50 200m/200e DDR1 BIOS


IBM BIOS - (c) Copyright IBM Corporation 2008                       CP: 28
Symmetric Multiprocessing System$
Intel(R) Xeon(R) CPU E5430 @ 2.66GHz$
2 Processor Packages Installed$

16384 MB Installed Memory


Press F1 for Configuration/Setup
Press F2 for Diagnostics
Press F12 for Boot Device Selection Menu


&amp;gt;&amp;gt; BIOS Version 1.15 &amp;lt;&amp;lt;

[...]

Press any key to enter the menu

Booting CentOS (2.6.18-92.el5) SOL Monitor in 1 seconds...

[...]

CentOS release 5.2 (Final)
Kernel 2.6.18-92.el5 on an x86_64

abacus102 login: root
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  If you loose communication over the serial connection,
you can re-establish it with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console&lt;/code&gt; command:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console -T system:blade[2]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;To &lt;strong&gt;exit&lt;/strong&gt; the SOL session and to return to the CLI on the &lt;strong&gt;MM&lt;/strong&gt;,
press Esc followed by an open parenthesis: 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Esc (&lt;/code&gt;  (two characters: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Esc&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Shift-9&lt;/code&gt; [on US keyboards])&lt;/p&gt;

&lt;p&gt;To return to the OS, in the CLI prompt of the &lt;strong&gt;MM&lt;/strong&gt;, type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exit&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Back in the OS:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -c2 192.168.80.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get the MAC address of the node with IP address 192.168.80.2:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# arp -a | grep &apos;192.168.80.2&apos;
? (192.168.80.2) at 01:02:03:04:05:0e [ether] on eth1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; If you don’t have network connection with this node, you can
obtain its MAC address by logging in to the &lt;strong&gt;MM&lt;/strong&gt; (&lt;strong&gt;BMC&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;Log on to the management module (&lt;strong&gt;MM&lt;/strong&gt;) via the CLI (command line
interface) by following instructions listed
above (&lt;a href=&quot;#connecting-to-cli-on-mm&quot;&gt;“Connecting to CLI on MM”&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;In the BMC CLI prompt:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; info -T blade[2]
[...]
MAC Address 1: 00:11:22:[...]
MAC Address 2: 00:11:22:[...]
MAC Address 3: Not Available
MAC Address 4: Not Available
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create an xCAT data object definition for this node 
(name the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  I had to create this data object in two steps:
The attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmc&lt;/code&gt; must be specified but when I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmc&lt;/code&gt; with
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mgt=blade&lt;/code&gt;, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkdef&lt;/code&gt; returned an error: &lt;em&gt;“Cannot set the attr=’bmc’
attribute unless mgt value is ipmi or openbmc”&lt;/em&gt; so in this first step
I skipped setting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmc&lt;/code&gt; attribute and then changed it in the next step.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef \
-t node abacus102 \
id=2 \
--template x86_64-template \
ip=192.168.80.2 \
mac=01:02:03:04:05:0e \
bmc=192.168.80.135 \
mpa=xbcmm1n \
getmac=blade \
cons=blade \
serialport=1 \
serialspeed=19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef -t node -o abacus102 mgt=blade
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus102 
Object name: abacus102
    arch=x86_64
    cons=blade
    getmac=blade
    groups=all
    id=2
    ip=192.168.80.2
    mac=01:02:03:04:05:0e
    mgt=blade
    mpa=xbcmm1n
    netboot=xnba
    postbootscripts=otherpkgs
    postscripts=syslog,remoteshell,syncfiles
    serialport=1
    serialspeed=19200
    usercomment=the system X node definition
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mpa
#mpa,username,password,displayname,slots,urlpath,comments,disable
&quot;xbcmm1n&quot;,&quot;YOUR_BMC_USERID&quot;,&quot;YOUR_BMC_PASSW0RD&quot;,,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mp
#node,mpa,id,nodetype,comments,disable
&quot;bcmgmt1&quot;,&quot;bcmgmt1&quot;,&quot;0&quot;,,,
&quot;bcmgmt2&quot;,&quot;bcmgmt2&quot;,&quot;0&quot;,,,
[...]
&quot;xbcmm1n&quot;,&quot;xbcmm1n&quot;,,,,
&quot;abacus101&quot;,&quot;xbcmm1n&quot;,&quot;1&quot;,,,
&quot;abacus102&quot;,&quot;xbcmm1n&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Change &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt; in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node=abacus102&lt;/code&gt; row in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table setting with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id=2&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus102 \
mp.id=2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mp
#node,mpa,id,nodetype,comments,disable
&quot;bcmgmt1&quot;,&quot;bcmgmt1&quot;,&quot;0&quot;,,,
&quot;bcmgmt2&quot;,&quot;bcmgmt2&quot;,&quot;0&quot;,,,
[...]
&quot;xbcmm1n&quot;,&quot;xbcmm1n&quot;,,,,
&quot;abacus101&quot;,&quot;xbcmm1n&quot;,&quot;1&quot;,,,
&quot;abacus102&quot;,&quot;xbcmm1n&quot;,&quot;2&quot;,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt; hardware control:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower abacus102 state
abacus102: on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rinv -V abacus102 all
20220320.21:48:23 (3057) rinv:start deal with SNMP session.
abacus102: Machine Type/Model: 8853AC1
abacus102: Serial Number: KQCCXBF
abacus102: MAC Address 1: 01:02:03:04:05:0e
abacus102: MAC Address 2: 01:02:03:04:05:0f
abacus102: Management Module firmware: 16 (BRET86S 10-12-09)
20220320.21:48:24 (3057) rinv:SNMP session completed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Configure DNS.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makehosts abacus102 
Warning: [xcatmn]: No domain can be determined for node &apos;abacus102&apos;. 
  The domain of the xCAT node must be provided in an xCAT network
  definition or the xCAT site definition.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedns -n
Error: [xcatmn]: domain not defined in site table
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To fix this error, add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; attribute as explained further below.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tabdump&lt;/code&gt; command displays the header and all the rows of the specified
table in CSV (comma separated values) format.  To show descriptions of the
tables, instead of the contents of the tables, use the option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-d&lt;/code&gt;.
If a table name is also specified, descriptions of the columns
(attributes) of the table will be displayed.  Otherwise, a summary of each
table will be displayed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump -d
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table is specific and different from all the other tables.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump -d | grep -n site
115:site:  Global settings for the whole cluster.  This table is different from

# tabdump -d | sed -n 115,121p
site:  Global settings for the whole cluster.  This table is different from
the other tables in that each attribute is just named in the key column,
rather than having a separate column for each attribute. The following is
a list of attributes currently used by xCAT organized into categories.


statelite: The location on an NFS server where a nodes persistent files
are stored.  Any file marked persistent in t.
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To show how &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table is differently laid out, let’s compare it to,
for example, table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;passwd&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump passwd
#key,username,password,cryptmethod,authdomain,comments,disable
&quot;system&quot;,&quot;root&quot;,&quot;PASSWORDHERE&quot;,,,,
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site
#key,value,comments,disable
[...]
&quot;master&quot;,&quot;192.168.80.220&quot;,,
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This means that with all tables except the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table, you specifty attribute
by first giving the table name. For example, in case of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;passwd&lt;/code&gt; table
(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;passwd.username&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;passwd.password&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=system passwd.username=root passwd.password=&apos;abc!!123(??)&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In contrast, for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table, after the table name (that is, after
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt;), you always use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.value&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=nameservers site.value=192.168.80.220
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back to fixing the error raised above (with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts abacus102&lt;/code&gt; and
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns -n&lt;/code&gt;) where the warning was that the domain of the xCAT node 
must be provided in an xCAT network definition or the xCAT site definition.&lt;/p&gt;

&lt;p&gt;Description of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;networks&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump -d | grep networks
networks:       Describes the networks in the cluster and info necessary to
set up nodes on that network.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Description of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; attribute:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump -d site | grep -w domain 
 domain:  The DNS domain name used for the cluster.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Currently, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table doesn’t have the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; key:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep -i domain
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To add the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; key and value (in this example &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mydomain.com&lt;/code&gt;) to the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab key=domain site.value=mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After this, both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns&lt;/code&gt; work:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makehosts abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tail -1 /etc/hosts
192.168.80.2 abacus102 abacus102.mydomain.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedns -n 
Handling xbcmm1n in /etc/hosts.
Handling abacus102 in /etc/hosts.
Handling localhost in /etc/hosts.
Handling localhost in /etc/hosts.
Handling xcatmn in /etc/hosts.
Getting reverse zones, this may take several minutes for a large cluster.
Completed getting reverse zones.
Updating zones.
Completed updating zones.
Restarting named
Restarting named complete
Updating DNS records, this may take several minutes for a large cluster.
Completed updating DNS records.
DNS setup is completed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference:&lt;br /&gt;
&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.advmgtmod.doc/kp1bd_pdf.pdf&quot;&gt;BladeCenter SOL (Serial over LAN) Setup Guide - IBM Corporation, Twelfth Edition (November 2009)&lt;/a&gt; (retrieved on Mar 22, 2022):
Chapter 3. Operating system configuration &amp;gt; Linux configuration &amp;gt; Red Hat Enterprise Linux ES 2.1 configuration&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;create-a-qemu-image-snapshot-backup&quot;&gt;Create a QEMU Image Snapshot Backup&lt;/h2&gt;

&lt;p&gt;Power off the guest VM.&lt;/p&gt;

&lt;p&gt;Run the following commands on the host.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img info xcatmn.img
image: xcatmn.img
file format: raw
virtual size: 80 GiB (85899345920 bytes)
disk size: 21.6 GiB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List all snapshots in the image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img snapshot -l xcatmn.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So currently the image doesn’t have any snapshots.&lt;/p&gt;

&lt;p&gt;Convert image format from raw to qcow2.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img \
convert \
-f raw \
-O qcow2 \
xcatmn.img \
xcatmn.qcow2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh xcatmn.img
-rw-rw-r-- 1 dusko dusko 80G Mar 20 20:03 xcatmn.img

$ ls -lh xcatmn.qcow2
-rw-r--r-- 1 dusko dusko 24G Mar 20 20:04 xcatmn.qcow2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the snapshot.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img snapshot -c xcat_configured_bkp xcatmn.qcow2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List all snapshots in the image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img snapshot -l xcatmn.qcow2
Snapshot list:
ID        TAG                 VM SIZE                DATE       VM CLOCK
1         xcat_configured_bkp     0 B 2022-03-20 20:04:13   00:00:00.000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;stage-3-prepare-postscripts-and-postbootscripts&quot;&gt;Stage 3: Prepare Postscripts and Postbootscripts&lt;/h2&gt;

&lt;p&gt;For this installation, I wrote the following two custom scripts:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute_custom_post&lt;/code&gt;: post-&lt;strong&gt;installation&lt;/strong&gt; script for all CNs
                       (compute nodes)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus_custom_postboot&lt;/code&gt;: post-&lt;strong&gt;boot&lt;/strong&gt; script for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus&lt;/code&gt; cluster’s 
                          CNs (compute nodes)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;while &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt;, the next required post-&lt;strong&gt;installation&lt;/strong&gt; script for all 
CNs (compute nodes) &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt;, was already preinstalled by xCAT.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Assumptions:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Hostname of the compute node that I’m using in this 
example: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102.mydomain.com&lt;/code&gt; (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.2&lt;/code&gt;). 
It’s a blade server in a slot number 2 in an IBM chassis, 
holding (housing) a total of 14 blades (blade servers).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Start the xCAT QEMU VM (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;, with 
IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br0&quot;,id=hn0 \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br1&quot;,id=hn1 \
-device virtio-net-pci,netdev=hn0 \
-device virtio-net-pci,netdev=hn1 \
-daemonize
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log into the QEMU virtual machine; that is, the xCAT MN (management node):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh root@192.168.80.220
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The execution of post-installation and post-boot scripts is configured
with the xCAT postscripts table.  Post-installation and post-boot scripts,
including custom scripts, are placed in /install/postscripts.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts
#node,postscripts,postbootscripts,comments,disable
&quot;xcatdefaults&quot;,&quot;syslog,remoteshell,syncfiles&quot;,&quot;otherpkgs&quot;,,
&quot;service&quot;,&quot;servicenode&quot;,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 cat /etc/redhat-release
abacus102: CentOS Linux release 7.9.2009 (Core)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;example-use-case--pbs-scheduling-software-with-webmo-as-front-end&quot;&gt;Example Use Case:  PBS Scheduling Software with WebMO as Front-End&lt;/h3&gt;

&lt;p&gt;Scheduling software lets you run your cluster like a batch system,
allowing you to allocate cluster resources, such as CPU time and memory,
on a job-by-job basis.  Jobs are queued and run as resources become
available, subject to the priorities you establish.  Your users will be
able to add and remove jobs from the job queue as well as track the
progress of their jobs.  As the administrator, you will be able to
establish priorities and manage the queue.&lt;/p&gt;

&lt;p&gt;There are several freely available scheduling systems.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  This is an example of setting up &lt;strong&gt;PBS&lt;/strong&gt; (&lt;strong&gt;Portable Batch 
System&lt;/strong&gt;), specifically &lt;strong&gt;TORQUE&lt;/strong&gt; (Terascale Open-source Resource 
and QUEue Manager),&lt;/p&gt;

&lt;p&gt;From &lt;em&gt;Distributed Computing with Python&lt;/em&gt; by Francesco Pierfederici &lt;br /&gt;
Packt Publishing, April 2016&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Portable Batch System (PBS) was developed for NASA in the beginning
of the 90s.  It now exists in three variants:  OpenPBS, Torque, and
PBS Pro.  These are all forks of the original codebase, and have a very
similar look and feel from the user perspective.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here, I look at &lt;strong&gt;Torque&lt;/strong&gt; HPC Resource Manager.&lt;/p&gt;

&lt;h3 id=&quot;torque-resource-manager&quot;&gt;Torque Resource Manager&lt;/h3&gt;

&lt;p&gt;TORQUE v 2.3.6, thanks to &lt;a href=&quot;https://archive.org/&quot;&gt;The Internet Archive&lt;/a&gt;: &lt;br /&gt;
&lt;a href=&quot;https://web.archive.org/web/20090123185628/http://clusterresources.com/downloads/torque/torque-2.3.6.tar.gz&quot;&gt;https://web.archive.org/web/20090123185628/http://clusterresources.com/downloads/torque/torque-2.3.6.tar.gz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From the README for TORQUE v 2.3.6:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat README.torque
#
# TORQUE 2.3.6 README (released Dec, 23 2008)
[...]

OVERVIEW --------------------

  TORQUE (Terascale Open-source Resource and QUEue manager) is an open source
project based on the original PBS* resource manager developed by NASA,
LLNL, and MRJ.  It possesses a large number of enhancements contributed by
organizations such as OSC, NCSA, TeraGrid, the U.S Dept of Energy, USC, 
and many, many others. [...] It may be utilized, modified, and distributed
subject to the constraints of the license located in the PBS_License.txt file. 
[...]
* TORQUE is not endorsed by nor affiliated with Altair.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_mom(8)&lt;/code&gt; command starts a pbs batch &lt;strong&gt;Machine Oriented Mini-server&lt;/strong&gt;
(&lt;strong&gt;MOM&lt;/strong&gt;) on a local host (on a compute node).  Typically, on systems with
traditional SysV init scripts, this command will be in a local boot file
such as /etc/rc.local.&lt;/p&gt;

&lt;p&gt;List the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;torque&lt;/code&gt; directory content on the storage server 
(IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;), which is configured with 
a shared directory across the nodes (via NFS). 
(This is the new server that replaced the old one in summer
of 2021. You can call it a “head node” as in addition to being 
the storage server, it’s also hosting a front-end WebMO, running 
with Apache webserver.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh -t dusko@192.168.80.210 ls -lh /opt/torque/
dusko@192.168.80.210&apos;s password:
total 4.0K
drwxr-xr-x 2 root root 4.0K May 16  2009 bin
drwxr-xr-x 2 root root   92 May 16  2009 include
drwxr-xr-x 2 root root  113 May 16  2009 lib
drwxr-xr-x 6 root root   54 May 16  2009 man
drwxr-xr-x 2 root root  147 May 16  2009 sbin
drwxr-xr-x 3 root root   19 May 16  2009 var
Connection to 192.168.80.210 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While you are sill logged in the &lt;strong&gt;MN&lt;/strong&gt; (&lt;strong&gt;Management Node&lt;/strong&gt;),
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;), tar and 
copy the PBS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;torque&lt;/code&gt; directory from an existing &lt;strong&gt;compute node&lt;/strong&gt; 
(for example, from a compute node with IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.6&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh -t root@192.168.80.6 ls -lh /opt/torque/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh -t root@192.168.80.6 \
&apos;cd /opt; tar czf torque.tar.gz torque; mv torque.tar.gz /tmp&apos;
root@192.168.80.6&apos;s password: 
Connection to 192.168.80.6 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the content of the PBS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;torque&lt;/code&gt; directory from the compute node 
(using the already mentioned node at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.6&lt;/code&gt;) temporarily to 
the MN (management node).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp root@192.168.80.6:/tmp/torque.tar.gz .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The tarred PBS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;torque&lt;/code&gt; directory on the compute node can be deleted:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh -t root@192.168.80.6 rm -i /tmp/torque.tar.gz 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The PBS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;torque&lt;/code&gt; directory now can be copied to from the MN 
(management node) to the compute node that you are provisioning:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp torque.tar.gz root@192.168.80.2:/opt/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log out from the MN (management node).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
logout
Connection to 192.168.80.220 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You are now back in the compute node that you are provisioning 
(named: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;).  If not, you can log into it with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh abacus102&lt;/code&gt; 
since you’ve already configured it for passwordless ssh.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# hostname
abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /opt
# tar xf torque.tar.gz
# rm -i torque.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -lh /opt/torque/
total 4.0K
drwxr-xr-x 2 root root 4.0K May 16  2009 bin
drwxr-xr-x 2 root root   92 May 16  2009 include
drwxr-xr-x 2 root root  113 May 16  2009 lib
drwxr-xr-x 6 root root   54 May 16  2009 man
drwxr-xr-x 2 root root  147 May 16  2009 sbin
drwxr-xr-x 3 root root   19 May 16  2009 var
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Version of the TORQUE that I copied to the compute node is 2.3.6:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep ^version /opt/torque/bin/pbs-config
version=&quot;2.3.6&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove an old &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mom.lock&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rm -i /opt/torque/var/spool/mom_priv/mom.lock
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;convert-traditional-sysv-system-v-init-script-aka-sysvinit-for-pbs_mom-service-to-systemd-unit-file&quot;&gt;Convert Traditional SysV (System V) Init Script (aka SysVinit) for pbs_mom Service to systemd Unit File&lt;/h3&gt;

&lt;p&gt;At the beginning of the previous section above (titled &lt;em&gt;Torque Resource 
Manager&lt;/em&gt;), I downloaded the source for TORQUE v 2.3.6.  I untarred the tar 
file and located the traditional SysV init script at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contrib/init.d/pbs_mom&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff --unified=0 pbs_mom.ORIG pbs_mom
--- pbs_mom.ORIG      2022-03-20 10:24:36.586238000 -0700
+++ pbs_mom    2022-03-20 10:24:59.884424000 -0700
@@ -12,2 +12,4 @@
-PBS_DAEMON=/usr/local/sbin/pbs_mom
-PBS_HOME=/var/spool/torque
+#PBS_DAEMON=/usr/local/sbin/pbs_mom
+#PBS_HOME=/var/spool/torque
+PBS_DAEMON=/opt/torque/sbin/pbs_mom
+PBS_HOME=/opt/torque/var/spool
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /etc/systemd/system/pbs_mom.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/systemd/system/pbs_mom.service
[Unit]
Description=PBS Mom service

[Service]
ExecStart=/opt/torque/sbin/pbs_mom
Type=forking

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl daemon-reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Find out (confirm) the TORQUE server name.  In this example, it’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mgmt&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -lh /opt/torque/var/spool/server_name
-rw-r--r-- 1 root root 5 May 16  2009 /opt/torque/var/spool/server_name

# cat /opt/torque/var/spool/server_name
mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  This sample configuration includes
&lt;a href=&quot;https://www.webmo.net/&quot;&gt;WebMO&lt;/a&gt; as a front-end:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;WebMO is a web-based interface to computational chemistry packages.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;While still on the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;, add
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IP_address canonical_hostname&lt;/code&gt; pairs to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;
file &lt;a href=&quot;#footnotes&quot;&gt;⁷&lt;/a&gt; for the following hosts:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;: this compute node&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mgmt&lt;/code&gt;: MN (management node)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt;: the WebMO server&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;192.168.80.2 abacus102&quot; &amp;gt;&amp;gt; /etc/hosts
# printf %s\\n &quot;192.168.80.210 mgmt&quot; &amp;gt;&amp;gt; /etc/hosts
# printf %s\\n &quot;192.168.80.100 abacus.mydomain.com&quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-enabled pbs_mom.service
disabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable pbs_mom.service
Created symlink from /etc/systemd/system/multi-user.target.wants/pbs_mom.service to
  /etc/systemd/system/pbs_mom.service.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-enabled pbs_mom.service
enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl start pbs_mom.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-active pbs_mom.service
active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;submit-a-test-job-to-a-specific-node&quot;&gt;Submit a Test Job to a Specific Node&lt;/h3&gt;

&lt;p&gt;As the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt; has already been configured 
(with passwordless ssh), you can log into it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[root@xcatmn ~]# ssh abacus102
Last login: Sun Mar 30 16:30:21 2022 from xcatmn.mydomain.com

[root@abacus102 ~]# 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# find /opt/torque/ -iname &apos;*qstat*&apos;
/opt/torque/bin/qstat
/opt/torque/man/man1/qstat.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The manpage for qstat(1B) from the PBS software package (Torque):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man /opt/torque/man/man1/qstat.1 

qstat(1B)                   PBS                  qstat(1B)

NAME
       qstat - show status of pbs batch jobs

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exit the compute node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
logout
Connection to abacus102 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to the head node (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;), 
a.k.a. the webserver (for WebMO). 
&lt;strong&gt;NOTE:&lt;/strong&gt;  This is &lt;strong&gt;not&lt;/strong&gt; the xCAT MN (management node), 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh root@192.168.80.210
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# command -v qstat; type -a qstat; whereis qstat; which qstat
/global/software/torque/x86_64/bin/qstat
qstat is /global/software/torque/x86_64/bin/qstat
qstat is /global/software/torque/x86_64/bin/qstat
qstat: /opt/torque/bin/qstat /global/software/torque/x86_64/bin/qstat /usr/share/man/man1p/qstat.1p.gz
/global/software/torque/x86_64/bin/qstat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt; the different manpage for the qstat(1P) from the POSIX 
Programmer’s Manual than the one above (for qstat(1B) [from the PBS 
software package (Torque)]:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man qstat

QSTAT(1P)                   POSIX Programmer&apos;s Manual   QSTAT(1P)

PROLOG
       This manual page is part of the POSIX Programmer&apos;s Manual. 
       The Linux implementation of this interface may differ (consult the 
       corresponding Linux manual page for details of Linux behavior), 
       or the interface may not be implemented on Linux.

NAME
       qstat - show status of batch jobs

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without any options or arguments, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qstat&lt;/code&gt; requests for status of all 
jobs (in all queues at the default server):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# qstat 
Job id      Name         User  Time Use S Queue
----------- ------------ ----- -------- - -----
290398.mgmt WebMO_285069 webmo  2:17:56 R abacus 
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While still at the head node (remember, this is &lt;strong&gt;not&lt;/strong&gt; the xCAT 
MN &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;), first use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbsnodes(8)&lt;/code&gt;
&lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;8&lt;/a&gt;&lt;/sup&gt; to check whether the node’s state is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pbsnodes -l all abacus102
abacus102            offline
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the node is in OFFLINE state, the fix is to clear OFFLINE from the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pbsnodes -c abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the node is in DOWN state, try fixing it by restarting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_mom&lt;/code&gt; 
service on the node – remember that you need to run the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xdsh(1)&lt;/code&gt; command from the xCAT MN (Management Node) so you first need to log into the xCAT MN:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh root@192.168.80.220
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the xCAT MN (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;), run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xdsh(1)&lt;/code&gt; command to 
restart the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_mom&lt;/code&gt; service on the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 systemctl restart pbs_mom.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exit the xCAT MN (Management Node).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back on the head node (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;), restart 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_server&lt;/code&gt; service.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart pbs_server.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that the status of the node is now &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pbsnodes -l all abacus102
abacus102            free
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While still on the head node (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;), create 
a test job (a.k.a. batch job) that will be submitted to run specifically 
on the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi test_abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat test_abacus102
#
#
#PBS -l nodes=1:abacus102
#
sleep 120
hostname
date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Submit a test job to compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# qsub test_abacus102
290405.mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You’ll notice that the PBS Torque returned a job number, 
which is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;290405.mgmt&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# qstat -a

mgmt: 
                                                       Req&apos;d Req&apos;d   Elap
Job ID      User Queue  Jobname         SessID NDS TSK Mem   Time  S Time
----------- ---- ------ --------------  ------ --- --- ----- ----- - ----
[...]
290405.mgmt root abacus test_abacus102  28382    1  --   --  120:0 R  --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log into the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt; to confirm whether the submitted test
job is running on this node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh root@abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# find /opt/torque/ -name &apos;*290405*&apos;
/opt/torque/var/spool/mom_priv/jobs/290405.mgmt.SC
/opt/torque/var/spool/mom_priv/jobs/290405.mgmt.TK
/opt/torque/var/spool/mom_priv/jobs/290405.mgmt.JB
/opt/torque/var/spool/aux/290405.mgmt
/opt/torque/var/spool/spool/290405.mgmt.OU
/opt/torque/var/spool/spool/290405.mgmt.ER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /opt/torque/var/spool/mom_priv/jobs/290405.mgmt.SC
#
#
#PBS -l nodes=1:abacus102
#
sleep 120
hostname
date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /opt/torque/var/spool/aux/290405.mgmt
abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log out from the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
logout
Connection to abacus102 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back on the head node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# qstat 
Job id      Name           User Time Use S Queue
----------- -------------- ---- -------- - -----
[...]
290405.mgmt test_abacus102 root 00:00:00 R abacus
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After 120 seconds:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# qstat 
Job id      Name           User Time Use S Queue
----------- -------------- ---- -------- - -----
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;setup-nfs-server-on-the-head-node-hn-running-centos-8rhel-8&quot;&gt;Setup NFS Server on the Head Node (HN) Running CentOS 8/RHEL 8&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
The following steps are performed on the head node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt; (IP address:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The head node has been previously configured as an NFS server 
so the needed NFS server package (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nfs-utils&lt;/code&gt;) is already installed:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf list --installed | grep nfs-utils
nfs-utils.x86_64    1:2.3.3-46.el8    @rhel-8-for-x86_64-baseos-rpms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Verify the version of nfs protocol that is running.  The version is
indicated by the second column in the output below.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rpcinfo -p | grep nfs
    100003    3   tcp   2049  nfs
    100003    4   tcp   2049  nfs
    100227    3   tcp   2049  nfs_acl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For additional configuration of the NFS server, you can find the
configuration files at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nfs.conf&lt;/code&gt;, which is the NFS daemon config file
and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nfsmount.conf&lt;/code&gt;, which is the configuration file for the NFS mount.
In this example, these two files haven’t been customized:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -v \# /etc/nfs.conf
# /etc/nfs.conf
[general]
[exportfs]
[gssd]
use-gss-proxy=1
[lockd]
[mountd]
[nfsdcld]
[nfsdcltrack]
[nfsd]
[statd]
[sm-notify]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -v \# /etc/nfsmount.conf
[ NFSMount_Global_Options ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The file system that is shared from the NFS server to NFS client systems:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ showmount -e
Export list for mgmt:
/export   abacus214,abacus213, [...], abacus102,abacus101,mgmt
/global   abacus214,abacus213, [...], abacus102,abacus101,mgmt
/home     abacus214,abacus213, [...], abacus102,abacus101,mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Directory ownership and permissions:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -ld /global
drwxr-xr-x 3 root root 3 Aug  3  2021 /global
[
$ ls -ld /home
drwxr-xr-x. 33 root root 34 Jun 21  2021 /home
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All the compute nodes are allowed access to the NFS share:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/exports
/home mgmt(rw,sync,no_root_squash) abacus101(rw,sync,no_root_squash) abacus102(rw,sync,no_root_squash) [...] abacus213(rw,sync,no_root_squash) abacus214(rw,sync,no_root_squash) 
/global mgmt(rw,sync,no_root_squash) abacus101(rw,sync,no_root_squash) abacus102(rw,sync,no_root_squash) [...] abacus213(rw,sync,no_root_squash) abacus214(rw,sync,no_root_squash)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Explanation:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rw&lt;/code&gt;: Allow NFS clients read/write permissions to the NFS share.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sync&lt;/code&gt;: Require the writing of the changes on the disk first before
        any other operation can be carried out.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;no_root_squash&lt;/code&gt;: Allow access to files inside directories to
                  which only root has access.
    &lt;ul&gt;
      &lt;li&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exports(5)&lt;/code&gt;: “Very  often, it is
not desirable that the root user on a client machine is also treated
as root when accessing files on the NFS server.  To this end, UID 0 is
normally mapped to a different ID: the so-called anonymous or nobody UID.
This mode of operation (called ‘root squashing’) is the default, and can
be turned off with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;no_root_squash&lt;/code&gt;.”  In other words, do &lt;em&gt;not&lt;/em&gt; map
requests from the root user on the client-side to an anonymous UID/GID.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;configure-the-firewall-rules-for-nfs-server-on-centos-8rhel-8&quot;&gt;Configure the Firewall Rules for NFS Server on CentOS 8/RHEL 8&lt;/h3&gt;

&lt;p&gt;While still on the head node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt; 
(IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.210&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl start firewalld.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl is-active firewalld.service
active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl enable firewalld.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl is-enabled firewalld.service
enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo firewall-cmd --permanent --add-service=nfs
$ sudo firewall-cmd --permanent --add-service=rpc-bind
$ sudo firewall-cmd --permanent --add-service=mountd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo grep -n PORT /opt/torque/include/pbs_ifl.h
[...]
392:#define PBS_BATCH_SERVICE_PORT  15001
[...]
398:#define PBS_BATCH_SERVICE_PORT_DIS 15001  /* new DIS port   */
[...]
404:#define PBS_MOM_SERVICE_PORT  15002
[...]
410:#define PBS_MANAGER_SERVICE_PORT 15003
[...]
416:#define PBS_SCHEDULER_SERVICE_PORT 15004
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo firewall-cmd --list-ports
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo firewall-cmd --permanent --add-port=15001-15004/tcp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl restart firewalld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo firewall-cmd --list-ports
15001-15004/tcp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo firewall-cmd --list-all
public (active)
  target: default
  [...] 
  interfaces: br0 br1 eno1 eno2
  [...] 
  services: cockpit dhcpv6-client http https mountd nfs rpc-bind ssh
  ports: 15001-15004/tcp
  [...] 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;set-up-nfs-client-on-compute-node&quot;&gt;Set Up NFS Client on Compute Node&lt;/h3&gt;

&lt;p&gt;Log in to the compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh root@abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;mgmt:/home    /home    nfs  defaults  1 2&quot; &amp;gt;&amp;gt; /etc/fstab
# printf %s\\n &quot;mgmt:/global  /global  nfs  defaults  1 2&quot; &amp;gt;&amp;gt; /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /global
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mount -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# df -hT /home
Filesystem     Type  Size  Used Avail Use% Mounted on
mgmt:/home     nfs4  5.0T  1.8T  3.3T  36% /home

# df -hT /global
Filesystem     Type  Size  Used Avail Use% Mounted on
mgmt:/global   nfs4  3.9T  637G  3.3T  17% /global
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n Test &amp;gt; /home/testfile

# ls -lh /home/testfile
-rw-r--r-- 1 root root 5 Mar 20 19:59 /home/testfile

# cat /home/testfile
Test

# rm -i /home/testfile
rm: remove regular file ‘/home/testfile’? y

# ls -lh /home/testfile
ls: cannot access /home/testfile: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;: Complete this section&lt;/p&gt;

&lt;h3 id=&quot;postscripts-setup&quot;&gt;Postscripts Setup&lt;/h3&gt;

&lt;p&gt;The following steps need to be run on the management node, 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt; (IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /install/custom
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /install/custom/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the content that your postscript will need. In this example, 
I prepared the torque directory on another compute node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus106&lt;/code&gt;, 
with the IP address: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.6&lt;/code&gt;) that I previously configured manually.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp root@192.168.80.6:/tmp/torque.tar.gz .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You don’t need the tarred content on the other compute node so you can 
delete it from there:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh -t root@192.168.80.6 rm -i /tmp/torque.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synclist&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /install/custom/install/centos/compute.centos7.x86_64.synclist
/install/custom/torque/* -&amp;gt; /opt/torque/

/install/custom/group_cn_common -&amp;gt; /etc/group
/install/custom/gshadow_cn_common -&amp;gt; /etc/gshadow
/install/custom/passwd_cn_common -&amp;gt; /etc/passwd
/install/custom/shadow_cn_common -&amp;gt; /etc/shadow
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that the object &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt; now has the attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synclists&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t osimage -i synclists
Object name: centos7.9-x86_64-install-compute
    synclists=/install/custom/install/centos/compute.centos7.x86_64.synclist
Object name: centos7.9-x86_64-netboot-compute
    synclists=
Object name: centos7.9-x86_64-statelite-compute
    synclists=
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since it’s included in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt; object, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;syncfiles&lt;/code&gt; has been addeed 
to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; attribute of the compute node that you’re configuring 
(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus102 -i postscripts
Object name: abacus102
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /install/postscripts/compute_custom_post 
#!/bin/sh
#
# This is a postscript to configure compute nodes as NFS clients.
#
# This script is supposed to be located at
# /install/postscripts/compute_custom_post
#
# In order for it to be run after nodes are installed, compute_custom_post
# should be included in the postscripts field of the postscripts xCAT table.
# E.g.: nodegrpch compute postscripts.postscripts=compute_custom_post

MN_IP=&quot;192.168.80.210&quot;
MN_HOST=&quot;mgmt&quot;

cp /etc/fstab /etc/fstab.ORIG

printf %s\\n &quot;$MN_IP $MN_HOST&quot; &amp;gt;&amp;gt; /etc/hosts

mkdir /etc/xcat
mkdir /global
 
printf %s\\n &quot;$MN_HOST:/home    /home    nfs  defaults  1 2&quot; &amp;gt;&amp;gt; /etc/fstab
printf %s\\n &quot;$MN_HOST:/global  /global  nfs  defaults  1 2&quot; &amp;gt;&amp;gt; /etc/fstab

mount -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chmod 0755 /install/postscripts/compute_custom_post  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The next required postscripts script, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt;, was already preinstalled 
by xCAT:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -lh /install/postscripts/setupntp
-rwxr-xr-x 1 root root 7.4K Nov 10  2021 /install/postscripts/setupntp

# wc -l /install/postscripts/setupntp
328 /install/postscripts/setupntp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# head /install/postscripts/setupntp
#!/bin/bash
#
# setupchrony - Set up chrony
#
# Copyright (C) 2018 International Business Machines
# Eclipse Public License, Version 1.0 (EPL-1.0)
#     &amp;lt;http://www.eclipse.org/legal/epl-v10.html&amp;gt;
#
# 2018-07-11 GONG Jie &amp;lt;gongjie@linux.vnet.ibm.com&amp;gt;
#     - Draft
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /install/postscripts/abacus_custom_postboot
#!/bin/sh
#
# This is a postbootscript to perform postboot configuration on the
# compute nodes.  (&quot;postboot&quot; means after the reboot that occurs after
# installation has completed)
#
# This script is supposed to be located at
# /install/postscripts/abacus_custom_postboot
#
# In order for it to be run after nodes are installed and rebooted,
# abacus_custom_postboot
# should be included in the postbootscripts field of the postscripts xCAT table.
# E.g.:  nodegrpch compute postscripts.postbootscripts=abacus_custom_postboot

PBS_MOM_SERVICE_LOC=&quot;/etc/systemd/system/pbs_mom.service&quot;

printf %s\\n &apos;[Unit]&apos; &amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &apos;Description=PBS Mom service&apos; &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &apos;[Service]&apos; &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &apos;ExecStart=/opt/torque/sbin/pbs_mom&apos; &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &apos;Type=forking&apos; &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &apos;[Install]&apos; &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC
printf %s\\n &apos;WantedBy=multi-user.target&apos; &amp;gt;&amp;gt; $PBS_MOM_SERVICE_LOC

systemctl daemon-reload
systemctl start pbs_mom.service
systemctl enable pbs_mom.service

rm /root/.ssh/id_rsa.pub
rm /root/.ssh/id_rsa

chmod 0600 /etc/ssh/ssh_host_ed25519_key
chmod 0600 /etc/ssh/ssh_host_ecdsa_key
chmod 0600 /etc/ssh/ssh_host_rsa_key
chmod 0600 /etc/ssh/ssh_host_dsa_key

systemctl restart sshd.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chmod 0755 /install/postscripts/abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus102 | grep provmethod
    provmethod=centos7.9-x86_64-install-compute

# lsdef abacus102 | grep -w -i os
    os=centos7.9

# nodels abacus102 nodetype | grep profile
abacus102: nodetype.profile: compute

# tabdump nodetype
#node,os,arch,profile,provmethod,supportedarchs,nodetype,comments,disable
---- snip ----
&quot;abacus102&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,&quot;compute&quot;,&quot;centos7.9-x86_64-install-compute&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As of now, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; attribute for the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt; has not 
been updated with the required scripts.  From the definition of the object 
type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt;, for the object &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;, display the attribute postscripts. 
You’ll notice that both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute_custom_post&lt;/code&gt; have not been 
appended to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus102 -i postscripts
Object name: abacus102
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, when you ask for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; attribute of the 
node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus_custom_postboot&lt;/code&gt; script is missing from 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus102 -i postbootscripts
Object name: abacus102
    postbootscripts=otherpkgs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Upgrade the group &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute&lt;/code&gt; with the required &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; script files:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodegrpch compute postscripts.postscripts=setupntp,compute_custom_post
# nodegrpch compute postscripts.postbootscripts=abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that it’s been done:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts
#node,postscripts,postbootscripts,comments,disabl
---- snip ----
&quot;compute&quot;,&quot;setupntp,compute_custom_post&quot;,&quot;abacus_custom_postboot&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, you’ll see that the compute node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;) has not been added 
to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts | grep abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the required &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; script files to the 
node by updating it with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chtab(8)&lt;/code&gt; command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus102 \
postscripts.postscripts=setupntp,compute_custom_post \
postscripts.postbootscripts=abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To confirm that the needed postscripts are now included with the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus102 | grep postscripts 
    postscripts=syslog,remoteshell,syncfiles,setupntp,compute_custom_post
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus102 | grep postbootscripts
    postbootscripts=otherpkgs,abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts
#node,postscripts,postbootscripts,comments,disable
---- snip ----
&quot;abacus102&quot;,&quot;setupntp,compute_custom_post&quot;,&quot;abacus_custom_postboot&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts | grep abacus102
&quot;abacus102&quot;,&quot;setupntp,compute_custom_post&quot;,&quot;abacus_custom_postboot&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Continuing with the setup, confirm that the node’s profile is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute&lt;/code&gt; 
as that’s the name of the whole group you modified earlier above.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels abacus102 nodetype
abacus102: nodetype.arch: x86_64
abacus102: nodetype.node: abacus102
abacus102: nodetype.os: centos7.9
abacus102: nodetype.profile: compute
abacus102: nodetype.provmethod: centos7.9-x86_64-install-compute
abacus102: nodetype.supportedarchs: 
abacus102: nodetype.comments: 
abacus102: nodetype.nodetype: 
abacus102: nodetype.disable: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump nodetype
#node,os,arch,profile,provmethod,supportedarchs,nodetype,comments,disable
---- snip ----
&quot;abacus102&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,&quot;compute&quot;,&quot;centos7.9-x86_64-install-compute&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus102 -i postscripts
Object name: abacus102
    postscripts=syslog,remoteshell,syncfiles,setupntp,compute_custom_post
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus102 -i postbootscripts
Object name: abacus102
    postbootscripts=otherpkgs,abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatdebugmode&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef -t site xcatdebugmode=2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Push &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;syncfiles&lt;/code&gt; to the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus102 -P syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus102 -F -V
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to the compute node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt;):&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  For the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rcons&lt;/code&gt; to work, the node’s BIOS must be configured
for SOL (Serial Over LAN), a.k.a. Text Mode Console. &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;10&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rcons abacus102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus102 login: root
Password:

[root@abacus102 ~]#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the following command (&lt;strong&gt;note:&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt; is the IP address of the managment node (MN), &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3001&lt;/code&gt; is xCAT port).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# USEOPENSSLFORXCAT=1 \
XCATSERVER=192.168.80.220:3001 \
/xcatpost/startsyncfiles.awk -v RCP=/usr/bin/rsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exit the compute node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The CentOS Linux login banner appears.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus102 login:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl-e&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.&lt;/code&gt; (three characters: Ctrl-e, ‘c’ and ‘.’) to disconnect 
from the node by closing the session with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makegocons&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Back in the management node, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdcp abacus102 -F /install/custom/install/centos/compute.centos7.x86_64.synclist
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt; but limit it to only run the scripts:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus102 -P
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check whether the run of the scripts worked.&lt;/p&gt;

&lt;p&gt;Yeah, it worked for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synclist&lt;/code&gt;; that is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute.centos7.x86_64.synclist&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 ls -lh /opt/torque/ 
abacus102: total 4.0K
abacus102: drwxr-xr-x. 2 root root 4.0K May 16  2009 bin
abacus102: drwxr-xr-x. 2 root root   92 May 16  2009 include
abacus102: drwxr-xr-x. 2 root root  113 May 16  2009 lib
abacus102: drwxr-xr-x. 6 root root   54 May 16  2009 man
abacus102: drwxr-xr-x. 2 root root  147 May 16  2009 sbin
abacus102: drwxr-xr-x. 3 root root   19 May 16  2009 var

# xdsh abacus102 du -chs /opt/torque/ 
abacus102: 108M /opt/torque/
abacus102: 108M total
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 cat /etc/passwd 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 cat /etc/group
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It also worked for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute_custom_post&lt;/code&gt; script run:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 cat /etc/fstab
---- snip ----
abacus102: mgmt:/home    /home    nfs  defaults  1 2
abacus102: mgmt:/global  /global  nfs  defaults  1 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 df -hT 
abacus102: Filesystem              Type      Size  Used Avail Use% Mounted on
---- snip ---
abacus102: mgmt:/home              nfs4      5.0T  1.8T  3.3T  36% /home
abacus102: mgmt:/global            nfs4      3.9T  637G  3.3T  17% /global
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 cat /etc/hosts
---- snip ----
abacus102: 192.168.80.210 mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt; script run worked too:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 systemctl is-active chronyd.service
abacus102: active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 systemctl status chronyd.service
abacus102: * chronyd.service - NTP client/server
abacus102:    Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; vendor preset: enabled)
abacus102:    Active: active (running) since Fri 2022-03-20 18:53:38 PDT; 2min ago
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yep, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus_custom_postboot&lt;/code&gt; script run worked as well:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 systemctl is-active pbs_mom.service
abacus102: active

# xdsh abacus102 systemctl status pbs_mom.service
abacus102: * pbs_mom.service - PBS Mom service
abacus102: Loaded: loaded (/etc/systemd/system/pbs_mom.service; enabled; vendor preset: disabled)
abacus102: Active: active (running) since Fri 2022-03-20 18:53:39 PDT; 2min ago
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus102 --verify ls -lh /
abacus102: total 28K
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
If the above &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updatenode abacus102 -P&lt;/code&gt; does not work, you can try fixing 
it by the following sequence of commands:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus102 -P syncfiles
# updatenode abacus102 -P &quot;confignetwork -s&quot;
# updatenode abacus102 -P
# updatenode abacus102 -P -F -V
# updatenode abacus102 -P syncfiles -P &quot;confignics -s&quot;
# updatenode abacus102 -P syncfiles -F -V
# xdsh abacus102 shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Explanation:&lt;/em&gt;  &lt;br /&gt;
If you want to run all the customization scripts that have been designated 
for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus102&lt;/code&gt; node (in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; 
attributes), the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-P&lt;/code&gt; option (i.e, the command: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updatenode abacus102 -P&lt;/code&gt;) 
will not work after install.  Instead, after install use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-F&lt;/code&gt; option 
for file synchronization (including synchronization of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; attributes).&lt;/p&gt;

&lt;p&gt;From the man page for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updatenode(1)&lt;/code&gt; command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-F|--sync     Specifies that file synchronization should be performed on the
              nodes.  rsync/scp and ssh must be installed and configured on
              the nodes.
[...]
-P|--scripts  Specifies that postscripts and postbootscripts should be run on
              the nodes.  File sync with updatenode -P syncfiles is not
              supported.  The syncfiles postscript can only be run during
              install.  You should use updatenode -F instead.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;provision-a-node-and-manage-it-with-parallel-shell---aka-create-add-a-new-compute-node-cn-in-xcat---full-example&quot;&gt;Provision a Node and Manage It with Parallel Shell - aka Create (Add) a New Compute Node (CN) in xCAT - FULL EXAMPLE&lt;/h2&gt;

&lt;p&gt;Assumptions:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;You are configuring the new compute node on a blade server.&lt;/li&gt;
  &lt;li&gt;BMC (Baseboard Management Controller) in the blade chassis that hosts 
the blade server has already been configured so you can communicate with 
the BMC.&lt;/li&gt;
  &lt;li&gt;BMC’s IP address:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.135&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;BMC’s username:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xadmin&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;The chassis holds 14 blade servers.&lt;/li&gt;
  &lt;li&gt;You are configuring blade in bay number 9 (9th blade server).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Log into the xCAT management node (xCAT MN).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh root@192.168.80.220
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;configure-mm-management-module---aka-bmc-baseboard-management-controller&quot;&gt;Configure MM (Management Module) - a.k.a. BMC (Baseboard Management Controller)&lt;/h3&gt;

&lt;p&gt;Run the discovery on IP address of the xCAT MN (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;) and list 
all discovered MM (Management Node) &lt;strong&gt;service types&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsslp -s MM -i 192.168.80.220
---- snip ----
device  type-model  serial-number  side  ip-addresses    hostname
---- snip ----
mm      8852HC1     KQABCDE              192.168.80.135  Server--SNYK123456789A 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Rename the MM node to a more human-friendly name (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm1n&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef \
-t node \
-o Server--SNYK123456789A \ 
-n xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the BMC (MM) node to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table.&lt;/p&gt;

&lt;p&gt;In other words, you are updating rows &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;username&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;password&lt;/code&gt; 
in the table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt;.  From the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chtab(8)&lt;/code&gt; command’s usage:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;keycolname=keyvalue&lt;/code&gt;   a column name-and-value pair that identifies the 
                        rows in a table to be changed.&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tablename.colname=newvalue&lt;/code&gt;    the new value for the specified row and 
                                column of the table.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mpa
#mpa,username,password,displayname,slots,urlpath,comments,disable
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;keycolname&lt;/code&gt; is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; with value being the name of the 
node that you’ll give to this BMC (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm1n&lt;/code&gt;), while the 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tablename.colname=newvalue&lt;/code&gt; are 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa.username=xadmin&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa.password=YOUR_BMC_PASSWORD&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;After this explanation, run the actual command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
mpa=xbcmm1n \
mpa.username=xadmin \
mpa.password=YOUR_BMC_PASSWORD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table refers to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mp
#node,mpa,id,nodetype,comments,disable
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;add the attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; to the table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=xbcmm1n \
mp.mpa=xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This MM (Management Module) node now includes the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; attributes 
in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump mp
#node,mpa,id,nodetype,comments,disable
---- snip ----
&quot;xbcmm1n&quot;,&quot;xbcmm1n&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;. This is a MM (Management Module) and since 
it’s customary to give value &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0&lt;/code&gt; (zero) to MMs, assign &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0&lt;/code&gt; to it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=xbcmm1n \
mp.id=0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add this MM (Management Module) node’s IP address to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;192.168.80.135 xbcmm1n&quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check if you can communicate with the MM node.  For example, test whether 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rspconfig(1)&lt;/code&gt; can run without errors:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpdest
xbcmm1n: SP SNMP Destination 1: 192.168.11.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  It would’ve been good even if returned value was 
empty (without an IP address); at this point you just want to make 
sure there are no errors.&lt;/p&gt;

&lt;p&gt;Now you can setup new ssh keys (a.k.a. enable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;snmp&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh&lt;/code&gt;) 
on this Management Module (named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xbcmm1n&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rspconfig xbcmm1n snmpcfg=enable sshcfg=enable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;xbcmm1n: SNMP enable: OK
xbcmm1n: SSH enable: OK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can now check remote hardware vitals for the MM node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rvitals xbcmm1n
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also check its hardware inventory:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rinv xbcmm1n
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The passwordless ssh login to the MM node works:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh xadmin@xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output (with BMC CLI prompt indicated with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;system&amp;gt;&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Static IP address:     192.168.80.135
---- snip ----
system&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;provision-new-node-compute-node&quot;&gt;Provision New Node (Compute Node)&lt;/h3&gt;

&lt;p&gt;After you’ve setup the MM (Management Module) node, you are ready to 
start provisioning a new compute node.&lt;/p&gt;

&lt;p&gt;Find out the compute node’s MAC address by logging in to the MM (AMM) and 
obtaining it from there:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssh xadmin@192.168.80.135
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  Don’t type &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;system&amp;gt;&lt;/code&gt;&lt;/strong&gt; .  It’s a BMC CLI prompt and it’s 
shown here to indicate that you are using the MM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; info -T blade[9]
---- snip ----
MAC Address 1: 00:11:22:33:44:55 
MAC Address 2: 00:11:22:33:44:56
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note down the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MAC Address 1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Exit the BMC’s CLI.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system&amp;gt; exit
Connection to 192.168.80.135 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create an xCAT data object definition for this node (name it &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;).&lt;br /&gt;
Explanation: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ip&lt;/code&gt; = IP address of the node; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mac&lt;/code&gt; = MAC address of
the node; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmc&lt;/code&gt; = IP address of the MM/AMM (BMC); &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcusername&lt;/code&gt; = username of
BMC (MM) account; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bmcpassword&lt;/code&gt; = password for BMC (MM) user, 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt; = object &lt;strong&gt;t&lt;/strong&gt;ype, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--template&lt;/code&gt; = name of the xCAT shipped object 
definition template or an existing object, from which the new object 
definition will be created.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  For the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mac&lt;/code&gt; attribute, use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MAC Address 1&lt;/code&gt; you obtained above.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdef \
-t node \
abacus109 \
--template x86_64-template \
ip=192.168.80.9 \
mac=00:11:22:33:44:55 \
bmc=192.168.80.135 \
bmcusername=xadmin \
bmcpassword=yourBMCpassword
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;“Fix for Blade”&lt;/strong&gt; &lt;br /&gt;
Since it’s on a blade server, you have to adjust this compute node’s 
xCAT definition and make it blade-specific.  Also, while you are 
already making changes, modify serial port settings that this 
particular blade model (IBM HS21) requires for SOL (Serial Over LAN) 
to work; specfically, it asks it to be the second serial device 
(in Unix/BSD/Linux numbering style it starts with zero so the second 
device will be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;) with serial speed of 19200:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef \
-t node \
-o abacus109 \
cons=blade mgt=blade getmac=blade serialport=1 serialspeed=19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The domain of the xCAT node must be provided in an xCAT 
network definition or the xCAT site definition.  Otherwise, two commands 
in the subsequent steps for configuring DNS (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makehosts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns -n&lt;/code&gt;) 
will not work.  In this example, an assumption is that you’ve alredy 
defined the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;domain&lt;/code&gt; attribute in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site | grep domain
&quot;domain&quot;,&quot;mydomain.com&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Continuing with the setup:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makehosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This adds the compute node being created to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;. Specifically, 
this line is added to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; file: &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.9 abacus109 abacus109.mydomain.com&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Update DNS records with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makedns(8)&lt;/code&gt; command.&lt;br /&gt;
(This also restarts &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;named&lt;/code&gt; service.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedns -n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can confirm that it worked by using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-q&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp -q abacus109
abacus109: ip-address = 192.168.80.9, hardware-address = 00:11:22:33:44:55
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This updates &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/dhcp/dhcpd.conf&lt;/code&gt; file with a line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#definition for host abacus109 aka host abacus109 can be found in the 
dhcpd.leases file (typically /var/lib/dhcpd/dhcpd.leases)`
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and if you check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/lib/dhcpd/dhcpd.leases&lt;/code&gt; file, the compute 
node’s  dhcp definition is there:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -n abacus109 /var/lib/dhcpd/dhcpd.leases
106:host abacus109 {
111:        supersede server.ddns-hostname = &quot;abacus109&quot;;
112:        supersede host-name = &quot;abacus109&quot;;
117:                                &quot;http://${next-server}:80/tftpboot/xcat
/xnba/nodes/abacus109&quot;;
121:                                &quot;http://${next-server}:80/tftpboot/xcat
/xnba/nodes/abacus109.uefi&quot;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the new compute node to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table. &lt;br /&gt;
(The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpa&lt;/code&gt; table has already been defined and linked to the 
 BMC (named &lt;em&gt;xbcmm1n&lt;/em&gt;) in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mp&lt;/code&gt; table.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus109 \
mp.mpa=xbcmm1n \
mp.id=9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t osimage -i synclists
Object name: centos7.9-x86_64-install-compute
    synclists=/install/custom/install/centos/compute.centos7.x86_64.synclist
Object name: centos7.9-x86_64-netboot-compute
    synclists=
Object name: centos7.9-x86_64-statelite-compute
    synclists=
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Explanation for options: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt;: type, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-o&lt;/code&gt;: object, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-i&lt;/code&gt;: information/inquire.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus109 -i postscripts
Object name: abacus109
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 -i postscripts,postbootscripts
Object name: abacus109
    postbootscripts=otherpkgs
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So you need to add the necessary (for this particular configuration; 
that is, configuration of this example) scripts (both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt;) to the compute node that is being provisioned.
In other words, you are updating rows &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; 
in the table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt;. From the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chtab(8)&lt;/code&gt; command’s usage:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;keycolname=keyvalue&lt;/code&gt;   a column name-and-value pair that identifies the 
                        rows in a table to be changed.&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tablename.colname=newvalue&lt;/code&gt;    the new value for the specified row and 
                                column of the table.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts
#node,postscripts,postbootscripts,comments,disable
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;keycolname&lt;/code&gt; is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt; with value being the name of the 
node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;), while the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tablename.colname=newvalue&lt;/code&gt; are 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts.postscripts=setupntp,compute_custom_post&lt;/code&gt; and 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts.postbootscripts=abacus_custom_postboot&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;After this (long) explanation, run the actual command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus109 \
postscripts.postscripts=setupntp,compute_custom_post \
postscripts.postbootscripts=abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now the node includes all the needed scripts:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 -i postscripts,postbootscripts
Object name: abacus109
    postbootscripts=otherpkgs,abacus_custom_postboot
    postscripts=syslog,remoteshell,syncfiles,setupntp,compute_custom_post
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt; hardware control.  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt; power management:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower abacus109 state
abacus109: on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, you can check communication with the node with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rinv(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rinv abacus109 all
abacus109: Machine Type/Model: 8853AC1
abacus109: Serial Number: ThisBlade&apos;sSerialNumberHere
abacus109: MAC Address 1: 00:11:22:33:44:55 
abacus109: MAC Address 2: 00:11:22:33:44:56 
abacus109: Management Module firmware: 62 (BPET62C 06/23/2011)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The newly added compute node now appears in the nodes list:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels
---- snip ----
abacus109
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check boot order on the node and whether it’sa configured to boot from 
the Ethernet (net) device.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; On IBM BladeCenter (which is the case here), you only have
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq&lt;/code&gt; and not &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rsetboot&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.mail-archive.com/xcat-user@lists.sourceforge.net/msg05290.html&quot;&gt;Re: [xcat-user] Problem with rsetboot: unable to identify plugin&lt;/a&gt;
(Retrieved on Mar 20, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;On BladeCenter, you [only] have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq&lt;/code&gt;.  …&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rbootseq abacus109 list
abacus109: hd0,cdrom,none,none
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, the blade was not configured to boot from the Ethernet (net) 
device so you need to change it with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbootseq(1)&lt;/code&gt; command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rbootseq abacus109 net,hd0,cdrom,none
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that the boot order has been changed:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rbootseq abacus109 list
abacus109: net,hd0,cdrom,none
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Make sure that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;goconserver.service&lt;/code&gt; is running.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-active goconserver.service
active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Register the node for an instance of the console (serial console) session:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makegocons -D abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After the node is registered for an instance of the console session , 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;consoleenabled&lt;/code&gt; attribute has been added and set to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt; for the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 | grep console
    consoleenabled=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ensure that the node’s status is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;connected&lt;/code&gt; by querying its 
console connection state.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makegocons -q abacus109
NODE                       SERVER                     STATE
abacus109                  xcatmn.mydomain.com        connected
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start provisioning the node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatprobe osdeploy -n abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatprobe osdeploy -n abacus109
The install NIC in current server is eth1                             [INFO]
All nodes to be deployed are valid                                    [ OK ]
-------------------------------------------------------------
Start capturing every message during OS provision process....
-------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Launch a separate shell session and in there (a.k.a. the second terminal), 
start installation process.  (The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodeset(8)&lt;/code&gt; command sets the boot 
state for a node or node range.)&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage=imagename&lt;/code&gt; option (from the manual page for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodeset(8)&lt;/code&gt; 
command):  &lt;br /&gt;
“Prepare server for installing a node using the specified os
image. The os image is defined in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt; table and
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;linuximage&lt;/code&gt; table.”&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump osimage
#imagename,groups,profile,imagetype,description,provmethod,rootfstype,osdistroname,osupdatename,cfmdir,osname,osvers,osarch,synclists,postscripts,postbootscripts,serverrole,isdeletable,kitcomponents,environvar,comments,disable
&quot;centos7.9-x86_64-install-compute&quot;,,&quot;compute&quot;,&quot;linux&quot;,,&quot;install&quot;,,&quot;centos7.9-x86_64&quot;,,,&quot;Linux&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,&quot;/install/custom/install/centos/compute.centos7.x86_64.synclist&quot;,,,,,,,,
&quot;centos7.9-x86_64-netboot-compute&quot;,,&quot;compute&quot;,&quot;linux&quot;,,&quot;netboot&quot;,,&quot;centos7.9-x86_64&quot;,,,&quot;Linux&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,,,,,,,,,
&quot;centos7.9-x86_64-statelite-compute&quot;,,&quot;compute&quot;,&quot;linux&quot;,,&quot;statelite&quot;,,&quot;centos7.9-x86_64&quot;,,,&quot;Linux&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,,,,,,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodeset abacus109 osimage=centos7.9-x86_64-install-compute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;fix-for-rpower-nodename-boot&quot;&gt;Fix for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower &amp;lt;nodename&amp;gt; boot&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Back in the second terminal, as per the message above, to reboot the 
compute node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt; you would normally use this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower&lt;/code&gt; 
command here: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower abacus109 boot&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;However, at least in this setup, I’ve found it inconsistent because when 
running that command, the compute node would power off &lt;strong&gt;but&lt;/strong&gt; would not 
power back on; that is, it wouldn’t actually restart.  (Even though the 
man page for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower(8)&lt;/code&gt; command says for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;boot&lt;/code&gt; option: 
“&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;boot&lt;/code&gt;:  If off, then power on.  If on, then hard reset.  This option 
is &lt;strong&gt;recommended&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;) over &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cycle&lt;/code&gt; [option].&lt;/p&gt;

&lt;p&gt;I had to add the following options to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower(8)&lt;/code&gt; command to make 
the installation work; that is, to turn the node off and then on. 
(Alternitavely, you could first manually turn the node off: 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower abacus109 off&lt;/code&gt;, and then on:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower abacus109 on&lt;/code&gt;.)&lt;/p&gt;

&lt;p&gt;Explanation for the options used in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower(8)&lt;/code&gt; command below
(from the manpage for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower(8)&lt;/code&gt; command):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;”&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-r retrycount&lt;/code&gt;
specify the number of retries that the monitoring process will
perform before declaring the failure. The default value is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3&lt;/code&gt;.
Setting the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;retrycount&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0&lt;/code&gt; means only monitoring the os
installation progress and will not re-initiate the installation if
the node status has not been changed to the expected value after
timeout.  This flag &lt;strong&gt;must&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;) be used with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m&lt;/code&gt; flag.”&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;”&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m table.column==expectedstatus -m table.column=~expectedstatus&lt;/code&gt;
Use one or multiple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m&lt;/code&gt; flags to specify the node attributes and the
expected status for the node installation monitoring and automatic
retry mechanism.  The operators &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;==&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!=&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;=~&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!~&lt;/code&gt; are valid. 
This flag &lt;strong&gt;must&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;) be used with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt; flag.”&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  While &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;powering-on&lt;/code&gt; is not listed as one of valid values 
of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;status&lt;/code&gt; (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodelist.status&lt;/code&gt;) in the manpage for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node(7)&lt;/code&gt; 
or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodelist(5)&lt;/code&gt;, in my tests it worked more reliable than using 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m nodelist.status==booting&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m nodelist.status==installing&lt;/code&gt;.
&lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;9&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;”&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t timeout&lt;/code&gt;
Specify the timeout, in minutes, to wait for the expectedstatus
specified by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m&lt;/code&gt; flag. This is a &lt;strong&gt;required&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;) flag if 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m&lt;/code&gt; flag is specified.  Power off, then on.”&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In the second terminal, run the following command.
(&lt;strong&gt;Note:&lt;/strong&gt;  You need to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;==&lt;/code&gt; (double equal sign), 
 a.k.a. &lt;em&gt;comparison operator&lt;/em&gt; when testing for the expected status 
 with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m&lt;/code&gt; option.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rpower \
abacus109 \
boot \
-r 0 \
-m nodelist.status==powering-on \
-t 5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first terminal updates with the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[abacus109] 19:37:29 Use command rpower to reboot node abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then in less than ten seconds, the first terminal displays another line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[abacus109] 19:37:36 Node status is changed to powering-on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Launch yet another separate shell session and in there (let’s call it 
the third terminal), check and monitor provisioning process. (&lt;strong&gt;NOTE:&lt;/strong&gt; 
For the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rcons&lt;/code&gt; to work, the node’s BIOS must be configured  for 
SOL (Serial Over LAN), a.k.a. Text Mode Console. &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;10&lt;/a&gt;&lt;/sup&gt;)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rcons abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output shows that the node is booting up:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Enter `^Ec?&apos; for help]
goconserver(2022-08-11T20:06:46-07:00): Hello 192.168.80.220:58102, 
welcome to the session of abacus109
&amp;gt;&amp;gt; BIOS Version 1.15 &amp;lt;&amp;lt;

Press F1 for Configuration/Setup
Press F2 for Diagnosticsbacus109
Press F12 for Boot Device Selection Menu

Broadcom NetXtreme II Ethernet Boot Agent v3.4.8
Copyright (C) 2000-2007 Broadcom Corporation
All rights reserved.

---- snip ----

Initializing../ 

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After 5-10 minutes, output in the third terminal shows that 
the OS installation is finishing.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Installing boot loader
.
Performing post-installation setup tasks
.

Configuring installed system
.
Writing network configuration
.
Creating users
.
Configuring addons
.
Generating initramfs
.
Running post-installation scripts

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can check the provision status in/from the second terminal:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 -i status
Object name: abacus109
    status=installing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After post-installation scripts are done, the node will reboot (run this 
in the second terminal again):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 -i status
Object name: abacus109
    status=booting
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Again in the second terminal after a couple of minutes:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 -i status
Object name: abacus109
    status=failed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, in the third terminal; it shows that the OS booted fine, and 
even logged in fine:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus109 login: root 
Password:

[root@abacus109 ~]#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check the provision status in the first terminal, where the output is 
now long and most likely has been completed:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---- snip ----
[abacus109] 20:24:39 INFO done
[abacus109] 20:24:39 INFO ready
[abacus109] 20:24:39 INFO done
[abacus109] 20:24:39 Node status is changed to failed
All nodes specified to monitor, have finished OS provision process    [ OK ]
======================  Summary  =====================
There is 1 node provision failures
abacus109 : stop at stage &apos;booting&apos;                                   [FAIL]
   postscript end...: syncfiles return with 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, there was an issue with postscripts and that’ll need to be fixed.&lt;/p&gt;

&lt;p&gt;Also, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xdsh&lt;/code&gt; check worked:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 more /etc/*release
abacus109: ::::::::::::::
abacus109: /etc/centos-release
abacus109: ::::::::::::::
abacus109: CentOS Linux release 7.9.2009 (Core)
abacus109: ::::::::::::::
abacus109: /etc/os-release
abacus109: ::::::::::::::
abacus109: NAME=&quot;CentOS Linux&quot;
abacus109: VERSION=&quot;7 (Core)&quot;
abacus109: ID=&quot;centos&quot;
abacus109: ID_LIKE=&quot;rhel fedora&quot;
abacus109: VERSION_ID=&quot;7&quot;
abacus109: PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If there are remnants from a previous node setup, the host key has been 
changed and you’ll receive a warning about it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[xcatmn]: abacus109: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
abacus109: @    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
abacus109: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
---- snip ---
abacus109: It is also possible that a host key has just been changed.
abacus109: The fingerprint for the ED25519 key sent by the remote host is
abacus109: SHA256:I04c7IX......
---- snip ---
abacus109: Add correct host key in /root/.ssh/known_hosts to get rid of this message.
abacus109: Offending ECDSA key in /root/.ssh/known_hosts:19
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To fix the warning about the host key, remove the line in question:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed -i.bkp &apos;19d&apos; /root/.ssh/known_hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The xdsh now works without the warning:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 more /etc/*release
abacus109: ::::::::::::::
abacus109: /etc/centos-release
abacus109: ::::::::::::::
abacus109: CentOS Linux release 7.9.2009 (Core)
---- snip ----
[xcatmn]: abacus109: Warning: Permanently added &apos;abacus109,192.168.80.9&apos; (ED25519) to the list of known hosts.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want, you can remove backed up &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;known_hosts&lt;/code&gt; file now:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rm -i ~/.ssh/known_hosts.bkp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check whether the run of the scripts worked.&lt;/p&gt;

&lt;p&gt;Yeah, it worked for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synclist&lt;/code&gt;; that is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute.centos7.x86_64.synclist&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 ls -lh /opt/torque/ 
abacus109: total 4.0K
abacus109: drwxr-xr-x. 2 root root 4.0K May 16  2009 bin
abacus109: drwxr-xr-x. 2 root root   92 May 16  2009 include
abacus109: drwxr-xr-x. 2 root root  113 May 16  2009 lib
abacus109: drwxr-xr-x. 6 root root   54 May 16  2009 man
abacus109: drwxr-xr-x. 2 root root  147 May 16  2009 sbin
abacus109: drwxr-xr-x. 3 root root   19 May 16  2009 var

# xdsh abacus109 du -chs /opt/torque/ 
abacus109: 108M /opt/torque/
abacus109: 108M total
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/passwd 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/group
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It also worked for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute_custom_post&lt;/code&gt; script run:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/fstab
---- snip ----
abacus109: mgmt:/home    /home    nfs  defaults  1 2
abacus109: mgmt:/global  /global  nfs  defaults  1 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 df -hT 
abacus109: Filesystem              Type      Size  Used Avail Use% Mounted on
---- snip ---
abacus109: mgmt:/home              nfs4      5.0T  1.8T  3.3T  36% /home
abacus109: mgmt:/global            nfs4      3.9T  637G  3.3T  17% /global
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/hosts
---- snip ----
abacus109: 192.168.80.210 mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt; script run worked too:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 systemctl is-active chronyd.service
abacus109: active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 systemctl status chronyd.service
abacus109: * chronyd.service - NTP client/server
abacus109:    Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; vendor preset: enabled)
abacus109:    Active: active (running) since Fri 2022-03-20 18:53:38 PDT; 2min ago
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yep, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus_custom_postboot&lt;/code&gt; script run worked as well:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 systemctl is-active pbs_mom.service
abacus109: active

# xdsh abacus109 systemctl status pbs_mom.service
abacus109: * pbs_mom.service - PBS Mom service
abacus109: Loaded: loaded (/etc/systemd/system/pbs_mom.service; enabled; vendor preset: disabled)
abacus109: Active: active (running) since Fri 2022-03-20 18:53:39 PDT; 2min ago
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 --verify ls -lh /
abacus109: total 28K
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The only thing left is to run a test job as explained above, under 
&lt;a href=&quot;#submit-a-test-job-to-a-specific-node&quot;&gt;Submit a Test Job to a Specific Node&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Temporary/currently: no systemd for pbs_server and pbs_sched so
for now starting them manually:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo /etc/rc.d/init.d/pbs_server start&lt;/code&gt; and&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo /etc/rc.d/init.d/pbs_sched start&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Migrate network restart with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;at&lt;/code&gt; to Appendix.&lt;/p&gt;

&lt;p&gt;Restart networking and see if network interfaces are in the routing table.&lt;/p&gt;

&lt;p&gt;If you are not logged in to the server directly via console; for example,
if you are logged in via ssh, use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;at(1)&lt;/code&gt; utility, with the sequence 
of commands below.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;
To end input, generate the &lt;em&gt;end-of-file&lt;/em&gt; (EOF) character &lt;a href=&quot;#footnotes&quot;&gt;¹&lt;/a&gt;
(aka &lt;em&gt;eof command&lt;/em&gt;) by pressing &lt;strong&gt;Ctrl D&lt;/strong&gt; (usually abbreviated &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^D&lt;/code&gt;)
on an empty line.
For additional details, refer to the man page for the current shell,
in this case &lt;strong&gt;csh&lt;/strong&gt;/&lt;strong&gt;tcsh&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo at now+3min
warning: commands will be executed using /bin/sh
at&amp;gt; sudo systemctl stop NetworkManager
at&amp;gt; sleep 5
at&amp;gt; sudo systemctl start NetworkManager
at&amp;gt; &amp;lt;EOT&amp;gt;
job 1 at Thu Mar 20 15:01:00 2022
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can check terminal line settings for EOF with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stty(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ stty --all | wc -l

$ stty --all | grep -i EOF
intr = ^C; quit = ^\; erase = ^H; kill = ^U; eof = ^D; eol = &amp;lt;undef&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ stty --help | grep &apos;eof CHAR&apos;
   eof CHAR      CHAR will send an end of file (terminate the input)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the man page for stty(1):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
Special characters:
[...]
    eof CHAR
           CHAR will send an end of file (terminate the input)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ netstat -rn
Kernel IP routing table
Destination     Gateway        Genmask        Flags  MSS Window irtt Iface
0.0.0.0         123.12.23.254  0.0.0.0        UG       0 0         0 eno1
123.12.23.0     0.0.0.0        255.255.255.0  U        0 0         0 eno1
192.168.80.0    0.0.0.0        255.255.255.0  U        0 0         0 eno2
192.168.122.0   0.0.0.0        255.255.255.0  U        0 0         0 virbr0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Show this as an alternative setup - and move it to Appendix&lt;/p&gt;

&lt;h2 id=&quot;management-node-setup&quot;&gt;Management Node Setup&lt;/h2&gt;

&lt;p&gt;All the following steps should be executed on the server with the 
management node role.&lt;/p&gt;

&lt;h3 id=&quot;create-local-centos-packages-repository&quot;&gt;Create Local CentOS Packages Repository&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf clean metadata
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf update  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The CentOS 7 DVD ISO image has been transferred to /tmp when the content 
of the image was customized: 
&lt;a href=&quot;/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html&quot;&gt;Customize CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console and Test the Image with QEMU&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Check if the link above will work on GitHub Pages&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir -p /install/isos/centos7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Place the ISO to the following directory:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mv /tmp/CentOS-7-x86_64-DVD-2009-HS21.iso /install/isos/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir -p /mnt/dvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Mount the ISO as follows.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
mount -o loop \
/install/isos/CentOS-7-x86_64-DVD-2009-HS21.iso \
/mnt/dvd/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ df -hT | grep iso9660
/dev/loop0            iso9660   4.5G  4.5G     0 100% /mnt/dvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
cp -a \
/mnt/dvd/* \
/install/isos/centos7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo umount /mnt/dvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the CentOS repo file for the local repository.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vi /etc/yum.repos.d/centos7-local.repo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/yum.repos.d/centos7-local.repo
[centos]
name=CentOS $releasever - $basearch
baseurl=file:///install/isos/centos7
enabled=1
gpgcheck=0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that the repo is enabled:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ dnf repolist --all | grep centos
centos                CentOS 8 - x86_64    enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install createrepo package.&lt;/p&gt;

&lt;p&gt;This utility generates a common metadata repository from a directory 
of RPM packages.&lt;/p&gt;

&lt;p&gt;It defines the RPM-metadata (&lt;strong&gt;repodata&lt;/strong&gt;) format and maintains one of 
the programs (&lt;strong&gt;createrepo&lt;/strong&gt;) which create this format from existing RPMs 
and other sources.&lt;/p&gt;

&lt;p&gt;Project’s URI/URL: &lt;a href=&quot;http://createrepo.baseurl.org/&quot;&gt;http://createrepo.baseurl.org/&lt;/a&gt;: &lt;br /&gt;
(Retrieved on Mar 20, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The files break down as follows:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;
      &lt;p&gt;repomd.xml this is the file that describes the other metadata files. 
It is like an index file to point to the other files. It contains 
timestamps and checksums for the other files. This lets a client 
download this one, small file and know if anything else has changed. 
This also means that cryptographically (ex: gpg) signing this one file 
can ensure repository integrity.&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;primary.xml.[gz] this file stores the primary metadata information. 
This includes information such as:
      &lt;ul&gt;
        &lt;li&gt;name, epoch, version, release, architecture&lt;/li&gt;
        &lt;li&gt;file size, file location, description, summary, format, 
checksums header byte-ranges, etc.&lt;/li&gt;
        &lt;li&gt;dependencies, provides, conflicts, obsoletes, suggests, recommends&lt;/li&gt;
        &lt;li&gt;file lists for the package for CERTAIN files - specifically files 
matching: /etc&lt;em&gt;, *bin/&lt;/em&gt;, /usr/lib/sendmail [1]&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;filelists.xml.[gz] this file stores the complete file and directory 
listings for the packages. The package is identified by: name, epoch, 
version, release, architecture and package checksum id.&lt;/li&gt;
    &lt;li&gt;other.xml.[gz] this file currently only stores the changelog data 
from packages. However, this file could be used for any other 
additional metadata that could be useful for clients.&lt;/li&gt;
    &lt;li&gt;groups.xml.[gz] this file is tentatively described. The intention is 
for a common package-groups specification as well. There is still 
some sections for this format that need to be fleshed out.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install createrepo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir -p /install/centos7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The createrepo requires an argument which is the directory in which you 
would like to generate the repository data.  Since the packages directory 
will be in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/install/centos7&lt;/code&gt;, run the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo createrepo /install/centos7
Directory walk started
Directory walk done - 0 packages
Temporary output repo path: /install/centos7/.repodata/
Preparing sqlite DBs
Pool started (with 5 workers)
Pool finished
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /install/centos7/repodata/
total 28K
-rw-r--r-- 1 root root 1.4K Mar 20 15:22 19699a08[...]87e3-primary.sqlite.bz2
-rw-r--r-- 1 root root  134 Mar 20 15:22 1cb61ea9[...]d7d8bcae-primary.xml.gz
-rw-r--r-- 1 root root  609 Mar 20 15:22 878c2f1d[...]b9-filelists.sqlite.bz2
-rw-r--r-- 1 root root  123 Mar 20 15:22 95a4415d[...]fb2a5f-filelists.xml.gz
-rw-r--r-- 1 root root  123 Mar 20 15:22 ef3e2069[...]9e070aaab6-other.xml.gz
-rw-r--r-- 1 root root  571 Mar 20 15:22 f660753f[...]78d966-other.sqlite.bz2
-rw-r--r-- 1 root root 3.0K Mar 20 15:22 repomd.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf clean all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;xcat-backup---todo---move-it-to-appendix&quot;&gt;xCAT Backup   &lt;strong&gt;[TODO]&lt;/strong&gt;  &amp;lt;– Move it to Appendix&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir /tmp/xcatsnapdirbkp
$ sudo /opt/xcat/sbin/xcatsnap -d /tmp/xcatsnapdirbkp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /tmp/xCAT_Backup
# dumpxCATdb -a -p /tmp/xCAT_Backup
# restorexCATdb -p /tmp/xCAT_Backup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;   Change the title - and migrate it to Troubleshooting section
(after first creating the Troubleshooting section)&lt;/p&gt;

&lt;h3 id=&quot;if-you-encounter-a-certificate-error&quot;&gt;If You Encounter a Certificate Error&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ lsxcatd -a
Unable to open socket connection to xcatd daemon on localhost:3001.
Verify that the xcatd daemon is running and that your SSL setup is correct.
Connection failure: SSL connect attempt failed error:0407008A:rsa 
  routines:RSA_padding_check_PKCS1_type_1:invalid padding 
  error:04067072:rsa routines:rsa_ossl_public_decrypt:padding check failed 
  error:0D0C5006:asn1 encoding routines:ASN1_item_verify:EVP 
  lib error:1416F086:SSL 
  routines:tls_process_server_certificate:certificate verify failed at 
  /opt/xcat/lib/perl/xCAT/Client.pm line 282.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set the environment variable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;XCATBYPASS&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Y&lt;/code&gt; and 
keep using it until you fix this certificate error.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo &quot;XCATBYPASS=Y&quot; csh -c &apos;lsxcatd -a&apos;
Version 2.16.3 (git commit d6c76ae5f66566409c3416c0836660e655632194, 
  built Wed Nov 10 09:58:20 EST 2021)
  This is a Management Node
dbengine=SQLite
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo &quot;XCATBYPASS=Y&quot; csh -c &apos;tabdump site&apos;
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lsslp-todo-expand-on-lsslp-and-possibly-put-it-in-a-separate-section&quot;&gt;lsslp &lt;strong&gt;[TODO]&lt;/strong&gt; Expand on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsslp&lt;/code&gt; and possibly put it in a separate section&lt;/h3&gt;

&lt;p&gt;The nodes which the user wants to discover.&lt;/p&gt;

&lt;p&gt;Use the lsslp command to discover &lt;strong&gt;selected&lt;/strong&gt; networked services 
information within the same subnet.  The request is sent out all 
available network adapters.&lt;/p&gt;

&lt;p&gt;If the user specifies the noderange, lsslp will just return the nodes in 
the node range.&lt;/p&gt;

&lt;p&gt;Which means it will help to add the new nodes to the xCAT database 
without modifying the existed definitions.&lt;/p&gt;

&lt;p&gt;But the nodes’ name specified in noderange should be defined in database 
in advance.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;appendix&quot;&gt;Appendix&lt;/h2&gt;

&lt;h3 id=&quot;running-qemu-guest-in-the-background&quot;&gt;Running QEMU Guest in the Background&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
-drive format=raw,file=xcatmn.img \
-m 4G \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br0&quot;,id=hn0 \
-netdev tap,helper=&quot;/usr/libexec/qemu-bridge-helper --br=br1&quot;,id=hn1 \
-device virtio-net-pci,netdev=hn0 \
-device virtio-net-pci,netdev=hn1 \
-daemonize
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-nographic&lt;/code&gt; cannot be used with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-daemonize&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Then, connect (log into) the guest OS:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh root@123.12.23.235
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-change-node-name-withfromin-xcat&quot;&gt;How To Change Node Name with/from/in xCAT&lt;/h3&gt;

&lt;p&gt;Change node name from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cn14&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus14&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef \
-t node \
-o cn14 \
-n abacus14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makehosts abacus14
# makedns -n
# makedhcp -n
# makehosts abacus14
# makehosts -n
# makedhcp abacus14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makedhcp -q all 
abacus14: ip-address = 192.168.80.114, hardware-address = 00:21:5e:2c:0a:ac
cn13: ip-address = 192.168.80.113, hardware-address = 00:21:5e:2c:15:a4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;troubleshooting-postscripts-and-postbootscripts&quot;&gt;Troubleshooting Postscripts and Postbootscripts&lt;/h3&gt;

&lt;p&gt;The following steps need to be run on the management 
node, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Confirm that the object &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt; has the attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synclists&lt;/code&gt;.
(Options: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt;: type, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-i&lt;/code&gt;: information/inquire).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t osimage -i synclists
Object name: centos7.9-x86_64-install-compute
    synclists=/install/custom/install/centos/compute.centos7.x86_64.synclist
Object name: centos7.9-x86_64-netboot-compute
    synclists=
Object name: centos7.9-x86_64-statelite-compute
    synclists=
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since it’s included in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;osimage&lt;/code&gt; object, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;syncfiles&lt;/code&gt; has been 
addeed to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; attribute of the compute node that you’re 
configuring (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;).
(Options: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt;: type, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-o&lt;/code&gt;: object, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-i&lt;/code&gt;: information/inquire).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus109 -i postscripts
Object name: abacus109
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 | grep profile
    profile=compute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 | grep provmethod 
    provmethod=centos7.9-x86_64-install-compute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 | grep -w -i os 
    os=centos7.9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels abacus109 nodetype | grep profile
abacus109: nodetype.profile: compute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump nodetype
#node,os,arch,profile,provmethod,supportedarchs,nodetype,comments,disable
---- snip ----
&quot;abacus109&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,&quot;compute&quot;,&quot;centos7.9-x86_64-install-compute&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As of now, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; attribute for the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt; has not 
been updated with the required scripts.  From the definition of the object 
type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node&lt;/code&gt;, for the object &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;, display the attribute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt;. 
You’ll notice that  both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute_custom_post&lt;/code&gt; have not 
been appended to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus109 -i postscripts
Object name: abacus109
    postscripts=syslog,remoteshell,syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, when you ask for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; attribute of the node 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus_custom_postboot&lt;/code&gt; script is missing from 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus109 -i postbootscripts
Object name: abacus109
    postbootscripts=otherpkgs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  The following two &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodegrpch&lt;/code&gt; commands do not need to be run 
if you’ve already setup &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; for the 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute&lt;/code&gt; group.&lt;/p&gt;

&lt;p&gt;Upgrade the group &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute&lt;/code&gt; with the required &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; script files:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodegrpch compute postscripts.postscripts=setupntp,compute_custom_post
# nodegrpch compute postscripts.postbootscripts=abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that it’s been done:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts
#node,postscripts,postbootscripts,comments,disabl
---- snip ----
&quot;compute&quot;,&quot;setupntp,compute_custom_post&quot;,&quot;abacus_custom_postboot&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, you’ll see that the compute node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;) has not been added 
to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts | grep abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update the node by adding the required &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; 
script files to it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chtab \
node=abacus109 \
postscripts.postscripts=setupntp,compute_custom_post \
postscripts.postbootscripts=abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To confirm that the needed postscripts are now included with the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 | grep postscripts 
    postscripts=syslog,remoteshell,syncfiles,setupntp,compute_custom_post
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef abacus109 | grep postbootscripts
    postbootscripts=otherpkgs,abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts
#node,postscripts,postbootscripts,comments,disable
---- snip ----
&quot;abacus109&quot;,&quot;setupntp,compute_custom_post&quot;,&quot;abacus_custom_postboot&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump postscripts | grep abacus109
&quot;abacus109&quot;,&quot;setupntp,compute_custom_post&quot;,&quot;abacus_custom_postboot&quot;,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Continuing with the setup, confirm that the node’s profile is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute&lt;/code&gt; 
as that’s the name of the whole group you modified earlier above.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels abacus109 nodetype
abacus109: nodetype.arch: x86_64
abacus109: nodetype.node: abacus109
abacus109: nodetype.os: centos7.9
abacus109: nodetype.profile: compute
abacus109: nodetype.provmethod: centos7.9-x86_64-install-compute
abacus109: nodetype.supportedarchs: 
abacus109: nodetype.comments: 
abacus109: nodetype.nodetype: 
abacus109: nodetype.disable: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump nodetype
#node,os,arch,profile,provmethod,supportedarchs,nodetype,comments,disable
---- snip ----
&quot;abacus109&quot;,&quot;centos7.9&quot;,&quot;x86_64&quot;,&quot;compute&quot;,&quot;centos7.9-x86_64-install-compute&quot;,,,,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus109 -i postscripts
Object name: abacus109
    postscripts=syslog,remoteshell,syncfiles,setupntp,compute_custom_post
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsdef -t node -o abacus109 -i postbootscripts
Object name: abacus109
    postbootscripts=otherpkgs,abacus_custom_postboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatdebugmode&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site&lt;/code&gt; table to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chdef -t site xcatdebugmode=2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Push &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;syncfiles&lt;/code&gt; to the node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus109 -P syncfiles
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus109 -F -V
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to the compute node (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  For the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rcons&lt;/code&gt; to work, the node’s BIOS must be configured
for SOL (Serial Over LAN), a.k.a. Text Mode Console. &lt;sup&gt;&lt;a href=&quot;#footnotes&quot;&gt;10&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rcons abacus109
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus109 login: root
Password:

[root@abacus109 ~]#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the following command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# USEOPENSSLFORXCAT=1 \
XCATSERVER=192.168.80.220:3001 \
/xcatpost/startsyncfiles.awk -v RCP=/usr/bin/rsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exit the compute node.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

abacus109 login:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl-e&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.&lt;/code&gt; (three characters: Ctrl-e, ‘c’ and ‘.’) to 
disconnect by closing the session with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makegocons&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Back in the management node, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdcp abacus109 -F /install/custom/install/centos/compute.centos7.x86_64.synclist
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update the node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt; but limit it to only run the scripts.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus109 -P
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check whether the run of the scripts worked.&lt;/p&gt;

&lt;p&gt;Yeah, it worked for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;synclist&lt;/code&gt;; that is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute.centos7.x86_64.synclist&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 ls -lh /opt/torque/ 
abacus109: total 4.0K
abacus109: drwxr-xr-x. 2 root root 4.0K May 16  2009 bin
abacus109: drwxr-xr-x. 2 root root   92 May 16  2009 include
abacus109: drwxr-xr-x. 2 root root  113 May 16  2009 lib
abacus109: drwxr-xr-x. 6 root root   54 May 16  2009 man
abacus109: drwxr-xr-x. 2 root root  147 May 16  2009 sbin
abacus109: drwxr-xr-x. 3 root root   19 May 16  2009 var

# xdsh abacus109 du -chs /opt/torque/ 
abacus109: 108M /opt/torque/
abacus109: 108M total
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/passwd 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/group
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It also worked for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compute_custom_post&lt;/code&gt; script run:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/fstab
---- snip ----
abacus109: mgmt:/home    /home    nfs  defaults  1 2
abacus109: mgmt:/global  /global  nfs  defaults  1 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 df -hT 
abacus109: Filesystem              Type      Size  Used Avail Use% Mounted on
---- snip ---
abacus109: mgmt:/home              nfs4      5.0T  1.8T  3.3T  36% /home
abacus109: mgmt:/global            nfs4      3.9T  637G  3.3T  17% /global
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 cat /etc/hosts
---- snip ----
abacus109: 192.168.80.210 mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupntp&lt;/code&gt; script run worked too:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 systemctl is-active chronyd.service
abacus109: active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 systemctl status chronyd.service
abacus109: * chronyd.service - NTP client/server
abacus109:    Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; vendor preset: enabled)
abacus109:    Active: active (running) since Fri 2022-03-20 18:53:38 PDT; 2min ago
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yep, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus_custom_postboot&lt;/code&gt; script run worked as well:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 systemctl is-active pbs_mom.service 
abacus109: active

# xdsh abacus109 systemctl status pbs_mom.service 
abacus109: * pbs_mom.service - PBS Mom service
abacus109: Loaded: loaded (/etc/systemd/system/pbs_mom.service; enabled; vendor preset: disabled)
abacus109: Active: active (running) since Fri 2022-03-20 18:53:39 PDT; 2min ago
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus109 --verify ls -lh /
abacus109: total 28K
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
If the above &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updatenode abacus109 -P&lt;/code&gt; does not work, you can try fixing 
it by the following sequence of commands:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# updatenode abacus109 -P syncfiles
# updatenode abacus109 -P &quot;confignetwork -s&quot;
# updatenode abacus109 -P
# updatenode abacus109 -P -F -V
# updatenode abacus109 -P syncfiles -P &quot;confignics -s&quot;
# updatenode abacus109 -P syncfiles -F -V
# xdsh abacus109 shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Explanation:&lt;/em&gt;  &lt;br /&gt;
If you want to run all the customization scripts that have been designated for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus109&lt;/code&gt; node (in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; attributes), the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-P&lt;/code&gt; option (i.e, the command: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updatenode abacus109 -P&lt;/code&gt;) will not work after install.  Instead, after install use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-F&lt;/code&gt; option for file synchronization (including synchronization of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postscripts&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postbootscripts&lt;/code&gt; attributes).&lt;/p&gt;

&lt;p&gt;From the man page for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;updatenode(1)&lt;/code&gt; command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-F|--sync     Specifies that file synchronization should be performed on the
              nodes.  rsync/scp and ssh must be installed and configured on
              the nodes.
[...]
-P|--scripts  Specifies that postscripts and postbootscripts should be run on
              the nodes.  File sync with updatenode -P syncfiles is not
              supported.  The syncfiles postscript can only be run during
              install.  You should use updatenode -F instead.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;usefultypicall-first-commands-in-the-guest-vm-with-xcat-on-it&quot;&gt;Useful/Typicall (First) Commands in the Guest VM with xCAT on It&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# uptime
# hostname
# ifconfig
# ifconfig -1
# ip address show
# ip -d address show       (ip -d a s)
# ip link show
# ip neigh                 (ip neighbour, ip neighbor) 
# nmcli device status
# nmcli connection show
# netstat -rn
# netstat -r
# ip route
# cat /etc/resolv.conf
# cat /etc/hosts
# ping -c2 freebsd.org
# ping -c2 192.168.80.210   &amp;lt;-- forwarder (DNS server)
# ping -c2 192.168.80.220   &amp;lt;-- nameserver
# rpower cn14 state         &amp;lt;-- cn14 is a (compute) node
# rinv -V cn14 firm -all
# tabdump site
# tabdump networks
# tabdump mpa
# tabdump mp
# tabdump passwd
# tabdump postscripts
# tabdump prescripts
# tabdump ppc
# rpower cn13 state         &amp;lt;-- cn13 is a (compute) node

# nodels
# nodestat

# ipmitool-xcat

# rspconfig

# rbootseq

# rpower
# rvitals 
# rinv

# xdsh 
# psh

# tabdump ipmi
# tabdump hosts
# tabdump mac
# tabdump nodehm
# tabdump nodelist
# tabdump noderes
# tabdump nodetype
# tabdump linuximage
# tabdump chain
# tabdump discoverydata
# tabdump osdistro
# tabdump osimage
# tabdump policy

mkdef, chtab, lsdef

nodech 
nodeadd
nodegrpch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsslp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List nodes defined in database but can’t be discovered:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsslp -I
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-I&lt;/code&gt;    Give the warning message for the nodes in database which have no
        SLP responses.  Note that this flag can only be used after the
        database migration finished successfully.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# lsslp -z
# lsslp -x
# lsslp -w       &amp;lt;--  Writes output to xCAT database
# rscan cn13
# rscan -z cn13
# rscan -x cn13
# rscan -x cn13  &amp;lt;-- Writes output to xCAT database
# hwclock --show
# lsxcatd -a
# makehosts
# makedns
# makedhcp -n
# dumpxCATdb -a -p /tmp/xCAT_Backup
# restorexCATdb -p /tmp/xCAT_Backup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;the-fundamentals-of-building-an-hpc-cluster&quot;&gt;The Fundamentals of Building an HPC Cluster&lt;/h3&gt;

&lt;p&gt;Adapted from &lt;a href=&quot;https://www.admin-magazine.com/HPC/Articles/Building-an-HPC-Cluster&quot;&gt;The Fundamentals of Building an HPC Cluster&lt;/a&gt; (retrieved on Mar 20, 2022):&lt;/p&gt;

&lt;p&gt;Architecture &lt;br /&gt;
The cluster is on a &lt;strong&gt;private Ethernet network&lt;/strong&gt;. 
The address space is &lt;strong&gt;unroutable&lt;/strong&gt; so the compute nodes are “hidden” from 
a routable network, allowing you to separate your cluster logically from 
a public network.&lt;/p&gt;

&lt;p&gt;To log in to the cluster from a public network you need to add a second 
network interface controller (NIC) to the managment node (master node). 
This NIC has a public IP address that allows you to log in to the cluster. 
Only the master node should have the public IP address because there is 
no reason for compute nodes to have two addresses. (You want them to 
be private.)&lt;/p&gt;

&lt;p&gt;Another key feature of a basic cluster architecture is a shared directory 
across the nodes.  Strictly speaking this isn’t required but without it 
some MPI (message-passing interface) applications would not run. 
Therefore, it is a good idea simply to use a shared filesystem in 
the cluster.  &lt;strong&gt;NFS&lt;/strong&gt; is the easiest to use because both server and 
client are in the kernel, and the distribution should have the tools 
for configuring and monitoring NFS.&lt;/p&gt;

&lt;p&gt;Software Layers&lt;br /&gt;
The first layer is the basic software you need and really nothing extra. 
The second layer adds some administrative tools to make it easier to 
operate the cluster, as well as tools to reduce problems when running 
parallel applications.  The third layer adds more sophisticated cluster 
tools and adds the concept of monitoring, so you can understand 
what’s happening.&lt;/p&gt;

&lt;p&gt;Layer 1: Software Configuration &lt;br /&gt;
The first layer of software only contains the minimum software to run 
parallel applications.  Obviously, the first thing you need is an OS. 
Typical installation options are usually good enough. 
They install most everything you need.&lt;/p&gt;

&lt;p&gt;The next thing you need is a set of MPI libraries such as 
&lt;a href=&quot;https://www.open-mpi.org/&quot;&gt;Open MPI&lt;/a&gt; or &lt;a href=&quot;https://www.mpich.org/&quot;&gt;MPICH&lt;/a&gt;. 
These are the libraries you will use for creating parallel applications 
and running them on your cluster.  You can find details on how to build 
and install them on their respective websites.
&lt;strong&gt;Note:&lt;/strong&gt;  This cluster configuration uses PBS (Portable Batch System) 
scheduling software in its &lt;a href=&quot;https://web.archive.org/web/20090123185628/http://clusterresources.com/downloads/torque/torque-2.3.6.tar.gz&quot;&gt;TORQUE (Terascale Open-source Resource and QUEue manager&lt;/a&gt; variant, &lt;strong&gt;without&lt;/strong&gt; interfacing with Message Passing MPI (Message Passing Interface) libraries – As per 
&lt;a href=&quot;https://docs.adaptivecomputing.com/torque/3-0-5/index.php&quot;&gt;TORQUE™ Administrator Guide&lt;/a&gt;, section 7.0 Interfacing with Message Passing and &lt;a href=&quot;https://docs.adaptivecomputing.com/torque/3-0-5/7.1mpi.php&quot;&gt;7.1 MPI (Message Passing Interface) Support&lt;/a&gt; “A message passing library is used by parallel jobs to 
&lt;strong&gt;augment&lt;/strong&gt; (&lt;em&gt;emphasis mine&lt;/em&gt;) communication between the tasks distributed 
across the cluster.  TORQUE can run with any message passing library and 
provides limited integration with some MPI libraries.”&lt;/p&gt;

&lt;p&gt;The next, and actually last, piece of software you need is SSH. 
More specifically, you need to be able to SSH to and from each node 
without a password, allowing you to run the MPI applications easily. 
Make sure, however, that you set up SSH after you have NFS working 
across the cluster and each node has mounted the exported directory.&lt;/p&gt;

&lt;p&gt;Layer 2: Architecture and Tools &lt;br /&gt;
The next layer of software adds tools to help reduce cluster problems and 
make it easier to administer.  Using the basic software mentioned in the 
previous section, you can run parallel applications, but you might run 
into difficulties as you scale your system, including:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Running commands on each node (parallel shell) &lt;br /&gt;
Configuring identical nodes (package skew) &lt;br /&gt;
Keeping the same time on each node (NTP) &lt;br /&gt;
Running more than one job (job scheduler/resource manager)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The last issue to address is the job scheduler (also called a resource 
manager).  This is a key element of HPC and can be used even for small 
clusters.  Roughly speaking, a job scheduler will run jobs (applications) 
on your behalf when the resources are available on the cluster so you 
don’t have to sit around and wait for the cluster to be free before you 
run applications.  Rather, you can write a few lines of script and submit 
it to the job scheduler.  When the resources are available, it will run 
your job on your behalf.&lt;/p&gt;

&lt;p&gt;In the script, you specify the resources you need, such as the number of 
nodes or number of cores, and you give the job scheduler the command that 
runs your application, such as:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mpirun -np 4 &amp;lt;executable&amp;gt;&lt;/code&gt;   REPLACE w/TORQUE&lt;/p&gt;

&lt;p&gt;Among the resource managers available, many are open source. 
Examples of resource managers include:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://adaptivecomputing.com/cherry-services/torque-resource-manager/&quot;&gt;Torque&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://slurm.schedmd.com/&quot;&gt;Slurm&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sourceforge.net/projects/gridengine/&quot;&gt;SGE&lt;/a&gt; – Son of Grid Engine&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://gridscheduler.sourceforge.net/&quot;&gt;OGE&lt;/a&gt; – Open Grid Engine&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;With these issues addressed, you now have a pretty reasonable cluster with some administrative tools. Although it’s not perfect, it’s most definitely workable.&lt;/p&gt;

&lt;p&gt;Layer 3: Deep Administration &lt;br /&gt;
The third level of tools gets you deeper into HPC administration and begins 
to gather more information about the cluster so you can find problems 
before they happen.  The tools I will discuss briefly are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Cluster management tools&lt;/li&gt;
  &lt;li&gt;Monitoring tools (how are the nodes doing)&lt;/li&gt;
  &lt;li&gt;Environment Modules&lt;/li&gt;
  &lt;li&gt;Multiple networks&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;A cluster management tool is really a toolkit to automate the configuration, 
launching, and management of compute nodes from the master node. 
In some cases, the toolkit will even install the master node for you. 
A number of open source cluster management tools are available, including:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://xcat.org/&quot;&gt;xCAT&lt;/a&gt;, also: &lt;a href=&quot;https://github.com/xcat2&quot;&gt;https://github.com/xcat2&lt;/a&gt;, &lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/Main_Page/&quot;&gt;https://sourceforge.net/p/xcat/wiki/Main_Page/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://warewulf.lbl.gov/&quot;&gt;Warewulf&lt;/a&gt;, also &lt;a href=&quot;https://github.com/warewulf/warewulf3&quot;&gt;https://github.com/warewulf/warewulf3&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://oscar-cluster.github.io/oscar/&quot;&gt;OSCAR&lt;/a&gt; - Open Source Cluster Application Resource, also &lt;a href=&quot;https://github.com/oscar-cluster/oscar&quot;&gt;OSCAR on GitHub&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://onesis.org/&quot;&gt;oneSIS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The tools vary in their approach but they typically allow you to create 
compute nodes that are part of the cluster.  This can be done via images, 
in which a complete image is pushed to the compute node, or via packages, 
in which specific packages are installed on the compute nodes.&lt;/p&gt;

&lt;p&gt;Many of the cluster management tools also include tools for monitoring 
the cluster.  Several monitoring tools are appropriate for HPC clusters 
but a universal tool is Ganglia.  Some of the cluster tools come 
pre-configured with Ganglia, and some don’t, requiring 
an &lt;a href=&quot;http://www.admin-magazine.com/HPC/Articles/Monitoring-HPC-Systems&quot;&gt;installation&lt;/a&gt;.
By default Ganglia comes with some pre-defined metrics but the tool is 
very flexible and allows you to write simple code to attain specific 
metrics from your nodes.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Review all footnotes, including the order and whether some
            footnotes are missing&lt;/p&gt;

&lt;h3 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h3&gt;

&lt;p&gt;[1]  More specifically, when you press &lt;strong&gt;Ctrl D&lt;/strong&gt;, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;at(1)&lt;/code&gt; 
displays &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;EOT&amp;gt;&lt;/code&gt;, which stands for End Of Transmission:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ man ascii
[...]
       The following table contains the 128 ASCII characters.

       C program &apos;\X&apos; escapes are noted.

       Oct   Dec   Hex   Char                        Oct   Dec   Hex   Char
       ────────────────────────────────────────────────────────────────────────
       000   0     00    NUL &apos;\0&apos; (null character)   100   64    40    @
       001   1     01    SOH (start of heading)      101   65    41    A
       002   2     02    STX (start of text)         102   66    42    B
       003   3     03    ETX (end of text)           103   67    43    C
       004   4     04    EOT (end of transmission)   104   68    44    D
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[2] The loopback interface is a virtual interface that is always up and 
available after it has been configured.&lt;/p&gt;

&lt;p&gt;Per Solaris(TM) Operating Environment Boot Camp by David Rhodes, 
Dominic Butler - Pearson Publishing -  September 2002:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;All systems have a “loopback” interface, regardless of whether they are 
connected to the network or not.  This is not a true network interface, 
but acts as one to allow some network-aware programs (such as RPC) to be
able to connect to both the remote and local host in the same way.&lt;/p&gt;

  &lt;p&gt;You don’t need to be concerned with configuring it, as this is performed 
by the operating system, but we do need to make certain that the local 
host address remains in the host file.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[3] Per Networking Bible by
Barrie Sosinsky - John Wiley &amp;amp; Sons, Inc. - September 2009:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;One important example of a logical network interface (also called 
a virtual interface) is the loopback adapter.  The loopback adapter 
is a software routine that emulates an internal NIC card that can accept
system requests and reply to those requests.  The loopback adapter is 
used to test whether network functions are operating correctly.&lt;/p&gt;

  &lt;p&gt;For IP version 4, the loopback adapter is found at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;127.0.0.1&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[4] SOL (Serial over LAN) &lt;br /&gt;
&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.advmgtmod.doc/kp1bd_pdf.pdf&quot;&gt;BladeCenter SOL (Serial over LAN) Setup Guide - IBM Corporation, Twelfth Edition (November 2009)&lt;/a&gt; (Retrieved on Mar 22, 2022):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Chapter 1. Introduction&lt;/p&gt;

  &lt;p&gt;Serial over LAN (SOL) provides a means to manage servers remotely by
using a command-line interface (CLI) over a Telnet or Secure Shell (SSH)
connection.  SOL is required to manage servers that do not have
keyboard/video/mouse (KVM) support […]&lt;/p&gt;

  &lt;p&gt;[…]&lt;/p&gt;

  &lt;p&gt;SOL (Serial Over LAN) provides console redirection for both BIOS and the
blade server operating system.  The SOL feature redirects server
serial-connection data over a LAN without the need for special cabling.
The SOL connection enables blade servers to be managed from any remote
location with network access.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[5] IBM Advanced Settings Utility (ASU)  &lt;br /&gt;
&lt;a href=&quot;https://www.ibm.com/support/pages/ibm-advanced-settings-utility-asu&quot;&gt;IBM Advanced Settings Utility (ASU)&lt;/a&gt;
(Retrieved on Mar 20, 2022)&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://toolscenter.lenovofiles.com/help/topic/asu/asu_guide.pdf&quot;&gt;IBM Advanced Settings Utility (ASU) Version 3.60 User’s Guide&lt;/a&gt;
(Retrieved on Mar 20, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;You can use the IBM Advanced Settings Utility (&lt;strong&gt;ASU&lt;/strong&gt;) to modify
firmware settings from the command line on multiple operating-system
platforms.  You can perform the following tasks by using the utility:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;Modify selected basic input/output system &lt;strong&gt;(BIOS) CMOS&lt;/strong&gt; settings
  without the need to restart the system to access F1 settings.&lt;/li&gt;
    &lt;li&gt;Modify selected &lt;strong&gt;BMC&lt;/strong&gt; (Baseboard Management Controller) setup settings. &lt;br /&gt;
[…]&lt;/li&gt;
    &lt;li&gt;Modify selected settings in &lt;strong&gt;Integrated Management Module (IMM)&lt;/strong&gt;-based
servers for the &lt;strong&gt;IMM&lt;/strong&gt; firmware and IBM System x Server Firmware. 
The IMM replaces the Remote Supervisor Adapter and &lt;strong&gt;Baseboard Management
Controller (BMC)&lt;/strong&gt; functions on IMM-based servers.  IBM System x Server
Firmware is the IBM implementation of &lt;strong&gt;Unified Extensible Firmware
Interface (UEFI)&lt;/strong&gt;.  The &lt;em&gt;UEFI&lt;/em&gt; replaces the basic input/output system
&lt;em&gt;(BIOS)&lt;/em&gt; and defines a standard interface between the operating system,
platform firmware, and external devices.  &lt;br /&gt;
[…]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;[6] Configure &lt;strong&gt;Boot Order&lt;/strong&gt; in &lt;strong&gt;BIOS&lt;/strong&gt; via the &lt;strong&gt;ASU&lt;/strong&gt; Tool&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 save BIOS.TXT --group all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# wc -l BIOS.TXT
88 BIOS.TXT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -i boot BIOS.TXT
CMOS_AlternateBootDevice4=Hard Disk 0
CMOS_AlternateBootDevice3=CD ROM
CMOS_AlternateBootDevice2=Diskette Drive 0
CMOS_AlternateBootDevice1=Network
CMOS_PostBootFailRequired=Enabled
CMOS_PCIBootPriority=Planar SAS
CMOS_RemoteConsoleBootEnable=Enabled
BMC_PrimaryBootDevice1=HDD0
BMC_PrimaryBootDevice2=CD-ROM
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 showvalues --setlist \
BMC_PrimaryBootDevice1 \
BMC_PrimaryBootDevice2 \
BMC_PrimaryBootDevice3 \
BMC_PrimaryBootDevice4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;BMC_PrimaryBootDevice1=Floppy Drive=iSCSI=iSCSI Critical=Network=HDD0=HDD1=HDD2=HDD3=CD-ROM
BMC_PrimaryBootDevice2=Floppy Drive=iSCSI=iSCSI Critical=Network=HDD0=HDD1=HDD2=HDD3=CD-ROM
BMC_PrimaryBootDevice3=Floppy Drive=iSCSI=iSCSI Critical=Network=HDD0=HDD1=HDD2=HDD3=CD-ROM
BMC_PrimaryBootDevice4=Floppy Drive=iSCSI=iSCSI Critical=Network=HDD0=HDD1=HDD2=HDD3=CD-ROM
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 set BMC_PrimaryBootDevice1 Network
# /opt/ibm/toolscenter/asu/asu64 set BMC_PrimaryBootDevice2 CD-ROM
# /opt/ibm/toolscenter/asu/asu64 set BMC_PrimaryBootDevice3 HDD0 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/ibm/toolscenter/asu/asu64 save BIOS_NEW.TXT --group all 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# wc -l BIOS_NEW.TXT
89 BIOS_NEW.TXT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -i boot BIOS_NEW.TXT
CMOS_AlternateBootDevice4=Hard Disk 0
CMOS_AlternateBootDevice3=CD ROM
CMOS_AlternateBootDevice2=Diskette Drive 0
CMOS_AlternateBootDevice1=Network
CMOS_PostBootFailRequired=Enabled
CMOS_PCIBootPriority=Planar SAS
CMOS_RemoteConsoleBootEnable=Enabled
BMC_PrimaryBootDevice1=Network
BMC_PrimaryBootDevice2=CD-ROM
BMC_PrimaryBootDevice3=HDD0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[7] From the manual page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hosts(5)&lt;/code&gt; on RHEL 5.x:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;hosts - The static table lookup for host names  &lt;br /&gt;
This file is a simple text file that associates IP addresses with
hostnames, one line per IP address. For each host a single line should
be present with the following information:
   &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IP_address canonical_hostname [aliases...]&lt;/code&gt;&lt;/p&gt;

  &lt;p&gt;Fields of the entry are separated by any number of blanks and/or tab
characters.  Text from a “#” character until the end of the line is a
comment, and is ignored.  Host names may contain only alphanumeric
characters, minus signs (“-“), and periods (“.”).  They must begin with
an alphabetic character and end with an alphanumeric character.
Optional aliases provide for name changes, alternate spellings, shorter
hostnames, or generic hostnames (for example, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;localhost&lt;/code&gt;).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[8] From the manual page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbsnodes(8)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DESCRIPTION
    The pbsnodes command is used to mark nodes down, free or offline. 
    It can also be used to list nodes and their state.  Node information
    is obtained by sending a request to the PBS job server.  Sets of 
    nodes can be operated on at once by specifying a node property 
    prefixed by a colon.
    Nodes do not exist in a single state, but actually have a set 
    of states.  For example, a node can be simultaneously &quot;busy&quot; and 
    &quot;offline&quot;.  The &quot;free&quot; state is the absence of all other states and 
    so is never combined with other states.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[9] From the manual page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node(7)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    The current status of this node.  This attribute will be set by
    xCAT software.  Valid values: defined, booting, netbooting,
    booted, discovering, configuring, installing, alive, standingby,
    powering-off, unreachable. If blank, defined is assumed. The
    possible status change sequences are: For installation:
    defined-&amp;gt;[discovering]-&amp;gt;[configuring]-&amp;gt;[standingby]-&amp;gt;installing-&amp;gt;booting-&amp;gt;[postbooting]-&amp;gt;booted-&amp;gt;[alive],
    For diskless deployment:
    defined-&amp;gt;[discovering]-&amp;gt;[configuring]-&amp;gt;[standingby]-&amp;gt;netbooting-&amp;gt;[postbooting]-&amp;gt;booted-&amp;gt;[alive],
    For booting:
    [alive/unreachable]-&amp;gt;booting-&amp;gt;[postbooting]-&amp;gt;booted-&amp;gt;[alive],
    For powering off: [alive]-&amp;gt;powering-off-&amp;gt;[unreachable], For
    monitoring: alive-&amp;gt;unreachable. Discovering and configuring are
    for x Series discovery process. Alive and unreachable are set
    only when there is a monitoring plug-in start monitor the node
    status for xCAT. Note that the status values will not reflect the
    real node status if you change the state of the node from outside
    of xCAT (i.e. power off the node using HMC GUI).
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, when I used
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m nodelist.status==booting&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m nodelist.status==installing&lt;/code&gt; 
with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower boot&lt;/code&gt;, the node would sometimes got stuck in powered off state, 
and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rcons &amp;lt;nodename&amp;gt;&lt;/code&gt; would display:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;         DESTINATION BLADE IS IN POWER OFF STATE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As the output of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatprobe osdeploy -n &amp;lt;nodename&amp;gt;&lt;/code&gt; command in the first terminal; in this case, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatprobe osdeploy -n abacus109&lt;/code&gt; (after &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rpower abacus109 boot&lt;/code&gt; in the second terminal) indicated&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... Node status is changed to powering-on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;search for &lt;em&gt;powering-on&lt;/em&gt; returned:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -r -n &apos;powering-on&apos; /opt/xcat/
/opt/xcat/lib/perl/xCAT/GlobalDef.pm:52:$::STATUS_POWERING_ON  = &quot;powering-on&quot;;
/opt/xcat/lib/perl/xCAT_plugin/openbmc.pm:49:$::POWER_STATE_POWERING_ON  = &quot;powering-on&quot;;
/opt/xcat/probe/lib/perl/xCAT/GlobalDef.pm:52:$::STATUS_POWERING_ON  = &quot;powering-on&quot;;
/opt/xcat/probe/subcmds/osdeploy:1209:                } elsif ($status eq &quot;powering-on&quot;) {
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For example, looking into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GlobalDef.pm&lt;/code&gt; revealed even more valid values 
for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;status&lt;/code&gt; (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nodelist.status&lt;/code&gt;).  One of them is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;powering-on&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed -n 43,63p /opt/xcat/lib/perl/xCAT/GlobalDef.pm
# valid values for nodelist.status columns or other status
$::STATUS_ACTIVE       = &quot;alive&quot;;
$::STATUS_INACTIVE     = &quot;unreachable&quot;;
$::STATUS_INSTALLING   = &quot;installing&quot;;
$::STATUS_INSTALLED    = &quot;installed&quot;;
$::STATUS_BOOTING      = &quot;booting&quot;;
$::STATUS_POSTBOOTING  = &quot;postbooting&quot;;
$::STATUS_NETBOOTING   = &quot;netbooting&quot;;
$::STATUS_BOOTED       = &quot;booted&quot;;
$::STATUS_POWERING_ON  = &quot;powering-on&quot;;
$::STATUS_POWERING_OFF = &quot;powering-off&quot;;
$::STATUS_DISCOVERING  = &quot;discovering&quot;;
$::STATUS_DISCOVERED   = &quot;discovered&quot;;
$::STATUS_CONFIGURING  = &quot;configuring&quot;;
$::STATUS_CONFIGURED   = &quot;configured&quot;;
$::STATUS_STANDING_BY  = &quot;standingby&quot;;
$::STATUS_SHELL        = &quot;shell&quot;;
$::STATUS_DEFINED      = &quot;defined&quot;;
$::STATUS_UNKNOWN      = &quot;unknown&quot;;
$::STATUS_FAILED       = &quot;failed&quot;;
$::STATUS_BMCREADY     = &quot;bmcready&quot;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[10] In this example, the blade server is &lt;strong&gt;IBM HS21&lt;/strong&gt;, whose BIOS needs 
to be setup with the following in order for SOL (Serial Over LAN) to work:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Serial Port A: Auto-configure&lt;/li&gt;
  &lt;li&gt;Serial Port B: Auto-configure&lt;/li&gt;
  &lt;li&gt;Remote Console Active: Enabled&lt;/li&gt;
  &lt;li&gt;Remote Console COM Port: COM 2&lt;/li&gt;
  &lt;li&gt;Remote Console Active After Boot: Enabled&lt;/li&gt;
  &lt;li&gt;Remote Console Flow Control: Hardware&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;[11] The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nomodeset&lt;/code&gt; fix for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;no | invalid EDID&lt;/code&gt; messages in the console:&lt;/p&gt;

&lt;p&gt;For example, if the EDID issue is happening on a node named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus211&lt;/code&gt;,
to fix it run the the following commands on the xCAT MN (Management Node), 
which in the examples on this page has an IP address &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.220&lt;/code&gt;
(hostname &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;).  (&lt;strong&gt;Note:&lt;/strong&gt; The OS on the compute 
node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus214&lt;/code&gt; is CentOS 7 so the grub version on it is grub2.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp root@abacus211:/etc/default/grub /tmp/grubabacus211.ORIG
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -n CMDLINE /tmp/grubabacus211.ORIG
7:GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=xcatvg/root console=ttyS1,19200&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed -i.bkp &apos;s/ttyS1,19200/ttyS1,19200 nomodeset/&apos; /tmp/grubabacus211.ORIG
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff \
--unified=0 \
/tmp/grubabacus211.ORIG.bkp \
/tmp/grubabacus211.ORIG
--- /tmp/grubabacus211.ORIG.bkp 2022-03-20 20:59:04.966346023 -0700
+++ /tmp/grubabacus211.ORIG     2022-03-20 21:00:25.710970506 -0700
@@ -7 +7 @@
-GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=xcatvg/root console=ttyS1,19200&quot;
+GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=xcatvg/root console=ttyS1,19200 nomodeset&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus211 cp /etc/default/grub /tmp/grub.ORIG
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# scp /tmp/grubabacus211.ORIG root@abacus211:/etc/default/grub
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus211 cat /etc/default/grub
abacus211: GRUB_TIMEOUT=5
abacus211: GRUB_DISTRIBUTOR=&quot;$(sed &apos;s, release .*$,,g&apos; /etc/system-release)&quot;
abacus211: GRUB_DEFAULT=saved
abacus211: GRUB_DISABLE_SUBMENU=true
abacus211: GRUB_TERMINAL=&quot;serial console&quot;
abacus211: GRUB_SERIAL_COMMAND=&quot;serial --unit=1 --speed=19200&quot;
abacus211: GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=xcatvg/root console=ttyS1,19200 nomodeset&quot;
abacus211: GRUB_DISABLE_RECOVERY=&quot;true&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus211 grub2-mkconfig -o /boot/grub2/grub.cfg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus211 reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rcons abacus211
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;   Do I need to mention this method (order)?:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.mail-archive.com/xcat-user@lists.sourceforge.net/msg05288.html&quot;&gt;Re: [xcat-user] Problem with rsetboot: unable to identify plugin&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;You should do the OS deployment by following three steps:
1. nodeset &amp;lt;node&amp;gt; osimage=&amp;lt;image name&amp;gt;
2. rbootseq &amp;lt;node&amp;gt; net,hd
3. rpower &amp;lt;node&amp;gt; boot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Probably add something about &lt;strong&gt;Gaussian&lt;/strong&gt; (and &lt;strong&gt;GaussView&lt;/strong&gt;).&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Should I go into IPMI via ASU (NOT tested yet)?:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://serverfault.com/questions/60358/communicating-via-command-mode-with-ibm-hs22-imm-via-amm&quot;&gt;Communicating via Command Mode with IBM HS22 IMM via AMM&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;SUMMARY&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Should I sanitize this section, e.g.: MAC addresses?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Optional:&lt;/em&gt;  Pre-Review:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tabdump site
# lsdef -t site -l
# lsdef -t group -l
# lsdef -t osimage -l
# lsdef -t node -l
# rpower all stat
# nodestat all
# nodels all groups

# rinv all all
# rvitals all all

# monls -a
# lsvm all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodels
[...]               &amp;lt;-- The rest of the nodes are MM nodes (not CNs)
abacus102
abacus103
abacus105
xbcmm1n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nodestat all
[...]               &amp;lt;-- The rest of the nodes are MM nodes (not CNs)
abacus102: noping
abacus103: pbs,sshd
abacus105: noping
xbcmm1n: sshd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ping&lt;/code&gt; when it works.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -c2 192.168.80.6
PING 192.168.80.6 (192.168.80.6) 56(84) bytes of data.
From 192.168.80.220 icmp_seq=1 Destination Host Unreachable
From 192.168.80.220 icmp_seq=2 Destination Host Unreachable

--- 192.168.80.6 ping statistics ---
2 packets transmitted, 0 received, +2 errors, 100% packet loss, time 999ms
pipe 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  TEST JOBS   - Clean and Complete&lt;/p&gt;

&lt;p&gt;Run two test jobs, one from the CLI and the other one from WebMO.&lt;/p&gt;

&lt;p&gt;TEST JOB 1&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /home/webmo/qsub_test_abacus104
#
#
#PBS -l nodes=1:abacus104
#
sleep 120
hostname
date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /global/software/torque/x86_64/bin/qsub /home/webmo/qsub_test_abacus104
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[NOTE]&lt;/strong&gt;  &lt;br /&gt;
If you receive a “Not enough nodes available”, as shown here:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /home/webmo/bin/qsort
JobID  Jobname              User  Status  Ncpus  C_Time  CPU%  hosts
==============================================================================
[...]
290585 WebMO_285222         webmo    R      1                  abacus-203
290591 qsub_test_abacus104  root     Q                         Not enough
                                                               nodes available
==============================================================================
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;check the node’s state by using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbsnodes(8B)&lt;/code&gt; command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /global/software/torque/x86_64/bin/pbsnodes -l all abacus104
abacus104            offline
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the node is in OFFLINE state, the fix is to clear OFFLINE from the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /global/software/torque/x86_64/bin/pbsnodes -c abacus104
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the node is in DOWN state, try fixing it by restarting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_mom&lt;/code&gt; service on the node:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus104 systemctl restart pbs_mom.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  If you are still not getting the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free&lt;/code&gt; status for the compute 
           node, most likely you need to retart the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbs_server&lt;/code&gt; service 
	   on the head node; that is, on the head node:
           &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;systemctl restart pbs_server.service&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;   If no state is specified with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-l&lt;/code&gt; option in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pbsnodes&lt;/code&gt;
            command, it only lists nodes in the DOWN, OFFLINE, or UNKNOWN
	    states.  Specifying a state string acts as an output
            filter.   Valid  state  strings  are  “active”,   “all”,
            “busy”, “down”, “free”, “offline”, “unknown”, and “up”.&lt;/p&gt;

&lt;p&gt;Most likely you’ll need to delete the job&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# qdel 290591 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and re-submit it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /global/software/torque/x86_64/bin/qsub /home/webmo/qsub_test_abacus104
290592.mgmt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;:  Add the useful (currently, as of Jul 4, 2022, to be run from
             &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /opt/torque/sbin/momctl -f /etc/hosts -d 3

# /opt/torque/sbin/momctl -h abacus104 -d 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Back on the MN (management node), &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcatmn.mydomain.com&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus104 find /opt/torque/ -name &apos;*290592*&apos;
abacus104: /opt/torque/var/spool/aux/290592.mgmt
abacus104: /opt/torque/var/spool/mom_priv/jobs/290592.mgmt.SC
abacus104: /opt/torque/var/spool/mom_priv/jobs/290592.mgmt.TK
abacus104: /opt/torque/var/spool/mom_priv/jobs/290592.mgmt.JB
abacus104: /opt/torque/var/spool/spool/290592.mgmt.OU
abacus104: /opt/torque/var/spool/spool/290592.mgmt.ER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus104 cat /opt/torque/var/spool/aux/290592.mgmt
abacus104: abacus104
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xdsh abacus104 cat /opt/torque/var/spool/mom_priv/jobs/290592.mgmt.SC
abacus104: #
abacus104: #
abacus104: #PBS -l nodes=1:abacus104
abacus104: #
abacus104: sleep 120
abacus104: hostname
abacus104: date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Go back to the PBS server machine, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /home/webmo/bin/qsort
JobID  Jobname              User  Status  Ncpus  C_Time  CPU%  hosts
=========================================================================
[...]
290585 WebMO_285222         webmo    R      1                  abacus-203
290592 qsub_test_abacus104  root     R      1    00:00    0%   abacus-104
=========================================================================
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After 120 seconds:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /home/webmo/bin/qsort
JobID  Jobname              User  Status  Ncpus  C_Time  CPU%  hosts
=========================================================================
[...]
290585 WebMO_285222         webmo    R      1                  abacus-203
=========================================================================
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TEST JOB 2&lt;/p&gt;

&lt;p&gt;Log into WebMO (via Canvas: All Courses &amp;gt; CHEM WEBMO &amp;gt; Student View &amp;gt; Abacus).&lt;/p&gt;

&lt;p&gt;In WebMO Job Manager: New Job &amp;gt; Create New Job&lt;/p&gt;

&lt;p&gt;Create a simple job; for example, with seven connected C atoms.&lt;/p&gt;

&lt;p&gt;Specify a job execution node &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus104&lt;/code&gt;: select Advanced tab:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nodes : PPN : Node Type&lt;/code&gt;   &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1: 1: abacus104&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Submit the job.&lt;/p&gt;

&lt;p&gt;Go back to the PBS server machine, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abacus.mydomain.com&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /home/webmo/bin/qsort
JobID  Jobname              User  Status  Ncpus  C_Time  CPU%  hosts
=========================================================================
[...]
290585 WebMO_285222         webmo    R      1                  abacus-203
290593 WebMO_285228         webmo    R      1    00:00    0%   abacus-104
=========================================================================
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On this cluster, this job completes in 5.3 seconds.&lt;/p&gt;

&lt;p&gt;After six seconds:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /home/webmo/bin/qsort
JobID  Jobname              User  Status  Ncpus  C_Time  CPU%  hosts
=========================================================================
[...]
290585 WebMO_285222         webmo    R      1                  abacus-203
=========================================================================
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man xcatprobe 
No manual entry for xcatprobe

# find /opt/xcat/ -iname &apos;*xcatprobe*&apos;
/opt/xcat/bin/xcatprobe
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatprobe -h
Usage:
xcatprobe -h
xcatprobe -l
xcatprobe [-V] &amp;lt;subcommand&amp;gt;  &amp;lt;attrbute_to_subcommand&amp;gt;

Options:
    -h : get usage information of xcatprobe
    -l : list all valid sub commands
    -V : print verbose information of xcatprobe
    -w : show each line completely. By default long lines are truncated.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatprobe -l
Supported sub commands are:
detect_dhcpd     detect_dhcpd can be used to detect the dhcp server in a network
                 for a specific mac address. Before using this command, install
                 &apos;tcpdump&apos; command. The operating system supported are RedHat,
                 SLES and Ubuntu.
osdeploy         Probe operating system provision process. Supports two modes -
                 &apos;Realtime monitor&apos; and &apos;Replay history&apos;.
nodecheck        Use this command to check node defintions in xCAT DB.
xcatmn           After xcat installation, use this command to check if xcat has
                 been installed correctly and is ready for use. Before using
                 this command, install &apos;tftp&apos;, &apos;nslookup&apos; and &apos;wget&apos; commands.
                 Supported platforms are RedHat, SLES and Ubuntu.
osimagecheck     Use this command to check osimage defintions in xCAT DB.
discovery        Probe for discovery process, including pre-check for required
                 configuration and realtime monitor of discovery process.
image            Use this command to check if specified diskless nodes have the
                 same images installed or if nodes are installed with the same
                 image as defined on the management node.
clusterstatus    Use this command to get node summary in the cluster.
switch_macmap    To retrieve MAC address mapping for the specified switch, or
                 all the switches defined in &apos;switches&apos; table in xCAT db.
                 Currently, this command does not support hierarchy.
code_template    This isn&apos;t a probe tool, this is just a template for sub
                 command coding. Use it to develop sub command which need to
                 cover hierarchical cluster
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# command -v tcpdump; type -a tcpdump; whereis tcpdump; which tcpdump
/usr/sbin/tcpdump
tcpdump is /usr/sbin/tcpdump
tcpdump: /usr/sbin/tcpdump /usr/share/man/man8/tcpdump.8.gz
/usr/sbin/tcpdump
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# command -v tftp; type -a tftp; whereis tftp; which tftp 
/usr/bin/tftp
tftp is /usr/bin/tftp
tftp: /usr/bin/tftp /usr/share/man/man1/tftp.1.gz
/usr/bin/tftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# command -v nslookup; type -a nslookup; whereis nslookup; which nslookup
/usr/bin/nslookup
nslookup is /usr/bin/nslookup
nslookup: /usr/bin/nslookup /usr/share/man/man1/nslookup.1.gz
/usr/bin/nslookup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# command -v wget; type -a wget; whereis wget; which wget 
/usr/bin/wget
wget is /usr/bin/wget
wget: /usr/bin/wget /usr/share/man/man1/wget.1.gz
/usr/bin/wget
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xcatprobe detect_dhcpd -h
[...]

# xcatprobe osdeploy -h
[...]

# xcatprobe nodecheck -h
[...]

# xcatprobe xcatmn -h
[...]

# xcatprobe osimagecheck -h
[...]

# xcatprobe discovery -h
[...]

# xcatprobe image -h
[...]

# xcatprobe clusterstatus -h
[...]

# xcatprobe switch_macmap -h
[...]

# xcatprobe code_template -h
[...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;REFERENCES:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;(All references retrieved on Mar 20, 2022.)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://xcat-docs.readthedocs.io/en/latest/guides/admin-guides/manage_clusters/x86_64/index.html&quot;&gt;xCAT Documentation: Docs &amp;gt; Admin Guide &amp;gt; Manage Clusters &amp;gt; x86_64&lt;/a&gt;:  &lt;br /&gt;
“This section is not available at this time.&lt;br /&gt;
Refer to xCAT Documentation on SourceForge for information on System X servers”: &lt;br /&gt;
&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/XCAT_Documentation/&quot;&gt;https://sourceforge.net/p/xcat/wiki/XCAT_Documentation/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/IBM_Blade_Center_HowTo/&quot;&gt;IBM BladeCenter HOWTO - xCAT Wiki on Sourceforg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://download.lenovo.com/servers/mig/systems/support/system_x_pdf/installation_and_service_guide_15b_00wa645.pdf&quot;&gt;Intelligent Clusters - Installation and Service Guide&lt;/a&gt;  &amp;lt;– Has information about hardware
configuration, cabling and similar.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/xcat2/xcat-core/issues/5797&quot;&gt;Connection failure: SSL connect attempt failed with unknown error error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure at /opt/xcat/lib/perl/xCAT/Client.pm line 281. #5797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/IBM_Blade_Center_HowTo/&quot;&gt;IBM Blade Center HOWTO (incomplete)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/XCAT_Cluster_with_IBM_BladeCenter/&quot;&gt;XCAT Cluster with IBM BladeCenter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/XCAT_BladeCenter_Linux_Cluster/&quot;&gt;XCAT BladeCenter Linux Cluster&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://xcat.org/files/xcat/repos/yum/xcat-dep/&quot;&gt;XCAT Dependency Packages (xcat-dep) - RPM Packages List (RHEL and SLES)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/Intro_to_xCAT_Tables/#xcat-tables-descriptions&quot;&gt;A Brief Introduction to some commonly used xCAT tables - xCAT Tables Descriptions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://xcat-docs.readthedocs.io/en/latest/guides/admin-guides/references/man5/xcatdb.5.html&quot;&gt;A Complete List of xCAT Tables and Their Descriptions (An overview of the xCAT database)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sense.net/~egan/xcat/doc/xcat-mini-HOWTO.html&quot;&gt;xCAT Mini HOWTO (WIP)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sense.net/~egan/xcat/doc/xcat-HOWTO.html&quot;&gt;xCAT HOWTO for Red Hat Linux&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sense.net/~egan/xcat/doc/susemgtnode-HOWTO.html&quot;&gt;xCAT susemgtnode-HOWTO for SuSE Linux&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sense.net/~egan/xcat/doc/stage1-HOWTO.html&quot;&gt;xCAT Stage1 HOWTO (WIP)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://sense.net/~egan/xcat/doc/nodeinstall-HOWTO.html&quot;&gt;xCAT Node Installation HOWTO (WIP)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://sourceforge.net/p/xcat/wiki/The_location_of_synclist_file_for_updatenode_and_install_process/&quot;&gt;The location of synclist file for updatenode and install process - xCAT Wiki on SourceForge&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.redbooks.ibm.com/redbooks/pdfs/sg247034.pdf&quot;&gt;IBM E server BladeCenter, Linux, and Open Source (IBM Redbooks)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/support/pages/node/821662&quot;&gt;Installation and User’s Guide - IBM BladeCenter HS21&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://toolscenter.lenovofiles.com/help/index.jsp?topic=%2Ftoolsctr%2Fasu_main.html&quot;&gt;Advanced Settings Utility - Lenovo ToolCenter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.hs21.doc/hs21_install_ug.pdf&quot;&gt;IBM BladeCenter HS21 - Installation and User’s Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/index.jsp?topic=%2Fcom.lenovo.bladecenter.hs21.doc%2Fbls_hs21_product_page.html&amp;amp;cp=0_6_2&quot;&gt;IBM BladeCenter HS21 Documentation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.hs21.doc/hs21_pdguide.pdf&quot;&gt;Troubleshooting the HS21 Blade Server - BladeCenter HS21 Problem Determination and Service Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.mgtmod.doc/mgt_mod_product_page.html?cp=0_5_2&quot;&gt;IBM Management Module Documentation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.mgtmod.doc/d3sdems4.pdf&quot;&gt;IBM BladeCenter Management Module Installation Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.mgtmod.doc/44R5370.pdf&quot;&gt;IBM BladeCenter Management Module User’s Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.mgtmod.doc/44R5372.pdf&quot;&gt;IBM BladeCenter Management Module Command-Line Interface Reference Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.advmgtmod.doc/kp1bd_pdf.pdf&quot;&gt;BladeCenter SOL (Serial over LAN) Setup Guide - IBM Corporation, Twelfth Edition (November 2009)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/openpbs/openpbs&quot;&gt;OpenPBS Open Source - Source Code on GitHub&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://openpbs.org/&quot;&gt;OpenPBS Open Source Project&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/TORQUE&quot;&gt;TORQUE (a.k.a. TORQUE Resource Manager)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Job_scheduler&quot;&gt;Job scheduler - Batch queuing for HPC clusters (Job scheduler)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Job_queue&quot;&gt;Job queue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/docs/en/i/7.1?topic=concepts-job-queues&quot;&gt;Job queues (www.ibm.com - IBM Docs)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.redhat.com/en/blog/converting-traditional-sysv-init-scripts-red-hat-enterprise-linux-7-systemd-unit-files&quot;&gt;Converting traditional sysV init scripts to Red Hat Enterprise Linux 7 systemd unit files - RedHat Blog&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/title/SysVinit&quot;&gt;SysVinit - archlinux Wiki&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.webmo.net/&quot;&gt;WebMO&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/solutions/1543343&quot;&gt;PolicyKit failing to start with error: polkit.service: main process exited, code=exited, status=1/FAILURE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://superuser.com/questions/640338/how-to-reset-a-broken-tty&quot;&gt;How to reset a broken TTY? - Super User&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Computer_cluster&quot;&gt;Computer cluster&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sun, 20 Mar 2022 09:27:34 -0700</pubDate>
        <link>http://localhost:4000/hpc/server/hardware/sysadmin/automation/configmanagement/howto/2022/03/20/xcat.html</link>
        <guid isPermaLink="true">http://localhost:4000/hpc/server/hardware/sysadmin/automation/configmanagement/howto/2022/03/20/xcat.html</guid>
        
        
        <category>hpc</category>
        
        <category>server</category>
        
        <category>hardware</category>
        
        <category>sysadmin</category>
        
        <category>automation</category>
        
        <category>configmanagement</category>
        
        <category>howto</category>
        
      </item>
    
      <item>
        <title>How to Setup an External USB Hard Drive as a ZFS Backup Disk in FreeBSD</title>
        <description>&lt;p&gt;OSs: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;/p&gt;

</description>
        <pubDate>Sat, 19 Mar 2022 10:13:21 -0700</pubDate>
        <link>http://localhost:4000/zfs/freebsd/snapshot/backup/2022/03/19/freebsd-geli-encrypted-usb-external-hdd-zfs-freebsd.html</link>
        <guid isPermaLink="true">http://localhost:4000/zfs/freebsd/snapshot/backup/2022/03/19/freebsd-geli-encrypted-usb-external-hdd-zfs-freebsd.html</guid>
        
        
        <category>zfs</category>
        
        <category>freebsd</category>
        
        <category>snapshot</category>
        
        <category>backup</category>
        
      </item>
    
      <item>
        <title>Occasionally Revisited Code and Shell Script Snippets</title>
        <description>&lt;h3 id=&quot;which-shell-im-in&quot;&gt;Which shell I’m in?&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ps $$
    PID TTY      STAT   TIME COMMAND
2612401 pts/0    Ss     0:00 -csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;$SHELL&quot;
/bin/csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;h3 id=&quot;how-to-set-an-environment-variable-for-just-one-command-in-cshtcsh&quot;&gt;How to Set an Environment Variable for Just One Command In csh/tcsh?&lt;/h3&gt;

&lt;p&gt;Use a subshell:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# (setenv XCATBYPASS &quot;Y&quot;; tabdump site)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5946736/how-to-set-an-environment-variable-for-just-one-command-in-csh-tcsh&quot;&gt;How to set an environment variable for just one command in csh/tcsh&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 13, 2022)&lt;/p&gt;

&lt;h3 id=&quot;how-to-set-an-environment-variable-for-just-one-command-in-cshtcsh-and-pass-it-to-sudo&quot;&gt;How to set an Environment Variable for Just One Command in csh/tcsh and Pass It To sudo&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo &quot;XCATBYPASS=Y&quot; csh -c &apos;printf %s\\n &quot;$XCATBYPASS&quot;&apos;
Y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  This also works if you replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csh&lt;/code&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tcsh&lt;/code&gt;, 
or with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sh&lt;/code&gt;, or with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bash&lt;/code&gt;. (Tested on FreeBSD 13.0 and RHEL 8.4.)&lt;/p&gt;

&lt;p&gt;Reference:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/40624957/pass-environment-variable-to-sudo&quot;&gt;Pass environment variable to sudo&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 13, 2022)&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;set-the-window-title-in-xterm1&quot;&gt;Set the Window Title in xterm(1)&lt;/h3&gt;

&lt;p&gt;From the man page for xterm(1) (OS: FreeBSD 13):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
For example, to set the window title to &quot;Hello world!&quot;, you could use
one of these commands in a script:

  printf &apos;\033]2;Hello world!\033\&apos; 
  printf &apos;\033]2;Hello world!\007&apos;
  printf &apos;\033]2;%s\033\&apos; &quot;Hello world!&quot; 
  printf &apos;\033]2;%s\007&apos; &quot;Hello world!&quot;

The printf command interprets the octal value &quot;\033&quot; for escape, and
(since it was not given in the format) omits a trailing newline from
the output.

Some programs (such as screen(1)) set both window- and icon-titles at
the same time, using a slightly different control sequence:

  printf &apos;\033]0;Hello world!\033\&apos;
  printf &apos;\033]0;Hello world!\007&apos;
  printf &apos;\033]0;%s\033\&apos; &quot;Hello world!&quot;
  printf &apos;\033]0;%s\007&apos; &quot;Hello world!&quot;

The difference is the parameter &quot;0&quot; in each command.  Most window
managers will honor either window title or icon title.  Some will make
a distinction and allow you to set just the icon title.  You can tell
xterm to ask for this with a different parameter in the control
sequence:

printf &apos;\033]1;Hello world!\033\&apos;      &amp;lt;- The most portable apporach, with the
printf &apos;\033]1;Hello world!\007&apos;       &amp;lt;- parameter &quot;1&quot; - asks if the WM allows
printf &apos;\033]1;%s\033\&apos; &quot;Hello world!&quot; &amp;lt;- WM allows setting only the icon title.
printf &apos;\033]1;%s\007&apos; &quot;Hello world!&quot;  &amp;lt;- (Four different ways to do it.)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
This can be useful even if you don’t use some window 
decorations (e.g.: no titlebars) in your window manager.
For example, in my current setup with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;twm(1)&lt;/code&gt; where I enabled the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NoTitle&lt;/code&gt; 
variable in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.twmrc&lt;/code&gt;, I still find it useful to sometimes set the 
window title for some xterm windows as that makes their title visible 
in TWM’s Icon Manager and that way helps with identifying which server 
I’m working on.&lt;/p&gt;

&lt;h3 id=&quot;xterm1&quot;&gt;xterm(1)&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;Fonts should be fixed width and, if both normal and bold are specified, 
should have the same size.  If only a normal font is specified, it will 
be used for both normal and bold text (by doing overstriking).&lt;br /&gt;
The -e option, if given, must appear at the end of the command line, 
otherwise the user’s default shell will be started.&lt;br /&gt;
Options that start with a plus sign (+) restore the default.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;sed1&quot;&gt;sed(1)&lt;/h3&gt;

&lt;p&gt;OS: CentOS Linux 7, Shell: bash&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -n ttyS0 /etc/securetty
24:ttyS0

$ sed -n &apos;/ttyS0/p&apos; /etc/securetty
ttyS0

$ sed -n &apos;/ttyS0/=&apos; /etc/securetty
24
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;perl&quot;&gt;Perl&lt;/h3&gt;

&lt;p&gt;OS: CentOS Linux 5, Shell: bash&lt;/p&gt;

&lt;p&gt;You need to prepend the currency symbol (a.k.a. dollar sign) with
a backslash (\) in a &lt;a href=&quot;https://en.wikipedia.org/wiki/Here_document&quot;&gt;heredoc&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat &amp;lt;&amp;lt; EOF &amp;gt;&amp;gt; perl1.pl
#!/usr/bin/env perl
use strict;
use Getopt::Long;
use File::Basename;

my \$arguments=join(&apos;,&apos;,@ARGV);

print &quot;\$arguments\n&quot;;
EOF
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chmod 0744 perl1.pl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ./perl1.pl testArg1 testArg2
testArg1,testArg2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-get-physical-block-size-in-linux&quot;&gt;How to Get Physical Block Size in Linux?&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# blockdev --getbsz /dev/sda
4096
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If filesystem is XFS (property: &lt;strong&gt;bsize&lt;/strong&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# df -hT
Filesystem              Type      Size  Used Avail Use% Mounted on
devtmpfs                devtmpfs  908M     0  908M   0% /dev
tmpfs                   tmpfs     919M     0  919M   0% /dev/shm
tmpfs                   tmpfs     919M  8.5M  911M   1% /run
tmpfs                   tmpfs     919M     0  919M   0% /sys/fs/cgroup
/dev/mapper/centos-root xfs       3.5G  1.3G  2.3G  36% /
/dev/sda1               xfs      1014M  150M  865M  15% /boot
tmpfs                   tmpfs     184M     0  184M   0% /run/user/0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xfs_info /dev/mapper/centos-root
meta-data=/dev/mapper/centos-root isize=512    agcount=4, agsize=229120 blks
         =                       sectsz=4096  attr=2, projid32bit=1
         =                       crc=1        finobt=0 spinodes=0
data     =                       bsize=4096   blocks=916480, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=4096  sunit=1 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xfs_info /dev/mapper/centos-root | grep bsize
data     =                       bsize=4096   blocks=916480, imaxpct=25
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# xfs_info /boot | grep bsize
data     =                       bsize=4096   blocks=262144, imaxpct=25
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;running-commands-on-a-remote-machine-with-ssh1&quot;&gt;Running Commands on a Remote Machine with ssh(1)&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh user@example.org &quot;df -hT&quot;
user@example.org&apos;s password: 
Filesystem    Type    Size  Used Avail Use% Mounted on
/dev/sda1     ext3    263G   26G  224G  11% /
tmpfs        tmpfs    7.9G     0  7.9G   0% /dev/shm
mgmt:/home     nfs    5.0T  1.7T  3.3T  34% /home
mgmt:/global   nfs    3.9T  636G  3.3T  16% /global
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;delete-all-hidden-files-with-rm1&quot;&gt;Delete All Hidden Files with rm(1)&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh /mnt/customdvd/
total 8.0K
drwxr-xr-x  2 root root  40 Apr 23 15:54 .
drwxr-xr-x. 5 root root  50 Apr 22 16:17 ..
-rw-r--r--  1 root root  29 Oct 26  2020 .discinfo
-rw-r--r--  1 root root 354 Oct 26  2020 .treeinfo
 
$ ls -lh /mnt/customdvd/.[a-z0-9]*
-rw-r--r-- 1 root root  29 Oct 26  2020 /mnt/customdvd/.discinfo
-rw-r--r-- 1 root root 354 Oct 26  2020 /mnt/customdvd/.treeinfo

$ sudo rm -i /mnt/customdvd/.[a-z0-9]*
rm: remove regular file &apos;/mnt/customdvd/.discinfo&apos;? y
rm: remove regular file &apos;/mnt/customdvd/.treeinfo&apos;? y

$ ls -alh /mnt/customdvd/
total 0
drwxr-xr-x  2 root root  6 Apr 23 15:58 .
drwxr-xr-x. 5 root root 50 Apr 22 16:17 ..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;jekyll-markdown-internal-links---aka-temporarily-disable-tag-processing&quot;&gt;Jekyll Markdown Internal Links - aka Temporarily Disable Tag Processing&lt;/h3&gt;

&lt;p&gt;How can you link to internal content in Jekyll? &lt;br /&gt;
A: You can post internal links by using the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Some Link]{% post_url 2010-07-21-name-of-post %}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Other options:&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Customize CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console and Test the Image with QEMU](http://localhost:4000/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Customize CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console and Test the Image with QEMU](/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  How to actually display these code examples (with curly braces}? &lt;br /&gt;
A:  Use raw and endraw tags (see below).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/docs/liquid/tags/&quot;&gt;Jekyll Docs - Tags Filters&lt;/a&gt;: &lt;br /&gt;
(Retrieved on Mar 13, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Jekyll processes all Liquid filters in code blocks&lt;/p&gt;

  &lt;p&gt;If you are using a language that contains curly braces, you will likely
need to place  {% raw %} 
and  {% endraw   %} 
tags around your code.&lt;/p&gt;

  &lt;p&gt;Since Jekyll 4.0, you can add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;render_with_liquid: false&lt;/code&gt; in your front 
matter to disable Liquid entirely for a particular document.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://shopify.github.io/liquid/tags/template/&quot;&gt;Liquid Documentation: Tags - Template&lt;/a&gt;: &lt;br /&gt;
(Retrieved on Mar 13, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;raw&lt;/p&gt;

  &lt;p&gt;Temporarily disables tag processing. This is useful for generating 
certain content that uses conflicting syntax, such as 
&lt;a href=&quot;https://mustache.github.io/&quot;&gt;Mustache&lt;/a&gt; or 
&lt;a href=&quot;https://handlebarsjs.com/&quot;&gt;Handlebars&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;– References:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/docs/liquid/tags/#linking-to-posts&quot;&gt;Jekyll Documentation - Linking to posts&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 13, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4629675/jekyll-markdown-internal-links&quot;&gt;jekyll markdown internal links&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Mar 13, 2022)&lt;/p&gt;

&lt;hr /&gt;
</description>
        <pubDate>Sun, 13 Mar 2022 10:12:32 -0700</pubDate>
        <link>http://localhost:4000/unix/shell/script/cli/terminal/perl/sysadmin/2022/03/13/occasionally-revisited-code-shell-script-snippets.html</link>
        <guid isPermaLink="true">http://localhost:4000/unix/shell/script/cli/terminal/perl/sysadmin/2022/03/13/occasionally-revisited-code-shell-script-snippets.html</guid>
        
        
        <category>unix</category>
        
        <category>shell</category>
        
        <category>script</category>
        
        <category>cli</category>
        
        <category>terminal</category>
        
        <category>perl</category>
        
        <category>sysadmin</category>
        
      </item>
    
      <item>
        <title>Customize CentOS/RHEL DVD ISO for Installation in Text Mode via Serial Console and Test the Image with QEMU</title>
        <description>&lt;p&gt;OSs: RHEL 7, CentOS 7  &lt;br /&gt;
Shells:  csh, bash&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Specifically:  Customize CentOS/RHEL DVD ISO image for installation in Text 
Mode via serial console &lt;a href=&quot;#footnotes&quot;&gt;¹&lt;/a&gt; &lt;strong&gt;on IBM BladeCenter HS21 Servers&lt;/strong&gt;
and test It with QEMU&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Task:&lt;/em&gt;    &lt;br /&gt;
Install CentOS Linux 7 in Text Mode on IBM BladeCenter HS21 blade servers 
(a.k.a blades) via serial console.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Motivation:&lt;/em&gt; &lt;br /&gt;
Could not use IBM MM (Management Module) web interface’s console 
for performing CentOS Linux installation because MM required a very old 
Java version, which proved complicated to setup.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;prepare-the-server-to-use-serial-console&quot;&gt;Prepare the Server to Use Serial Console&lt;/h3&gt;

&lt;p&gt;Server:  IBM BladeCenter HS21 (This blade is &lt;strong&gt;BIOS-based&lt;/strong&gt; and does &lt;strong&gt;not&lt;/strong&gt; 
support &lt;em&gt;EFI/UEFI&lt;/em&gt;)&lt;/p&gt;

&lt;p&gt;For SOL (Serial Over LAN) to work on this server, the following settings
of its BIOS need to be changed (the lines in bold had to be changed):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Devices and I/O Ports:
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Serial Port A:&lt;/strong&gt; Auto-configure&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Serial Port B:&lt;/strong&gt; Auto-configure&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Remote Console Redirection:
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Remote Console Active:&lt;/strong&gt; Enabled&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Remote Console COM Port:&lt;/strong&gt; COM 2&lt;/li&gt;
      &lt;li&gt;Remote Console Baud Rate: 19200&lt;/li&gt;
      &lt;li&gt;Remote Console Data Bits: 8&lt;/li&gt;
      &lt;li&gt;Remote Console Parity: None&lt;/li&gt;
      &lt;li&gt;Remote Console Stop Bits: 1&lt;/li&gt;
      &lt;li&gt;Remote Console Text Emulation: ANSI&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Remote Console After Boot:&lt;/strong&gt; Enabled&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Remote Console Flow Control:&lt;/strong&gt; Hardware&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;(Optional)&lt;/em&gt; &lt;br /&gt;
Before the upgrade, the OS on the blades was CentOS Linux 5.2. 
If you wanted to enable CentOS 5.2 for redirecting output to the second 
serial device ttyS1 (COM2), you would need to change the following 
configuration files on that OS:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;/etc/inittab&lt;/li&gt;
  &lt;li&gt;/etc/securetty&lt;/li&gt;
  &lt;li&gt;/boot/grub/grub.conf&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Add the following line to the end of the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# Run gettys in standard runlevels&lt;/code&gt; section of the &lt;strong&gt;/etc/inittab&lt;/strong&gt; file. 
This enables hardware flow control and enables users to log in through 
the SOL console.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;7:2345:respawn:/sbin/agetty -h ttyS1 19200 vt102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the following line at the bottom of the &lt;strong&gt;/etc/securetty&lt;/strong&gt; file to 
enable a user to log in as the root user through the SOL console:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ttyS1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Complete the following steps to modify the &lt;strong&gt;/boot/grub/grub.conf&lt;/strong&gt; file:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Comment out the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;splashimage=...&lt;/code&gt; line by adding a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#&lt;/code&gt; at the 
beginning of this line.&lt;/li&gt;
  &lt;li&gt;Add the following line before the first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; line:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# This will allow you to only Monitor the OS boot via SOL&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Append the following text to the first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; line:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SOL Monitor&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Append the following text to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kernel /...&lt;/code&gt; line of the 
first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; section:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=ttyS1,19200 console=tty1&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Add the following lines between after the above &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;title ...&lt;/code&gt; section:&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# This will allow you to Interact with the OS boot via SOL 
title Red Hat Linux (2.4.9-e.12smp) SOL Interactive
    root (hd0,0)
    kernel /vmlinuz-2.4.9-e.12smp ro root=/dev/hda6 console=tty1 
console=ttyS1,19200
    initrd /initrd-2.4.9-e.12smp.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; The entry beginning with kernel &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/vmlinuz...&lt;/code&gt; is shown 
with a line break after &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=tty1&lt;/code&gt;. In your file, the entire 
entry must all be on one line.&lt;/p&gt;

&lt;p&gt;Details:
&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.advmgtmod.doc/kp1bd_pdf.pdf&quot;&gt;IBM BladeCenter - Serial Over LAN (SOL) Setup Guide&lt;/a&gt;  &lt;br /&gt;
Chapter 3. Operating system configuration &amp;gt; Linux configuration &amp;gt; 
Red Hat Enterprise Linux ES 2.1 configuration (including GRUB configuration)  &lt;br /&gt;
(Retrieved on Mar 12, 2022)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Steps:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Download and test ISO&lt;/li&gt;
  &lt;li&gt;Mount ISO and prep for edit&lt;/li&gt;
  &lt;li&gt;Edit isolinux.cfg&lt;/li&gt;
  &lt;li&gt;Create the new ISO&lt;/li&gt;
  &lt;li&gt;Create a test QEMU image with console redirection to serial device on COM2 (ttyS1)&lt;/li&gt;
  &lt;li&gt;Test the QEMU image&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  &lt;br /&gt;
You need to construct a command line for calling QEMU because the 
raw QEMU doesn’t have any VM management so your VM configuration is not
permanent. For the task explained on this page that’s nice since you’ll 
experiment with different VM configurations; for example, one serial 
device in the guest VM, two serial devices in the VM, no serial devices…&lt;/p&gt;

&lt;p&gt;While your VM configuration is not remembered, changes you 
make in the guest VM do get saved in the VM image. In other words, after
you boot the guest in an image, log into the OS installed on it, and 
make changes in the guest OS’ configuration files, they are saved. 
After restarting the guest on the same VM image, next time you log into 
the guest OS on it, your changes will be there.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;IBM BladeCenter HS21 does not support &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ipmitool&lt;/code&gt;. &lt;br /&gt;
&lt;strong&gt;[TODO]:&lt;/strong&gt;  Check to see if it’s possible to add IPMI support in/via BIOS.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  &lt;br /&gt;
When there are long lines in scripts, code and CLI output examples, 
they are folded and then indented to make sure they fit the page.
If there are exceptions, they are noted.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;optional-create-a-test-qemu-image-with-a-text-console-on-the-first-serial-device-ttys0-com1&quot;&gt;(Optional) Create a Test QEMU Image with a Text Console on the First Serial Device ttyS0 (COM1)&lt;/h3&gt;

&lt;p&gt;Note that this step is optional. It’s here to show the setup of packages 
needed on the host OS, the use of QEMU as a test tool for performing the 
required task, and to demonstrate how to create a test virtual machine 
that redirects text output to serial console device.&lt;/p&gt;

&lt;p&gt;The host server used as a jump box already had the following 
packages installed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ipxe-roms-qemu, libvirt-daemon-driver-qemu, qemu-guest-agent, qemu-img, 
qemu-kvm, qemu-kvm-block-curl, qemu-kvm-block-gluster, qemu-kvm-block-iscsi, 
qemu-kvm-block-rbd, qemu-kvm-block-ssh, qemu-kvm-common, qemu-kvm-core
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install additional packages.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install libvirt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install virt-install virt-manager
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install libguestfs-tools libguestfs-gfs2 libguestfs-rescue \
 libguestfs-rsync libguestfs-xfs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install virt-dib virt-v2v virt-p2v-maker virt-viewer virt-who \
 virt-top virtio-win
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install minicom 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo dnf install isomd5sum
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CentOS Mirror (&lt;a href=&quot;http://mirror.centos.org/&quot;&gt;http://mirror.centos.org/&lt;/a&gt;)
contains a directory tree with current CentOS Linux and Stream releases 
(as of Mar 12, 2022: CentOS 7 and CentOS 8-stream).  The last CentOS 
release before switching to CentOS Stream was CentOS 7.9: 
&lt;a href=&quot;http://mirror.centos.org/centos-7/7.9.2009/&quot;&gt;http://mirror.centos.org/centos-7/7.9.2009/&lt;/a&gt;.  In order to conserve the limited bandwidth 
available, ISO images on CentOS.org are not downloadable from 
mirror.centos.org.  The following page lists mirrors in your region that 
have the ISO images available: &lt;a href=&quot;http://isoredirect.centos.org/centos/7.9.2009/isos/x86_64/&quot;&gt;http://isoredirect.centos.org/centos/7.9.2009/isos/x86_64/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Download and verify the CentOS DVD ISO installation image. I decided to use minimal install, CentOS-7-x86_64-Minimal-2009.iso.  (Other options were: CentOS-7-x86_64-DVD-2009.iso, CentOS-7-x86_64-Everything-2009.iso, CentOS-7-x86_64-NetInstall-2009.iso.)  For my region, download location was on mirror.esecuredata.com.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget https://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso
$ wget https://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/sha256sum.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sha256sum CentOS-7-x86_64-Minimal-2009.iso
07b94e6b1a0b0260b94c83d6bb76b26bf7a310dc78d7a9c7432809fb9bc6194a  CentOS-7-x86_6
4-Minimal-2009.iso

$ grep &apos;CentOS-7-x86_64-Minimal-2009.iso&apos; sha256sum.txt
07b94e6b1a0b0260b94c83d6bb76b26bf7a310dc78d7a9c7432809fb9bc6194a  CentOS-7-x86_6
4-Minimal-2009.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir -p /mnt/{dvd,customdvd}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /mnt/
total 0
drwxr-xr-x 2 root root 6 Apr 16 19:57 customdvd
drwxr-xr-x 2 root root 6 Apr 16 19:57 dvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Mount the DVD ISO image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 mount \ 
 -t iso9660 \
 /home/dusko/CentOS-7-x86_64-Minimal-2009.iso \ 
 /mnt/dvd/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the content of the DVD to a separate directory.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rsync -a /mnt/dvd/ /mnt/customdvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh /mnt/customdvd/
total 84K
drwxr-xr-x  8 root root  254 Nov  3  2020 .
drwxr-xr-x. 4 root root   34 Apr 17 18:39 ..
-rw-r--r--  1 root root   14 Oct 29  2020 CentOS_BuildTag
-rw-r--r--  1 root root   29 Oct 26  2020 .discinfo
drwxr-xr-x  3 root root   35 Oct 26  2020 EFI
-rw-rw-r--  1 root root  227 Aug 30  2017 EULA
-rw-rw-r--  1 root root  18K Dec  9  2015 GPL
drwxr-xr-x  3 root root   57 Oct 26  2020 images
drwxr-xr-x  2 root root  182 Apr 17 18:47 isolinux
drwxr-xr-x  2 root root   43 Oct 26  2020 LiveOS
drwxr-xr-x  2 root root  28K Nov  3  2020 Packages
drwxr-xr-x  2 root root 4.0K Nov  3  2020 repodata
-rw-rw-r--  1 root root 1.7K Dec  9  2015 RPM-GPG-KEY-CentOS-7
-rw-rw-r--  1 root root 1.7K Dec  9  2015 RPM-GPG-KEY-CentOS-Testing-7
-r--r--r--  1 root root 2.9K Nov  3  2020 TRANS.TBL
-rw-r--r--  1 root root  354 Oct 26  2020 .treeinfo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/.discinfo 
1603728831.612616
7.9
x86_64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/.treeinfo 
[general]
name = CentOS-7
family = CentOS
timestamp = 1603729576.26
variant = 
version = 7
packagedir = 
arch = x86_64

[stage2]
mainimage = LiveOS/squashfs.img

[images-x86_64]
kernel = images/pxeboot/vmlinuz
initrd = images/pxeboot/initrd.img
boot.iso = images/boot.iso

[images-xen]
kernel = images/pxeboot/vmlinuz
initrd = images/pxeboot/initrd.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /mnt/customdvd/isolinux/
total 60M
-r--r--r-- 1 root root 2.0K Nov  3  2020 boot.cat
-rw-r--r-- 2 root root   84 Oct 26  2020 boot.msg
-rw-r--r-- 2 root root  281 Oct 26  2020 grub.conf
-rw-r--r-- 4 root root  53M Oct 26  2020 initrd.img
-rw-r--r-- 2 root root  24K Nov  3  2020 isolinux.bin
-rw-r--r-- 2 root root 3.0K Oct 26  2020 isolinux.cfg
-rw-r--r-- 3 root root 187K Nov  5  2016 memtest
-rw-r--r-- 5 root root  186 Sep 30  2015 splash.png
-r--r--r-- 1 root root 2.2K Nov  3  2020 TRANS.TBL
-rw-r--r-- 3 root root 150K Oct 30  2018 vesamenu.c32
-rwxr-xr-x 4 root root 6.5M Oct 19  2020 vmlinuz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Customize the DVD ISO so that the installer redirects its text 
output to the serial console.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd /mnt/customdvd/isolinux/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove ‘boot.cat’. It will be regenerated in a later step.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -i boot.cat
rm: remove regular file &apos;boot.cat&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wc -l boot.msg
5 boot.msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Delete the line with ‘splash.lss’ from the ‘boot.msg’.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat boot.msg

 
splash.lss

 -  Press the 01&amp;lt;ENTER&amp;gt;07 key to begin the installation process.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -n &apos;splash\.lss&apos; boot.msg
2:splash.lss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo sed -i.bkp &apos;/splash\.lss/d&apos; boot.msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff boot.msg.bkp boot.msg
2d1
&amp;lt; splash.lss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
 --unified=0 \
 /mnt/dvd/isolinux/boot.msg \
 /mnt/customdvd/isolinux/boot.msg
--- /mnt/dvd/isolinux/boot.msg  2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/boot.msg    2022-03-12 21:11:33.140839189 -0700
@@ -2 +1,0 @@
-splash.lss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -i boot.msg.bkp
rm: remove regular file &apos;boot.msg.bkp&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vi isolinux.cfg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tell ISOLINUX to use a serial port as the console. 
“port” is a number (0 = /dev/ttyS0 = COM1, etc.) or an I/O port address (e.g. 0x3F8) (&lt;a href=&quot;https://www.syslinux.org/old/faq.php&quot;&gt;https://www.syslinux.org/old/faq.php&lt;/a&gt;, &lt;a href=&quot;https://wiki.syslinux.org/wiki/index.php?title=SYSLINUX&quot;&gt;https://wiki.syslinux.org/wiki/index.php?title=SYSLINUX&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Here I want to use the port 0 so the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console&lt;/code&gt; statement uses 
tty0 and ttyS0.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
 --unified=0 \
 /mnt/dvd/isolinux/isolinux.cfg \
 /mnt/customdvd/isolinux/isolinux.cfg
--- /mnt/dvd/isolinux/isolinux.cfg      2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/isolinux.cfg        2022-03-12 22:39:15.690733667 -0700
@@ -64 +64 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet console=tty0 console=ttyS0
@@ -70 +70 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet console=tty0 console=ttyS0
@@ -86 +86 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet console=tty0 console=ttyS0
@@ -96 +96 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet console=tty0 console=ttyS0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No need to make EFI changes because in this case the guest system you are 
planning to simulate is is BIOS-based, not EFI/UEFI.&lt;/p&gt;

&lt;p&gt;Just as a reference, here’s the content of the EFI directory:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /mnt/customdvd/EFI/BOOT/
total 6.0M
-rwxr--r-- 1 root root 978K Jul 31  2020 BOOTIA32.EFI
-rwxr--r-- 1 root root 1.2M Jul 31  2020 BOOTX64.EFI
drwxr-xr-x 2 root root   42 Oct 26  2020 fonts
-rw-r--r-- 1 root root 1.3K Oct 26  2020 grub.cfg
-rwxr--r-- 1 root root 745K Jul 28  2020 grubia32.efi
-rwxr--r-- 1 root root 1.1M Jul 28  2020 grubx64.efi
-rwxr--r-- 1 root root 898K Jul 31  2020 mmia32.efi
-rwxr--r-- 1 root root 1.2M Jul 31  2020 mmx64.efi
-r--r--r-- 1 root root 1.8K Nov  3  2020 TRANS.TBL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;create-a-new-bootable-installation-dvd-iso-image&quot;&gt;Create a New Bootable Installation DVD ISO Image&lt;/h4&gt;

&lt;p&gt;For the CentOS 7 Installation DVD, the label must stay the same.&lt;/p&gt;

&lt;p&gt;Use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isoinfo&lt;/code&gt; command to find out the label of the CentOS DVD 
(an extension named “Volume id”). You can use the same command to find 
out other extensions too; for example, information about Rock Ridge, 
Joliet extensions and Eltorito boot information if present.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ isoinfo -d -i \
 ~/CentOS-7-x86_64-Minimal-2009.iso | wc -l
29
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ isoinfo -d -i \
 ~/CentOS-7-x86_64-Minimal-2009.iso | grep &quot;Volume id&quot; 
Volume id: CentOS 7 x86_64

$ isoinfo -d -i \
 ~/CentOS-7-x86_64-Minimal-2009.iso | grep Joliet
Joliet with UCS level 3 found

$ isoinfo -d -i \
 ~/CentOS-7-x86_64-Minimal-2009.iso | grep prepare
Data preparer id:

$ isoinfo -d -i \
~/CentOS-7-x86_64-Minimal-2009.iso | grep Torito
El Torito VD version 1 found, boot catalog is in sector 606
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blkid(8)&lt;/code&gt; also shows the label:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ blkid ~/CentOS-7-x86_64-Minimal-2009.iso
/home/dusko/CentOS-7-x86_64-Minimal-2009.iso: BLOCK_SIZE=&quot;2048&quot; 
  UUID=&quot;2020-11-03-14-55-29-00&quot; LABEL=&quot;CentOS 7 x86_64&quot; TYPE=&quot;iso9660&quot; 
  PTUUID=&quot;6acc9bba&quot; PTTYPE=&quot;dos&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Recreate the DVD ISO image with the customized settings.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 mkisofs \
 -o /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso \
 -b isolinux/isolinux.bin \
 -J \
 -R \
 -l \
 -c isolinux/boot.cat \
 -no-emul-boot \
 -boot-load-size 4 \
 -boot-info-table \
 -eltorito-alt-boot \
 -e images/efiboot.img \
 -no-emul-boot \
 -graft-points \
 -input-charset utf-8 \
 -output-charset utf-8 \
 -V &quot;CentOS 7 x86_64&quot; \
 /mnt/customdvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo chown dusko:dusko /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Implant an MD5 checksum in the ISO image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ implantisomd5 /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For systems that suport EFI/UEFI, the next step would be to run 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isohybrid&lt;/code&gt; command to make the installation ISO image 
EFI/UEFI-bootable. (In this case, do &lt;strong&gt;not&lt;/strong&gt; run the isohybrid command 
below because this server supports only BIOS.)&lt;/p&gt;

&lt;p&gt;Similarly, if you wanted to create a bootable USB drive (USB flash drive), 
you would also need to run the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isohybrid&lt;/code&gt; command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ isohybrid --uefi \
 /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check an MD5 checksum implanted by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implantisomd5&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ checkisomd5 \
 --verbose \
 /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso
---- snip ----
Checking: 100.0%

The media check is complete, the result is: PASS.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd

$ pwd
/home/dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create an image file for the guest virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ truncate --size=291999055872 abnodevm.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The created image’s format is raw.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img info abnodevm.img
image: abnodevm.img
file format: raw
virtual size: 272 GiB (291999055872 bytes)
disk size: 512 B
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Optionally, you can convert the raw image to qcow2 format. 
(Shown here as a reference. &lt;strong&gt;Don’t&lt;/strong&gt; do it now.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img \ 
 convert \ 
 -f raw \
 -O qcow2 \
 abnodevm.img \
 abnodevm.qcow2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ qemu-img info abnodevm.qcow2
image: abnodevm.qcow2
file format: qcow2
virtual size: 272 GiB (291999055872 bytes)
disk size: 16.5 KiB
cluster_size: 65536
Format specific information:
    compat: 1.1
    lazy refcounts: false
    refcount bits: 16
    corrupt: false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Some useful options for QEMU’s virtual console:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm -h

---- snip ----

During emulation, the following keys are useful:
ctrl-alt-f      toggle full screen
ctrl-alt-n      switch to virtual console &apos;n&apos;
ctrl-alt        toggle mouse and keyboard grab

When using -nographic, press &apos;ctrl-a h&apos; to get some help.

See &amp;lt;https://qemu.org/contribute/report-a-bug&amp;gt; for how to report bugs.
More information on the QEMU project at &amp;lt;https://qemu.org&amp;gt;.

WARNING: 
Direct use of qemu-kvm from the command line is not supported by Red Hat.

WARNING: Use libvirt as the stable management interface.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install CentOS 7.9 on the virtual machine image by using the customized 
CentOS installation DVD image (in text mode, with output via serial 
console - in this example it’s the first serial device, ttyS0).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -cdrom /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso \
 -hda abnodevm.qcow2 \
 -m 2G \
 -boot d \
 -enable-kvm \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start the OS install and finish installing CentOS Linux 7.9.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;After installation:&lt;/p&gt;

&lt;p&gt;When you want to just boot from the image file without the installation 
ISO file (after you have finished installing and now you always want to 
boot the installed system), you can just remove the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cdrom&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -hda abnodevm.qcow2 \
 -m 2G \
 -enable-kvm \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, you can enable ssh port forwarding (with ‘-net user’, 
‘-net nic’) when starting the guest VM so this works too:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -cdrom /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso \
 -hda abnodevm.qcow2 \
 -m 2G \
 -boot d \
 -enable-kvm \
 -net user,hostfwd=tcp::10022-:22 \
 -net nic \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;create-a-qemu-image-with-serial-text-console-on-ttys1-com2&quot;&gt;Create a QEMU Image with Serial Text Console on ttyS1 (COM2)&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Why redirection to ttyS1 (COM2)?:&lt;/strong&gt;  The serial console on 
&lt;strong&gt;COM2&lt;/strong&gt; (&lt;strong&gt;ttyS1&lt;/strong&gt; in Unix) is required by IBM &lt;strong&gt;MM&lt;/strong&gt; (Management Module) 
&lt;strong&gt;CLI&lt;/strong&gt; on IBM BladeCenter HS21 Blade Servers.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Details:&lt;/em&gt;  &lt;br /&gt;
Out-of-band (OOB) management interface (1) (2) on IBM BladeCenter server 
architecture is called &lt;strong&gt;MM&lt;/strong&gt; (Management Module). 
On this particular generation of BladeCenter servers, in order 
for the MM to be able to support SOL (Serial Over LAN) you have to 
redirect the serial console to &lt;strong&gt;COM2&lt;/strong&gt; (&lt;strong&gt;ttyS1&lt;/strong&gt; in Unix).&lt;/p&gt;

&lt;p&gt;(1): Sometimes called lights-out management (LOM). &lt;br /&gt;
(2): IBM MM (Management Module) interacts with a hardware module 
(a remote management card) often called BMC (Baseboard Management 
Controller) installed inside the IBM BladeCenter server chassis
(that houses multiple blades). The BMC is configured with the 
network interface controller (NIC) to use the Remote Management 
Control Protocol (RMCP), a.k.a. IPMI (Intelligent Platform Management 
Interface).&lt;/p&gt;

&lt;p&gt;Download the CentOS 7 DVD ISO image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget https://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ file CentOS-7-x86_64-DVD-2009.iso
CentOS-7-x86_64-DVD-2009.iso: ISO 9660 CD-ROM filesystem data 
  (DOS/MBR boot sector) &apos;CentOS 7 x86_64&apos; (bootable)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget https://mirror.esecuredata.com/centos/7.9.2009/isos/x86_64/sha256sum.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Usually I fold and then indent long lines when showing them in scripts, 
code and CLI outputs.  In this case (for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sha256sum --check&lt;/code&gt;), 
I’m making an exception.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wc -l sha256sum.txt
4 sha256sum.txt

$ grep &apos;CentOS-7-x86_64-DVD-2009.iso&apos; sha256sum.txt
e33d7b1ea7a9e2f38c8f693215dd85254c3a4fe446f93f563279715b68d07987  CentOS-7-x86_64-DVD-2009.iso

$ grep &apos;CentOS-7-x86_64-DVD-2009.iso&apos; sha256sum.txt &amp;gt; /tmp/sha256sum.txt

$ mv /tmp/sha256sum.txt ~/sha256sum.txt

$ cat sha256sum.txt
e33d7b1ea7a9e2f38c8f693215dd85254c3a4fe446f93f563279715b68d07987  CentOS-7-x86_64-DVD-2009.iso

$ sha256sum --check sha256sum.txt
CentOS-7-x86_64-DVD-2009.iso: OK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir -p /mnt/{dvd,customdvd}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 mount \
 -t iso9660 \
 ~/CentOS-7-x86_64-DVD-2009.iso \
 /mnt/dvd/
mount: /mnt/dvd: WARNING: device write-protected, mounted read-only.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rsync -a /mnt/dvd/ /mnt/customdvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ du -chs /mnt/dvd/ /mnt/customdvd/
4.5G    /mnt/dvd/
4.5G    /mnt/customdvd
8.9G    total
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -alh /mnt/customdvd/isolinux/
total 60M
drwxr-xr-x 2 root root  198 Nov  2  2020 .
drwxr-xr-x 8 root root  254 Nov  3  2020 ..
-r--r--r-- 1 root root 2.0K Nov  3  2020 boot.cat
-rw-r--r-- 1 root root   84 Oct 26  2020 boot.msg
-rw-r--r-- 1 root root  281 Oct 26  2020 grub.conf
-rw-r--r-- 1 root root  53M Oct 26  2020 initrd.img
-rw-r--r-- 1 root root  24K Nov  3  2020 isolinux.bin
-rw-r--r-- 1 root root 3.0K Oct 26  2020 isolinux.cfg
-rw-r--r-- 1 root root 187K Nov  5  2016 memtest
-rw-r--r-- 1 root root  186 Sep 30  2015 splash.png
-r--r--r-- 1 root root 2.2K Nov  3  2020 TRANS.TBL
-rw-r--r-- 1 root root 150K Oct 30  2018 vesamenu.c32
-rwxr-xr-x 1 root root 6.5M Oct 19  2020 vmlinuz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Delete the line with ‘splash.lss’ from the ‘boot.msg’.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wc -l /mnt/customdvd/isolinux/boot.msg 
5 /mnt/customdvd/isolinux/boot.msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/isolinux/boot.msg

 
splash.lss

 -  Press the 01&amp;lt;ENTER&amp;gt;07 key to begin the installation process.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo sed -i.bkp &apos;/splash.lss/d&apos; /mnt/customdvd/isolinux/boot.msg 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
 --unified=0 \
 /mnt/dvd/isolinux/boot.msg \
 /mnt/customdvd/isolinux/boot.msg
--- /mnt/dvd/isolinux/boot.msg  2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/boot.msg    2022-03-12 22:45:03.473419287 -0700
@@ -2 +1,0 @@
-splash.lss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wc -l /mnt/customdvd/isolinux/boot.msg
4 /mnt/customdvd/isolinux/boot.msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /mnt/customdvd/isolinux/boot.msg

 

 -  Press the 01&amp;lt;ENTER&amp;gt;07 key to begin the installation process.

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -i /mnt/customdvd/isolinux/boot.msg.bkp
rm: remove regular file &apos;/mnt/customdvd/isolinux/boot.msg.bkp&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove &lt;em&gt;boot.cat&lt;/em&gt;. You’ll regenerate it in later steps.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo rm -i /mnt/customdvd/isolinux/boot.cat
rm: remove regular file &apos;/mnt/customdvd/isolinux/boot.cat&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vi /mnt/customdvd/isolinux/isolinux.cfg 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Usually I fold and then indent long lines when showing them in scripts, 
code and CLI outputs. In this case, I’m making an exception.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
 --unified=0 \
 /mnt/dvd/isolinux/isolinux.cfg \
 /mnt/customdvd/isolinux/isolinux.cfg
--- /mnt/dvd/isolinux/isolinux.cfg      2020-10-26 09:25:28.000000000 -0700
+++ /mnt/customdvd/isolinux/isolinux.cfg     2022-03-12 22:46:18.607074016 -0700
@@ -64 +64 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet console=tty1 console=ttyS1,19200
@@ -70 +70 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet console=tty1 console=ttyS1,19200
@@ -86 +86 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 xdriver=vesa nomodeset quiet console=tty1 console=ttyS1,19200
@@ -96 +96 @@
-  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet
+  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rescue quiet console=tty1 console=ttyS1,19200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As noted in the &lt;a href=&quot;#create-a-new-bootable-installation-dvd-iso-image&quot;&gt;previous step&lt;/a&gt;, for the CentOS 7 Installation DVD the label must stay the same.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ isoinfo -d -i ~/CentOS-7-x86_64-DVD-2009.iso | wc -l
29

$ isoinfo -d -i ~/CentOS-7-x86_64-DVD-2009.iso | grep &quot;Volume id&quot;
Volume id: CentOS 7 x86_64

$ isoinfo -d -i ~/CentOS-7-x86_64-DVD-2009.iso | grep Joliet
Joliet with UCS level 3 found

$ isoinfo -d -i ~/CentOS-7-x86_64-DVD-2009.iso | grep Rock
Rock Ridge signatures version 1 found

$ isoinfo -d -i ~/CentOS-7-x86_64-DVD-2009.iso | grep preparer
Data preparer id:

$ isoinfo -d -i ~/CentOS-7-x86_64-DVD-2009.iso | grep Torito
El Torito VD version 1 found, boot catalog is in sector 606
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blkid(8)&lt;/code&gt; also shows the label:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ blkid ~/CentOS-7-x86_64-DVD-2009.iso
/home/dusko/CentOS-7-x86_64-DVD-2009.iso: BLOCK_SIZE=&quot;2048&quot; 
  UUID=&quot;2020-11-04-11-36-43-00&quot; LABEL=&quot;CentOS 7 x86_64&quot; TYPE=&quot;iso9660&quot; 
  PTUUID=&quot;6b8b4567&quot; PTTYPE=&quot;dos&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Generate an ISO image of the customized DVD.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 mkisofs \
 -o /tmp/CentOS-7-x86_64-DVD-2009-CUSTOM.iso \
 -b isolinux/isolinux.bin \
 -J \
 -R \
 -l \
 -c isolinux/boot.cat \
 -no-emul-boot \
 -boot-load-size 4 \
 -boot-info-table \
 -eltorito-alt-boot \
 -e images/efiboot.img \
 -no-emul-boot \
 -graft-points \
 -input-charset utf-8 \
 -output-charset utf-8 \
 -V &quot;CentOS 7 x86_64&quot; \
 /mnt/customdvd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo chown dusko:dusko /tmp/CentOS-7-x86_64-DVD-2009-CUSTOM.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ implantisomd5 /tmp/CentOS-7-x86_64-DVD-2009-CUSTOM.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ checkisomd5 --verbose /tmp/CentOS-7-x86_64-DVD-2009-CUSTOM.iso
---- snip ----
The media check is complete, the result is: PASS.
It is OK to use this media.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a raw image of 20 GB in size. Using &lt;strong&gt;seek&lt;/strong&gt; option creates 
a sparse file, which saves space.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ dd if=/dev/null of=ttyS1disk4k.img bs=1M seek=20480
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh ttyS1disk4k.img
-rw-rw-r-- 1 dusko dusko 20G Mar 12 22:47 ttyS1disk4k.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The image doesn’t have a filesystem yet:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ blkid ttyS1disk4k.img
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE  &lt;br /&gt;
For serial on QEMU:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;You should use pseudo-terminals (-serial pty) instead of connecting to 
“real” char-devices (-chardev tty,…).&lt;/p&gt;

  &lt;p&gt;qemu displays the pty /dev/pts/xx which it actually uses.  You can now 
use this pty as a normal serial port from your host.&lt;/p&gt;

  &lt;p&gt;You can repeat this option to get more ptys connected to /dev/ttyS[0-*] 
on the guest (if you use ‘-serial stdio’, it is /dev/ttyS0 on the guest, 
the first pty is then /dev/ttyS1). &amp;lt;— Using ‘-serial stdio’ and then
another ‘-serial pty’ did &lt;strong&gt;not&lt;/strong&gt; work in my tests. 
When I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-serial stdio -serial pty&lt;/code&gt;, 
qemu complained with this error:&lt;/p&gt;

  &lt;p&gt;qemu-kvm: -serial stdio: cannot use stdio by multiple character devices&lt;br /&gt;
qemu-kvm: -serial stdio: could not connect serial device to character 
                         backend ‘stdio’&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Reference: &lt;br /&gt;
&lt;a href=&quot;https://alpha.frasesdemoda.com/categories-topics-unix.stackexchange.com/questions/78511/ttyo-ports-do-not-have-the-good-port-address-on-qemu-1-4-0-running-image-for-bea&quot;&gt;ttyO ports do not have the good port address on QEMU 1.4.0 running image for beagleboard-xm&lt;/a&gt;     &lt;br /&gt;
(Retrieved on Mar 12, 2022)&lt;/p&gt;

&lt;p&gt;Next step:  install the OS.&lt;/p&gt;

&lt;p&gt;Explanation for options in the next command:&lt;/p&gt;

&lt;p&gt;The ‘-drive format=raw,file=&amp;lt;image_filename&amp;gt;’ is for a raw image.&lt;br /&gt;
(With -hda &amp;lt;image_filename&amp;gt;, qemu reports the warning below.)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Image format was not specified for ‘image_filename’ and probing
guessed raw.  Automatically detecting the format is dangerous for
raw images, write operations on block 0 will be restricted.
Specify the ‘raw’ format explicitly to remove the restrictions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The ‘-global ide-hd.physical_block_size=4096’ is to set disk 
block size to 4K, which is the block size on compute nodes (on the 
machine for which you are preparing and doing this test).&lt;/p&gt;

&lt;p&gt;Specifying the ‘-serial pty ‘option &lt;strong&gt;twice&lt;/strong&gt; is needed because the 
first one is for ttyS0 (COM1) and the second one is for ttyS1 (COM2). 
Similar to the block size, the second serial device (ttyS1) is required 
by the server for which this test is performed.&lt;/p&gt;

&lt;p&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;qemu-kvm&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;-nographic &lt;br /&gt;
Normally, if QEMU is compiled with graphical window support, it
displays output such as guest graphics, guest console, and the
QEMU monitor in a window. With this option, you can totally
disable graphical output so that QEMU is a simple command line
application. The emulated serial port is redirected on the console
and muxed with the monitor (unless redirected elsewhere
explicitly). Therefore, you can still use QEMU to debug a Linux
kernel with a serial console.&lt;/p&gt;

  &lt;p&gt;Use C-a h for help on switching between the console and monitor.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;‘-cdrom’: Use file as CD-ROM image. &lt;br /&gt;
‘-m 2G’:  Set guest startup RAM size to 2 gigabytes.&lt;br /&gt;
‘-b d’:   Boot from CD-ROM.&lt;/p&gt;

&lt;p&gt;Note that default block size that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkfs.xfs&lt;/code&gt; uses is 4096 bytes (4k).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt; &lt;br /&gt;
Would there be any (major) differences if instead of leaving it to the OS 
installer to create it, you created the filesystem first, with, 
for example: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkfs.xfs /&amp;lt;image_name/&amp;gt;&lt;/code&gt;, in this case:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkfs.xfs ttyS1disk4k.img&lt;/code&gt;?&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -cdrom /tmp/CentOS-7-x86_64-DVD-2009-CUSTOM.iso \ 
 -drive format=raw,file=ttyS1disk4k.img \
 -global ide-hd.physical_block_size=4096 \
 -m 2G \
 -boot d \
 -enable-kvm \ 
 -serial pty \
 -serial pty \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/2 (label serial0)
char device redirected to /dev/pts/3 (label serial1)

(qemu)  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the QEMU Monitor’s output above, note where qemu
redirected two char devices. In this case:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/2&lt;/code&gt; and  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/3&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;NOTE: &lt;br /&gt;
To get help in the QEMU prompt (QEMU monitor), press  Ctrl-a h:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;C-a h    print this help
C-a x    exit emulator
C-a s    save disk data back to file (if -snapshot)
C-a t    toggle console timestamps
C-a b    send break (magic sysrq)
C-a c    switch between console and monitor
C-a C-a  sends C-a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open two new shell instances, and start minicom in both of them.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Why two shell and minicom instances?&lt;/strong&gt; &lt;br /&gt;
A:  To be sure you will not miss them:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Virtual Terminal (VT) login prompts, i.e. those on your VGA screen 
as exposed in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/tty1&lt;/code&gt; (and similar devices).&lt;/li&gt;
  &lt;li&gt;Serial port terminal (including &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/ttyS0&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/ttyS1&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;tty1&lt;/strong&gt; gets special treatment: if you boot into graphical mode, the 
display manager takes possession of this VT.  If you boot into multi-user 
(text) mode, a getty is started on it.&lt;/p&gt;

  &lt;p&gt;By default systemd will instantiate one serial-getty@.service on the 
main kernel console, if it is not a virtual terminal.  The kernel console 
is where the kernel outputs its own log messages and is usually configured 
on the kernel command line in the boot loader via an argument such as
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=ttyS0&lt;/code&gt;.  This logic ensures that when the user asks the kernel 
to redirect its output onto a certain serial terminal, he will automatically 
also get a login prompt on it as the boot completes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Reference: &lt;br /&gt;
&lt;a href=&quot;http://0pointer.de/blog/projects/serial-console.html&quot;&gt;systemd for Administrators, Part XVI&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 12, 2022)&lt;/p&gt;

&lt;p&gt;In the first new shell, start the first minicom.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first serial connection (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/2&lt;/code&gt;) is the kernel console.
As per quote above:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;By default systemd will instantiate one serial-getty@.service on the 
main kernel console, if it is not a virtual terminal.  The kernel console 
is where the kernel outputs its own log messages and is usually configured 
on the kernel command line in the boot loader via an argument such as
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=ttyS0&lt;/code&gt;.  This logic ensures that when the user asks the kernel 
to redirect its output onto a certain serial terminal, he will automatically 
also get a login prompt on it as the boot completes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For now (before making changes in the grub configuration), if you are
fast enough, you might briefly see CentOS Installer boot menu in the first 
serial console (/dev/pts/2):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)
   CentOS Linux (0-rescue-5003bb903e814f84ad84b479956f01d0) 7 (Core)




   Use the ^ and v keys to change the selection.
Press &apos;e&apos; to edit the selected item, or &apos;c&apos; for a command prompt.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, in this example you are more interested in the second serial 
console connections (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/3&lt;/code&gt;) because the CentOS 7 Linux 
Installer output will be displayed in there – In the second new shell, 
start the second minicom.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Welcome to minicom 2.7.1

OPTIONS: I18n
Compiled on Aug 13 2018, 16:41:28.
Port /dev/ttyS1

Press CTRL-A Z for help on special keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At the bottom of minicom’s screen:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CTRL-A Z for help | 19200 8N1 | NOR | Minicom 2.7.1 | VT102 | Offline | ttyS1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
You might need to press  Enter  to  refresh the screen in minicom.&lt;/p&gt;

&lt;p&gt;Start the OS install and finish installing CentOS.&lt;/p&gt;

&lt;p&gt;At the end of installation, the CentOS installer, Anaconda, 
displays the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]
      Installation complete.  Press return to quit

[anaconda] 1:main* 2:shell  3:log  4:storage-lo&amp;gt; Switch tab: Alt+Tab | Help: F1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Anaconda uses the &lt;strong&gt;tmux&lt;/strong&gt; terminal multiplexer to display and control 
several windows you can use in addition to the main interface.&lt;/p&gt;

&lt;p&gt;When you choose text mode installation, you start in virtual console 1 (tmux). 
The console running tmux has 5 available windows.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; The keyboard shortcuts are two-part: first press Ctrl+b, then 
release both keys, and press the number key for the window you want to use.&lt;/p&gt;

&lt;p&gt;Press Ctrl+b 2 to switch to interactive shell prompt with root 
privileges:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[anaconda root@localhost ~]# 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Power off the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[anaconda root@localhost ~]# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start the virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -drive format=raw,file=ttyS1disk4k.img \
 -global ide-hd.physical_block_size=4096 \
 -m 2G \
 -enable-kvm \
 -serial pty \
 -serial pty \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to the guest virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

guestvm login: root
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You now have the anaconda kickstart configuration file, which you can use 
as a sample or a reference.&lt;/p&gt;

&lt;p&gt;Usually I fold and then indent long lines when showing them in scripts, 
code and CLI outputs. In this case, I’m making an exception (for lines 
starting with ‘network  –bootproto’ and with ‘user –groups=wheel’).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /root/anaconda-ks.cfg                                   
#version=DEVEL
# System authorization information
auth --enableshadow --passalgo=sha512
# Use CDROM installation media
cdrom
# Use text mode install
text
# Run the Setup Agent on first boot
firstboot --enable
ignoredisk --only-use=sda
# Keyboard layouts
keyboard --vckeymap=us --xlayouts=&apos;&apos;
# System language
lang en_US.UTF-8

# Network information
network  --bootproto=static --device=ens3 --gateway=192.168.80.56 --ip=192.168.80.3 --nameserver=192.168.80.200,192.168.80.210 --netmask=255.255.255.0 --noipv6 --activate
network  --hostname=guestvm

# Root password
rootpw --iscrypted $6$SYPpA&amp;lt;string_of_random_characters&amp;gt;
# System services
services --enabled=&quot;chronyd&quot;
# Do not configure the X Window System
skipx
# System timezone
timezone America/Vancouver --isUtc
user --groups=wheel --name=dusko --password=$6$FgrE&amp;lt;string_of_random_characters&amp;gt; --iscrypted --gecos=&quot;dusko&quot;
# System bootloader configuration
bootloader --append=&quot; crashkernel=auto&quot; --location=mbr --boot-drive=sda
autopart --type=lvm
# Partition clearing information
clearpart --all --initlabel --drives=sda

%packages
@base
@core
@scientific
chrony
kexec-tools

%end

%addon com_redhat_kdump --enable --reserve-mb=&apos;auto&apos;

%end

%anaconda
pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty
pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok
pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty
%end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Some other configurations in the guest virtual machine:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/fstab 

#
# /etc/fstab
# Created by anaconda on Sun Mar 12 05:48:28 2022
#
# Accessible filesystems, by reference, are maintained under &apos;/dev/disk&apos;
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/centos-root /                       xfs   defaults    0 0
UUID=d6acae6c-9e23-4721-9180-722091f019d7 /boot xfs   defaults    0 0
/dev/mapper/centos-swap swap                    swap  defaults    0 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# df -hT
Filesystem              Type      Size  Used Avail Use% Mounted on
devtmpfs                devtmpfs  908M     0  908M   0% /dev
tmpfs                   tmpfs     919M     0  919M   0% /dev/shm
tmpfs                   tmpfs     919M  8.5M  911M   1% /run
tmpfs                   tmpfs     919M     0  919M   0% /sys/fs/cgroup
/dev/mapper/centos-root xfs        17G  1.5G   16G   9% /
/dev/sda1               xfs      1014M  153M  862M  16% /boot
tmpfs                   tmpfs     184M     0  184M   0% /run/user/0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that both serial devices, COM1 (in *nix: ttyS0) 
and COM2 (in *nix: ttyS1), are created in the guest VM:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# dmesg | grep tty 
[  0.000000] Command line: BOOT_IMAGE=/vmlinuz-3.10.0-1160.el7.x86_64 root=/d8
[  0.000000] Kernel command line: BOOT_IMAGE=/vmlinuz-3.10.0-1160.el7.x86_64 8
[  0.000000] console [ttyS1] enabled
[  0.808863] 00:04: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
[  0.832473] 00:05: ttyS1 at I/O 0x2f8 (irq = 3) is a 16550A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next step is to set up serial terminal in the guest OS.&lt;/p&gt;

&lt;h4 id=&quot;set-up-a-serial-terminal-and-console-in-centos-7rhel-7&quot;&gt;Set Up a Serial Terminal and Console (in CentOS 7/RHEL 7)&lt;/h4&gt;

&lt;p&gt;As per Red Hat (https://access.redhat.com/articles/7212):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;It is sometimes helpful to have a serial console for debugging purposes 
and a serial terminal for headless operation.  A serial console will 
send all console output to the serial port.  A serial terminal, if 
properly configured, also lets you log on to the system via the serial 
port as a remote terminal.  You can set up both or just one.&lt;/p&gt;

  &lt;h5 id=&quot;about-serial-console-kernel-option-configuration&quot;&gt;About Serial Console Kernel Option Configuration&lt;/h5&gt;

  &lt;p&gt;First, to get the kernel to output all console messages to the serial 
port you need to pass the &lt;strong&gt;console=ttyS0&lt;/strong&gt; parameter to the kernel at 
boot time.  This is usually done via the bootloader; we’ll be using 
GRUB in our examples.&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  The &lt;strong&gt;primary&lt;/strong&gt; console for system output will be the 
&lt;strong&gt;last&lt;/strong&gt; console listed in the kernel parameters. For example:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=tty0 console=ttyS0,115200&lt;/code&gt; 
In this example, the serial console is the primary and the VGA console 
tty0 is the secondary display.  This means messages from init scripts, 
boot messages and critical warnings will go to the serial console since 
it is the primary console,  If init script messages don’t need to be 
seen on the serial console, it should be made the secondary by swapping 
the order of the console parameters:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console=ttyS0,115200 console=tty0&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Continuing with the setup of the guest virtual machine: you need to 
configure the system to send the console output to the serial port 
&lt;strong&gt;ttyS1&lt;/strong&gt; at a baud rate of 19200, as well as to send the output to the 
regular console or “screen” &lt;strong&gt;tty1&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cp -i /etc/default/grub /tmp/grub.original.bkp 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /etc/default/grub
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff \
 --unified=0 \
 /tmp/grub.original.bkp \
 /etc/default/grub
--- /tmp/grub.original.bkp      2022-03-12 22:46:58.157447335 -0700
+++ /etc/default/grub   2022-03-12 22:48:01.959447335 -0700
@@ -5,3 +5,4 @@ 
-GRUB_TERMINAL=&quot;serial console&quot;
-GRUB_SERIAL_COMMAND=&quot;serial --unit=1 --speed=19200&quot;
-GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap console=ttyS1,19200&quot;
+GRUB_CMDLINE_LINUX_DEFAULT=&quot;console=tty1 console=ttyS1,19200&quot;                  
+GRUB_TERMINAL=&quot;console serial&quot;    
+GRUB_SERIAL_COMMAND=&quot;serial --speed=19200 --unit=1 --word=8 --parity=no --stop=1&quot;
+GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap console=tty1 console=ttyS1,19200&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The system that this test guest VM image is for is a BIOS-based server 
so the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub2-mkconfig&lt;/code&gt; command to update GRUB2 is BIOS-specific:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grub2-mkconfig -o /boot/grub2/grub.cfg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(On UEFI-based machines it would be:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
The &lt;strong&gt;main kernel console&lt;/strong&gt; is the one listed &lt;strong&gt;first&lt;/strong&gt; in
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/sys/class/tty/console/active&lt;/code&gt;, which is the &lt;em&gt;last&lt;/em&gt; one 
listed on the &lt;em&gt;kernel command line&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /sys/class/tty/console/active
ttyS1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(After reboot, the GRUB2 changes will take effect and&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/sys/class/tty/console/active&lt;/code&gt; will show: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tty1 ttyS1&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;Configure a serial getty with the needed parameters so that it starts on boot.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cp -i \
 /usr/lib/systemd/system/serial-getty@.service \
 /etc/systemd/system/serial-getty@ttyS1.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /etc/systemd/system/serial-getty@ttyS1.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff \
 --unified=0 \
 /usr/lib/systemd/system/serial-getty@.service \
 /etc/systemd/system/serial-getty@ttyS1.service
--- /usr/lib/systemd/system/serial-getty@.service    2020-10-01 10:08:50.0000
+++ /etc/systemd/system/serial-getty@ttyS1.service   2022-03-12 22:36:36.5400
@@ -23 +23 @@
-ExecStart=-/sbin/agetty --keep-baud 115200,38400,9600 %I $TERM
+ExecStart=-/sbin/agetty --keep-baud 115200,38400,19200,9600 %I $TERM
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a symlink.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ln -s \
 /etc/systemd/system/serial-getty@ttyS1.service \
 /etc/systemd/system/getty.target.wants/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reload the daemon and start the service.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl daemon-reload
# systemctl enable serial-getty@ttyS1.service
# systemctl start serial-getty@ttyS1.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This creates a unit file that is specific to serial port ttyS1 so that 
you can make specific changes to this port and this port only.&lt;/p&gt;

&lt;p&gt;Restart the guest virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you keep shells with &lt;strong&gt;minicom&lt;/strong&gt; connections running, the CentOS 
boot menu now appears in both shells: the one with minicom connected
to output of QEMU char device redirected to the first serial 
device /dev/pts/2 (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom --baudrate=19200 --ptty=/dev/pts/2&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)
   CentOS Linux (0-rescue-b8fcd7b7f02249dc9e6a3d2a443a3b92) 7 (Core)


   Use the ^ and v keys to change the selection.
   Press &apos;e&apos; to edit the selected item, or &apos;c&apos; for a command prompt.
The selected entry will be started automatically in 4s.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the other shell with 
minicom connected to output of QEMU char device redirected to the second 
serial device /dev/pts/3 (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom --baudrate=19200 --ptty=/dev/pts/3&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)
   CentOS Linux (0-rescue-b8fcd7b7f02249dc9e6a3d2a443a3b92) 7 (Core)


   Use the ^ and v keys to change the selection.
   Press &apos;e&apos; to edit the selected item, or &apos;c&apos; for a command prompt.
The selected entry will be started automatically in 4s.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After the selected boot menu entry starts, output is displayed only 
in the second separate shell (in this example: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom --baudrate=19200 --ptty=/dev/pts/3&lt;/code&gt;):&lt;/p&gt;

&lt;p&gt;Log in to the guest virtual machine.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

guestvm login: root 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that the serial getty service has been started 
and that it’s running.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-enabled serial-getty@ttyS1.service
enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-active serial-getty@ttyS1.service
active
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /sys/class/tty/console/active                          
tty1 ttyS1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you are done with exploring the guest VM, power it off.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# poweroff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After you have finished installing and setting up the OS in the guest, 
use the following to start the guest VM again:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -drive format=raw,file=ttyS1disk4k.img \
 -global ide-hd.physical_block_size=4096 \
 -m 2G \
 -enable-kvm \
 -serial pty \
 -serial pty \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output (which shows the QEMU monitor):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/2 (label serial0)
char device redirected to /dev/pts/3 (label serial1)

(qemu)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, from a separate shell instance, start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minicom&lt;/code&gt; and connect 
to the serial console that was configured for console redirection.
In this case it’s the second serial device, ttyS1, redirected by qemu 
and reported by the QEMU monitor as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/3&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above command for starting the guest VM can be simplified a bit 
(no need for ‘-global ide-hd.physical_block_size=4096’), 
as the filesystem has already been configured with block size of 4K). 
Also, the ‘-serial null’ disables COM1 (ttyS0), redirects console to 
serial on COM2 (ttyS1):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \ 
 -drive format=raw,file=ttyS1disk4k.img \
 -m 2G \
 -serial null \
 -serial pty \
 -nographic

QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/0 (label serial1)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, connect to the serial console reported by qemu as serial1, 
in this case reported by the QEMU monitor as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/pts/0&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ minicom --baudrate=19200 --ptty=/dev/pts/0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Yet another version of a qemu command for starting a QEMU VM image 
containing an OS configured to redirect output to second serial text 
console on &lt;strong&gt;ttyS1 (COM2)&lt;/strong&gt; -&amp;gt; Use &lt;em&gt;‘-serial null’&lt;/em&gt; to disable 
COM1 (ttyS0) and the QEMU monitor, and combine that with &lt;em&gt;‘mon:stdio’&lt;/em&gt; to 
redirect output on COM2 (ttyS1) to the QEMU monitor (a.k.a. QEMU console):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -drive format=raw,file=ttyS1disk4k.img \
 -m 2G \
 -serial null \
 -serial mon:stdio \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  CentOS Linux (3.10.0-1160.el7.x86_64) 7 (Core)
  CentOS Linux (0-rescue-5003bb903e814f84ad84b479956f01d0) 7 (Core)



  Use the ^ and v keys to change the selection.
Press &apos;e&apos; to edit the selected item, or &apos;c&apos; for a command prompt.   

---- snip ----

CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64

guestvm login: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;appendix&quot;&gt;APPENDIX&lt;/h3&gt;

&lt;h4 id=&quot;connect-serial-output-to-a-tcp-port-in-qemu-backend&quot;&gt;Connect Serial Output To a TCP Port in QEMU Backend&lt;/h4&gt;

&lt;p&gt;From:   &lt;a href=&quot;https://stackoverflow.com/questions/66214257/qemu-connecting-to-specific-guest-uart-device&quot;&gt;https://stackoverflow.com/questions/66214257/qemu-connecting-to-specific-guest-uart-device&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If you pass multiple -serial options to QEMU they will be interpreted 
as defining what you want to do for UARTs 0, 1, 2, etc. 
So for example “-serial stdio -serial tcp::4444,server” will send 
UART 0 to your terminal and connect UART 1 to a TCP server on port 
4444, which you can then connect to with netcat or similar utility.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here’s an example of starting QEMU with an image of an OS whose serial 
console is redirected to TCP port 4321:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -drive format=raw,file=ttyS1disk4k.img \
 -m 2G \
 -serial pty \
 -serial tcp::4321,server \
 -nographic

QEMU 4.2.0 monitor - type &apos;help&apos; for more information
(qemu) char device redirected to /dev/pts/0 (label serial0)
qemu-kvm: -serial tcp::4321,server: info: QEMU waiting for connection on: 
  disconnected:tcp:0.0.0.0:4321,server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, to connect with telnet:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ telnet 127.0.0.1 4321
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is &apos;^]&apos;.

guestvm login: root
Password: WillBeInClearText
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or, to connect with nc (netcat):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nc 127.0.0.1 4321

CentOS Linux 7 (Core)
Kernel 3.10.0-1160.el7.x86_64 on an x86_64


guestvm login: root
root
Password: WillBeInClearText
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;how-to-get-ssh-access-to-a-qemu-guest&quot;&gt;How to Get SSH Access to a QEMU Guest&lt;/h4&gt;

&lt;p&gt;Install CentOS 7 Linux VM in QEMU:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -cdrom /tmp/CentOS-7-x86_64-Minimal-2009-CUSTOM.iso \
 -hda abnodevm.qcow2 \
 -m 2G \
 -boot d \
 -enable-kvm \
 -device e1000,netdev=net0 -netdev user,id=net0,hostfwd=tcp::5555-:22 \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
This worked when I configured DHCP in the guest VM.&lt;/p&gt;

&lt;p&gt;Start the VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ /usr/libexec/qemu-kvm \
 -hda abnodevm.qcow2 \
 -m 2G \
 -enable-kvm \
 -device e1000,netdev=net0 -netdev user,id=net0,hostfwd=tcp::5555-:22 \
 -nographic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From another shell instance in the host, connect to the guest VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh localhost -p 5555
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;h3 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h3&gt;

&lt;p&gt;[¹] Linux(R) Kernel Primer, The: A Top-Down Approach for x86
and PowerPC Architectures by Claudia Salzberg Rodriguez, Gordon Fischer,
Steven Smolski - Pearson Publishing - September 2005:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A computer console is a device where the kernel (and other parts of 
a system) output messages.  It also has login capabilities.
Depending on the system, the console can be on the monitor or through
a serial port.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;word-soup&quot;&gt;Word Soup&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;CentOS 7/RHEL 7 installation through serial console, CentOS Installation 
without VGA Console, How to remote install CentOS/RHEL 7 using a rescue 
image like GRML, Remote Installation of the FreeBSD Operating System 
Without a Remote Console, SOL (Serial Over LAN), 
ipmitool - (IP Management Interface) tool, BMC - a.k.a an IPMI controller&lt;/p&gt;

  &lt;p&gt;IBM MM (Management Module), remote management, 
KVM (Keyboard - Video - Mouse), Virtualization, QEMU emulator, 
KVM (Kernel-based Virtual Machine)&lt;/p&gt;

  &lt;p&gt;qemu&amp;gt; prompt&lt;/p&gt;

  &lt;p&gt;SYSLINUX / ISOLINUX / PXELINUX, boot, GRUB (Legacy GRUB), GRUB 2 
iPXE
Kickstart
dd
guestfish&lt;/p&gt;

  &lt;p&gt;xCAT&lt;/p&gt;

  &lt;p&gt;bootloader chainloading
headless VNC
Ultimate Deployment Applicance&lt;/p&gt;

  &lt;p&gt;dmesg
tty tty0 ttyS0 tty1 ttyS1&lt;/p&gt;

&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;REFERENCES:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Retrieved on Mar 12, 2022:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.privex.io/articles/using-serial-sol-config/&quot;&gt;Using a Serial Console with Linux, GRUB, SysLinux + Understanding Serial Configuration&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/164289/how-to-remote-install-centos-rhel-7-using-a-rescue-image-like-grml&quot;&gt;How to remote install CentOS/RHEL 7 using a rescue image like GRML?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Out-of-band_management&quot;&gt;Out-of-band management&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/IBM_BladeCenter&quot;&gt;IBM BladeCenter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/IBM_Remote_Supervisor_Adapter&quot;&gt;IBM Remote Supervisor Adapter or Integrated Management Module (IMM; IBM’s out-of-band management implementation)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Baseboard_Management_Controller&quot;&gt;Baseboard Management Controller, a microcontroller on computer motherboards&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface&quot;&gt;Intelligent Platform Management Interface (IPMI)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;My comment:&lt;/strong&gt; HP iLO would be easier but I’m restricted by my environment 
with (a legacy) IBM MM (Management Module). For example, the website in 
the link below shows that with the version of iLO from that website it’s 
possible to mount CD-ROM to http; iLO shows which serial port is active 
(COM1, COM2,…), etc. &lt;br /&gt;
&lt;a href=&quot;http://stivesso.blogspot.com/2015/09/hp-ilo-vsp-centos-7rhel-7installation.html&quot;&gt;HP ILO VSP: CentOS 7/RHEL 7 Installation through Serial Console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mirror.centos.org/centos/7.9.2009/os/x86_64/images/pxeboot/&quot;&gt;CentOS Mirror - PXE Installer BOOT Images - initrd.img and vmlinuz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://serverfault.com/questions/872238/qemu-and-serial-ports-on-the-guest-os&quot;&gt;QEMU and serial ports on the guest OS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/52801787/qemu-doesnt-create-a-second-serial-port-ubuntu-x86-64-guest-and-host&quot;&gt;QEMU doesn’t create a second serial port (Ubuntu x86-64 guest and host)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/78511/ttyo-ports-do-not-have-the-good-port-address-on-qemu-1-4-0-running-image-for-bea&quot;&gt;ttyO ports do not have the good port address on QEMU 1.4.0 running image for beagleboard-xm&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The problem is on the host side:&lt;/p&gt;

  &lt;p&gt;You should use Pseudo-terminals (-serial pty) instead of 
connecting to “real” char-devices (-chardev tty,…).&lt;/p&gt;

  &lt;p&gt;qemu displays the pty /dev/pts/xx which it actually uses. You can now use 
this pty as a normal serial port from your host.&lt;/p&gt;

  &lt;p&gt;You can repeat this option to get more ptys connected to /dev/ttyS[0-*] on 
the guest (if you use -serial stdio, it is /dev/ttyS0 on the guest, the 
first pty is then /dev/ttyS1).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;http://wandin.net/dotclear/index.php?post/2010/03/16/CentOS-Installation-without-VGA-Console&quot;&gt;CentOS Installation without VGA Console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bladecenter.lenovofiles.com/help/topic/com.lenovo.bladecenter.advmgtmod.doc/kp1bd_pdf.pdf&quot;&gt;IBM BladeCenter - Serial Over LAN (SOL) Setup Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bauermann.wordpress.com/2013/09/04/connecting-qemukvm-virtual-machines-via-serial-port/&quot;&gt;Connecting QEMU/KVM virtual machines via serial port&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.centos.org/TipsAndTricks/VncHeadlessInstall&quot;&gt;Headless VNC Install Disk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/vkanevska/fd624f708cde7d7c172a576b10bc6966&quot;&gt;centos_bstick.sh&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/QEMU&quot;&gt;QEMU - Wikipedia&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/49716931/how-to-run-qemu-with-nographic-and-monitor-but-still-be-able-to-send-ctrlc-to&quot;&gt;How to run qemu with -nographic and -monitor but still be able to send Ctrl+C to the guest and quit with Ctrl+A X?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/167165/how-to-pass-ctrl-c-to-the-guest-when-running-qemu-with-nographic/436321#436321&quot;&gt;How to pass Ctrl-C to the guest when running qemu with -nographic?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.centos.org/en-US/centos/install-guide/Consoles_Logs_During_Install_x86/&quot;&gt;Installation Guide - Installing Using Anaconda - Consoles and Logging During the Installation – CentOS Documentation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/installation_guide/sect-consoles-logs-during-installation-x86&quot;&gt;Red Hat Product Documentation - Red Hat Enterprise Linux - 7 - Installation Guide - Consoles and Logging During the Installation&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://web.archive.org/web/20171014140837/http://nairobi-embedded.org/making_a_qemu_disk_image_bootable_with_grub.html&quot;&gt;Making a QEMU disk image bootable with GRUB&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://centosfaq.org/centos/centos7-serial-console-and-flow-control/&quot;&gt;CentOS7 – Serial Console And Flow Control&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.uni-koeln.de/~pbogusze/posts/QEMU_serial_console.html&quot;&gt;QEMU serial console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hintshop.ludvig.co.nz/show/centos-text-cd/&quot;&gt;Creating a CentOS text-only CD / DVD&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.facebook.com/notes/linux-only/make-a-custom-centos-7-or-rhel-7-cd-with-kicktart-file/1142994982390559&quot;&gt;Make a custom CentOS-7 or RHEL-7 CD With kicktart File&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/solutions/655603&quot;&gt;During install of custom RHEL 6 ISO, mediacheck errors with “Unable to find the checksum in the image. This probably means the disc was created without adding the checksum.”&lt;/a&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;[Working with ISO Images Red Hat Enterprise Linux 7&lt;/td&gt;
      &lt;td&gt;Red Hat Customer Portal](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/anaconda_customization_guide/sect-iso-images)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.qemu.org/Documentation/Networking#How_to_get_SSH_access_to_a_guest&quot;&gt;How to get SSH access to a guest - Network HOWTOs - QEMU Documentation - Networking&lt;/a&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;[Archived&lt;/td&gt;
      &lt;td&gt;Using QEMU for cross-platform development](https://developer.ibm.com/tutorials/l-qemu-development/)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a href=&quot;https://libera.irclog.whitequark.org/osdev/2021-07-14&quot;&gt;#osdev - Operating System Development - IRC&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/articles/7212&quot;&gt;How does one set up a serial terminal and/or console in Red Hat Enterprise Linux?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://0pointer.de/blog/projects/serial-console.html&quot;&gt;systemd for Administrators, Part XVI&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://peterpap.net/index.php/Sample_Kickstart_Configuration_file&quot;&gt;Sample Kickstart Configuration file&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sat, 12 Mar 2022 08:01:47 -0800</pubDate>
        <link>http://localhost:4000/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/virtualization/rs232serial/cli/terminal/shell/console/sysadmin/server/hardware/2022/03/12/centos-rhel-dvd-iso-customization-testing-with-qemu.html</guid>
        
        
        <category>howto</category>
        
        <category>virtualization</category>
        
        <category>rs232serial</category>
        
        <category>cli</category>
        
        <category>terminal</category>
        
        <category>shell</category>
        
        <category>console</category>
        
        <category>sysadmin</category>
        
        <category>server</category>
        
        <category>hardware</category>
        
      </item>
    
      <item>
        <title>How to Connect to Xorg in Linux Guest from Bhyve</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    512M    -    No         Stopped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm start debianvm1
Starting debianvm1
  * found guest in /vm/debianvm1
  * booting...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm console debianvm1


  Booting `Debian GNU/Linux&apos;

Loading Linux 5.10.0-13-amd64 ...
Loading initial ramdisk ...

---- snip ----
Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login: dusko
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In Linux guest:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo apt install tigervnc-standalone-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ vncserver -depth 32 -geometry 1680x1200
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;You will require a password to access your desktops.

Password:
Verify:
Would you like to enter a view-only password (y/n)? n

New Xtigervnc server &apos;debianvm1.chem.ubc.ca:1 (dusko)&apos; on port 5901 
  for display :1.
Use xtigervncviewer -SecurityTypes VncAuth -passwd /home/dusko/.vnc/passwd :1 
  to connect to the VNC server.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -tulpn | grep vnc
tcp   LISTEN 0  5  127.0.0.1:5901   0.0.0.0:*  users:((&quot;Xtigervnc&quot;,pid=1441,fd=9))
tcp   LISTEN 0  5      [::1]:5901      [::]:*  users:((&quot;Xtigervnc&quot;,pid=1441,fd=10))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip -4 address | grep inet
  inet 127.0.0.1/8 scope host lo
  inet 123.12.23.43/24 brd 123.12.23.255 scope global dynamic noprefixroute enp0s5 
  inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exit
logout
Connection to 123.12.23.43 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the FreeBSD host:&lt;/p&gt;

&lt;p&gt;Make sure that you have a VNC client. 
If not, install one. 
For example, you can install tigervnc-viewer.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install tigervnc-viewer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Forward a local port to the port used by VNC server in bhyve guest VM. 
In this example:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Local port: as the first 1024 ports are restricted to the root user only, and this example is for a non-root user, you can use any port above 1024, e.g. 9876&lt;/li&gt;
  &lt;li&gt;VNC server port in bhyve guest VM: 5901&lt;/li&gt;
  &lt;li&gt;Bhyve guest VM’s IP address: 123.12.23.43&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh dusko@123.12.23.43 -L 9876:127.0.0.1:5901
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Launch a separate shell instance and from there start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vncviewer&lt;/code&gt;, 
specifying the port you forwarded.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ vncviewer 127.0.0.1:9876
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Reference: &lt;br /&gt;
&lt;a href=&quot;https://forums.freebsd.org/threads/bhyve-how-to-configure-xorg-in-linux-guest.82231/&quot;&gt;Bhyve - how to configure Xorg in Linux guest - FreeBSD Forums&lt;/a&gt; &lt;br /&gt;
(Thread started on Sep 28, 2021)  &lt;br /&gt;
(Retrieved on Mar 9, 2022)&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Wed, 09 Mar 2022 18:13:27 -0800</pubDate>
        <link>http://localhost:4000/howto/bhyve/virtualization/xorg/x11/freebsd/2022/03/09/bhyve-connect-to-xorg-linux-guest.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/bhyve/virtualization/xorg/x11/freebsd/2022/03/09/bhyve-connect-to-xorg-linux-guest.html</guid>
        
        
        <category>howto</category>
        
        <category>bhyve</category>
        
        <category>virtualization</category>
        
        <category>xorg</category>
        
        <category>x11</category>
        
        <category>freebsd</category>
        
      </item>
    
      <item>
        <title>Setting Up GitHub Pages Website with Jekyll</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;p&gt;Steps:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Install Ruby and Jekyll (including rubygem-bundler)&lt;/li&gt;
  &lt;li&gt;Create or Clone your GitHub Jekyll repository&lt;/li&gt;
  &lt;li&gt;cd into the cloned repository
    &lt;ul&gt;
      &lt;li&gt;Run your local Jekyll server:&lt;br /&gt;
 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec jekyll serve&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Open your local site in a Web browser:
  http://localhost:4000&lt;/li&gt;
  &lt;li&gt;To stop the local Jekyll server:&lt;br /&gt;
  press &lt;strong&gt;ctrl-c&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install ruby rubygem-jekyll rubygem-bundler
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ git clone https://github.com/duskopijetlovic/duskopijetlovic.github.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd ~/duskopijetlovic.github.io/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bundle exec jekyll serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open your local site in a Web browser:
     &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:4000&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;To stop the local Jekyll server:
     press &lt;strong&gt;ctrl-c&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;add-custom-domain-in-github-pages&quot;&gt;Add Custom Domain in GitHub Pages&lt;/h3&gt;

&lt;p&gt;Add www.duskopijetlovic.com in the repo’s Settings:  &lt;br /&gt;
Go to the project ‘duskopijetlovic/duskopijetlovic.github.io’: &lt;br /&gt;
Pages &amp;gt; Custom domain:  www.duskopijetlovic.com  &lt;br /&gt;
Click ‘Save’&lt;/p&gt;

&lt;p&gt;Wait a couple of minutes for DNS check to complete.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;pushing-updates-to-github-pages&quot;&gt;Pushing Updates to GitHub Pages&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd ~/duskopijetlovic.github.io/
% git status
% git config --list
% git add .
% git commit -a
% git push
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;cloning-the-website-and-then-pushing-updates-to-github-pages&quot;&gt;Cloning the Website and then Pushing Updates to GitHub Pages&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd
% pwd
/usr/home/dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% git clone https://github.com/duskopijetlovic/duskopijetlovic.github.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd ~/duskopijetlovic.github.io/
% git status
% git config --list
% git add .
% git commit -a
% git push
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;All references below retrieved on Mar 7, 2022.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dev.to/azukacchi/setting-up-github-pages-site-with-jekyll-tutorial-1l60&quot;&gt;Setting Up Github Pages site with Jekyll Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/azukacchi/azukacchi.github.io&quot;&gt;Setting Up Github Pages site with Jekyll Tutorial for Absolute Beginner&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/kbroman/simple_site&quot;&gt;Minimal tutorial on making a simple website with GitHub Pages&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://kbroman.org/simple_site/&quot;&gt;Simple site - Easy websites with GitHub Pages&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/6317980/you-have-already-activated-x-but-your-gemfile-requires-y&quot;&gt;You have already activated X, but your Gemfile requires Y&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/plusjade/jekyll-bootstrap&quot;&gt;Jekyll-Bootstrap – The quickest way to start and publish your Jekyll powered blog. 100% compatible with GitHub pages&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/tutorials/using-jekyll-with-bundler/&quot;&gt;Using Jekyll with Bundler&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/docs/themes/&quot;&gt;Jekyll Themes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://rubygems.org/search?utf8=%E2%9C%93&amp;amp;query=jekyll-theme&quot;&gt;Search for Jekyll Themes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jekyllrb.com/docs/step-by-step/10-deployment/&quot;&gt;Step by Step Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/barryclark/jekyll-now&quot;&gt;Jekyll-Now – Build a Jekyll blog in minutes, without touching the command line&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.jekyllnow.com/Markdown-Style-Guide/&quot;&gt;Markdown Style Guide - Jekyll Now&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pages.github.com/versions/&quot;&gt;GitHub Pages - Dependency versions&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Mon, 07 Mar 2022 21:01:12 -0800</pubDate>
        <link>http://localhost:4000/howto/tutorial/ruby/git/github/2022/03/07/setting-up-github-pages-with-jekyll.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/tutorial/ruby/git/github/2022/03/07/setting-up-github-pages-with-jekyll.html</guid>
        
        
        <category>howto</category>
        
        <category>tutorial</category>
        
        <category>ruby</category>
        
        <category>git</category>
        
        <category>github</category>
        
      </item>
    
      <item>
        <title>Writing Documentation and Creating Diagrams with LuaLaTeX and Inkscape</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;br /&gt;
Ghostscript version:  GPL Ghostscript 9.52 (2020-03-19)  &lt;br /&gt;
Inkscape version: 1.1 &lt;br /&gt;
xv version: 3.10a&lt;br /&gt;
zathura version: 0.4.5 (girara 0.3.6, runtime: 0.3.6)&lt;br /&gt;
zathura plugin versions: cb (0.1.8), ps (0.2.6), djvu (0.2.9), pdf-poppler (0.3.0), pdf-mupdf (0.3.5)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Assumption&lt;/strong&gt;: previously installed Ghostscript, Inkscape, ImageMagick, xv, zathura.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install inkscape
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% inkscape --version
Inkscape 1.1 (c68e22c387, 2021-05-23)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh datacentrelayout.svg
-rw-r--r--  1 dusko  dusko   356K Apr  1  2021 datacentrelayout.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file datacentrelayout.svg
datacentrelayout.svg: SVG Scalable Vector Graphics image
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l datacentrelayout.svg
    7970 datacentrelayout.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% head datacentrelayout.svg
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;
&amp;lt;svg
   xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;
   xmlns:cc=&quot;http://creativecommons.org/ns#&quot;
   xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;
   xmlns:svg=&quot;http://www.w3.org/2000/svg&quot;
   xmlns=&quot;http://www.w3.org/2000/svg&quot;
   xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
   xmlns:sodipodi=&quot;http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd&quot;
   xmlns:inkscape=&quot;http://www.inkscape.org/namespaces/inkscape&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% inkscape datacentrelayout.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In &lt;strong&gt;Inkscape&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Edit 

Save As &amp;gt; Inkscape SVG (*.svg)  
Save As &amp;gt; Plain SVG (*.svg)  
Save As &amp;gt; Encapsulated PostScript (*.eps)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;generate-an-svg-or-a-png-with-graphviz-from-kroki-cli&quot;&gt;Generate an SVG or a PNG with Graphviz from Kroki-CLI&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.dot
digraph G {
  Hello-&amp;gt;World
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./kroki convert hello.dot --type dot 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file hello.svg
hello.svg: SVG Scalable Vector Graphics image
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% inkscape hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./kroki convert hello.dot --type dot --format png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;convert-an-svg-image-svg-file-to-ps-or-eps&quot;&gt;Convert an SVG Image (SVG File) to PS or EPS&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% rsvg-convert --format ps hello.svg &amp;gt; hello.ps
% zathura --fork hello.ps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% rsvg-convert --format eps hello.svg &amp;gt; hello.eps
% zathura --fork hello.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;convert-png-to-svg&quot;&gt;Convert PNG to SVG&lt;/h3&gt;

&lt;h4 id=&quot;convert-png-to-pnm-first&quot;&gt;Convert PNG to PNM First&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% anytopnm server_blades.png &amp;gt; server_blades.pnm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;convert-pnm-to-svg&quot;&gt;Convert PNM to SVG&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pamtosvg server_blades.pnm &amp;gt; server_blades.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;getting-information-about-images&quot;&gt;Getting Information About Images&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;br /&gt;
PDF (and PostScript) &lt;strong&gt;units&lt;/strong&gt; are 1/72 inch so 72 = 1 inch, 144 = 2 inches. 
You need to shift the origin of the page down and left, which is why the 
values for PageOffset are negative.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DOWN  = -
LEFT  = -
UP    = +
RIGHT = +
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt; &lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/59101374/ghostscript-crop-certain-area&quot;&gt;Ghostscript : Crop Certain Area?&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;using--dsafer--dbatch--dnopause-trio-in-ghostscript&quot;&gt;Using -dSAFER -dBATCH -dNOPAUSE Trio in Ghostscript&lt;/h4&gt;

&lt;p&gt;It is conventional to call Ghostscript with the ‘-dSAFER -dBATCH -dNOPAUSE’ 
trio of options when rasterizing to a file.  These suppress interactive 
prompts and enable some security checks on the file to be run. 
Please see the &lt;a href=&quot;https://ghostscript.com/doc/current/Use.htm&quot;&gt;Use documentation&lt;/a&gt; 
for a complete description.&lt;/p&gt;

&lt;p&gt;Explanation:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The -c parameter allows you to add PostScript code snippets which 
will be executed when Ghostscript processes the input file.  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -dSAFER -dNOPAUSE -dBATCH -sDEVICE=bbox firewall.eps
%%BoundingBox: 368 291 383 325
%%HiResBoundingBox: 368.564333 291.923991 382.598426 324.089990
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can use the &lt;a href=&quot;https://ghostscript.com/doc/current/Use.htm#Quiet&quot;&gt;&lt;strong&gt;-q&lt;/strong&gt;&lt;/a&gt;
switch to prevent Ghostscript from writing messages 
to standard output which become mixed with the intended output stream.&lt;/p&gt;

&lt;p&gt;Also, the &lt;strong&gt;-o&lt;/strong&gt; option determines output path+filename (and saves usage 
of -dBATCH -dNOPAUSE).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o -dSAFER -sDEVICE=bbox firewall.eps
%%BoundingBox: 368 291 383 325
%%HiResBoundingBox: 368.564333 291.923991 382.598426 324.089990
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;getting-image-information-with-imagemagicks-identify&quot;&gt;Getting Image Information with ImageMagick’s identify&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% identify firewall.eps
firewall.eps[0] EPT 15x33 15x33+0+0 16-bit ColorSeparation CMYK 2079B 0.000u 0:00.001
firewall.eps[1] TIFF 15x34 15x34+0+0 8-bit sRGB 256c 2200B 0.000u 0:00.001
identify: Invalid TIFF directory; tags are not sorted in ascending order. 
  `TIFFReadDirectoryCheckOrder&apos; @ warning/tiff.c/TIFFWarnings/959.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE that identify(1) reports the relative dimensions - as opposed to 
Ghostscript, which reports the image size with dimensions within the page.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Width  = 383 - 368 = 15  
Height = 325 - 291 = 34
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE BoundingBox:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% head firewall.eps
����,&amp;gt;J&amp;gt;��%!PS-Adobe-3.0 EPSF-3.0
%%Creator: Adobe Illustrator(R) 8.0
%%AI8_CreatorVersion: 8.0.1
%%For: (Gary V Stewart) (Cisco Systems Inc)
%%Title: (Firewall.eps)
%%CreationDate: (7/11/2000) (10:17 AM)
%%BoundingBox: 367 291 384 325
%%HiResBoundingBox: 367.998 291.4106 383.1011 324.5298
%%DocumentProcessColors: Black
%%DocumentSuppliedResources: procset Adobe_level2_AI5 1.2 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep Box firewall.eps
Binary file firewall.eps matches
 
% wc -l firewall.eps
    3788 firewall.eps
 
% strings firewall.eps | wc -l
    3229
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% strings firewall.eps | grep Box
%%BoundingBox: 367 291 384 325
%%HiResBoundingBox: 367.998 291.4106 383.1011 324.5298
%AI3_TemplateBox: 306 396 306 396
%AI3_TileBox: 0 0 592 744
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can extract (crop) the image from the page:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o cropped.eps \
 -dEPSCrop \
 -sDEVICE=eps2write \
 -f firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then Ghostscript reports the relative image size:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o -dSAFER -sDEVICE=bbox cropped.eps
%%BoundingBox: 0 0 15 33
%%HiResBoundingBox: 0.558000 0.522000 14.600390 32.669999
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want an EPS (PDF) viewer to display the cropped image in actual size:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o scaled.eps \
 -dEPSCrop \
 -sDEVICE=eps2write \
 -c &quot;&amp;lt;&amp;lt;/Install {1 1 scale}&amp;gt;&amp;gt; setpagedevice&quot; \
 -f firewall.eps 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;getting-boundingbox-information-with-ghostscript&quot;&gt;Getting BoundingBox Information with Ghostscript&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o -dSAFER -sDEVICE=bbox scaled.eps 
%%BoundingBox: 0 0 15 33
%%HiResBoundingBox: 0.558000 0.522000 14.600390 32.669999
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE that you often can get the BoundingBox information with ImageMagick’s identify:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% identify scaled.eps
scaled.eps EPS 15x33 15x33+0+0 16-bit sRGB 3288B 0.000u 0:00.000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep Box scaled.eps 
%%BoundingBox: 0 0 15 33
%%HiResBoundingBox: 0.00 0.00 15.00 33.00
/MediaBox get aload pop
/FontBBox 1 index/FontBBox get def
dup/BBox get aload pop exch 3 index sub exch 2 index sub rectclip
&amp;lt;&amp;lt;/Type/Page/MediaBox [0 0 15.1 33.12]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/39652178/how-to-resize-an-eps-file-using-ghostscript&quot;&gt;How to resize an .eps file using ghostscript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;resizing-images-with-ghostscript-gs&quot;&gt;Resizing Images with Ghostscript (gs)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
From Rescaling postscript figures&lt;br /&gt;
&lt;a href=&quot;http://www.verycomputer.com/18_696ed9f0514c5233_1.htm#p7&quot;&gt;http://www.verycomputer.com/18_696ed9f0514c5233_1.htm#p7&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Sorry to be so negative but I waste a lot of time having
to deal with seriously broken PS figures. Most of these
are the direct result of people thinking it is a good
idea to rotate or rescale their figures using ImageMagick,
xv, gimp, or some other program that works internally with
raster images. Please don’t do it!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh ~/Downloads/images/Cisco-Icons/forunzip/firewall.eps 
-rw-r--r--  1 dusko  dusko    82K Jul 11  2000 /home/dusko/Downloads/images/Cisco-Icons/forunzip/firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i ~/Downloads/images/Cisco-Icons/forunzip/firewall.eps /tmp/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With &lt;strong&gt;Ghostscript&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -dSAFER -dNOPAUSE -dBATCH -sDEVICE=bbox firewall.eps
%%BoundingBox: 368 291 383 325
%%HiResBoundingBox: 368.564333 291.923991 382.598426 324.089990
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With &lt;strong&gt;ImageMagick&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% identify firewall.eps
firewall.eps[0] EPT 15x33 15x33+0+0 16-bit ColorSeparation CMYK 2079B 0.000u 0:00.001
firewall.eps[1] TIFF 15x34 15x34+0+0 8-bit sRGB 256c 2200B 0.000u 0:00.001
identify: Invalid TIFF directory; tags are not sorted in ascending order. 
  `TIFFReadDirectoryCheckOrder&apos; @ warning/tiff.c/TIFFWarnings/959.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;crop--clip--aka-resize-page-to-size-of-the-image&quot;&gt;Crop / Clip / a.k.a. Resize Page to Size of the Image&lt;/h2&gt;

&lt;p&gt;Very often this will work.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o scaled.eps \
 -dEPSCrop \ 
 -sDEVICE=eps2write \
 -c &quot;&amp;lt;&amp;lt;/Install {1 1 scale}&amp;gt;&amp;gt; setpagedevice&quot; \
 -f firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -dSAFER -dNOPAUSE -dBATCH -sDEVICE=bbox scaled.eps 
%%BoundingBox: 0 0 15 33
%%HiResBoundingBox: 0.558000 0.522000 14.600390 32.669999
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% identify scaled.eps
scaled.eps EPS 15x33 15x33+0+0 16-bit sRGB 3288B 0.000u 0:00.000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To resize (e.g.: 70%) as opposed to the actual size ({1 1 scale}):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o scaled.eps -dEPSCrop -sDEVICE=eps2write -c &quot;&amp;lt;&amp;lt;/Install {0.70 0.70 scale}&amp;gt;&amp;gt; setpagedevice&quot; -f firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -dSAFER -dNOPAUSE -dBATCH -sDEVICE=bbox scaled.eps 
%%BoundingBox: 0 0 11 23
%%HiResBoundingBox: 0.393820 0.360000 10.224000 22.877999
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;padding-images-with-ghostscript-and-inkscape&quot;&gt;Padding Images with Ghostscript and Inkscape&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o padded.eps \
 -sDEVICE=eps2write \
 -c &quot;&amp;lt;&amp;lt;/PageOffset [0 -1]&amp;gt;&amp;gt; setpagedevice&quot; \
 -f gigabit_switch_router.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/35050233/ghostscript-and-page-margin&quot;&gt;Ghostscript and page margin&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;OR - if needed:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;For example, to add a label at the bottom of an image:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o -dSAFER -sDEVICE=bbox firewall.eps
%%BoundingBox: 368 291 383 325
%%HiResBoundingBox: 368.564333 291.923991 382.598426 324.089990

% identify firewall.eps
firewall.eps[0] EPT 15x33 15x33+0+0 16-bit ColorSeparation CMYK 2079B 0.000u 0:00.001
firewall.eps[1] TIFF 15x34 15x34+0+0 8-bit sRGB 256c 2200B 0.000u 0:00.001
identify: Invalid TIFF directory; tags are not sorted in ascending order. 
  `TIFFReadDirectoryCheckOrder&apos; @ warning/tiff.c/TIFFWarnings/959.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n Box firewall.eps
Binary file firewall.eps matches

% strings firewall.eps | wc -l
    3229

% strings firewall.eps | grep -n Box
7:%%BoundingBox: 367 291 384 325
8:%%HiResBoundingBox: 367.998 291.4106 383.1011 324.5298
24:%AI3_TemplateBox: 306 396 306 396
25:%AI3_TileBox: 0 0 592 744
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o scaled.eps \
 -dEPSCrop \
 -sDEVICE=eps2write \
 -c &quot;&amp;lt;&amp;lt;/Install {1 1 scale}&amp;gt;&amp;gt; setpagedevice&quot; \
 -f firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n Box scaled.eps
3:%%BoundingBox: 0 0 15 33
4:%%HiResBoundingBox: 0.00 0.00 15.00 33.00
717:/MediaBox get aload pop
1456:/FontBBox 1 index/FontBBox get def
3883:dup/BBox get aload pop exch 3 index sub exch 2 index sub rectclip
8320:&amp;lt;&amp;lt;/Type/Page/MediaBox [0 0 15.1 33.12]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i padded.eps padded.eps.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add 10 points in height:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vi padded.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 padded.eps.bak padded.eps
--- padded.eps.bak      2022-03-27 15:50:42.472025000 -0700
+++ padded.eps  2022-03-27 15:56:13.098029000 -0700
@@ -3,2 +3 @@
-%%BoundingBox: 20 0 35 33
-%%HiResBoundingBox: 20.00 0.00 35.00 33.00
+%%BoundingBox: 20 0 35 43
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Clean with &lt;strong&gt;Inkscape&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% inkscape padded.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;In the &apos;Page settings&apos; dialog:  accept defaults and click  OK

Select the object and move it to the top

Edit  &amp;gt;  Create Guides Around the Page
File  &amp;gt;  Document Properties
File  &amp;gt;  Clean Up Document

File  &amp;gt;  Save As  &amp;gt;  Encapsulated PostScript (*.eps)
In the &apos;Save As&apos; dialog:  accept defaults and click  OK
 
File  &amp;gt;  Quit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mv padded.eps padded.eps.old
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o padded.eps \
 -sDEVICE=eps2write \
 -c &quot;&amp;lt;&amp;lt;/PageOffset [0.2 0]&amp;gt;&amp;gt; setpagedevice&quot; \
 -f padded.eps.old
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n Box padded.eps
3:%%BoundingBox: 0 0 16 43
4:%%HiResBoundingBox: 0.20 0.00 15.20 42.10
717:/MediaBox get aload pop
1456:/FontBBox 1 index/FontBBox get def
3883:dup/BBox get aload pop exch 3 index sub exch 2 index sub rectclip
8309:&amp;lt;&amp;lt;/Type/Page/MediaBox [0 0 612 792]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check with &lt;strong&gt;zathura&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zathura --fork padded.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;reducing-file-size-aka-compressing&quot;&gt;Reducing File Size (a.k.a. Compressing)&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o padded.eps \
 -dDownsampleColorImages=true \
 -dColorImageResolution=300 \
 -sDEVICE=eps2write \
 -c &quot;&amp;lt;&amp;lt;/PageOffset [14 -2]&amp;gt;&amp;gt; setpagedevice&quot; \
 -f scaled.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt; &lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/43079007/improving-my-ghostscript-eps-compressive-script&quot;&gt;Improving my ghostscript eps compressive script&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;generating-pdf-from-ps-and-eps-files-with-ghostscript&quot;&gt;Generating PDF from PS and EPS Files with Ghostscript&lt;/h2&gt;
&lt;h2 id=&quot;aka-converting-a-ps-or-an-eps-file-to-pdf&quot;&gt;(a.k.a. Converting a PS or an EPS File to PDF)&lt;/h2&gt;

&lt;p&gt;Here is a sample command line to invoke Ghostscript for 
generating a PDF/A document:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -dPDFA=1 \
 -dBATCH \
 -dNOPAUSE \
 -sColorConversionStrategy=RGB \
 -sDEVICE=pdfwrite \
 -sOutputFile=output.pdf \
 input.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even simpler:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -sDEVICE=pdfwrite -o converted.pdf -f input.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;    &lt;br /&gt;
&lt;a href=&quot;https://ghostscript.com/doc/current/VectorDevices.htm&quot;&gt;High Level Output Devices (Vector Devices)&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;h2 id=&quot;generating-monochrome-pdf-from-ps-and-eps-files-with-ghostscript&quot;&gt;Generating Monochrome PDF from PS and EPS Files with Ghostscript&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o output.pdf \
 -sColorConversionStrategy=Gray \
 -sDEVICE=pdfwrite \
 -f input.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;cropping-pdf-and-removing-extraneous-whitespace&quot;&gt;Cropping PDF (and Removing Extraneous Whitespace)&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat network_diagram.dot 
graph network_diagram {

  imagepath=&quot;/mnt/usbflashdrive/myknowledgebase/images&quot;

  label=&quot;\nNetwork Diagram&quot;;

  node [
    shape=box,
    //fontname=&quot;arial&quot;,
    fontsize=8,
    style=filled,
    color=&quot;#d3edea&quot;
  ];
  splines=&quot;compound&quot;

  fw [ label=&quot;Edge firewall&quot; shape=none image=&quot;firewall.eps&quot; labelloc=b color=&quot;#ffffff&quot;];
  panel [ label=&quot;Patch panel&quot; shape=none image=&quot;24-port-patch-panel.eps&quot; labelloc=b color=&quot;#ffffff&quot; ];
  sw1 [ label=&quot;Cisco switch&quot; shape=none image=&quot;gigabit_switch_router.eps&quot; labelloc=b color=&quot;#ffffff&quot;];
  sw2 [ label=&quot;Inside switch&quot; shape=none image=&quot;gigabit_switch_router.eps&quot; labelloc=b color=&quot;#ffffff&quot;];
  srv1 [ label=&quot;Cluster server&quot; shape=none image=&quot;rackmount-1U-server.eps&quot; labelloc=b color=&quot;#ffffff&quot;];
  srv2 [ label=&quot;Cluster nodes 101-114&quot; shape=none image=&quot;server_blades.eps&quot; labelloc=b color=&quot;#ffffff&quot;];
  srv3 [ label=&quot;Cluster nodes 201-214&quot; shape=none image=&quot;server_blades.eps&quot; labelloc=b color=&quot;#ffffff&quot;];
  srv4 [ label=&quot;Management node&quot; shape=none image=&quot;rackmount-1U-server.eps&quot; labelloc=b color=&quot;#ffffff&quot;];

  cloud [ label=&quot;Internet&quot; shape=none, image=&quot;cloud.eps&quot; labelloc=b color=&quot;#ffffff&quot;];

  cloud -- fw;
  fw -- panel;
  panel -- sw1;
  sw1 -- srv1 [color=&quot;#ffbb00&quot;];
  srv1 -- sw2 [color=&quot;#ffbb00&quot;];
  srv1 -- sw2 [color=&quot;#ffbb00&quot;];
  srv2 -- sw2 [color=&quot;#ffbb00&quot;];
  srv2 -- sw2 [color=&quot;#ffbb00&quot;];
  srv3 -- sw2 [color=&quot;#ffbb00&quot;];
  srv3 -- sw2 [color=&quot;#ffbb00&quot;];
  panel -- srv4 [color=&quot;#ffbb00&quot;];
  srv4 -- sw2 [color=&quot;#ffbb00&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% dot -Teps network_diagram.dot -o network_diagram.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Convert the EPS file to PDF (option ‘-q’ -&amp;gt; quiet Ghostscript processing).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -sDEVICE=pdfwrite \
 -o network_diagram.pdf \
 -f network_diagram.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resulting PDF has a lot of whitespace around the image as shown below.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/network_diagram.png&quot; alt=&quot;Displaying a png image of a network diagram&quot; title=&quot;Displaying a png image of a network diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Find out the dimensions (and &lt;strong&gt;BoundingBox&lt;/strong&gt;) of PDF:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -dSAFER -dNOPAUSE -dBATCH -sDEVICE=bbox -f network_diagram.pdf
%%BoundingBox: 48 43 485 505
%%HiResBoundingBox: 48.221999 43.847999 484.613985 504.971985
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use those dimensions to &lt;strong&gt;crop&lt;/strong&gt; the PDF with Ghostscript:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -sDEVICE=pdfwrite \
 -o trimmed.pdf \
 -c &quot;[/CropBox [48 44 485 505] /PAGES pdfmark&quot; \
 -f network_diagram.pdf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above command produces the cropped image:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/trimmed.png&quot; alt=&quot;Displaying an image of an appropriately cropped png image of a network diagram&quot; title=&quot;Displaying an image of an appropriately cropped png image of a network diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;REFERENCE:&lt;br /&gt;
&lt;a href=&quot;https://sachinashanbhag.blogspot.com/2012/09/how-to-crop-pdf-images.html&quot;&gt;How to: Crop PDF Images&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;convert-pdf-to-png-image---with-ghostscript-gs&quot;&gt;Convert PDF to PNG Image - with Ghostscript (gs)&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -sDEVICE=png16m -r150 -o output.png -f input.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;convert-pdf-to-png-image-and-remove-extranous-whitespace---with-ghostscript-gs&quot;&gt;Convert PDF to PNG Image and Remove Extranous Whitespace - with Ghostscript (gs)&lt;/h3&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-dUseCropBox&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -sDEVICE=png16m -r150 -o trimmed.png -dUseCropBox -f input.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/38171343/ghostscript-converting-pdf-to-png-with-wrong-output-size&quot;&gt;Ghostscript Converting PDF to PNG With Wrong Output Size&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2657458/obey-the-mediabox-cropbox-in-pdf-when-using-ghostscript-to-render-a-pdf-to-a-png&quot;&gt;Obey the MediaBox/CropBox in PDF when using Ghostscript to render a PDF to a PNG&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;convert-eps-to-png-image&quot;&gt;Convert EPS to PNG Image&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh firewall.eps
-rw-r--r--  1 dusko  wheel   163K Mar  5 13:40 firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file firewall.eps
firewall.eps: PostScript document text conforming DSC level 3.0, type EPS, Level 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List PNG supported devices by Ghostscript.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -h | grep -i png
   faxg3 faxg32d faxg4 fmlbp fmpr fpng fs600 gdi hl1240 hl1250 hl7x0
   planc plang plank planm plib plibc plibg plibk plibm png16 png16m png256
   png48 pngalpha pnggray pngmono pngmonod pnm pnmraw ppm ppmraw pr1000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o -dSAFER -sDEVICE=bbox firewall.eps
%%BoundingBox: 0 9 15 42
%%HiResBoundingBox: 0.756000 9.522000 14.798812 41.669999

% identify firewall.eps
firewall.eps EPS 15x42 15x42+0+0 16-bit sRGB 3305B 0.000u 0:00.000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l firewall.eps
    8467 firewall.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep Box firewall.eps
%%BoundingBox: 0 0 16 43
%%HiResBoundingBox: 0.20 0.00 15.20 42.10
/MediaBox get aload pop
/FontBBox 1 index/FontBBox get def
dup/BBox get aload pop exch 3 index sub exch 2 index sub rectclip
&amp;lt;&amp;lt;/Type/Page/MediaBox [0 0 612 792]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -o firewall.png \
 -sDEVICE=png16m \
 -r150 \
 -dEPSCrop \
 -dUseCropBox \
 -f firewall.eps 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv firewall.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;adding-a-border-around-an-image-with-imagemagick&quot;&gt;Adding a Border Around an Image with ImageMagick&lt;/h3&gt;

&lt;p&gt;Add a red border of size 4 pixels to an image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% convert -bordercolor red -border 4 network_diagram.png network_diagramBORDER.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://askubuntu.com/questions/819482/how-to-add-a-border-using-imagemagick&quot;&gt;How to add a border using Imagemagick&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;hr /&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;querying-ghostscript-for-the-default-optionssettings-of-an-output-device-such-as-pdfwrite-or-tiffg4&quot;&gt;Querying Ghostscript for the default options/settings of an output device (such as ‘pdfwrite’ or ‘tiffg4’)&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -c &quot;currentpagedevice {exch ==only ( ) print == } forall&quot;
GPL Ghostscript 9.52 (2020-03-19)
Copyright (C) 2020 Artifex Software, Inc.  All rights reserved.
This software is supplied under the GNU AGPLv3 and comes with NO WARRANTY:
see the file COPYING for details.
/MaxSeparations 3
/BandWidth 0
/DeviceGrayToK true
/DeviceLinkProfile ()
/KPreserve 8
/BandHeight 0
/PageOffset [0 0]
/GrayValues 256
/HWResolution [91.2449 91.2449]
/Separations false
/BeginPage {--.callbeginpage--}
/BlendColorProfile ()
/TextBlackPt 8
/BandBufferSpace 0
/Margins [0.0 0.0]
/BlueValues 256
/PostRenderProfile ()
/ImageBlackPt 8
/MaxBitmap 50000000
/MaxTempImage 5000
/OutputAttributes -dict-
/GreenValues 256
/LeadingEdge null
/ProofProfile ()
/GraphicBlackPt 8
/MaxPatternBitmap 0
/MaxTempPixmap 20000
/ProcessColorModel /DeviceRGB
/PageDeviceName null
/InputAttributes -dict-
/PageList /
/RedValues 256
/TextICCProfile ()
/InterpolateControl 1
/BlackPtComp 8
/.HWMargins [0.0 0.0 0.0 0.0]
/AntidropoutDownscaler false
/.IsPageDevice true
/LastPage 0
/ImagingBBox null
/ImageICCProfile ()
/TextIntent 8
/%MediaSource 0
/GraphicsAlphaBits 4
/WindowID 0
/OutputICCProfile (default_rgb.icc)
/FirstPage 0
/OutputDevice /x11alpha
/GraphicICCProfile ()
/ImageIntent 8
/%MediaDestination 0
/TextAlphaBits 4
/FILTERVECTOR false
/Name (x11alpha)
/HWSize [775 1003]
/PreBandThreshold false
/GraphicIntent 8
/UseCIEColor false
/.IgnoreNumCopies false
/PageUsesTransparency false
/FILTERTEXT false
/BitsPerPixel 24
/Install {--.callinstall--}
/SimulateOverprint true
/.LockSafetyParams false
/ColorAccuracy 2
/NumCopies null
/TextKPreserve 8
/FILTERIMAGE false
/ColorValues 16777216
/DisablePageHandler false
/.MediaSize [611.540955 791.452393]
/UseFastColor false
/PageSize [611.540955 791.452393]
/RenderIntent 8
/ImageKPreserve 8
/SeparationColorNames []
/BufferSpace 4000000
/PageCount 0
/Policies -dict-
/Colors 3
/GrayDetection false
/EndPage {--.callendpage--}
/ICCOutputColors ()
/GraphicKPreserve 8

GS&amp;gt;quit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result is a list of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/SomeName somevalue&lt;/code&gt; pairs which describe 
the settings used for rendering pages to the current screen.&lt;/p&gt;

&lt;p&gt;This is so because usually the display is the default device for Ghostscript 
to send its output to.  Now you may notice that you’ll see an empty 
Ghostscript window pop up, which you’ll have to close.&lt;/p&gt;

&lt;p&gt;You can add some options to avoid the popup window:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -o /dev/null \
 -dNODISPLAY \
 -c &quot;currentpagedevice {exch ==only ( ) print ==} forall&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But this will change the query return values, because you (unintentionally) 
changed the output device settings:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -c &quot;currentpagedevice {exch ==only ( ) print ==} forall&quot; | grep Resolution
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/HWResolution [91.2449 91.2449]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compare this to:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -o /dev/null \
 -dNODISPLAY \
 -c &quot;currentpagedevice {exch ==only ( ) print == } forall&quot; \
 | grep Resolution
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/HWResolution [72.0 72.0]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Avoid this trap.  Now assuming you want to query for the default settings 
of the PDF writing device, run this one:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -o /dev/null \
 -sDEVICE=pdfwrite \
 -c &quot;currentpagedevice {exch ==only ( ) print ==} forall&quot; \
 | tee ghostscript-pdfwrite-default-pagedevice-settings.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You now have all settings for the pdfwrite device in a *.txt file, 
and you may repeat that with some other interesting Ghostscript devices 
and then compare them for all their detailled differences:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Switch to Bash.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ for _dev in \
  pswrite ps2write pdfwrite \
  tiffg3 tiffg4 tiff12nc tiff24nc tiff32nc tiff48nc tiffsep \
  jpeg jpeggray jpegcmyk \
  png16 png16m png256 png48 pngalpha pnggray pngmono; \
do \
  gs \
    -o /dev/null \
    -sDEVICE=${_dev} \
    -c &quot;currentpagedevice {exch ==only ( ) print ==} forall&quot; \
   | sort \
   | tee ghostscript-${_dev}-default-pagedevice-settings.txt; \
done
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It’s interesting to compare the settings for, say, the &lt;em&gt;pswrite&lt;/em&gt; and 
&lt;em&gt;ps2write&lt;/em&gt; devices like this (and also discover parameters which are 
available for the one, but not the other device):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sdiff -sbB ghostscript-ps*write-default-pagedevice-settings.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff -sbB ghostscript-ps*write-default-pagedevice-settings.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To avoid the return of just &lt;em&gt;-dict-&lt;/em&gt; for certain key values, 
use the &lt;em&gt;===&lt;/em&gt; instead of &lt;em&gt;==&lt;/em&gt; macro. &lt;br /&gt;
&lt;em&gt;===&lt;/em&gt; acts like &lt;em&gt;==&lt;/em&gt; but also prints the &lt;strong&gt;content&lt;/strong&gt; of dictionaries.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ for _dev in \
 pswrite ps2write pdfwrite \
 tiffg3 tiffg4 tiff12nc tiff24nc tiff32nc tiff48nc tiffsep \
 jpeg jpeggray jpegcmyk \
 png16 png16m png256 png48 pngalpha pnggray pngmono; \
 do \
   gs -o /dev/null \
   -sDEVICE=${_dev} -c &quot;currentpagedevice {exch ===only ( ) print ===} forall&quot; \
   | sort | \
   tee ghostscript-${_dev}-default-pagedevice-settings.txt; \
 done
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exit from Bash.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;https://stackoverflow.com/questions/11001107/querying-ghostscript-for-the-default-options-settings-of-an-output-device-such&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;printing-aka-scaling-pdf-for-printing&quot;&gt;Printing (a.k.a. Scaling PDF for Printing)&lt;/h2&gt;

&lt;h3 id=&quot;print-to-a-legal-sized-paper-in-portrait-mode&quot;&gt;Print to a Legal Sized Paper in Portrait Mode&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ gs \
 -q \
 -sPAPERSIZE=legal \
 -dFIXEDMEDIA \
 -dBATCH \
 -dNOPAUSE \
 -sDEVICE=pdfwrite \
 -o printable.pdf 
 -f input.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open with zathura.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zathura printable.pdf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print from zathura with its &lt;strong&gt;print&lt;/strong&gt; command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:print
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;print-a-pdf-with-a-big-image-to-a-legal-sized-paper-in-landscape-mode&quot;&gt;Print a PDF with a Big Image to a Legal Sized Paper in Landscape Mode&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat wiring_diagram.dot
graph wiring_diagram {
 
  splines=ortho;
  ranksep=&quot;0.8 equally&quot;;

  label=&quot;\n\n\nWiring Diagram\n&quot;;

  legend [shape=none, margin=0, label=
  &amp;lt;
    &amp;lt;table border=&quot;0&quot; cellborder=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;4&quot;&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;Legend&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td bgcolor=&quot;red&quot;&amp;gt;red&amp;lt;/td&amp;gt;&amp;lt;td bgcolor=&quot;red&quot;&amp;gt;public&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td bgcolor=&quot;blue&quot;&amp;gt;blue&amp;lt;/td&amp;gt;&amp;lt;td bgcolor=&quot;blue&quot;&amp;gt;inside&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td bgcolor=&quot;green&quot;&amp;gt;green&amp;lt;/td&amp;gt;&amp;lt;td bgcolor=&quot;green&quot;&amp;gt;MGMT&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
    &amp;lt;/table&amp;gt;
  &amp;gt;];

  subgraph cluster_pp {
    label=&quot;Patch panel&quot;;
    graph [fillcolor=&quot;burlywood&quot;, style=&quot;filled, rounded&quot;];
    node [shape=&quot;record&quot;, fillcolor=&quot;white&quot;, style=&quot;filled&quot;, width=0.4, height=0.4];
    edge [weight=1000, style=&quot;invis&quot;];
    
    node [label=&quot;1&quot;] p1; 
    node [label=&quot;2&quot;] p2;
    node [label=&quot;3&quot;] p3;
    node [label=&quot;4&quot;] p4;
    node [label=&quot;5&quot;] p5;
    node [label=&quot;6&quot;] p6;
    node [label=&quot;7&quot;] p7;
    node [label=&quot;8&quot;] p8;
    node [label=&quot;9&quot;] p9;
    node [label=&quot;10&quot;] p10;
    node [label=&quot;11&quot;] p11;
    node [label=&quot;12&quot;] p12;
    node [label=&quot;13&quot;] p13;
    node [label=&quot;14&quot;] p14;
    node [label=&quot;15&quot;] p15;
    node [label=&quot;16&quot;] p16;
    node [label=&quot;17&quot;] p17;
    node [label=&quot;18&quot;] p18;
    node [label=&quot;19&quot;] p19;
    node [label=&quot;20&quot;] p20;
    node [label=&quot;21&quot;] p21;
    node [label=&quot;22&quot;] p22;
    node [label=&quot;23&quot;] p23;
    node [label=&quot;24&quot;] p24;

    rank=same {p1 -- p2 -- p3 -- p4 -- p5 -- p6 -- p7 -- p8 -- p9 -- p10 -- p11 -- p12}
    rank=same {p13 -- p14 -- p15 -- p16 -- p17 -- p18 -- p19 -- p20 -- p21 -- p22 -- p23 -- p24}

    p1 -- p13
    p2 -- p14
    p3 -- p15
    p4 -- p16
    p5 -- p17
    p6 -- p18
    p7 -- p19
    p8 -- p20
    p9 -- p21
    p10 -- p22
    p11 -- p23
    p12 -- p24
  }

  subgraph cluster_webmo {
    label=&quot;WebMO and cluster storage [R2]&quot;;
    edge [style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;ETH1&quot;] webmo1;
    node [label=&quot;ETH2&quot;] webmo2;
    node [label=&quot;ETHM&quot;] webmom;
    
    {rank=&quot;same&quot;; webmo1; webmo2; webmom;} 
    webmo1 -- webmo2 -- webmom;
  }

  subgraph cluster_achassis1 {
    label=&quot;Chassis 1 - Compute nodes 101-114 [R2]&quot;;
    edge [style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;MM1&quot;] ac1mm ;
    node [label=&quot;4&quot;] ac1p4;
    node [label=&quot;3&quot;] ac1p3;
    node [label=&quot;2&quot;] ac1p2;
    node [label=&quot;1&quot;] ac1p1;
    
    {rank=&quot;same&quot;; ac1p1; ac1p2; ac1p3; ac1p4; ac1mm;}
    ac1p1 -- ac1p2 -- ac1p3 -- ac1p4 -- ac1mm;
  }

  subgraph cluster_achassis2 {
    label=&quot;Chassis 2 - Compute nodes 201-214 [R4]&quot;;
    edge[style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;MM1&quot;] ac2mm;
    node [label=&quot;1&quot;] ac2p1;
    node [label=&quot;2&quot;] ac2p2;
    node [label=&quot;3&quot;] ac2p3;
    node [label=&quot;4&quot;] ac2p4;
    
    {rank=&quot;same&quot;; ac2p1; ac2p2; ac2p3; ac2p4; ac2mm}
    ac2p1 -- ac2p2 -- ac2p3 -- ac2p4 -- ac2mm;
  }

  subgraph cluster_compute_mgmt_node {
    label=&quot;Compute management node [R1]&quot;;
    edge [style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;2&quot;] x2 ;
    node [label=&quot;1&quot;] x1 ;
    
    {rank=&quot;same&quot;; x1; x2;}
    x1 -- x2;
  }

  subgraph cluster_as {
    label=&quot;Compute cluster switch&quot;;
    graph [fillcolor=&quot;burlywood1&quot;, style=&quot;filled&quot;];
    node [shape=&quot;record&quot;, fillcolor=&quot;white&quot;, style=&quot;filled&quot;];
    edge [style=&quot;invis&quot;];

    node [label=&quot;1&quot;] asw1;
    node [label=&quot;2&quot;] asw2;
    node [label=&quot;3&quot;] asw3;
    node [label=&quot;4&quot;] asw4;
    node [label=&quot;5&quot;] asw5;
    node [label=&quot;6&quot;] asw6;
    node [label=&quot;7&quot;] asw7;
    node [label=&quot;8&quot;] asw8;

    {rank=&quot;same&quot;; asw1; asw2; asw3; asw4; asw5; asw6; asw7; asw8;} 
    asw1 -- asw2 -- asw3 -- asw4 -- asw5 -- asw6 -- asw7 -- asw8;
  }

  subgraph cluster_cs {
    label=&quot;Cisco switch [R1]&quot;;
    graph [fillcolor=&quot;burlywood1&quot;, style=&quot;filled&quot;];
    node [shape=&quot;record&quot;, fillcolor=&quot;white&quot;, style=&quot;filled&quot;];
    edge [style=&quot;invis&quot;];

    node [label=&quot;1&quot;] cs1;
    node [label=&quot;2&quot;] cs2;
    node [label=&quot;3&quot;] cs3;
    node [label=&quot;4&quot;] cs4;
    node [label=&quot;19&quot;] cs19;

    {rank=&quot;same&quot;; cs1; cs2; cs3; cs4; cs19;}
    cs1 -- cs2 -- cs3 -- cs4 -- cs19;
  }

  align_chassis [style=&quot;invis&quot;];
  align_chassis -- ac1mm [style=&quot;invis&quot;];
  align_chassis -- ac2mm [style=&quot;invis&quot;];

  x1 -- asw1 [color=&quot;blue&quot;];
  p2 -- x2 [color=&quot;red&quot;, constraint=&quot;false&quot;]; 
  p1 -- cs1 [color=&quot;red&quot;, constraint=&quot;false&quot;];
  asw3 -- ac1mm [color=&quot;green&quot;, penwidth=2, constraint=&quot;false&quot;];
  asw5 -- webmom [color=&quot;green&quot;, penwidth=2];
  asw7 -- ac2mm [color=&quot;green&quot;, penwidth=2, constraint=&quot;false&quot;];
  webmo1:sw -- cs19:ne [color=&quot;white:red:white&quot;];
  webmo2-- asw6 [color=&quot;blue&quot;];
  ac1p1 -- asw2 [color=&quot;blue&quot;];
  asw4 -- ac2p4 [color=&quot;blue&quot;, constraint=&quot;false&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% dot -Teps wiring_diagram.dot -o wiring_diagram.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -sDEVICE=eps2write \
 -dEPSCrop \
 -o wiring_diagram.pdf \
 -f wiring_diagram.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -sDEVICE=eps2write \
 -o scaled.eps \
 -dEPSCrop \
 -c &quot;&amp;lt;&amp;lt;/PageSizePolicy 3&amp;gt;&amp;gt; setpagedevice&quot; \
 -dFIXMEDIA \
 -f wiring_diagram.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -sDEVICE=pdfwrite \
 -o printable.pdf \
 -dEPSFitPage \
 -c &quot;&amp;lt;&amp;lt;/PageSizePolicy 3&amp;gt;&amp;gt; setpagedevice&quot; \
 -dFIXMEDIA \
 -dNORANGEPAGESIZE \
 -f scaled.eps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs -q -o -dSAFER -sDEVICE=bbox printable.pdf
%%BoundingBox: 0 1 792 150
%%HiResBoundingBox: 0.000211 1.710000 791.999976 149.412581
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -sDEVICE=pdfwrite \
 -o trimmed.pdf \
 -c &quot;[/CropBox [0 1 792 150] /PAGES pdfmark&quot; \
 -f printable.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zathura trimmed.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to get the prompt (use  -sOutputFile):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -sDEVICE=pdfwrite \
 -sOutputFile=new.pdf \
 -dDEVICEHEIGHTPOINTS=612 \
 -dDEVICEWIDTHPOINTS=1008 \
 -dFitPage \
 -dFIXMEDIA \
 -dAutoRotatePages=/None \
 -f printable.pdf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to get the prompt (use  -sOutputFile) and to exit it without typing ‘quit’:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs \
 -q \
 -sDEVICE=pdfwrite \
 -sOutputFile=new.pdf \
 -dDEVICEHEIGHTPOINTS=612 \
 -dDEVICEWIDTHPOINTS=1008 \
 -dFitPage \
 -dFIXMEDIA \
 -dAutoRotatePages=/None \
 -f printable.pdf \
 -c quit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you do not want to see output details (use -o):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gs 
 -q \ 
 -sDEVICE=pdfwrite \
 -o new.pdf \
 -dDEVICEHEIGHTPOINTS=612 \
 -dDEVICEWIDTHPOINTS=1008 \
 -dFitPage \
 -dFIXMEDIA \
 -dAutoRotatePages=/None \
 -f printable.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Load Legal sized paper in the Tray 1 (upper tray) of the HP LaserJet 2420dn printer.&lt;/p&gt;

&lt;p&gt;After running the the above command and loading the paper, open the 
resulting PDF with zathura.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zathura new.pdf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From zathura:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:print
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the Print dialog box:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Select the printer (in this example: HP_LaserJet_2420dn) 

In the Page Setup tab change the following two values - under Paper heading:
  Paper size:   Change it from &apos;US Letter&apos; to &apos;US Legal&apos;
  Orientation:  Change it from &apos;Portrait&apos; to &apos;Landscape&apos;

Click &apos;Print&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
The &lt;strong&gt;-dDEVICEHEIGHTPOINTS=612&lt;/strong&gt; and &lt;strong&gt;-dDEVICEWIDTHPOINTS=1008&lt;/strong&gt; are paper 
dimensions for &lt;strong&gt;Legal paper size&lt;/strong&gt; and you can obtain them from here:&lt;br /&gt;
&lt;a href=&quot;https://ghostscript.com/doc/current/Use.htm#Known_paper_sizes&quot;&gt;The paper sizes known to Ghostscript - Ghostsript Documentation&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt; &lt;br /&gt;
&lt;a href=&quot;https://comp.lang.postscript.narkive.com/xSbH7XrD/ghostscript-any-way-to-fit-to-printable-area&quot;&gt;Ghostscript - any way to fit to printable area?&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/42371152/ghostscript-changed-orientation-from-landscape-to-portrait&quot;&gt;Ghostscript changed Orientation from landscape to portrait&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://web.mit.edu/ghostscript/www/Use.htm&quot;&gt;How to use Ghostscript&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;tips---useful-to-know&quot;&gt;TIPS - USEFUL TO KNOW:&lt;/h2&gt;

&lt;p&gt;From:
&lt;a href=&quot;https://stackoverflow.com/questions/70583490/dimensions-change-when-ghostscript-converts-ps-to-png&quot;&gt;Dimensions change when Ghostscript converts PS to PNG&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The BoundingBox in your PostScript program is a comment and therefore 
has no effect.  If you want to set the media size then you need to take 
action to do so.  You can do this in PostScript by using the 
setpagedevice operator.  Or you can do so from the command line using 
&lt;strong&gt;-sPAPERSIZE&lt;/strong&gt;, &lt;strong&gt;-dDEVICEHEIGHTPOINTS&lt;/strong&gt; and &lt;strong&gt;-dDEVICEWIDTHPOINTS&lt;/strong&gt;, 
&lt;strong&gt;-g&lt;/strong&gt; and possibly the &lt;strong&gt;-dFIXEDMEDIA&lt;/strong&gt; switch.&lt;/p&gt;

  &lt;p&gt;In the absence of any of these Ghostscript uses its &lt;strong&gt;default&lt;/strong&gt; media 
size which will be either &lt;strong&gt;A4&lt;/strong&gt; or &lt;strong&gt;US Letter&lt;/strong&gt;.&lt;/p&gt;

  &lt;p&gt;Or make your program DSC-compliant and use DSC processing, or make it 
an EPS and use -dEPSCrop.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;From:&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/46183868/using-ghostscript-to-export-pngs-at-fixed-size&quot;&gt;Using GhostScript to export PNGs at fixed size&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Your problem with EPS files is that they do &lt;strong&gt;not&lt;/strong&gt; request 
a &lt;strong&gt;media size&lt;/strong&gt;.  That’s because EPS files are intended to be included 
in other PostScript programs, so they need to be resized by the 
application generating the PostScript.&lt;/p&gt;

  &lt;p&gt;To that end, EPS files include &lt;strong&gt;comments&lt;/strong&gt; (which are &lt;strong&gt;ignored&lt;/strong&gt; by 
&lt;strong&gt;PostScript interpreters&lt;/strong&gt;) which define the &lt;strong&gt;BoundingBox&lt;/strong&gt; of the 
&lt;strong&gt;EPS&lt;/strong&gt;.  An application which places EPS can quickly scan the EPS to 
find this information, then it sets the CTM appropriately in the final 
PostScript program it is creating and inserts the content of the EPS.&lt;/p&gt;

  &lt;p&gt;The &lt;strong&gt;FitPage&lt;/strong&gt; switch in &lt;strong&gt;Ghostscript&lt;/strong&gt; relies on having 
&lt;em&gt;a known media size&lt;/em&gt; (and you should set &lt;strong&gt;-dFIXEDMEDIA&lt;/strong&gt; when using this) 
and a requested media size, figuring out what scale factor to apply to 
the request in order to make it fit the actual size, and setting up the 
CTM to apply that scaling.&lt;/p&gt;

  &lt;p&gt;If you don’t ever get a media size request (which you &lt;strong&gt;won’t&lt;/strong&gt; with 
an &lt;strong&gt;EPS&lt;/strong&gt;) then &lt;strong&gt;no scaling&lt;/strong&gt; will take place.&lt;/p&gt;

  &lt;p&gt;Now &lt;strong&gt;Ghostscript&lt;/strong&gt; &lt;em&gt;does have&lt;/em&gt; a different switch, &lt;strong&gt;EPSCrop&lt;/strong&gt; which 
picks up the comments from the EPS and uses that to set the media size 
(Ghostscript has mechanisms to permit processing of comments for this 
reason, amongst others).  You could implement a similar mechanism to 
pick up the BoundingBox comments, and scale the EPS so that it fits 
a desired target media size.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;From: &lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/40223691/scaling-pdf-file-using-ghostscript&quot;&gt;Scaling PDF file using Ghostscript&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Well, Ghostscript uses PostScript as its scripting language, 
so anything you can do in PostScript you can do to a PDF file.&lt;/p&gt;

  &lt;p&gt;I &lt;em&gt;really&lt;/em&gt; wouldn’t use -g with pdfwrite, because -g specifies 
&lt;strong&gt;pixels&lt;/strong&gt;, and since pdfwrite is a vector device that doesn’t really 
work well. Use -dDEVICEHEIGHTPOINTS and -dDEVICEWIDTHPOINTS instead.&lt;/p&gt;

  &lt;p&gt;Don’t set -sPAPERSIZE either, you can’t set the media to be letter in 
one place and something different (the -g switch) elsewhere.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;From:&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/36871015/manual-layout-of-graphs-described-in-graphviz-dot-format&quot;&gt;manual layout of graphs described in graphviz (DOT)&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;You can run &lt;strong&gt;dot&lt;/strong&gt; requesting output as another dot file with the command
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dot -Tdot&lt;/code&gt;.  &lt;strong&gt;dot&lt;/strong&gt; will then calculate the layout but instead of 
outputting a pictorial representation, it will output another dot file 
with exactly the same information as the input, with the addition of 
layout information as additional attributes.&lt;br /&gt;
You can then edit the layout information by hand and run it through dot 
a second time to obtain the pictorial representation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ dot -Tdot input.gv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From: &lt;br /&gt;
&lt;a href=&quot;https://marc.info/?l=graphviz-devel&amp;amp;m=129418103126092&quot;&gt;Re: [graphviz-devel] File extension .dot or .gv?&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://forum.graphviz.org/t/what-is-the-file-extension-for-dot-file/35/4&quot;&gt;What is the file extension for dot file? - Graphviz Forum&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 5, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;.gv is preferred. The .dot suffix was stolen by Word.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;PROGRAMS:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;VIEWING:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ps, eps, pdf: zathura&lt;/li&gt;
  &lt;li&gt;png, jpeg: xv&lt;/li&gt;
  &lt;li&gt;svg: Inkscape, web browsers&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;EDITING:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;dot (Graphviz)&lt;/li&gt;
  &lt;li&gt;dotty (comes with Graphviz) - a WYSIWYG tool to aid in the hand-layout process&lt;/li&gt;
  &lt;li&gt;Graphviz Visual Editor&lt;/li&gt;
  &lt;li&gt;PlantUML&lt;/li&gt;
  &lt;li&gt;Kroki&lt;/li&gt;
  &lt;li&gt;kroki-cli&lt;/li&gt;
  &lt;li&gt;Diagrams.net (Drawio) (https://github.com/jgraph/drawio)
    &lt;ul&gt;
      &lt;li&gt;https://github.com/jgraph&lt;/li&gt;
      &lt;li&gt;https://github.com/jgraph/drawio&lt;/li&gt;
      &lt;li&gt;https://github.com/jgraph/drawio-desktop/releases/tag/v17.2.1&lt;/li&gt;
      &lt;li&gt;https://github.com/jgraph/docker-drawio&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;DrawThe.net (https://github.com/cidrblock/drawthe.net)&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Blockdiag  (seqdiag, rackdiag, netdiag, etc.)   (http://blockdiag.com/en/)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;rsvg-convert&lt;/li&gt;
  &lt;li&gt;anytopnm&lt;/li&gt;
  &lt;li&gt;pamfile&lt;/li&gt;
  &lt;li&gt;ppmhist&lt;/li&gt;
  &lt;li&gt;pnm(5), ppm(5), pgm(5), pbm(5), pam(5)&lt;/li&gt;
  &lt;li&gt;pamtosvg&lt;/li&gt;
  &lt;li&gt;pbmclean&lt;/li&gt;
  &lt;li&gt;mscgen_js - turns text into sequence charts  (https://mscgen.js.org/)
    &lt;ul&gt;
      &lt;li&gt;Includes, for example: SMTP Sequence Chart&lt;/li&gt;
      &lt;li&gt;Also, you can:
        &lt;ul&gt;
          &lt;li&gt;animate the chart&lt;/li&gt;
          &lt;li&gt;create a bookmarkable URI (URL)/link&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;epsffit&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;PKG (PACKAGES):
    &lt;ul&gt;
      &lt;li&gt;ghostscript&lt;/li&gt;
      &lt;li&gt;sam2p&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;NOT YET EXPLORED:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=23154846&quot;&gt;Diagram as Code (mingrammer.com) - HackerNews&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Mermaid
        &lt;ul&gt;
          &lt;li&gt;https://mermaid-js.github.io/mermaid-live-editor/&lt;/li&gt;
          &lt;li&gt;https://mermaid-js.github.io/mermaid/#/&lt;/li&gt;
          &lt;li&gt;https://github.com/mermaid-js/mermaid&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;https://isoflow.io/&lt;/li&gt;
  &lt;li&gt;https://diagrams.mingrammer.com/
    &lt;ul&gt;
      &lt;li&gt;https://github.com/mingrammer/diagrams&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;diagram.codes (playground available but Save is available only for paying customers)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;ubigraph (https://github.com/0x4lan/ubigraph_server)&lt;/li&gt;
  &lt;li&gt;Tulip (Data Visualization Software)  https://tulip.labri.fr/site/&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

</description>
        <pubDate>Sat, 05 Mar 2022 09:12:41 -0800</pubDate>
        <link>http://localhost:4000/howto/diagram/graph/graphviz/plaintext/text/tex/latex/visualization/documentation/2022/03/05/tex-latex-inkscape-svg-creating-diagrams.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/graph/graphviz/plaintext/text/tex/latex/visualization/documentation/2022/03/05/tex-latex-inkscape-svg-creating-diagrams.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>tex</category>
        
        <category>latex</category>
        
        <category>visualization</category>
        
        <category>documentation</category>
        
      </item>
    
      <item>
        <title>How To Create a Bootable FreeBSD ZFS Clone</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;br /&gt;
Python version: 3.8.12&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;[TODO]&lt;/strong&gt;  Complete this page&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Code for a mind map in &lt;a href=&quot;https://github.com/plantuml/plantuml/&quot;&gt;PlantUML&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat zfsbootable.txt
@startmindmap

title Create a Bootable FreeBSD ZFS Machine Clone\n

&apos; Based on
&apos; https://ideashortcut.com/tutorial-convert-you-notes-into-a-wbs-and-gantt-charts-with-plantuml/
&apos;   and
&apos; https://forums.freebsd.org/threads/cloning-a-zfs-boot-disk-on-a-usb-drive.79687/
&apos;   and
&apos; https://github.com/mattjhayes/PlantUML-Examples/blob/master/docs/Diagram-Types/diagram-types.md

scale 0.85

skinparam ArrowColor DarkGrey

&amp;lt;style&amp;gt;
mindmapDiagram {
  node {
    Padding 15
    Margin 15
    BackGroundColor YellowGreen
    FontColor DarkSlateGrey
    LineColor White
    LineThickness 1.0
    MaximumWidth 320
  }
  rootNode {
    Padding 15
    Margin 15
    BackGroundColor YellowGreen
    FontColor DarkSlateGrey
    FontSize 18
    LineColor White
    LineThickness 1.0
  }
  leafNode {
    Padding 15
    Margin 15
    BackGroundColor LightGray
    FontColor DarkSlateGrey
    FontSize 15
    LineColor ForestGreen
    LineThickness 2.0
  }
  &apos; Styles to apply to tasks based on status:
  &apos; in progress (i)
  .i {
    BackgroundColor SkyBlue
  }
  &apos; completed (c)
  .c {
    BackgroundColor LightSlateGray
    FontStyle italic
    FontColor DarkGray
  }
  &apos; urgent (u)
  .u {
    BackgroundColor OrangeRed
    FontStyle bold
  }
  &apos; delegated (d)
  .d {
    BackgroundColor Gold
  }
}
&amp;lt;/style&amp;gt;

&apos; Legend colours need to be updated manually :-(
legend
|&amp;lt;back:LightGray&amp;gt;&amp;lt;b&amp;gt;Not Started.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:SkyBlue&amp;gt;&amp;lt;b&amp;gt;In Progress.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:LightSlateGrey&amp;gt;&amp;lt;i&amp;gt;Completed     .&amp;lt;/i&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:OrangeRed&amp;gt;&amp;lt;b&amp;gt;Urgent        .&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:Gold&amp;gt;&amp;lt;b&amp;gt;Delegated   .&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:YellowGreen&amp;gt;&amp;lt;b&amp;gt;Branch        .&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:LightGray&amp;gt;&amp;lt;b&amp;gt;[*] The same name as before not required but convenient, unless you have bootfs set in /boot/loader.conf.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:LightGray&amp;gt;&amp;lt;b&amp;gt;[**] If you are creating the same pool and the rest as subsets of that, you need to force the zfs receive in order to tell it to overwrite your existing pool.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:LightGray&amp;gt;&amp;lt;b&amp;gt;[***] On newer installs, this is zroot/ROOT/default or similar.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
endlegend

* Full\nsystem\nrestore\nto a\nfresh\ndrive
** Root on ZFS install
** Cloning
** gpart(8)
** dd(1)
** Bare metal backup/restore
** ZFS snapshots
*** zfs send
**** on trusted: nc(1)
**** on untrusted: ssh(1)
*** zfs receive
*** beadm/bectl
**** Boot pool name: zroot
**** Boot BE parent\ndataset name: ROOT
**** Boot datasets:\nROOT/tmp,\nROOT/var/tmp,\nROOT/default
**** **/usr** and **/var** filesystems have\n**canmount** property set to **off**
***** /usr and /var are placed \non the / dataset the\nzroot/ROOT/default BE
** Full\nsystem\nrestore\nto a\nfresh\ndrive
*** Capture the root pool properties\n zpool get all rpool &amp;lt;&amp;lt;c&amp;gt;&amp;gt;
*** GPT layout &amp;lt;&amp;lt;i&amp;gt;&amp;gt;
**** Manually create GPT
*** Boot loader &amp;lt;&amp;lt;u&amp;gt;&amp;gt;
**** Write the boot loader
*** Sufficient size on destinaiton
*** Boot off the\nFreeBSD Live CD/USB
**** Get networking up\nand running
**** Create the new zpool [*]
**** zfs receive the backup [**]
**** Use zpool(1) to set bootfs\nproperty properly [***]
**** Reboot
**** Use gptzfsboot(8)\nto install bootcode
**** Reboot
@endmindmap
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Send a POST request using &lt;a href=&quot;https://httpie.org/&quot;&gt;HTTPie&lt;/a&gt;, &lt;a href=&quot;https://docs.kroki.io/kroki/setup/http-clients/&quot;&gt;HTTP Clients - Kroki documentation&lt;/a&gt; to generate the mind map image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% http \
 http://localhost:8000/ \
 diagram_type=&apos;plantuml&apos; \
 output_format=&apos;png&apos; \
 diagram_source=&apos;@zfsbootable.txt&apos; \
 &amp;gt; zfsbootable.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/zfsbootable.png&quot; alt=&quot;Displaying a png image of a mind map created with PlantUML invoked via Kroki&quot; title=&quot;Displaying a png image of a mind map created with PlantUML invoked via Kroki&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Alternatively, you can display the image in a web browser.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 zfsbootable.txt | \
 python3.8 -c \
 &quot;import sys; import base64; import zlib; \
 print(base64.urlsafe_b64encode(zlib.\
 compress(sys.stdin.read().encode(&apos;utf-8&apos;), 9)).decode(&apos;ascii&apos;))&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;eNq9V11v2zYUfdev4FtTobLaDl2zIDA6J01QIG2COEGxzXugRFriQpEaP5I6a__7zqVkx-mSod3DjNggLy_PPbxfZN74wF3olB
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy and paste the output to your web browser:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://localhost:8000/plantuml/svg/eNq9V11v2zYUfdev4FtTobLaDl2zIDA6J01QIG2COEGxzXugRFriQpEaP5I6a_
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat bootable_os_zfs_activity_diagram.txt
@startuml
&apos; Based on https://waddles.org/2009/11/17/replicating-zfs-root-disks/
&apos; and
&apos; https://github.com/mattjhayes/PlantUML-Examples/blob/master/docs/Diagram-Types/diagram-types.md

skinparam shadowing false

title Create a Bootable FreeBSD ZFS Clone\n- Activity Diagram -\n

start
:Verify status;
:Create recursive ZFS root pool (rpool) snapshot;
:Insert and label new disks;
:Create partition tables;
:Create new zpool;
:Replicate pool&apos;s dataset;
:Replicate remaining datasets;
:Set mountpoints;
:Set bootfs property;
:Export the new pool;
:Install boot blocks to both disks;

:Target System
Transfer disks and boot failsafe;

:Import zpool as rpool;
:Export the zpool;

:Boot to single user mode;
:Unconfigure the system;
:Reconfigure the system;
: Cleanup;

stop
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% http \ 
 http://localhost:8000/ \
 diagram_type=&apos;plantuml&apos; \
 output_format=&apos;png&apos; \
 diagram_source=&apos;@bootable_os_zfs_activity_diagram.txt&apos; \
 &amp;gt; bootable_os_zfs_activity_diagram.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/bootable_os_zfs_activity_diagram.png&quot; alt=&quot;Displaying a png image of an activity diagram created with PlantUML invoked via Kroki&quot; title=&quot;Displaying a png image of an activity diagram created with PlantUML invoked via Kroki&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Sat, 05 Mar 2022 08:08:02 -0800</pubDate>
        <link>http://localhost:4000/howto/diagram/graph/graphviz/plaintext/text/tex/latex/visualization/documentation/2022/03/05/freebsd-create-bootable-zfs-clone.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/graph/graphviz/plaintext/text/tex/latex/visualization/documentation/2022/03/05/freebsd-create-bootable-zfs-clone.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>tex</category>
        
        <category>latex</category>
        
        <category>visualization</category>
        
        <category>documentation</category>
        
      </item>
    
      <item>
        <title>How To Create Server Wiring Diagrams with Graphviz and Kroki</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat wiring.dot
graph wiring {

  splines=ortho;
  ranksep=&quot;2.0 equally&quot;;

  legend [shape=none, margin=0, label=
  &amp;lt;
    &amp;lt;table border=&quot;0&quot; cellborder=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;4&quot;&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td colspan=&quot;2&quot;&amp;gt;Legend&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td bgcolor=&quot;red&quot;&amp;gt;red&amp;lt;/td&amp;gt;&amp;lt;td bgcolor=&quot;red&quot;&amp;gt;public&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td bgcolor=&quot;blue&quot;&amp;gt;blue&amp;lt;/td&amp;gt;&amp;lt;td bgcolor=&quot;blue&quot;&amp;gt;inside&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;&amp;lt;td bgcolor=&quot;green&quot;&amp;gt;green&amp;lt;/td&amp;gt;&amp;lt;td bgcolor=&quot;green&quot;&amp;gt;MGMT&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
    &amp;lt;/table&amp;gt;
  &amp;gt;];

  subgraph cluster_pp {
    label=&quot;Patch panel&quot;;
    graph [fillcolor=&quot;burlywood&quot;, style=&quot;filled, rounded&quot;];
    node [shape=&quot;record&quot;, fillcolor=&quot;white&quot;, style=&quot;filled&quot;];
    edge [style=&quot;invis&quot;];

    node [label=&quot;1&quot;] p1;
    node [label=&quot;2&quot;] p2;
    node [label=&quot;3&quot;] p3;

    {rank=&quot;same&quot;; p1; p2; p3;}
    p1 -- p2 -- p3;
  }

  subgraph cluster_webmo {
    label=&quot;WebMO and cluster storage\n[RACK 1]&quot;;
    edge [style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;ETH1&quot;] webmo1;
    node [label=&quot;ETH2&quot;] webmo2;
    node [label=&quot;ETHM&quot;] webmom;

    {rank=&quot;same&quot;; webmo1; webmo2; webmom;}
    webmo1 -- webmo2 -- webmom;
  }

  subgraph cluster_achassis1 {
    label=&quot;Chassis 1 - Compute nodes 101-114\n[RACK 1]&quot;;
    edge [style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;MM1&quot;] ac1mm ;
    node [label=&quot;4&quot;] ac1p4;
    node [label=&quot;3&quot;] ac1p3;
    node [label=&quot;2&quot;] ac1p2;
    node [label=&quot;1&quot;] ac1p1;

    {rank=&quot;same&quot;; ac1p1; ac1p2; ac1p3; ac1p4; ac1mm;}
    ac1p1 -- ac1p2 -- ac1p3 -- ac1p4 -- ac1mm;
  }

  subgraph cluster_achassis2 {
    label=&quot;Chassis 2 - Compute nodes 201-214\n[RACK 3]&quot;;
    edge[style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;MM1&quot;] ac2mm;
    node [label=&quot;1&quot;] ac2p1;
    node [label=&quot;2&quot;] ac2p2;
    node [label=&quot;3&quot;] ac2p3;
    node [label=&quot;4&quot;] ac2p4;

    {rank=&quot;same&quot;; ac2p1; ac2p2; ac2p3; ac2p4; ac2mm}
    ac2p1 -- ac2p2 -- ac2p3 -- ac2p4 -- ac2mm;
  }

  subgraph cluster_compute_mgmt_node {
    label=&quot;Compute management node\n[RACK 2]&quot;;
    edge [style=&quot;invis&quot;];
    node [shape=&quot;record&quot;];

    node [label=&quot;2&quot;] x2 ;
    node [label=&quot;1&quot;] x1 ;

    {rank=&quot;same&quot;; x1; x2;}
    x1 -- x2;
  }

  subgraph cluster_as {
    label=&quot;Compute cluster switch&quot;;
    graph [fillcolor=&quot;burlywood1&quot;, style=&quot;filled&quot;];
    node [shape=&quot;record&quot;, fillcolor=&quot;white&quot;, style=&quot;filled&quot;];
    edge [style=&quot;invis&quot;];

    node [label=&quot;1&quot;] asw1;
    node [label=&quot;2&quot;] asw2;
    node [label=&quot;3&quot;] asw3;
    node [label=&quot;4&quot;] asw4;
    node [label=&quot;5&quot;] asw5;
    node [label=&quot;6&quot;] asw6;
    node [label=&quot;7&quot;] asw7;
    node [label=&quot;8&quot;] asw8;

    {rank=&quot;same&quot;; asw1; asw2; asw3; asw4; asw5; asw6; asw7; asw8;}
    asw1 -- asw2 -- asw3 -- asw4 -- asw5 -- asw6 -- asw7 -- asw8;
  }

  subgraph cluster_cs {
    label=&quot;Cisco switch [RACK 2]&quot;;
    graph [fillcolor=&quot;burlywood1&quot;, style=&quot;filled&quot;];
    node [shape=&quot;record&quot;, fillcolor=&quot;white&quot;, style=&quot;filled&quot;];
    edge [style=&quot;invis&quot;];

    node [label=&quot;1&quot;] cs1;
    node [label=&quot;2&quot;] cs2;
    node [label=&quot;3&quot;] cs3;
    node [label=&quot;4&quot;] cs4;
    node [label=&quot;19&quot;] cs19;

    {rank=&quot;same&quot;; cs1; cs2; cs3; cs4; cs19;}
    cs1 -- cs2 -- cs3 -- cs4 -- cs19;
  }

  align_chassis [style=&quot;invis&quot;];
  align_chassis -- ac1mm [style=&quot;invis&quot;];
  align_chassis -- ac2mm [style=&quot;invis&quot;];

  x1 -- asw1 [color=&quot;blue&quot;];
  p2 -- x2 [color=&quot;red&quot;];
  p1:sw -- cs1 [color=&quot;red&quot;];
  asw3 -- ac1mm [color=&quot;green&quot;, penwidth=2, constraint=&quot;false&quot;];
  asw5 -- webmom [color=&quot;green&quot;, penwidth=2];
  asw7 -- ac2mm [color=&quot;green&quot;, penwidth=2, constraint=&quot;false&quot;];
  webmo1:sw -- cs19:ne [color=&quot;white:red:white&quot;];
  webmo2-- asw6 [color=&quot;blue&quot;];
  ac1p1 -- asw2 [color=&quot;blue&quot;];
  asw4 -- ac2p4 [color=&quot;blue&quot;, constraint=&quot;false&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To generate the diagram with &lt;a href=&quot;https://graphviz.org/&quot;&gt;Graphviz&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% dot -Tpng graph.dot -o graph.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To generate the diagram with PlantUML via a self-managed instance of &lt;a href=&quot;https://kroki.io/&quot;&gt;Kroki&lt;/a&gt; (&lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/howto/diagram/java/2022/02/26/freebsd-java-kroki-diagrams.html&quot;&gt;How to Run Kroki on FreeBSD 13 with Java&lt;/a&gt; or &lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/docker/vm/virtualization/howto/diagram/2022/02/25/freebsd-docker-linux-kroki-diagrams.html&quot;&gt;How to Run Kroki on FreeBSD 13 with vm-bhyve and Debian GNU/Linux VM&lt;/a&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 wiring.dot | \ 
 http \
 http://localhost:8000/plantuml/png \
 Content-Type:text/plain &amp;gt; \
 wiring.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv wiring.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/wiring.png&quot; alt=&quot;Displaying a png image a network wiring diagram created by Graphviz invoked via Kroki&quot; title=&quot;Displaying a png image a network wiring diagram created by Graphviz invoked via Kroki&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.webmo.net/&quot;&gt;WebMO&lt;/a&gt; server and cluster storage: 1U (1 rack unit) Lenovo server
    &lt;ul&gt;
      &lt;li&gt;3 Ethernet ports (2 Ethernet ports and an Ethernet Management Port)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Compute management node: 1U (1 rack unit) IBM server
    &lt;ul&gt;
      &lt;li&gt;2 Ethernet ports&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Chassis 1 wtth compute nodes 101-114: IBM blade server with 14 blades
    &lt;ul&gt;
      &lt;li&gt;Module with 4 Ethernet ports&lt;/li&gt;
      &lt;li&gt;Management module with KVM (keyboard, video, monitor) and an Ethernet Managemet Port&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Chassis 2 with compute nodes 201-214: IBM blade server with 14 blades
    &lt;ul&gt;
      &lt;li&gt;Module with 4 Ethernet ports&lt;/li&gt;
      &lt;li&gt;Management module with KVM (keyboard, video, monitor) and an Ethernet Managemet Port&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
For testing layouts, you can use your own instance of the Graphviz Visual Editor &lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/bhyve/virtualization/graphviz/graph/visualization/2022/02/08/freebsd-bhyve-graph-editors.html&quot;&gt;How To Install Graphviz Visual Editor on FreeBSD in a Linux Guest in Bhyve&lt;/a&gt; or if you prefer use it online provided by its author &lt;a href=&quot;http://magjac.com/graphviz-visual-editor/&quot;&gt;Graphviz Visual Editor - Magnus Jacobsson&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/21935109/how-do-i-style-the-ports-of-record-based-nodes-in-graphviz&quot;&gt;How do I style the ports of record based nodes in GraphViz?&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 4, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1477532/how-to-force-position-of-edges-in-graphviz&quot;&gt;How to force position of edges in graphviz?&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 4, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.graphviz.org/pdf/dotguide.pdf&quot;&gt;Drawing graphs with &lt;em&gt;dot&lt;/em&gt;&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 4, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://rtomaszewski.blogspot.com/search/label/diagram&quot;&gt;Physical network diagram generated from dot config language&lt;/a&gt; &lt;br /&gt;
(Posted on Dec30, 2013)&lt;br /&gt;
(Retrieved on Mar 4, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.webmo.net/&quot;&gt;WebMO - a web-based interface to computational chemistry packages&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Fri, 04 Mar 2022 21:08:02 -0800</pubDate>
        <link>http://localhost:4000/howto/diagram/graph/graphviz/plaintext/text/tex/latex/visualization/documentation/2022/03/04/graphviz-and-koki-server-wiring-diagram.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/graph/graphviz/plaintext/text/tex/latex/visualization/documentation/2022/03/04/graphviz-and-koki-server-wiring-diagram.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>tex</category>
        
        <category>latex</category>
        
        <category>visualization</category>
        
        <category>documentation</category>
        
      </item>
    
      <item>
        <title>How To Create Networking Diagrams with Graphviz and Kroki</title>
        <description>&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat graph.dot
graph networkdiagram {

  /*
     Colours for the lines relate to the line speed
     green is for 100 Mbit (100 Mb/s) (IBM Management)
     blue is for Gigabit (1 Gb/s)
     red is for 10 Gigabit (10 Gb/s)
  */

  imagepath=&quot;/usr/home/dusko/scratch/graphviz_network/images&quot;

  label=&quot;\nCompute Cluster Network Diagram&quot;;

  node [shape=&quot;none&quot;, fontname=&quot;arial&quot;, fontsize=10, labelloc=&quot;b&quot;, color=&quot;#ffffff&quot;];
  splines=&quot;compound&quot;;

  fw [label=&quot;Edge firewall&quot;, image=&quot;firewall.png&quot;];
  panel [label=&quot;Patch panel&quot;, image=&quot;patchPanel24Port.png&quot;];
  sw1 [label=&quot;Cisco switch&quot;, image=&quot;gigabitSwitch.png&quot;];
  sw2 [label=&quot;Compute cluster switch&quot;, image=&quot;gigabitSwitch.png&quot;];
  srv1 [label=&quot;WebMO and cluster storage&quot;, image=&quot;rackmountServer1U.png&quot;];
  srv2 [label=&quot;Compute nodes 101-114&quot;, image=&quot;serverBlades.png&quot;];
  srv3 [label=&quot;Compute nodes 201-214&quot;, image=&quot;serverBlades.png&quot;];
  srv4 [label=&quot;Compute management node&quot;, image=&quot;rackmountServer1U.png&quot;];
  cloud [label=&quot;Internet&quot;, image=&quot;cloud.png&quot;];

  cloud -- fw [color=&quot;red&quot;];
  fw -- panel [color=&quot;red&quot;];
  sw1 -- panel [color=&quot;red&quot;];
  panel -- srv4 [color=&quot;blue&quot;];

  {
    rank=&quot;same&quot;;
    srv1; srv2; srv3; srv4;
  }

  srv1 -- sw1 [color=&quot;blue&quot;];
  srv1 -- sw2 [color=&quot;blue&quot;];
  srv1 -- sw2 [color=&quot;green&quot;];
  srv2 -- sw2 [color=&quot;blue&quot;];
  srv2 -- sw2 [color=&quot;green&quot;];
  srv3 -- sw2 [color=&quot;blue&quot;];
  srv3 -- sw2 [color=&quot;green&quot;];
  srv4 -- sw2 [color=&quot;blue&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To generate the diagram with &lt;a href=&quot;https://graphviz.org/&quot;&gt;Graphviz&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% dot -Tpng graph.dot -o graph.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To generate the diagram with PlantUML via a self-managed instance of &lt;a href=&quot;https://kroki.io/&quot;&gt;Kroki&lt;/a&gt; (&lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/howto/diagram/java/2022/02/26/freebsd-java-kroki-diagrams.html&quot;&gt;How to Run Kroki on FreeBSD 13 with Java&lt;/a&gt; or &lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/docker/vm/virtualization/howto/diagram/2022/02/25/freebsd-docker-linux-kroki-diagrams.html&quot;&gt;How to Run Kroki on FreeBSD 13 with vm-bhyve and Debian GNU/Linux VM&lt;/a&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 graph.dot | \
 http \
 http://localhost:8000/plantuml/png \
 Content-Type:text/plain &amp;gt; \
 graph.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
Supported output formats in PlantUML:  png, svg, jpeg, base64, txt or utxt.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv graph.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/graphviz-network-diagram.png&quot; alt=&quot;Displaying a png image of a network diagram created by Graphviz&quot; title=&quot;Displaying a png image of a network diagram created by Graphviz&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  &lt;br /&gt;
Online Graphviz tools&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;For realtime collaboration: &lt;a href=&quot;http://graphvizrepl.com&quot;&gt;http://graphvizrepl.com&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Repository with the code for graphvizrepl.com:  &lt;a href=&quot;https://github.com/caseywatts/graphviz-repl&quot;&gt;https://github.com/caseywatts/graphviz-repl&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;blockquote&gt;
      &lt;p&gt;Graphviz-REPL gives you a two-pane interface for quickly creating and 
iterating through graphviz diagrams. You type DOT syntax on the left, 
and the image will appear on the right after just a moment.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://mikegriffin.ie/blog/20110308-a-graphviz-tutorial&quot;&gt;How to create a network diagram with Graphviz - A graphviz tutorial&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/mgriffin/graphviz_network&quot;&gt;Repository with the code Mike Griffin used in his graphviz tutorial blog post above&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://mamchenkov.net/wordpress/2015/08/20/graphviz-dot-erds-network-diagrams/&quot;&gt;Using Graphviz dot for ERDs, network diagrams and more&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://kontrolissues.net/2017/02/05/auto-network-diagram-with-graphviz/&quot;&gt;Auto Network Diagram with Graphviz&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://crashedmind.github.io/PlantUMLHitchhikersGuide/NetworkUsersMachines/NetworkUsersMachines.html&quot;&gt;The Hitchhiker’s Guide to PlantUML - Create a Diagram of a Typical Network&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://medium.com/powerof2/graphviz-for-network-visualization-9f45693d69d8&quot;&gt;Graphviz for Network Visualization (Draw network diagrams from config files)&lt;/a&gt;&lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.graphviz.org/doc/info/shapes.html&quot;&gt;Graphviz - Node Shapes&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://renenyffenegger.ch/notes/tools/Graphviz/examples/index&quot;&gt;Graphviz (dot) examples&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://renenyffenegger.ch/notes/development/databases/SQL/data-types/&quot;&gt;Plotting the hierarchy of SQL data types with graphviz/dot&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://renenyffenegger.ch/notes/tools/Graphviz/examples/organization-chart&quot;&gt;Graphviz example: organization chart&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7374108/graphviz-node-placement-and-rankdir/&quot;&gt;GraphViz Node Placement and Rankdir&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://renenyffenegger.ch/notes/tools/Graphviz/examples/edge-crossing&quot;&gt;Graphviz (dot) examples: crossing of edges - How crosssing of edges can be eliminated&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/9238672/how-does-a-script-optimally-layout-a-pure-hierarchical-graphviz-dot-graph&quot;&gt;How does a script optimally layout a pure hierarchical graphviz/dot graph?&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://mikemol.github.io/jekyll/update/nodes/edges/labels/layout/graphviz/dot/2018/01/13/graphviz-technique-nodes-as-edge-labels.html&quot;&gt;Nodes as Labels&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://www.cisco.com/web/about/ac50/ac47/2.html&quot;&gt;The Cisco network topology icons&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 3, 2022)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Thu, 03 Mar 2022 20:17:02 -0800</pubDate>
        <link>http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/tex/latex/visualization/sysadmin/documentation/2022/03/03/graphviz-servers-networking-diagram.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/tex/latex/visualization/sysadmin/documentation/2022/03/03/graphviz-servers-networking-diagram.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>java</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>tex</category>
        
        <category>latex</category>
        
        <category>visualization</category>
        
        <category>sysadmin</category>
        
        <category>documentation</category>
        
      </item>
    
      <item>
        <title>Additional Examples of Diagrams Created from Textual Descriptions with PlantUML</title>
        <description>&lt;p&gt;OS:  FreeBSD 13 &lt;br /&gt;
Shell:  csh &lt;br /&gt;
Python version:  3.8.12&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Kroki provides an HTTP API to create diagrams from textual descriptions. 
It handles both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GET&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt; requests. 
When using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GET&lt;/code&gt; requests, your diagram must be encoded in the URI (URL) 
using a deflate + base64 algorithm.&lt;br /&gt;
If you don’t want to use deflate and base64, you can also send your 
diagram as plain text using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt; requests.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;br /&gt;
In the following examples, I use the &lt;a href=&quot;https://httpie.io/&quot;&gt;HTTPie&lt;/a&gt; command 
line HTTP client and &lt;a href=&quot;https://curl.se/&quot;&gt;curl&lt;/a&gt; command line tool and library 
for executing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GET&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt; requests.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;colours&quot;&gt;Colours&lt;/h3&gt;

&lt;h4 id=&quot;send-the-data-from-a-file-in-a-post-request-with-png-as-the-output-format&quot;&gt;Send the Data from a File in a POST Request with PNG as the Output Format&lt;/h4&gt;

&lt;p&gt;Print all all named colours suggested by PlantUML using a special diagram description:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat colors_plantuml.txt 
@startuml
colors
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 colors_plantuml.txt | \
 http \
 http://localhost:8000/plantuml/png \
 Content-Type:text/plain &amp;gt; \
 colors_plantuml.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv colors_plantuml.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/colors_plantuml.png&quot; alt=&quot;Displaying a png image of all colours supported by PlantUML&quot; title=&quot;Displaying a png image of all colours supported by PlantUML&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://plantuml.com/color&quot;&gt;Choosing colors - PlantUML&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://github.com/qywx/PlantUML-colors&quot;&gt;qywx / PlantUML-colors&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://kroki.io/#support&quot;&gt;Kroki - Diagram types and output formats&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;gantt-chart&quot;&gt;Gantt Chart&lt;/h3&gt;

&lt;h4 id=&quot;send-data-from-a-file-in-a-post-request-with-svg-as-the-output-format&quot;&gt;Send Data from a File in a POST Request with SVG as the Output Format&lt;/h4&gt;

&lt;p&gt;Based on &lt;a href=&quot;https://www.linux-magazine.com/Issues/2020/235/PlantUML-Diagrams&quot;&gt;Drawing diagrams with PlantUML&lt;/a&gt;  &lt;br /&gt;
(Linux Magazine article from June 2020 &lt;a href=&quot;https://www.linux-magazine.com/Issues/2020/235&quot;&gt;Issue 235/2020&lt;/a&gt;)  &lt;br /&gt;
(Retrieved on Mar 2, 2022)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat gantt_plantuml.txt
@startgantt
&apos; Based on https://www.linux-magazine.com/Issues/2020/235/PlantUML-Diagrams
scale 1.5
Project starts 2022/03/02
[Prestudy] lasts 10 days and is colored in Lavender/Blue
[Milestone 1] happens at [Prestudy]&apos;s end
[System simulation] lasts 9 days and is colored in Coral/Green and starts 1 day after [Prestudy]&apos;s end
[Use cases def.] lasts 7 days and ends at [Prestudy]&apos;s end
[Compliance\nspecs] lasts 3 days and ends at [Use cases def.]&apos;s start
[Select testers] is colored in Coral/Green
[Select testers] lasts 5 days and starts at [Use cases def.]&apos;s start
[Train testers] starts 1 days after [Milestone 1]&apos;s end and lasts 7 days
@endgantt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 gantt_plantuml.txt | \
 http \
 http://localhost:8000/plantuml/png \
 Content-Type:text/plain &amp;gt; \
 gantt_plantuml.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv gantt_plantuml.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gantt_plantuml.png&quot; alt=&quot;Displaying a png image of a Gantt chart example created with PlantUML&quot; title=&quot;Displaying a png image of a Gantt chart example created with PlantUML&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;mind-map&quot;&gt;Mind Map&lt;/h3&gt;

&lt;h4 id=&quot;output-from-get---encoded-in-the-uri-url-using-a-deflate--base64-algorithm&quot;&gt;Output from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GET&lt;/code&gt; - Encoded in the URI (URL) using a deflate + base64 algorithm&lt;/h4&gt;

&lt;p&gt;Based on &lt;a href=&quot;https://github.com/mattjhayes/PlantUML-Examples/blob/master/docs/Misc/BlogSource/Other-Uses-for-PlantUML/tasks-diagram.md&quot;&gt;PlantUML-Examples repo&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Mar 2, 2022)&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mattjhayes.com/2019/08/17/diagrams-as-code-plantuml/&quot;&gt;Diagrams as Code (PlantUML)&lt;/a&gt; &lt;br /&gt;
(Retrieved on Mar 2, 2022)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat mindmap_plantuml.txt
@startuml
&apos; Based on https://github.com/mattjhayes/PlantUML-Examples/blob/master/docs/Misc/BlogSource/Other-Uses-for-PlantUML/tasks-diagram.md
&apos; https://mattjhayes.com/2019/08/17/diagrams-as-code-plantuml/
```plantuml
@startmindmap
skinparam ArrowColor DarkGrey
&amp;lt;style&amp;gt;
mindmapDiagram {
  node {
    Padding 15
    Margin 15
    BackGroundColor YellowGreen
    FontColor DarkSlateGrey
    LineColor White
    LineThickness 1.0
    MaximumWidth 320
  }
  rootNode {
    Padding 15
    Margin 15
    BackGroundColor YellowGreen
    FontColor DarkSlateGrey
    FontSize 18
    LineColor White
    LineThickness 1.0
  }
  leafNode {
    Padding 15
    Margin 15
    BackGroundColor LightGray
    FontColor DarkSlateGrey
    FontSize 15
    LineColor ForestGreen
    LineThickness 2.0
  }
  &apos; Styles to apply to tasks based on status:
  &apos; in progress (i)
  .i {
    BackgroundColor SkyBlue
  }
  &apos; completed (c)
  .c {
    BackgroundColor LightSlateGray
    FontStyle italic
    FontColor DarkGray
  }
  &apos; urgent (u)
  .u {
    BackgroundColor OrangeRed
    FontStyle bold
  }
  &apos; delegated (d)
  .d {
    BackgroundColor Gold
  }
}
&amp;lt;/style&amp;gt;
&apos; Legend colours need to be updated manually :-(
legend
|&amp;lt;back:LightGray&amp;gt;&amp;lt;b&amp;gt;Not Started.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:SkyBlue&amp;gt;&amp;lt;b&amp;gt;In Progress.&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:LightSlateGrey&amp;gt;&amp;lt;i&amp;gt;Completed     .&amp;lt;/i&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:OrangeRed&amp;gt;&amp;lt;b&amp;gt;Urgent        .&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:Gold&amp;gt;&amp;lt;b&amp;gt;Delegated   .&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
|&amp;lt;back:YellowGreen&amp;gt;&amp;lt;b&amp;gt;Branch        .&amp;lt;/b&amp;gt;&amp;lt;/back&amp;gt;|
endlegend

* Current Tasks

 * Schedule Project Meeting &amp;lt;&amp;lt;u&amp;gt;&amp;gt;
  * Review RFP document &amp;lt;&amp;lt;i&amp;gt;&amp;gt;
  * Create meeting agenda &amp;lt;&amp;lt;i&amp;gt;&amp;gt;
  * Attend RFP workshop with customer

 * Website Architecture
  * Write Draft Architecture Document &amp;lt;&amp;lt;i&amp;gt;&amp;gt;
  * Discuss with Customer and get feedback &amp;lt;&amp;lt;u&amp;gt;&amp;gt;
  * Update based on Feedback

 * Staging Environment Build
  * Q/A High-Level Design &amp;lt;&amp;lt;i&amp;gt;&amp;gt;
  * Design for Legacy Connection (Team 1) &amp;lt;&amp;lt;d&amp;gt;&amp;gt;
  * Design for Portal (Team 2) &amp;lt;&amp;lt;d&amp;gt;&amp;gt;

@endmindmap
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Send a POST request using &lt;a href=&quot;https://httpie.org/&quot;&gt;HTTPie&lt;/a&gt;, &lt;a href=&quot;https://docs.kroki.io/kroki/setup/http-clients/&quot;&gt;HTTP Clients - Kroki documentation&lt;/a&gt; to generate the mind map image.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% http \
 http://localhost:8000/ \
 diagram_type=&apos;plantuml&apos; \
 output_format=&apos;png&apos; \
 diagram_source=&apos;@mindmap_plantuml.txt&apos; \
 &amp;gt; mindmap_plantuml.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv mindmap_plantuml.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/mindmap_plantuml.png&quot; alt=&quot;Displaying a png image of a Mind map example created with PlantUML&quot; title=&quot;Displaying a png image of a Mind map example created with PlantUML&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Alternatively, you can display the image in a web browser.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python
 
% command -v python3
 
% command -v python3.8
/usr/local/bin/python3.8
 
% ls -lh /usr/local/bin/python*
-r-xr-xr-x  1 root  wheel   5.1K Feb  2 17:12 /usr/local/bin/python3.8
-r-xr-xr-x  1 root  wheel   3.1K Feb  2 17:12 /usr/local/bin/python3.8-config
lrwxr-xr-x  1 root  wheel    50B Feb 12 17:41 /usr/local/bin/pythontex -&amp;gt; ../share/texmf-dist/scripts/pythontex/pythontex.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python3.8 --version
Python 3.8.12
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using a Python to encode your diagram using deflate + base64:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 mindmap_plantuml.txt | \
 python3.8 -c \
 &quot;import sys; import base64; import zlib; \
 print(base64.urlsafe_b64encode(zlib.\
 compress(sys.stdin.read().encode(&apos;utf-8&apos;), 9)).decode(&apos;ascii&apos;))&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above command returns a value:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;eNq9VU1v2zgQvetXzC1uAFlxFsW2gWEktpvsAk7rjRMEewsljiXWFCnwI47b5r93SEuO0ySH7mEFCJDIx_feDGfIU-uYcb6WyQGMmUUOWkHlXGNPsqwUrvJ5v9B1VjPnvlZsgzabS6bczeUs_fTA6kbSSC51Tgjr0GRcFza7FLbIxlKXC-1NgdkXV6FJbyzadKlN2jFkjtmVTblgpWF1v-ZkotN-Eoz6x0eDj9nRh2zwZ9bCbcpsWmiOaRPoKIQsubu7636S0xhZLRSvWZPYlVANo2VwZoxeT7TUBqbMrC4MbpKhdRuJo6RFT7cK8D0BUKQQPwDmjHOhShi8j7-XzJRCdX9jVhCX9opvuf9FKfWa2FHF-XOt3JPqQjKHUTrMzYTC7dxtJRzuxq4rUawUWguD_lGr-SBqX98K7ir44zgMPtJrtHaf_wejYW4hviEMPvyW8eBRIlv-V48zUVbuwrDNbzh8_4vDc23Quqc4n_s83vk8gEUoBgtOA2sauQkfsVAh7xqESst5exLR5LoxujSBpSfe0VhftDGGMMq9MBarzVh63AlRYVP_OOLsFXFh8cbCGH8b6F4SolEQjklRvJKZFrvV8qZE5aDno5B_Q-iLYarEK-S_aORa8h0VR4kli7Z5ZONvsF10qx6TYda22AHMkJxwCl7S4WBBIRFRinME3_BIWzPlmaTMn6S9REZ48mOYE_vJrhJGw3z0WTvaLOpy5P1hlo_oJczoRwdu8x2gfyuYt7v0KnQ_w0jkYjTZbU54aJF4sWiXraBws01w-7wqEvIRoNNdAt8A7vVkwI9Jp6hep6bctBlKDmHijQkmrkO5JgkcwqKokHvaQYr-KxYOLhFd6Lvh0I9GtDmHcIX3AtdwdT4HOrx9HQiGlIDt7MQgOYW6XcaCFNubP3Mu7GZYvdZmZSvdwJruDSi8dbpGE23cYm7pgKDDtwgHReG8wbj81oThqWFL92wSpi-tTOlW8dRlkX7S0gMj9RIdLKmOQk72IruJ9fTUtuctZJsZx8oQ0Sd1L4xWUWvsRazYQ_gnO4O_qCbSGd6jhClaUap9L9uBZWhO2stiAxOtFHkXpNO7Rro9Bu8Iz1_i59pQx7ag4w6UnFIau9sqfIc77CfVVW5A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy and paste the output to your web browser:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://localhost:8000/plantuml/svg/eNq9VU1v2zgQvetXzC1uAFlxFsW2gWEktpvsAk7rjRMEewsljiXWFCnwI47b5r93SEuO0ySH7mEFCJDIx_feDGfIU-uYcb6WyQGMmUUOWkHlXGNPsqwUrvJ5v9B1VjPnvlZsgzabS6bczeUs_fTA6kbSSC51Tgjr0GRcFza7FLbIxlKXC-1NgdkXV6FJbyzadKlN2jFkjtmVTblgpWF1v-ZkotN-Eoz6x0eDj9nRh2zwZ9bCbcpsWmiOaRPoKIQsubu7636S0xhZLRSvWZPYlVANo2VwZoxeT7TUBqbMrC4MbpKhdRuJo6RFT7cK8D0BUKQQPwDmjHOhShi8j7-XzJRCdX9jVhCX9opvuf9FKfWa2FHF-XOt3JPqQjKHUTrMzYTC7dxtJRzuxq4rUawUWguD_lGr-SBqX98K7ir44zgMPtJrtHaf_wejYW4hviEMPvyW8eBRIlv-V48zUVbuwrDNbzh8_4vDc23Quqc4n_s83vk8gEUoBgtOA2sauQkfsVAh7xqESst5exLR5LoxujSBpSfe0VhftDGGMMq9MBarzVh63AlRYVP_OOLsFXFh8cbCGH8b6F4SolEQjklRvJKZFrvV8qZE5aDno5B_Q-iLYarEK-S_aORa8h0VR4kli7Z5ZONvsF10qx6TYda22AHMkJxwCl7S4WBBIRFRinME3_BIWzPlmaTMn6S9REZ48mOYE_vJrhJGw3z0WTvaLOpy5P1hlo_oJczoRwdu8x2gfyuYt7v0KnQ_w0jkYjTZbU54aJF4sWiXraBws01w-7wqEvIRoNNdAt8A7vVkwI9Jp6hep6bctBlKDmHijQkmrkO5JgkcwqKokHvaQYr-KxYOLhFd6Lvh0I9GtDmHcIX3AtdwdT4HOrx9HQiGlIDt7MQgOYW6XcaCFNubP3Mu7GZYvdZmZSvdwJruDSi8dbpGE23cYm7pgKDDtwgHReG8wbj81oThqWFL92wSpi-tTOlW8dRlkX7S0gMj9RIdLKmOQk72IruJ9fTUtuctZJsZx8oQ0Sd1L4xWUWvsRazYQ_gnO4O_qCbSGd6jhClaUap9L9uBZWhO2stiAxOtFHkXpNO7Rro9Bu8Iz1_i59pQx7ag4w6UnFIau9sqfIc77CfVVW5A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here’s the result:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/mindmap_plantuml.png&quot; alt=&quot;Displaying a png image of a Mind map example created with PlantUML&quot; title=&quot;Displaying a png image of a Mind map example created with PlantUML&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;post-requests&quot;&gt;POST Requests&lt;/h3&gt;

&lt;p&gt;When calling Kroki with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt; method, you don’t need to encode your diagram.&lt;/p&gt;

&lt;h4 id=&quot;post-requests-with-httpie-and-with-data-from-a-file&quot;&gt;POST Requests with HTTPie and with Data from a File&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.txt
{ 
  &quot;diagram_source&quot;: &quot;digraph G { Hello -&amp;gt; World }&quot;,
  &quot;diagram_type&quot;: &quot;graphviz&quot;, 
  &quot;output_format&quot;: &quot;svg&quot; 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% http http://localhost:8000/ &amp;lt; hello.txt &amp;gt; hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% rsvg-convert hello.svg &amp;gt; hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/hello-by-httpie-post.png&quot; alt=&quot;Displaying a Hello World png created by Graphviz from Kroki via POST method submitted with the HTTPie command line HTTP client&quot; title=&quot;Displaying a Hello World png image created with Graphviz from Kroki via POST method submitted with the HTTPie command line HTTP client&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;post-requests-with-curl&quot;&gt;POST Requests with curl&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% curl -d &apos;{ \
 &quot;diagram_source&quot;: &quot;digraph G { Hello -&amp;gt; World }&quot;, \
 &quot;diagram_type&quot;: &quot;graphviz&quot;, \
 &quot;output_format&quot;: &quot;svg&quot; \
 }&apos; \
 -X POST http://localhost:8000/ \
 &amp;gt; hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% rsvg-convert hello.svg &amp;gt; hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/hello-by-curl-post.png&quot; alt=&quot;Displaying a Hello World png created by Graphviz from Kroki via POST method submitted with curl&quot; title=&quot;Displaying a Hello World png image created with Graphviz from Kroki via POST method submitted with curl&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 02 Mar 2022 18:47:02 -0800</pubDate>
        <link>http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/plantuml/visualization/2022/03/02/plantsuml-kroki-textual-description-diagrams.html</link>
        <guid isPermaLink="true">http://localhost:4000/howto/diagram/java/graph/graphviz/plaintext/text/plantuml/visualization/2022/03/02/plantsuml-kroki-textual-description-diagrams.html</guid>
        
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>java</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
        <category>plaintext</category>
        
        <category>text</category>
        
        <category>plantuml</category>
        
        <category>visualization</category>
        
      </item>
    
      <item>
        <title>Procmail Recipe for Vacation Auto-Reply Only to Senders from Certain Domains</title>
        <description>&lt;hr /&gt;

&lt;p&gt;Sendmail version:  8.14.4 &lt;br /&gt;
OS: Red Hat Enterprise Linux Server release 6.8 (Santiago) 64-bit  &lt;br /&gt;
Procmail version:  v3.22  &lt;br /&gt;
Shell:  bash&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/redhat-release 
Red Hat Enterprise Linux Server release 6.8 (Santiago)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# procmail -v
procmail v3.22 2001/09/10
  Copyright (c) 1990-2001, Stephen R. van den Berg &amp;lt;srb@cuci.nl&amp;gt;
  Copyright (c) 1997-2001, Philip A. Guenther      &amp;lt;guenther@sendmail.com&amp;gt;

---- snip ----
Default rcfile:         $HOME/.procmailrc
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# arch
x86_64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ps $$
  PID TTY      STAT   TIME COMMAND
16113 pts/0    Ss     0:00 -bash

# printf %s\\n &quot;$SHELL&quot;
/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print the version of sendmail and the options it was compiled with.
To exit, send EOF (End Of File) by pressing Ctrl + d.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sendmail -d0.1
Version 8.14.4
 Compiled with: DNSMAP HESIOD HES_GETMAILHOST LDAPMAP LOG MAP_REGEX
                MATCHGECOS MILTER MIME7TO8 MIME8TO7 NAMED_BIND NETINET NETINET6
                NETUNIX NEWDB NIS PIPELINING SASLv2 SCANF SOCKETMAP STARTTLS
                TCPWRAPPERS USERDB USE_LDAP_INIT

============ SYSTEM IDENTITY (after readcf) ============
      (short domain name) $w = yourdomainname
  (canonical domain name) $j = yourdomainname.com
         (subdomain name) $m = 
              (node name) $k = yourdomainname.com
========================================================

Recipient names must be specified
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# command -v procmail
/usr/bin/procmail
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man -k procmail
procmail          (1)  - autonomous mail processor
procmailex        (5)  - procmail rcfile examples
procmailrc        (5)  - procmail rcfile
procmailsc        (5)  - procmail weighted scoring technique
procmail_selinux  (8)  - Security Enhanced Linux Policy for procmail processes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Switch to your user account, navigate to the home directory and create the procmail &lt;strong&gt;rcfile&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd
$ vi /home/dusko/.procmailrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /home/dusko/.procmailrc
#  Initialize some variables

SHELL=/bin/sh
PATH=/usr/sbin:/usr/bin:/bin

#  For IMAPS, the Maildir *must* end with a trailing slash.
MAILDIR=/home/dusko/Maildir/

DEFAULT=$MAILDIR
LOGFILE=$HOME/procmail.log
LOG=&quot;--- Logging ${LOGFILE} for ${LOGNAME}, &quot;
VERBOSE=yes
LOGABSTRACT=all

### ------------------------- ###
###                           ### 
###          Recipes          ### 
###                           ### 
### ------------------------- ###

# ----------------------------------------------------------------------
# Send all messages from Cron Daemon or logwatch 
# to the indicated directory (named .logwatch). 
# ----------------------------------------------------------------------
:0
* ^From:.*(Cron Daemon|logwatch@)
/home/dusko/Maildir/.logwatch/

# ----------------------------------------------------------------------
# Send all messages from Charlie Root to the indicated directory 
# (named .bsdperiodic). 
# ----------------------------------------------------------------------
:0
* ^From:.*Charlie Root
/home/dusko/Maildir/.bsdperiodic/

# ----------------------------------------------------------------------
# Send all emails from root to a directory named .logwatch.
# ----------------------------------------------------------------------
:0
* ^From:.*root
/home/dusko/Maildir/.logwatch/


# ----------------------------------------------------------------------
# Reply **only** to messages from tech.example.com domain, 
# OR from thedusko.com, OR from duskopijetlovic.com,
# OR from mail.example.com, OR example.com.
# 
#  W: Create a lock file, vacation.lock. This is to make sure that 
#     the lockfile is not removed until the pipe has finished.
#  h: Action line gets fed to the headers of the message.
#  c: Operate on a clone (copy) of the message. 
#
# - Check whether the message is addressed to dusko@tech.example.com. 
#     NOTE:  All capital letters in TO -&amp;gt; It is procmail&apos;s own 
#            special command/macro, which means: &apos;(To|Cc|Bcc)&apos;.
# - Do NOT reply to daemons (like bounces or mailing lists).
# - Avoid mail loops.   
# - Maintain a vacation database in the vacation.cache file.
# ----------------------------------------------------------------------
:0 Whc: $HOME/vacation.lock
# The next line works for the &apos;To: &apos; _OR_ &apos;Cc: &apos; field.
# as opposed to, for example:
#   * $^To:.*\&amp;lt;$\LOGNAME\&amp;gt;
# which only works for the &apos;To: &apos; field.
* ^TOdusko@tech.example.com
* !^FROM_DAEMON
* !^X-Loop: dusko@tech.example.com
* ^From:.+(@tech\.example\.com|@thedusko\.com|@duskopijetlovic\.com|@mail\.example\.com|@example\.com)
| /usr/bin/formail -rD 8192 $HOME/vacation.cache


# ----------------------------------------------------------------------
# Process this recipe if the name was not in the cache file.
#  e: Execute this recipe if the previous recipe&apos;s conditions 
#     were met but its action(s) couldn&apos;t be completed.
#  h: Action line gets fed to the headers of the message.
#  c: Operate on a clone (copy) of the message. 
# 
# - Create the email body via echo(1) commands, and pipe it to sendmail.
# - Sendmail&apos;s -oi options do note treat a line containing a sole 
#   period (.) as the end of input (rarely needed but traditionally 
#   included to be safe). 
# - Sendmail&apos;s -t option tells the program to determine the 
#   recepient(s) from the message headers. 
# ----------------------------------------------------------------------
:0 ehc
| (formail -rI&quot;Precedence: Auto&quot; \
-A&quot;X-Loop: dusko@tech.example.com&quot; ; \
echo &quot;I received your mail.&quot;; \
echo &quot;I&apos;m away and will return on Tuesday, March 1.&quot;; \
echo &quot;-- &quot;; cat $HOME/.signature \
) | $SENDMAIL -oi -t
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /home/computing/dusko/.signature 
- Dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;  &lt;br /&gt;
The capitalized &lt;strong&gt;TO&lt;/strong&gt; is procmail’s own regular expression matching
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;To:&lt;/code&gt; &lt;strong&gt;or&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Cc:&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bcc:&lt;/code&gt; email address fields.&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;installation&quot;&gt;Installation&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Ensure that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.procmailrc&lt;/code&gt; rcfile is in your home directory.
(&lt;strong&gt;!! Do not forget to remove &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.procmailrc&lt;/code&gt; after it’s not needed anymore. !!&lt;/strong&gt;)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Customize the script for your needs:
    &lt;ul&gt;
      &lt;li&gt;Replace dusko@tech.example.com with your email address.&lt;/li&gt;
      &lt;li&gt;Customize your away message in the section with echo commands.&lt;/li&gt;
      &lt;li&gt;(Optional): If you want, you can use your signature separately by 
placing it in a file (.signature in your home directory).  If you don’t 
need it, don’t use the last line with echo command (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;echo &quot;-- &quot;; cat $HOME/.signature \&lt;/code&gt;).&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you would like to add more domains to which your vacation 
out-of-office would reply, just add more domains. 
For example, for @scooby.test, you would use the following lines 
for ‘From:’ field: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;* ^From:.+@.scooby\.test&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;There is no special formatting for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.signature&lt;/code&gt; file so you can 
just copy/paste your signature into it.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;uninstallationstopping-procmail-auto-reply&quot;&gt;Uninstallation/Stopping Procmail Auto-Reply&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Remove &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/.procmailrc&lt;/code&gt; rcfile.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Empty or delete the cache file.  &lt;br /&gt;
(When the condition (sender is from @tech.example.com or from @example.com 
or from thedusko.com or from duskopijetlovic.com or from mail.example.com), 
the first recipe creates a cache file in $HOME/vacation.cache.)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Mon, 28 Feb 2022 21:25:12 -0800</pubDate>
        <link>http://localhost:4000/sendmail/howto/dotfiles/2022/02/28/sendmail-procmail-recipe-vacation-reply-to-certain-domains.html</link>
        <guid isPermaLink="true">http://localhost:4000/sendmail/howto/dotfiles/2022/02/28/sendmail-procmail-recipe-vacation-reply-to-certain-domains.html</guid>
        
        
        <category>sendmail</category>
        
        <category>howto</category>
        
        <category>dotfiles</category>
        
      </item>
    
      <item>
        <title>sed - Stream Editor</title>
        <description>&lt;h2 id=&quot;replacing-strings-with-sed1-in-csh-on-freebsd&quot;&gt;Replacing Strings with sed(1) in csh on FreeBSD&lt;/h2&gt;

&lt;h3 id=&quot;replacing-a-single-string&quot;&gt;Replacing a Single String&lt;/h3&gt;

&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell: &lt;strong&gt;csh&lt;/strong&gt; (&lt;strong&gt;tcsh&lt;/strong&gt;)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% freebsd-version
13.0-RELEASE-p7

% uname -m
amd64

% uname -p
amd64

% sysctl -d hw.machine_arch
hw.machine_arch: System architecture
 
% sysctl hw.machine_arch
hw.machine_arch: amd64

% ps $$
  PID TT  STAT    TIME COMMAND
93946  0  Ss   0:00.05 -csh (csh)
 
% printf %s\\n &quot;$SHELL&quot;
/bin/csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &quot;Line one/&quot; &quot;Line two/&quot; &quot;Line three/&quot; &quot;Line four/&quot; &amp;gt; testfile.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat testfile.txt
Line one/
Line two/
Line three/
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sed(1)&lt;/code&gt; as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep(1)&lt;/code&gt; – Search for a word “three” in 
a file (without changing the file content).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &quot;/three/p&quot; testfile.txt
Line three/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print the line number(s) matching the search string.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &quot;/three/=&quot; testfile.txt
3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test replacing a string in a line in a file (without changing the file content) 
and with displaying the file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &quot;s/three/3/p&quot; testfile.txt
Line 3/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed &quot;/three/s/three/3/&quot; testfile.txt
Line one/
Line two/
Line 3/
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test replacing a string in a line of a file (without changing the file content) 
and with displaying only the new content of the line to be changed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &quot;/three/s/three/3/p&quot; testfile.txt
Line 3/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Replace a string in a line of a file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i&apos;.BAK&apos; -e &quot;/three/s/three/3/&quot; testfile.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i.BAK -e &quot;s/three/3/&quot; testfile.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 testfile.txt.BAK testfile.txt
--- testfile.txt.BAK    2022-02-27 11:23:31.545997000 -0800
+++ testfile.txt        2022-02-27 11:23:39.753589000 -0800
@@ -3 +3 @@
-Line three/
+Line 3/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat testfile.txt
Line one/
Line two/
Line 3/
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i testfile.txt.BAK testfile.txt
overwrite testfile.txt? (y/n [n]) y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;replacing-multiple-strings&quot;&gt;Replacing Multiple Strings&lt;/h3&gt;

&lt;p&gt;Test replacing two strings (multiple strings), one of which is a special 
character (in this example, forward slash ‘/’), in a line of a file 
(without changing the file content) and with displaying only the new 
content of the line to be changed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &quot;/three/s/three\//3/p&quot; testfile.txt
Line 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat testfile.txt
Line one/
Line two/
Line three/
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Replace two strings (multiple strings), one of which is a special 
character (in this example, forward slash ‘/’), in a line of a file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i&apos;.BAK&apos; -e &quot;/three/s/three\//3/&quot; testfile.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 testfile.txt.BAK testfile.txt
--- testfile.txt.BAK    2022-02-27 11:24:10.790813000 -0800
+++ testfile.txt        2022-02-27 11:24:20.427687000 -0800
@@ -3 +3 @@
-Line three/
+Line 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat testfile.txt
Line one/
Line two/
Line 3
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;replacing-lines-strings-with-special-characters&quot;&gt;Replacing Lines (Strings) with Special Characters&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% head -1 input.pl
#!/usr/bin/perl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i .bkp &apos;s/\#\!\/usr\/bin\/perl/\#\!\/usr\/bin\/env perl/&apos; input.pl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 input.pl.bkp input.pl
--- input.pl.bkp        2022-02-27 12:53:28.352198000 -0700
+++ input.pl    2022-02-27 12:54:00.590181000 -0700
@@ -1 +1 @@
-#!/usr/bin/perl
+#!/usr/bin/env perl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% head -1 input.pl
#!/usr/bin/env perl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;TODO: Which Title?&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;replacing-a-line-with-partially-matched-strings-within-a-line&quot;&gt;Replacing a Line with Partially Matched Strings within a Line&lt;/h3&gt;

&lt;h3 id=&quot;the-match-criteria-does-not-have-to-be-the-whole-line&quot;&gt;The Match Criteria Does Not Have to be the Whole Line&lt;/h3&gt;

&lt;p&gt;You don’t have to match the whole line.&lt;/p&gt;

&lt;p&gt;Here’s an example of [TODO]???&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n path ~/.cshrc
19:set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Match a line with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set path&lt;/code&gt; at the &lt;strong&gt;beginning&lt;/strong&gt; of the line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &apos;/^set path/p&apos; ~/.cshrc
set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Match a line with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin)&lt;/code&gt; at the &lt;strong&gt;end&lt;/strong&gt; of the line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &apos;/bin)$/p&apos; ~/.cshrc
set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Match a line with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set path&lt;/code&gt; at the &lt;em&gt;beginning&lt;/em&gt; of the line &lt;strong&gt;and&lt;/strong&gt; 
with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin)&lt;/code&gt; at the &lt;em&gt;end&lt;/em&gt; of the same line:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n &apos;/^set path.*bin)$/p&apos; ~/.cshrc
set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed \
 -i.bkp \
 &apos;s/^set path.*bin)$/set path = (\/sbin \/bin \/usr\/sbin \/usr\/bin \/usr\/local\/sbin \/usr\/local\/bin \$HOME\/bin \$HOME\/.local\/bin)/&apos; ~/.cshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: &lt;br /&gt;
The following characters had to be escaped: forward slash (/) 
and the currency symbol a.k.a. a dollar sign ($).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /home/dusko/.cshrc.bkp \
 /home/dusko/.cshrc
--- /home/dusko/.cshrc.bkp      2022-02-27 16:44:09.410150000 -0700
+++ /home/dusko/.cshrc  2022-02-27 16:44:21.162085000 -0700
@@ -19 +19 @@
-set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin)
+set path = (/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin $HOME/bin $HOME/.local/bin)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The above example is for illustration purposes – Of course, you could’ve 
appended the string by matching the end of the line and replacing that 
match with the needed string additon:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i.bkp &apos;s/bin)$/bin \$HOME\/.local\/bin)/&apos; ~/.cshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;less-complicated-example&quot;&gt;Less Complicated Example&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Task:&lt;/em&gt;  &lt;br /&gt;
In /etc/hosts file, replace a line
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.104 node104 node104.mycluster.myorg&lt;/code&gt; with this line
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.80.4 node104&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cp -i /etc/hosts /tmp/hosts.bak.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep -n 104 /etc/hosts
24:192.168.80.104 node104 node104.mycluster.myorg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &apos;/node104.mycluster.myorg/p&apos; /etc/hosts
192.168.80.104 node104 node104.mycluster.myorg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &apos;/^192.168.80.104/p&apos; /etc/hosts
192.168.80.104 node104 node104.mycluster.myorg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &apos;/^192.168.80.104/=&apos; /etc/hosts
24
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why is this not matching?:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &apos;/node104\.mycluster\.myorg$/p&apos; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the man page for cat(1) for the option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-e&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Display non-printing characters (see the -v option), and display 
a dollar sign (‘$’) at the end of each line.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ grep &apos;node104\.mycluster\.myorg&apos; hosts | cat -e
192.168.80.104 node104 node104.mycluster.myorg $
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Aha, there’s an extra space at the end of the line so with a space 
character at the end of the line this is now matching:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &apos;/node104\.mycluster\.node $/p&apos; /etc/hosts
192.168.80.104 node104 node104.mycluster.myorg 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or, you could’ve used a single dot or period (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.&lt;/code&gt;) - the wildcard 
symbol in regular expressions (regex) for matching a single character.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &apos;/node104\.mycluster\.myorg.$/p&apos; /etc/hosts
192.168.80.104 node104 node104.mycluster.myorg 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The actual replacement:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
sed -i.bkp \
&apos;s/^192.*node104.mycluster.myorg.$/192.168.80.4 node104/&apos; \
/etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
--unified=0 \
/etc/hosts.bkp \
/etc/hosts
--- /etc/hosts.bkp      2022-02-27 14:19:22.572122073 -0700
+++ /etc/hosts  2022-02-27 14:27:20.128832801 -0700
@@ -24 +24 @@
-192.168.80.104 node104 node104 node104.mycluster.myorg
+192.168.80.4 node104
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
--unified=0 \
/tmp/hosts.bak.2 \
/etc/hosts
--- /tmp/hosts.bak.2    2022-02-27 14:04:40.098265137 -0700
+++ /etc/hosts  2022-02-27 14:27:20.128832801 -0700
@@ -24 +24 @@
-192.168.80.104 node104 node104.mycluster.myorg
+192.168.80.4 node104
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;insert-or-append-a-line-with-sed1&quot;&gt;Insert or Append a Line with sed(1)&lt;/h3&gt;

&lt;p&gt;Example for the following system:&lt;br /&gt;
OS: CentOS 5.2 (RHEL 5.2) &lt;br /&gt;
Shell: bash &lt;br /&gt;
User: root&lt;/p&gt;

&lt;p&gt;Task:&lt;br /&gt;
Add the following line to the end of the # Run gettys in standard 
runlevels section of the /etc/inittab file. (This enables hardware flow 
control and enables users to log in through the SOL (Serial Over LAN) console.)&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;7:2345:respawn:/sbin/agetty -h ttyS1 19200 vt102&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# wc -l inittab
53 inittab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -n tty6 /etc/inittab
50:6:2345:respawn:/sbin/mingetty tty6

# sed -n &apos;/tty6/p&apos; /etc/inittab
6:2345:respawn:/sbin/mingetty tty6

# sed -n &apos;/tty6/=&apos; /etc/inittab
50
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed -n 44,50p /etc/inittab
# Run gettys in standard runlevels
1:2345:respawn:/sbin/mingetty tty1
2:2345:respawn:/sbin/mingetty tty2
3:2345:respawn:/sbin/mingetty tty3
4:2345:respawn:/sbin/mingetty tty4
5:2345:respawn:/sbin/mingetty tty5
6:2345:respawn:/sbin/mingetty tty6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Find lines with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tty6&lt;/code&gt; at the end.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed -n &apos;/tty6$/p&apos; /etc/inittab
6:2345:respawn:/sbin/mingetty tty6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Keep &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tty6&lt;/code&gt; at the end of that line and add a new line below it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sed \
 -i.bkp \
 &apos;s/tty6$/tty6\n7:2345:respawn:\/sbin\/agetty -h ttyS1 19200 vt102/&apos; \
 /etc/inittab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff \
 --unified=0 \
 /etc/inittab.bkp \
 /etc/inittab
--- /etc/inittab.bkp    2008-06-14 14:46:34.000000000 -0700
+++ /etc/inittab        2022-02-27 18:39:42.000000000 -0700
@@ -50,0 +51 @@
+7:2345:respawn:/sbin/agetty -h ttyS1 19200 vt102
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;replacing-strings-with-sed1-in-bash-on-linux&quot;&gt;Replacing Strings with sed(1) in Bash on Linux&lt;/h2&gt;

&lt;h3 id=&quot;replacing-a-single-string-1&quot;&gt;Replacing a Single String&lt;/h3&gt;

&lt;p&gt;OS: RHEL 6.8 64-bit &lt;br /&gt;
Shell:  &lt;strong&gt;bash&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/redhat-release
Red Hat Enterprise Linux Server release 6.8 (Santiago)

# arch
x86_64

# ps $$
  PID TTY      STAT   TIME COMMAND
11324 pts/0    Ss     0:00 -bash

# printf %s\\n &quot;$SHELL&quot;
/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;Line one/&quot; &quot;Line two/&quot; &quot;Line three/&quot; &quot;Line four/&quot; &amp;gt; testfile.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat testfile.txt 
Line one/
Line two/
Line three/
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sed(1)&lt;/code&gt; as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep(1)&lt;/code&gt; – Search for a string “three” in 
a file (without changing the file content).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &quot;/three/p&quot; testfile.txt 
Line three/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test replacing a string in a line in a file (without changing the file content).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &quot;s/three/3/p&quot; testfile.txt 
Line 3/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Replace a string in a line of a file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -i&apos;.BAK&apos; -e &quot;s/three/3/&quot; testfile.txt 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
 --unified=0 \
 testfile.txt.BAK \
 testfile.txt
--- testfile.txt.BAK    2022-02-27 20:01:16.699001452 -0700
+++ testfile.txt        2022-02-27 20:05:02.583942777 -0700
@@ -3 +3 @@
-Line three/
+Line 3/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat testfile.txt 
Line one/
Line two/
Line 3/
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cp -i testfile.txt.BAK testfile.txt
cp: overwrite `testfile.txt&apos;? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;replacing-multipe-strings&quot;&gt;Replacing Multipe Strings&lt;/h3&gt;

&lt;p&gt;Test replacing two strings (multiple strings), one of which is a special 
character (in this example, forward slash ‘/’), in a line of a file 
(without changing the file content) and with displaying only the new 
content of the line to be changed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &quot;/three/s/three\//3/p&quot; testfile.txt
Line 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Replace two strings (multiple strings), one of which is a special 
character (in this example, forward slash ‘/’), in a line of a file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -i&apos;.BAK&apos; -e &quot;/three/s/three\//3/&quot; testfile.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ diff \
 --unified=0 \
 testfile.txt.BAK \
 testfile.txt
--- testfile.txt.BAK    2022-02-27 20:43:44.959112954 -0700
+++ testfile.txt        2022-02-27 20:47:57.760371813 -0700
@@ -3 +3 @@
-Line three/
+Line 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat testfile.txt
Line one/
Line two/
Line 3
Line four/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt; &lt;br /&gt;
&lt;a href=&quot;https://unix.stackexchange.com/questions/547274/use-sed-or-awk-command-to-replace-a-word-with-another-word-which-is-stored-in-va&quot;&gt;use sed or awk command to replace a word with another word which is stored in variable&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 27 Feb 2022 10:21:01 -0800</pubDate>
        <link>http://localhost:4000/unix/freebsd/rhel/linux/howto/oneliner/sed/cli/terminal/shell/script/2022/02/27/sed-stream-editor.html</link>
        <guid isPermaLink="true">http://localhost:4000/unix/freebsd/rhel/linux/howto/oneliner/sed/cli/terminal/shell/script/2022/02/27/sed-stream-editor.html</guid>
        
        
        <category>unix</category>
        
        <category>freebsd</category>
        
        <category>rhel</category>
        
        <category>linux</category>
        
        <category>howto</category>
        
        <category>oneliner</category>
        
        <category>sed</category>
        
        <category>cli</category>
        
        <category>terminal</category>
        
        <category>shell</category>
        
        <category>script</category>
        
      </item>
    
      <item>
        <title>Create Diagrams from Textual Descriptions with Graphviz, PlantUML and Kroki</title>
        <description>&lt;hr /&gt;

&lt;p&gt;OS: FreeBSD 13 &lt;br /&gt;
Shell: csh&lt;/p&gt;

&lt;p&gt;Install Kroki or PlantUML as &lt;br /&gt;
per &lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/howto/diagram/java/2022/02/26/freebsd-java-kroki-diagrams.html&quot;&gt;this&lt;/a&gt; &lt;br /&gt;
or &lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/docker/vm/virtualization/howto/diagram/2022/02/25/freebsd-docker-linux-kroki-diagrams.html&quot;&gt;this&lt;/a&gt; &lt;br /&gt;
or &lt;a href=&quot;http://www.duskopijetlovic.com/freebsd/graphviz/graph/visualization/diagram/2022/02/09/freebsd-install-plantuml-server-locally.html&quot;&gt;this&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Start Kroki and/or PlantUML as explained in the above resources:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Start Kroki on FreeBSD 13 with Java, with the web server running locally on port 8000:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /path/to/kroki-server-directory

% java -jar kroki-server.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;OR:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Start Kroki on FreeBSD 13 with vm-bhyve and Linux VM, with the web server running locally on port 8080:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 \
 run -d --name kroki -p 8080:8000 yuzutech/kroki
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;OR:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Start PlantUML Server Locally on FreeBSD, with the web server running locally on port 8080:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /path/to/plantuml-server-directory

% mvn jetty:run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;NOTE: &lt;br /&gt;
This page assumes that you started Kroki on FreeBSD 13 with Java, 
with the web server running locally on port 8000.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Install HTTPie (pronounced aych-tee-tee-pie), a command line HTTP client.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install py38-httpie
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;send-a-json-request-to-graphviz-library-running-on-kroki&quot;&gt;Send a JSON Request to Graphviz Library Running on Kroki&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% http \ 
 http://localhost:8000/ \
 diagram_type=&apos;graphviz&apos; \
 output_format=&apos;svg&apos; \
 diagram_source=&apos;digraph G {Hello-&amp;gt;World}&apos; &amp;gt; \
 hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file hello.svg
hello.svg: SVG Scalable Vector Graphics image

% rsvg-convert hello.svg &amp;gt; hello.png

% file hello.png
hello.png: PNG image data, 114 x 155, 8-bit/color RGBA, non-interlaced
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/hello.png&quot; alt=&quot;Displaying a Hello World png image created by Grapvhiz from Kroki&quot; title=&quot;Displaying a Hello World png image created by Grapvhiz from Kroki&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;send-a-file-to-plantuml-library-running-on-kroki&quot;&gt;Send a File to PlantUML Library Running on Kroki&lt;/h3&gt;

&lt;p&gt;For instance, send a DOT file (graph description language - mostly used by Graphviz) named hello.dot:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &apos;digraph G {&apos; &amp;gt; hello.dot
% printf %s\\n &apos;    Hello-&amp;gt;World&apos; &amp;gt;&amp;gt; hello.dot
% printf %s\\n &apos;}&apos; &amp;gt;&amp;gt; hello.dot 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.dot
digraph G {
    Hello-&amp;gt;World
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.dot | \
 http \
 http://localhost:8000/plantuml/svg Content-Type:text/plain &amp;gt; \
 hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.dot | \ 
 http \
 http://localhost:8000/plantuml/svg Content-Type:text/plain &amp;gt; \
 hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file hello.svg
hello.svg: SVG Scalable Vector Graphics image
 
% rsvg-convert hello.svg &amp;gt; hello.png
 
% file hello.png
hello.png: PNG image data, 114 x 155, 8-bit/color RGBA, non-interlaced
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/hello-content-type-text-plain.png&quot; alt=&quot;Displaying a Hello World png image created by Grapvhiz from Kroki&quot; title=&quot;Displaying a Hello World png image created by Grapvhiz from Kroki&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;how-to-create-a-network-diagram-with-graphviz---send-a-file-to-plantuml-library-running-on-kroki&quot;&gt;How to Create a Network Diagram with Graphviz - Send a File to PlantUML Library Running on Kroki&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/mgriffin/graphviz_network&quot;&gt;Mike Griffin’s GitHub repository&lt;/a&gt; contains the code used in his &lt;a href=&quot;https://mikegriffin.ie/blog/20110308-a-graphviz-tutorial&quot;&gt;graphviz tutorial blog post&lt;/a&gt;.  &lt;br /&gt;
(Retrieved on Feb 26, 2022)&lt;/p&gt;

&lt;p&gt;If you don’t have Git on your system, install it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Clone Mike Griffin’s GitHub repository with his code for Graphviz network diagram.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mkdir ~/scratch
% cd ~/scratch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% git clone https://github.com/mgriffin/graphviz_network
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd graphviz_network
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -a
.          .git        graph.png       Makefile
..         graph.dot   images          README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i graph.dot graph.dot.bak.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i&apos;.BAK.1&apos; -e &quot;/images/s/images\///&quot; graph.dot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 graph.dot.BAK.1 graph.dot
--- graph.dot.BAK.1     2022-02-26 10:50:49.928865000 -0800
+++ graph.dot   2022-02-26 10:50:54.897383000 -0800
@@ -19,4 +19,4 @@
-  sw1 [ label=&quot;192.168.1.101&quot; shape=none image=&quot;images/gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
-  sw2 [ label=&quot;192.168.1.100&quot; shape=none image=&quot;images/gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
-  sw3 [ label=&quot;192.168.1.252&quot; shape=none image=&quot;images/gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
-  sw4 [ label=&quot;192.168.1.251&quot; shape=none image=&quot;images/gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
+  sw1 [ label=&quot;192.168.1.101&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
+  sw2 [ label=&quot;192.168.1.100&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
+  sw3 [ label=&quot;192.168.1.252&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
+  sw4 [ label=&quot;192.168.1.251&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
@@ -27 +27 @@
-           image=&quot;images/router.png&quot; ,
+           image=&quot;router.png&quot; ,
@@ -31 +31 @@
-  ap1 [ label=&quot;192.168.1.61&quot; shape=none image=&quot;images/wireless.png&quot; labelloc=b color=&quot;#ffffff&quot;];
+  ap1 [ label=&quot;192.168.1.61&quot; shape=none image=&quot;wireless.png&quot; labelloc=b color=&quot;#ffffff&quot;];
@@ -33 +33 @@
-  servers [ label=&quot;Servers&quot; shape=none image=&quot;images/servers.png&quot; labelloc=b color=&quot;#ffffff&quot; ];
+  servers [ label=&quot;Servers&quot; shape=none image=&quot;servers.png&quot; labelloc=b color=&quot;#ffffff&quot; ];
@@ -35 +35 @@
-  cloud [ label=&quot;The Internet&quot; shape=none, image=&quot;images/cloud.png&quot; labelloc=b color=&quot;#ffffff&quot;]
+  cloud [ label=&quot;The Internet&quot; shape=none, image=&quot;cloud.png&quot; labelloc=b color=&quot;#ffffff&quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -i&apos;.BAK.2&apos; -e &apos;6a\\
   imagepath=&quot;/usr/home/dusko/scratch/graphviz_network/images&quot;&apos; graph.dot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 graph.dot.BAK.2 graph.dot                                                              --- graph.dot.BAK.2     2022-02-26 10:50:54.897383000 -0800
+++ graph.dot   2022-02-26 10:53:42.544648000 -0800
@@ -6,0 +7 @@
+  imagepath=&quot;/usr/home/dusko/scratch/graphviz_network/images&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat graph.dot
graph switches {
  // colours for the lines relate to the line speed
  // #00bbff is for gigabit
  // #ffbb00 is for 100Mbit
  // #bbff00 is for 10 Mbit

  imagepath=&quot;/usr/home/dusko/scratch/graphviz_network/images&quot;
  label=&quot;Network Diagram&quot;;
  fontname=&quot;arial&quot;;

  node [
    shape=box,
    fontname=&quot;arial&quot;,
    fontsize=8,
    style=filled,
    color=&quot;#d3edea&quot;
  ];
  splines=&quot;compound&quot;

  sw1 [ label=&quot;192.168.1.101&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
  sw2 [ label=&quot;192.168.1.100&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
  sw3 [ label=&quot;192.168.1.252&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];
  sw4 [ label=&quot;192.168.1.251&quot; shape=none image=&quot;gigabitSwitch.png&quot; labelloc=b color=&quot;#ffffff&quot;];


  router [ label= &quot;192.168.1.250&quot;,
           shape=none ,
           image=&quot;router.png&quot; ,
           labelloc=b ,
           color=&quot;#ffffff&quot; ];

  ap1 [ label=&quot;192.168.1.61&quot; shape=none image=&quot;wireless.png&quot; labelloc=b color=&quot;#ffffff&quot;];

  servers [ label=&quot;Servers&quot; shape=none image=&quot;servers.png&quot; labelloc=b color=&quot;#ffffff&quot; ];

  cloud [ label=&quot;The Internet&quot; shape=none, image=&quot;cloud.png&quot; labelloc=b color=&quot;#ffffff&quot;]

  cloud -- router;
  router -- sw1 [color=&quot;#00bbff&quot;];
  sw1 -- sw2 [color=&quot;#ffbb00&quot;];
  sw1 -- sw3 [color=&quot;#ffbb00&quot;];
  sw1 -- ap1 [color=&quot;#bbff00&quot;];
  sw2 -- sw4 [color=&quot;#ffbb00&quot;];
  sw3 -- servers [color=&quot;#ffbb00&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat \
 graph.dot | \
 http \
 http://localhost:8000/plantuml/png \
 Content-Type:text/plain &amp;gt; \
 graph.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv graph.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/graphviz-plantuml-network-diagram.png&quot; alt=&quot;Displaying a png image of a computer network created by Grapvhiz from Kroki&quot; title=&quot;Displaying a png image of a computer network created by Grapvhiz from Kroki&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;tip-prevent-labels-overlapping-image-nodes-by-padding&quot;&gt;TIP: Prevent Labels Overlapping Image Nodes by Padding&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i images/gigabitSwitch.png .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv gigabitSwitch.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchOriginal.png&quot; alt=&quot;Displaying a png image of a Gigabit network switch icon&quot; title=&quot;Displaying a png image of a Gigabit network switch icon&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Press the &lt;strong&gt;right&lt;/strong&gt; mouse button for &lt;strong&gt;menu&lt;/strong&gt; (keyboard equivalent: &lt;strong&gt;?&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;You can determine how large the selection rectangle is (in image 
coordinates) by bringing up the xv info window. Select &lt;strong&gt;Image Info&lt;/strong&gt; from 
the &lt;strong&gt;Windows&lt;/strong&gt; menu xv controls window or by pressing the &lt;strong&gt;i&lt;/strong&gt; key inside 
any open xv window.&lt;/p&gt;

&lt;p&gt;Windows &amp;gt; Image Info &amp;gt; Resolution: 77x78&lt;/p&gt;

&lt;p&gt;So, this image’s size is 77x78.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;br /&gt;
For the rest of the steps, keep the &lt;strong&gt;Image Info&lt;/strong&gt; window &lt;strong&gt;opened&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Click on &lt;strong&gt;Pad&lt;/strong&gt; button.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xv-pad-menu.png&quot; alt=&quot;Displaying a PNG image of xv&apos;s Pad menu&quot; title=&quot;Displaying a PNG image of xv&apos;s Pad menu&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;It brings up the dialog box shown below
    &lt;ul&gt;
      &lt;li&gt;Keyboard Equivalent: &lt;strong&gt;P&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xv-pad-dialog-box.png&quot; alt=&quot;Displaying a PNG image of xv&apos;s Pad dialog box&quot; title=&quot;Displaying a PNG image of xv&apos;s Pad dialog box&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The Pad command lets you add a border of a specified size to the edges 
of the image. It also lets you resize images to some desired size without 
manually expanding or cropping the image.&lt;/p&gt;

&lt;p&gt;The Pad command operates this way: A new image of the desired size is 
created, it is filled as specified, and the original image is pasted 
onto this new image, centered. If the new image is smaller than the 
original image, the original image will be cropped. Otherwise, the area 
outside the original image will have the new background.&lt;/p&gt;

&lt;p&gt;In the Pad Method menus:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Solid Fill
Defaults &amp;gt; white
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the Image Size dials:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Change Height by moving the dial from 78 to 98
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The image size now: 77x98.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchPadded.png&quot; alt=&quot;Displaying a png image of a padded Gigabit network switch icon&quot; title=&quot;Displaying a png image of a padded Gigabit network switch icon&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Select same width and height as the &lt;strong&gt;original&lt;/strong&gt; size; that is: 77x78.&lt;/p&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
Selecting in xv:&lt;br /&gt;
Clicking and dragging the left button of the mouse inside the image 
window will allow you to draw a selection rectangle on the image. 
If you’re unhappy with the one you’ve drawn, simply click the left button 
and draw another. If you’d like the rectangle to go away altogether, 
click the left button and release it without moving the mouse.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchSelectedOriginalSize.png&quot; alt=&quot;Displaying a png image of a Gigabit network switch icon with its original size area selected in xv(1)&quot; title=&quot;Displaying a png image of a Gigabit network switch icon with its original size area selected in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To confirm the selection, from the Windows menu choose Image Info:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchPaddedDimensions.png&quot; alt=&quot;Displaying a png image of xv&apos;s Image Info dialog box&quot; title=&quot;Displaying a png image of xv&apos;s Image Info dialog box&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Click &lt;strong&gt;Cut&lt;/strong&gt; button.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xv-cut-button.png&quot; alt=&quot;Displaying a png image of xv&apos;s Cut button&quot; title=&quot;Displaying a png image of xv&apos;s Cut button&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The image is displayed as:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchCutOriginalSize.png&quot; alt=&quot;Displaying a png image of a Gigabit network switch icon with the selected area cut in xv(1)&quot; title=&quot;Displaying a png image image of a Gigabit network switch icon with the selected area cut in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Move the selected area to the very top of the image.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchCutMoveUp.png&quot; alt=&quot;Displaying a png image of a Gigabit network switch icon with the selected area moved up in xv(1)&quot; title=&quot;Displaying a png image of a Gigabit network switch icon with the selected area moved up in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To confirm, from the Windows menu choose Image Info:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchPaddedDimensions.png&quot; alt=&quot;Displaying a png image of xv&apos;s Image Info dialog box after the Gigabit switch icon has been moved up&quot; title=&quot;Displaying a png image of xv&apos;s Image Info dialog box after the Gigabit switch icon has been moved up&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Click &lt;strong&gt;Paste&lt;/strong&gt; button twice.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xv-paste-button.png&quot; alt=&quot;Displaying a png image of xv&apos;s Paste button&quot; title=&quot;Displaying a png image of xv&apos;s Paste button&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The image currently has a different colour at the bottom:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchCutMoveUpNewPositionSelected.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon pasted in xv(1)&quot; title=&quot;Displaying a png image of Gigabit network switch icon pasted in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To remove the selection rectangle, click the mouse left button 
(anywhere in non-selected area) and release it without moving 
the mouse:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchCutMoveUpNewPosition.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with the selected area removed&quot; title=&quot;Displaying a png image of Gigabit network switch icon with the selected area removed&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Double-click the left mouse button inside the image to create a selection 
rectangle the size of the currently displayed area of the image.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xv-double-click-select-whole-image-area.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with a selected rectangle the size of the currently displayed area of the image in xv(1)&quot; title=&quot;Displaying a png image of Gigabit network switch icon with a selected rectangle the size of the currently displayed area of the image in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Reduce the height of the selection area:  Hold the &amp;lt;Shift&amp;gt; key down 
while pressing the up arrow key on your keyboard until the Selection 
(in the Image Info window) is 77x12.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchReduceSelection.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with a reduced selected area in xv(1)&quot; title=&quot;Displaying a png image of Gigabit network switch icon with a reduced selected area in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchReduceSelectionImageInfo.png&quot; alt=&quot;Displaying a png image of xv&apos;s Image Info dialog box after a reduced area is selected in the Gigabit network switch icon&quot; title=&quot;Displaying a png image of xv&apos;s Image Info dialog box after a reduced area is selected in the Gigabit network switch icon&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Move the selection rectangle by holding the down arrow key until the 
Selection (in the Image Info window) is: 77x12 rectangle starting at 0,78.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchReduceSelectionPulledDown.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with the selected area in xv(1) moved down&quot; title=&quot;Displaying a png image of Gigabit network switch icon with the selected area in xv(1) moved down&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchReduceSelectionMovedImageInfo.png&quot; alt=&quot;Displaying a png image of xv&apos;s Image Info dialog box after the selected area in the Gigabit network switch icon has been moved down&quot; title=&quot;Displaying a png image of xv&apos;s Image Info dialog box after the selected area in the Gigabit network switch icon has been moved down&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Prepare for clearing the selected area: Set the current color by clicking the middle mouse button anywhere below the selection rectangle. After that, click &lt;strong&gt;Clear&lt;/strong&gt; button (keyboard equivalent: &lt;strong&gt;&amp;lt;Meta&amp;gt; d&lt;/strong&gt; (often &lt;strong&gt;Alt d&lt;/strong&gt; or &lt;strong&gt;Ctrl d&lt;/strong&gt;)).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xv-clear-button.png&quot; alt=&quot;Displaying a png image of xv&apos;s Clear button&quot; title=&quot;Displaying a png image of xv&apos;s Clear button&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchClearedSelected.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with the selected area in xv(1) cleared&quot; title=&quot;Displaying a png image of Gigabit network switch icon with the selected area in xv(1) cleared&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To remove the selection rectangle, click the mouse left button 
(anywhere in non-selected area) and release it without moving the mouse:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchCleared.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with the selected area in xv(1) removed&quot; title=&quot;Displaying a png image of Gigabit network switch icon with the selected area in xv(1) removed&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Double-click the left mouse button inside the image to create a selection 
rectangle the size of the currently displayed area of the image.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchPaddedBottom.png&quot; alt=&quot;Displaying a png image of Gigabit network switch icon with a selected rectangle the size of the currently displayed area of the image in xv(1)&quot; title=&quot;Displaying a png image of Gigabit network switch icon with a selected rectangle the size of the currently displayed area of the image in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Reduce the height of the selection area: Hold the &amp;lt;Shift&amp;gt; key down 
while pressing the up arrow key on your keyboard until the Selection 
(in the Image Info window) is 77x93.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/gigabitSwitchNewSizeImageInfo.png&quot; alt=&quot;Displaying a png image of xv&apos;s Image Info dialog box after the selected area in the Gigabit network switch icon is the size of the currently displayed area of the image in xv(1)&quot; title=&quot;Displaying a png image of xv&apos;s Image Info dialog box after the selected area in the Gigabit network switch icon is the size of the currently displayed area of the image in xv(1)&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Click the Save button.&lt;br /&gt;
In the xv Save window, in the ‘Save file:’ enter the file name (in this case, gigabitSwitch.png).&lt;br /&gt;
Click Ok. &lt;br /&gt;
In the “Save PNG file…” window, click Ok. &lt;br /&gt;
In the confirmation window ‘Overwrite existing file /path/to/gigabitSwitch.png’?, click Ok.&lt;br /&gt;
Click Quit.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Repeat for all other nodes that have their labels overlapping them.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;The resulting (beautified) graph:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/graphviz-plantuml-network-diagram-fixed-icons.png&quot; alt=&quot;Displaying a png image of a beutified computer network created by Grapvhiz from Kroki&amp;quot;)&quot; title=&quot;Displaying a beautified png image of a computer network created by Grapvhiz from Kroki&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;  &lt;br /&gt;
https://kroki.io/ &lt;br /&gt;
https://demo.kroki.io/ &lt;br /&gt;
https://kroki.io/examples.html &lt;br /&gt;
https://docs.kroki.io/kroki/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/install/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/manual-install/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/configuration/ &lt;br /&gt;
https://github.com/yuzutech/kroki &lt;br /&gt;
https://github.com/yuzutech/kroki/tree/main/server &lt;br /&gt;
https://docs.kroki.io/kroki/setup/http-clients/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/kroki-cli/ &lt;br /&gt;
https://github.com/yuzutech/kroki/tree/main/server &lt;br /&gt;
https://github.com/yuzutech/kroki/releases&lt;/p&gt;

&lt;p&gt;https://github.com/httpie&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/mgriffin/graphviz_network&quot;&gt;Mike Griffin’s GitHub repository&lt;/a&gt; contains the code used in his &lt;a href=&quot;https://mikegriffin.ie/blog/20110308-a-graphviz-tutorial&quot;&gt;graphviz tutorial blog post&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.cisco.com/web/about/ac50/ac47/2.html&quot;&gt;Cisco icons &lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Sat, 26 Feb 2022 09:02:33 -0800</pubDate>
        <link>http://localhost:4000/freebsd/howto/diagram/java/graph/graphviz/2022/02/26/freebsd-kroki-plantuml-graphviz-diagrams.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/howto/diagram/java/graph/graphviz/2022/02/26/freebsd-kroki-plantuml-graphviz-diagrams.html</guid>
        
        
        <category>freebsd</category>
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>java</category>
        
        <category>graph</category>
        
        <category>graphviz</category>
        
      </item>
    
      <item>
        <title>How to Run Kroki on FreeBSD 13 with Java</title>
        <description>&lt;p&gt;As per &lt;a href=&quot;https://github.com/yuzutech/kroki/tree/main/server&quot;&gt;Kroki server readme&lt;/a&gt;, 
under &lt;a href=&quot;https://github.com/yuzutech/kroki/tree/main/server#manual-install&quot;&gt;Manual install&lt;/a&gt;, 
install the following dependencies:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install openjdk8 graphviz erd svgbob
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As per &lt;a href=&quot;https://docs.kroki.io/kroki/setup/install/&quot;&gt;Install Kroki&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Manual installation&lt;/p&gt;

  &lt;p&gt;You can also make a customized manual installation that suits your needs.&lt;/p&gt;

  &lt;p&gt;To do this, you will need to manually install the Kroki gateway server 
as a standalone executable jar, install each diagram library that you 
want to use, then run the gateway server jar file.&lt;/p&gt;

  &lt;p&gt;You are responsible for managing diagram library installations on your system.&lt;/p&gt;

  &lt;p&gt;Find how to make a manual installation on the &lt;a href=&quot;https://docs.kroki.io/kroki/setup/manual-install/&quot;&gt;Manual installation&lt;/a&gt; page.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir -p ~/scratch/kroki-server
$ cd ~/scratch/kroki-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ pwd
/usr/home/dusko/scratch/kroki-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can download the latest standalone executable jar from the GitHub &lt;a href=&quot;https://github.com/yuzutech/kroki/releases&quot;&gt;releases page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;At the time of writing, &lt;a href=&quot;https://github.com/yuzutech/kroki/releases&quot;&gt;the latest version of Kroki is 0.16.0.&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Feb 25, 2022)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fetch \
 https://github.com/yuzutech/kroki/releases/download/v0.16.0/kroki-server-v0.16.0.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ file kroki-server-v0.16.0.jar
kroki-server-v0.16.0.jar: Java archive data (JAR)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Start a web server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java -jar kroki-server-v0.16.0.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above command starts the web server on port 8000. 
You can change the port using an environment variable, or a Java system property named KROKI_PORT.&lt;/p&gt;

&lt;p&gt;With a Web browser, open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:8000/&lt;/code&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;  &lt;br /&gt;
https://kroki.io/ &lt;br /&gt;
https://demo.kroki.io/ &lt;br /&gt;
https://kroki.io/examples.html &lt;br /&gt;
https://docs.kroki.io/kroki/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/install/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/manual-install/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/configuration/ &lt;br /&gt;
https://github.com/yuzutech/kroki &lt;br /&gt;
https://github.com/yuzutech/kroki/tree/main/server &lt;br /&gt;
https://docs.kroki.io/kroki/setup/http-clients/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/kroki-cli/ &lt;br /&gt;
https://github.com/yuzutech/kroki/tree/main/server &lt;br /&gt;
https://github.com/yuzutech/kroki/releases&lt;/p&gt;

&lt;p&gt;https://github.com/httpie&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Fri, 25 Feb 2022 21:15:24 -0800</pubDate>
        <link>http://localhost:4000/freebsd/howto/diagram/java/2022/02/25/freebsd-java-kroki-diagrams.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/howto/diagram/java/2022/02/25/freebsd-java-kroki-diagrams.html</guid>
        
        
        <category>freebsd</category>
        
        <category>howto</category>
        
        <category>diagram</category>
        
        <category>java</category>
        
      </item>
    
      <item>
        <title>How to Run Kroki on FreeBSD 13 with vm-bhyve and Debian GNU/Linux VM</title>
        <description>&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm list
Password:
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    512M    -    No         Stopped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm start debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm console debianvm1
---- snip ----

Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login: dusko
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo \
 systemctl \
 list-units \
 --type=service \
 --state=active \
 | grep docker
  docker-registry.service    loaded active running the Docker toolset to 
    pack, ship, store, and deliver content
  docker.service      loaded active running Docker Application Container Engine
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /etc/systemd/system/docker.service.d/
total 4.0K
-rw-r--r-- 1 root root 78 Feb 14 20:35 override.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/systemd/system/docker.service.d/override.conf
[Service]
ExecStart=
ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2376
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -an | grep 2376
tcp   LISTEN 0      4096      *:2376         *:*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ip -4 address | grep -inet | grep scope
2:  inet 127.0.0.1/8 scope host lo
5:  inet 192.168.8.19/24 brd 192.168.8.255 scope global enp0s5
7:  inet 192.168.8.18/24 brd 192.168.8.255 scope global secondary dynamic enp0s5
10: inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -an | grep 9000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 docker run -d -p 9000:9000 -v \
 /var/run/docker.sock:/var/run/docker.sock -v \
 portainer_data:/data portainer/portainer
3d6162208f6ec0a79b1c1956c9958f5bcf4d1d1217572ce1e0bd5769001e1cb6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -an | grep 9000
tcp   LISTEN 0      4096      0.0.0.0:9000             0.0.0.0:*
tcp   LISTEN 0      4096         [::]:9000                [::]:*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To exit the console (to drop the connection), press ~ + Ctrl-D at 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;debianvm1 login:&lt;/code&gt; prompt.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exit
logout

Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login: ~
[EOT]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ps $$
  PID TT  STAT    TIME COMMAND
24254  5  Ss   0:00.05 -csh (csh)

% printf %s\\n &quot;$SHELL&quot;
/bin/csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% set DOCKER_HOST=&quot;192.168.8.19&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &quot;$DOCKER_HOST&quot;
192.168.8.19
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -V docker
docker is /usr/local/bin/docker

% type docker
docker is /usr/local/bin/docker

% which docker
/usr/local/bin/docker

% whereis docker
docker: /usr/local/bin/docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 run hello-world
 
Hello from Docker!
This message shows that your installation appears to be working correctly.
 
To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 images
REPOSITORY           TAG      IMAGE ID      CREATED        SIZE
ubuntu               latest   54c9d81cbb44  4 weeks ago    72.8MB
hello-world          latest   feb5d9fea6a5  5 months ago   13.3kB
portainer/portainer  latest   580c0e4e98b0  11 months ago  79.1MB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 \
 run -d --name kroki -p 8080:8000 yuzutech/kroki
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Unable to find image &apos;yuzutech/kroki:latest&apos; locally
latest: Pulling from yuzutech/kroki
---- snip ----

Status: Downloaded newer image for yuzutech/kroki:latest
8b79ce7a6de16fc14b6ecf60d973527b0ec6df10be3b9bc7fe3ee890825622b2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm the availability of the new image:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 images
REPOSITORY           TAG      IMAGE ID      CREATED        SIZE
ubuntu               latest   54c9d81cbb44  4 weeks ago    72.8MB
yuzutech/kroki       latest   e58ce143c394  2 months ago   528MB
hello-world          latest   feb5d9fea6a5  5 months ago   13.3kB
portainer/portainer  latest   580c0e4e98b0  11 months ago  79.1MB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% netstat -an | grep $DOCKER_HOST
tcp4     0    0 192.168.8.1.57607   192.168.8.19.2376   TIME_WAIT

% nc -z -v $DOCKER_HOST 8080
Connection to 192.168.8.19 8080 port [tcp/http-alt] succeeded!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% lynx --dump &quot;$DOCKER_HOST&quot;:8080 | wc -l
    2525
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With a Web browser open:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://192.168.8.19:8080/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To test, from a Web browser open:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://192.168.8.19:8080/plantuml/svg/eNplj0FvwjAMhe_5FVZP40CgaNMuUGkcdttp3Kc0NS
Vq4lRxGNKm_fe1HULuuD37-bOfuXPUm2QChEjRnlIMCDmdUfHNSYY6xh42a9Fsegflk-yYlOLlcHK2I2
SGtX4WZm9sZ1o8uOzxxbuWAlIGj8cshs6M1jDuY2owyU2P8jAezdnn10j53X0hlBsZFW021Pq7HaVSNw
-KN-OogG8F8BAGqT8dXhZjxW4cyJEW6kcC-yHWFagHqW0MfaThhYmaVyE26P_x27qaDmXeruqqAMMw1h
-ZlRI4aF3dX7hOwm5XzfIKDctlNcshPT1tFa8JPYAj-Zf5F065sqM=
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example obtained from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://kroki.io/&lt;/code&gt;, 
under Examples section.&lt;/p&gt;

&lt;p&gt;More examples available from:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://kroki.io/examples.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v python

% command -v python3.8
/usr/local/bin/python3.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is an example from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://docs.kroki.io/kroki/setup/usage/&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vi hello.dot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.dot
digraph G {
  Hello-&amp;gt;World
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hello.dot | \
 python3.8 -c \
 &quot;import sys; import base64; import zlib; \
 print(base64.urlsafe_b64encode(zlib.\
 compress(sys.stdin.read().\
 encode(&apos;utf-8&apos;), 9)).\
 decode(&apos;ascii&apos;))&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;eNpLyUwvSizIUHBXqOZSUPBIzcnJ17ULzy_KSeGq5QIAjfEJJA==
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy and paste it into the web browser.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://192.168.8.19:8080/graphviz/svg/eNpLyUwvSizIUHBXqOZSUPBIzcnJ17ULzy_KSeGq5Q
IAjfEJJA==
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result will be an image in SVG format.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% curl \
 http://192.168.8.19:8080/graphviz/svg \
 --data-raw \
 &apos;digraph G {Hello-&amp;gt;World}&apos; &amp;gt; \
 hello.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% rsvg-convert hello.svg &amp;gt; hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv hello.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;  &lt;br /&gt;
https://kroki.io/ &lt;br /&gt;
https://demo.kroki.io/ &lt;br /&gt;
https://kroki.io/examples.html &lt;br /&gt;
https://docs.kroki.io/kroki/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/install/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/manual-install/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/configuration/ &lt;br /&gt;
https://github.com/yuzutech/kroki &lt;br /&gt;
https://github.com/yuzutech/kroki/tree/main/server &lt;br /&gt;
https://docs.kroki.io/kroki/setup/http-clients/ &lt;br /&gt;
https://docs.kroki.io/kroki/setup/kroki-cli/ &lt;br /&gt;
https://github.com/yuzutech/kroki/tree/main/server &lt;br /&gt;
https://github.com/yuzutech/kroki/releases&lt;/p&gt;

&lt;p&gt;https://github.com/httpie&lt;/p&gt;

</description>
        <pubDate>Thu, 24 Feb 2022 19:47:13 -0800</pubDate>
        <link>http://localhost:4000/freebsd/docker/vm/virtualization/howto/diagram/2022/02/24/freebsd-docker-linux-kroki-diagrams.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/docker/vm/virtualization/howto/diagram/2022/02/24/freebsd-docker-linux-kroki-diagrams.html</guid>
        
        
        <category>freebsd</category>
        
        <category>docker</category>
        
        <category>vm</category>
        
        <category>virtualization</category>
        
        <category>howto</category>
        
        <category>diagram</category>
        
      </item>
    
      <item>
        <title>Dotfiles</title>
        <description>&lt;p&gt;OS: FreeBSD 13   &lt;br /&gt;
Shell: csh&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /etc/rc.conf
zfs_enable=&quot;YES&quot;
dumpdev=&quot;AUTO&quot;
powerd_enable=&quot;YES&quot;
ifconfig_ue0=&quot;DHCP&quot;
defaultrouter=&quot;192.168.1.254&quot;
kld_list=&quot;i915kms&quot;
hostname=&quot;fbsd1.home.arpa&quot;
vm_enable=&quot;YES&quot;
vm_dir=&quot;zfs:zroot/vm&quot;
pf_enable=&quot;YES&quot;
gateway_enable=&quot;YES&quot;
dnsmasq_enable=&quot;YES&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /etc/rc.conf.wireless
zfs_enable=&quot;YES&quot;
dumpdev=&quot;AUTO&quot;
powerd_enable=&quot;YES&quot;
ifconfig_ue0=&quot;DHCP&quot;
defaultrouter=&quot;192.168.1.254&quot;
kld_list=&quot;i915kms&quot;
hostname=&quot;fbsd1.home.arpa&quot;
vm_enable=&quot;YES&quot;
vm_dir=&quot;zfs:zroot/vm&quot;
pf_enable=&quot;YES&quot;
gateway_enable=&quot;YES&quot;
dnsmasq_enable=&quot;YES&quot;
wlans_iwm0=&quot;wlan0&quot;
ifconfig_wlan0=&quot;wpa DHCP&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;x11-aka-x-window-system---my-dotfiles&quot;&gt;X11 aka X Window System - My Dotfiles&lt;/h2&gt;

&lt;p&gt;From the man page for X(7):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The X.Org Foundation requests that the following names be used when
referring to this software:

                                   X
                            X Window System
                             X Version 11
                      X Window System, Version 11
                                  X11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;x11-global-settings&quot;&gt;X11 Global Settings&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n Path /var/log/Xorg.0.log
28:[1065569.793] (==) FontPath set to:
36:[1065569.793] (==) ModulePath set to &quot;/usr/local/lib/xorg/modules&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n FontPath /var/log/Xorg.0.log
28:[1065569.793] (==) FontPath set to:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 28,35p /var/log/Xorg.0.log
[1065569.793] (==) FontPath set to:
        /usr/local/share/fonts/misc/,
        /usr/local/share/fonts/TTF/,
        /usr/local/share/fonts/OTF/,
        /usr/local/share/fonts/Type1/,
        /usr/local/share/fonts/100dpi/,
        /usr/local/share/fonts/75dpi/,
        catalogue:/usr/local/etc/X11/fontpath.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n ModulePath /var/log/Xorg.0.log
36:[1065569.793] (==) ModulePath set to &quot;/usr/local/lib/xorg/modules&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;directory--usrlocaletcx11&quot;&gt;Directory:  /usr/local/etc/X11/&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/X11/ | wc -l
       6
 
% ls -lh /usr/local/etc/X11/ | wc -l
       4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/
total 2
drwxr-xr-x  2 root  wheel     4B Oct 18  2021 fontpath.d
drwxr-xr-x  3 root  wheel     4B Aug 17  2021 xinit
drwxr-xr-x  2 root  wheel     6B Jan  4  2022 xorg.conf.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/X11/fontpath.d/ | wc -l
       5
 
% ls -lh /usr/local/etc/X11/fontpath.d/ | wc -l
       3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/fontpath.d/ 
total 1
lrwxr-xr-x  1 root  wheel    27B Sep 25  2021 ipamjm:pri=60 -&amp;gt; ../../../share/fonts/ipamjm
lrwxr-xr-x  1 root  wheel    29B Jul 25  2021 vlgothic:pri=60 -&amp;gt; ../../../share/fonts/vlgothic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/X11/xinit/ | wc -l
       5
 
% ls -lh /usr/local/etc/X11/xinit/ | wc -l
       3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/xinit/ 
total 5
-rw-r--r--  1 root  wheel   780B Jul 24  2021 xinitrc
drwxr-xr-x  2 root  wheel     3B Feb  3 11:03 xinitrc.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l /usr/local/etc/X11/xinit/xinitrc
      56 /usr/local/etc/X11/xinit/xinitrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed &apos;/^[[:space:]]*$/d&apos; /usr/local/etc/X11/xinit/xinitrc | grep -v \# | wc -l
      27
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed &apos;/^[[:space:]]*$/d&apos; /usr/local/etc/X11/xinit/xinitrc | grep -v \#
userresources=$HOME/.Xresources
usermodmap=$HOME/.Xmodmap
sysresources=/usr/local/etc/X11/xinit/.Xresources
sysmodmap=/usr/local/etc/X11/xinit/.Xmodmap
if [ -f $sysresources ]; then
    xrdb -merge $sysresources
fi
if [ -f $sysmodmap ]; then
    xmodmap $sysmodmap
fi
if [ -f &quot;$userresources&quot; ]; then
    xrdb -merge &quot;$userresources&quot;
fi
if [ -f &quot;$usermodmap&quot; ]; then
    xmodmap &quot;$usermodmap&quot;
fi
if [ -d /usr/local/etc/X11/xinit/xinitrc.d ] ; then
        for f in /usr/local/etc/X11/xinit/xinitrc.d/?*.sh ; do
                [ -x &quot;$f&quot; ] &amp;amp;&amp;amp; . &quot;$f&quot;
        done
        unset f
fi
twm &amp;amp;
xclock -geometry 50x50-1+1 &amp;amp;
xterm -geometry 80x50+494+51 &amp;amp;
xterm -geometry 80x20+494-0 &amp;amp;
exec xterm -geometry 80x66+0+0 -name login
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/xinit/.Xmodmap
ls: /usr/local/etc/X11/xinit/.Xmodmap: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /usr/local/etc/X11/xinit/xinitrc.d
drwxr-xr-x  2 root  wheel  3 Feb  3 11:03 /usr/local/etc/X11/xinit/xinitrc.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/X11/xinit/xinitrc.d/ | wc -l
       4

% ls -lh /usr/local/etc/X11/xinit/xinitrc.d/ | wc -l
       2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/xinit/xinitrc.d/
total 5
-r-xr-xr-x  1 root  wheel   1.0K Jan 29  2022 90-consolekit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;directory--usrlocalsharex11&quot;&gt;Directory:  /usr/local/share/X11/&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/share/X11/ | wc -l
       7
 
% ls -lh /usr/local/share/X11/ | wc -l
       5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/etc/X11/xorg.conf.d/ | wc -l
       7

% ls -lh /usr/local/etc/X11/xorg.conf.d/ | wc -l
       5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/xorg.conf.d/ 
total 14
-rw-r--r--  1 root  wheel   404B Jan  4  2022 card.conf
-rw-r--r--  1 root  wheel   140B Jan  4  2022 layout.conf
-rw-r--r--  1 root  wheel    48B Aug 18  2021 modules.conf
-rw-r--r--  1 root  wheel   1.0K Jan  4  2022 monitors.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/share/X11/ 
total 18
drwxr-xr-x  2 root  wheel    18B Sep 16  2021 app-defaults
drwxr-xr-x  2 root  wheel     3B Aug 17  2021 twm
drwxr-xr-x  8 root  wheel     9B Feb  3 11:02 xkb
drwxr-xr-x  2 root  wheel     5B Feb  3 11:03 xorg.conf.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /usr/local/share/X11/xorg.conf.d/ | wc -l
       6
 
% ls -lh /usr/local/share/X11/xorg.conf.d/ | wc -l
       4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/share/X11/xorg.conf.d/ 
total 14
-rw-r--r--  1 root  wheel   1.3K Jan 26  2022 10-quirks.conf
-rw-r--r--  1 root  wheel   152B Jan 26  2022 20-evdev-kbd.conf
-rw-r--r--  1 root  wheel   1.4K Aug 13  2021 40-libinput.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;directory--usrlocaletcfonts&quot;&gt;Directory:  /usr/local/etc/fonts/&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /usr/local/etc/fonts/
drwxr-xr-x  4 root  wheel  7 Feb  3  2022 /usr/local/etc/fonts/

% ls -alh /usr/local/etc/fonts/ | wc -l
       8

% ls -lh /usr/local/etc/fonts/ | wc -l
       6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/fonts/
total 79
drwxr-xr-x  2 root  wheel    51B Feb  3  2022 conf.avail
drwxr-xr-x  2 root  wheel    33B Feb  3  2022 conf.d
-rw-r--r--  1 root  wheel   2.6K Jan 21  2022 fonts.conf
-rw-r--r--  1 root  wheel   2.6K Jan 21  2022 fonts.conf.sample
-rw-r--r--  1 root  wheel   8.1K Dec  3  2020 fonts.dtd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;x11-user-settings&quot;&gt;X11 User Settings&lt;/h3&gt;

&lt;p&gt;In my home directory:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls ~/.xinitrc
/home/dusko/.xinitrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a symlink from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.xinitrc&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.xsession&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ln -s ~/.xinitrc ~/.xsession
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file ~/.xsession
/home/dusko/.xsession: symbolic link to /home/dusko/.xinitrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh $HOME/.Xresources
-rw-r--r--  1 dusko  dusko   5.2K Jan 26 11:44 /home/dusko/.Xresources
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh $HOME/.Xmodmap
ls: /home/dusko/.Xmodmap: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/X11/xinit/.Xresources
ls: /usr/local/etc/X11/xinit/.Xresources: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;xset1---user-preference-utility-for-x&quot;&gt;xset(1) - User Preference Utility for X&lt;/h3&gt;

&lt;p&gt;For status information:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset -q | wc -l
      27

% xset q | wc -l
      27
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset -q 
Keyboard Control:
  auto repeat:  on    key click percent:  0    LED mask:  00000000
  XKB indicators:
    00: Caps Lock:   off    01: Num Lock:    off    02: Scroll Lock: off
    03: Compose:     off    04: Kana:        off    05: Sleep:       off
    06: Suspend:     off    07: Mute:        off    08: Misc:        off
    09: Mail:        off    10: Charging:    off    11: Shift Lock:  off
    12: Group 2:     off    13: Mouse Keys:  off
  auto repeat delay:  660    repeat rate:  25
  auto repeating keys:  00ffffffdffffbbf
                        fadfffefffedffff
                        9fffffffffffffff
                        fff7ffffffffffff
  bell percent:  0    bell pitch:  400    bell duration:  100
Pointer Control:
  acceleration:  2/1    threshold:  4
Screen Saver:
  prefer blanking:  yes    allow exposures:  yes
  timeout:  600    cycle:  600
Colors:
  default colormap:  0x22    BlackPixel:  0x0    WhitePixel:  0xffffff
Font Path:
  /usr/local/share/fonts/misc/,/usr/local/share/fonts/TTF/,/usr/local/share/fonts/OTF/,/usr/local/share/fonts/Type1/,/usr/local/share/fonts/100dpi/,/usr/local/share/fonts/75dpi/,catalogue:/usr/local/etc/X11/fontpath.d,built-ins,/usr/local/share/fonts/100dpi,/usr/local/share/fonts/75dpi,/usr/local/share/fonts/adobe-cmaps,/usr/local/share/fonts/bitstream-vera,/usr/local/share/fonts/Caladea,/usr/local/share/fonts/cantarell,/usr/local/share/fonts/Carlito,/usr/local/share/fonts/ChromeOS,/usr/local/share/fonts/comic-neue,/usr/local/share/fonts/cyrillic,/usr/local/share/fonts/dejavu,/usr/local/share/fonts/GentiumBasic,/usr/local/share/fonts/gnu-unifont,/usr/local/share/fonts/ipamjm,/usr/local/share/fonts/jmk-x11-fonts,/usr/local/share/fonts/Liberation,/usr/local/share/fonts/LinLibertineG,/usr/local/share/fonts/misc,/usr/local/share/fonts/Monoid,/usr/local/share/fonts/nanum-coding-ttf,/usr/local/share/fonts/nanum-ttf,/usr/local/share/fonts/noto,/usr/local/share/fonts/OTF,/usr/local/share/fonts/SourceCodePro,/usr/local/share/fonts/SourceHanSans,/usr/local/share/fonts/SourceHanSansK,/usr/local/share/fonts/SourceHanSansSC,/usr/local/share/fonts/SourceHanSansTC,/usr/local/share/fonts/SourceSansPro,/usr/local/share/fonts/symbola,/usr/local/share/fonts/terminus-font,/usr/local/share/fonts/TerminusTTF,/usr/local/share/fonts/TTF,/usr/local/share/fonts/twemoji-color-font-ttf,/usr/local/share/fonts/Type1,/usr/local/share/fonts/uw-ttyp0,/usr/local/share/fonts/vlgothic,/usr/local/share/fonts/wqy,/usr/home/dusko/.fonts/knxt
DPMS (Energy Star):
  Standby: 600    Suspend: 600    Off: 600
  DPMS is Enabled
  Monitor is On
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;starting-x&quot;&gt;Starting X&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exec startx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exec xinit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;mutt---my-dotfiles&quot;&gt;Mutt - My Dotfiles&lt;/h2&gt;

&lt;h3 id=&quot;mutt-mua-mail-user-agent&quot;&gt;Mutt MUA (Mail User Agent)*&lt;/h3&gt;

&lt;p&gt;[*] aka Email Client or Mail Reader&lt;/p&gt;

&lt;p&gt;Starting mutt with my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttrc&lt;/code&gt; configuration file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mutt -F /mnt/usbflashdrive/mydotfiles/mutt-imap/.muttrc.example.com.imap
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note 1:&lt;/strong&gt;  &lt;br /&gt;
Per these excerpts from the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttrc&lt;/code&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;set mailcap_path = /mnt/usbflashdrive/mydotfiles/mutt-common-files/mailcap

set alias_file = /mnt/usbflashdrive/mydotfiles/mutt-common-files/muttaliases
source /mnt/usbflashdrive/mydotfiles/mutt-common-files/muttaliases

set query_command=&quot;/mnt/usbflashdrive/mydotfiles/mutt-common-files/muttldap.pl %s&quot;

macro index \el &quot;!/mnt/usbflashdrive/mydotfiles/mutt-common-files/muttalias.sh&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you’ll need the following additional files: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.muttrc.example.com.imap&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttaliases&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttldap.pl&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttalias.sh&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mailcap&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The content of those files for download (you’ll need to adjust them for your environment):&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.muttrc.example.com.imap&lt;/code&gt; file:  &lt;a href=&quot;http://localhost:4000/assets/txt/dot.muttrc&quot;&gt;.muttrc.example.com.imap&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttaliases&lt;/code&gt; file: &lt;a href=&quot;http://localhost:4000/assets/txt/muttaliases&quot;&gt;muttaliases&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttldap.pl&lt;/code&gt; file: &lt;a href=&quot;http://localhost:4000/assets/txt/muttldap.pl&quot;&gt;muttldap.pl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttalias.sh&lt;/code&gt; file: &lt;a href=&quot;http://localhost:4000/assets/txt/muttalias.sh&quot;&gt;muttalias.sh&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mailcap&lt;/code&gt; file: &lt;a href=&quot;http://localhost:4000/assets/txt/mailcap&quot;&gt;mailcap&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note 2:&lt;/strong&gt;  &lt;br /&gt;
As per another excerpt from the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttrc&lt;/code&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;set header_cache = /mnt/usbflashdrive/muttcache/example.com.dusko/cache
set message_cachedir = /mnt/usbflashdrive/muttcache/example.com.dusko/cache/bodies
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you’ll need to create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttcache&lt;/code&gt; directory structure.&lt;/p&gt;

&lt;p&gt;In my case:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mkdir -p /mnt/usbflashdrive/muttcache/example.com.dusko/cache/bodies
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which creates four directories inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive&lt;/code&gt; directory:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/muttcache/&lt;/code&gt; &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/muttcache/example.com.dusko/&lt;/code&gt;  &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/muttcache/example.com.dusko/cache&lt;/code&gt; &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/muttcache/example.com.dusko/cache/bodies&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note 3:&lt;/strong&gt;  &lt;br /&gt;
Message bodies are in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bodies&lt;/code&gt; &lt;strong&gt;directory&lt;/strong&gt;:   &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/muttcache/example.com.dusko/cache/bodies&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Message headers are in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;headers&lt;/code&gt; &lt;strong&gt;file&lt;/strong&gt;:   &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/muttcache/example.com.dusko/cache/headers&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note 4:&lt;/strong&gt;  &lt;br /&gt;
As of time of this writing, I’m not using 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/mnt/usbflashdrive/mydotfiles/mutt-common-files/gpg.rc&lt;/code&gt; so I’m not listing its content.&lt;/p&gt;

&lt;hr /&gt;

</description>
        <pubDate>Wed, 23 Feb 2022 18:14:33 -0800</pubDate>
        <link>http://localhost:4000/dotfiles/freebsd/2022/02/23/dotfiles-freebsd.html</link>
        <guid isPermaLink="true">http://localhost:4000/dotfiles/freebsd/2022/02/23/dotfiles-freebsd.html</guid>
        
        
        <category>dotfiles</category>
        
        <category>freebsd</category>
        
      </item>
    
      <item>
        <title>Displaying Things in a Terminal</title>
        <description>&lt;p&gt;OS:     FreeBSD 13&lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% freebsd-version
13.0-RELEASE-p5

% ps $$
  PID TT  STAT    TIME COMMAND
23662  3  Ss   0:00.14 -csh (csh)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;quick-cli-overview-of-opentype-features-for-a-font&quot;&gt;Quick CLI Overview of OpenType Features for a Font&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install harfbuzz harfbuzz-hb-view harfbuzz-icu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg search imagemagick
ImageMagick6-6.9.12.34,1       Image processing tools (legacy version)
ImageMagick6-nox11-6.9.12.34,1 Image processing tools (legacy version)
ImageMagick7-7.1.0.19          Image processing tools
ImageMagick7-nox11-7.1.0.19    Image processing tools
fpc-imagemagick-3.2.2          Free Pascal interface to ImageMagick
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install imagemagick7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Updating FreeBSD repository catalogue...
FreeBSD repository is up to date.
All repositories are up to date.
The following 9 package(s) will be affected (of 0 checked):

New packages to be INSTALLED:
        ImageMagick7: 7.1.0.19
        ghostscript9-agpl-x11: 9.52
        gsfonts: 8.11_8
        liblqr-1: 0.4.2
        libraqm: 0.7.1
        libraw: 0.20.2_2
        libwmf: 0.2.12
        libzip: 1.7.3
        pkgconf: 1.8.0,1
---- snip ----

=====
Message from liblqr-1-0.4.2:

--
NOTE: In order to compile examples for liblqr, you will
also need pngwriter port (/usr/ports/graphics/pngwriter).
Examples are located in /usr/local/share/examples/liblqr-1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install pngwriter
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install kitty
---- snip ----
New packages to be INSTALLED:
        kitty: 0.23.1_1
        ncurses: 6.3
---- snip ----
=====
Message from ncurses-6.3:

--
To get the terminfo database please install the terminfo-db package:
pkg install terminfo-db
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install terminfo-db
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% locate .otf | wc -l
     987
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% locate -i &quot;.otf&quot; | tail -3
/usr/local/share/texmf-dist/fonts/opentype/public/xcharter/XCharter-BoldItalic.otf
/usr/local/share/texmf-dist/fonts/opentype/public/xcharter/XCharter-Italic.otf
/usr/local/share/texmf-dist/fonts/opentype/public/xcharter/XCharter-Roman.otf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i \
/usr/local/share/texmf-dist/fonts/opentype/public/xcharter/XCharter-Roman.otf \
/tmp/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% otfinfo --features /tmp/XCharter-Roman.otf 
c2sc    Small Capitals From Capitals
cpsp    Capital Spacing
kern    Kerning
liga    Standard Ligatures
lnum    Lining Figures
onum    Oldstyle Figures
smcp    Small Capitals
sups    Superscript
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v hb-view
/usr/local/bin/hb-view
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Based on 
&lt;a href=&quot;https://twitter.com/thingskatedid/status/1316074032379248640&quot;&gt;💡FAQ about displaying stuff in a terminal&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/thingskatedid/status/1288688482920013825&quot;&gt;Quick CLI overview of opentype features for a font you might use, 
without going to the trouble of installing it&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vi hb-feat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat hb-feat
#!/bin/sh

hb-view --features=&quot;$2&quot; -O svg $1 $3 | grep -v &apos;&amp;lt;rect&apos; | \
  sed &apos;s/&amp;lt;g style=&quot;fill:rgb(0%,0%,0%);fill-opacity:1;&quot;&amp;gt;/ \
  &amp;lt;g style=&quot;fill:#eeeeee&quot;&amp;gt;/&apos; | rsvg-convert | \
  convert -trim -resize &apos;25%&apos; - - | kitty icat --align=left
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% chmod 0744 hb-feat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Location where I keep my helper binaries, useful tools and scripts:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /mnt/usbflashdrive/bin/
drwxr-xr-x  7 dusko  dusko  512 Feb  6 12:24 /mnt/usbflashdrive/bin/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mv hb-feat /mnt/usbflashdrive/bin/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Launch an instance of kitty terminal emulator.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% kitty
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In kitty terminal emulator:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% /mnt/usbflashdrive/bin/hb-feat /tmp/XCharter-Roman.otf +smcp,+onum &apos;Test&apos;
% /mnt/usbflashdrive/bin/hb-feat /tmp/XCharter-Roman.otf -smcp,-onum &apos;Test&apos;
% /mnt/usbflashdrive/bin/hb-feat /tmp/XCharter-Roman.otf +liga,+sups &apos;a2&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output showing images of font preview:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/hb-view-font.png&quot; alt=&quot;Quick CLI Overview of OpenType Features for a Font - small capitals and oldstyle figures&quot; title=&quot;Quick CLI Overview of OpenType Features for a Font - small capitals and oldstyle figures&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/hb-view-font-superscript.png&quot; alt=&quot;Quick CLI Overview of OpenType Features for a Font - standard ligatures and superscript&quot; title=&quot;Quick CLI Overview of OpenType Features for a Font - standard ligatures and superscript&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Exit kitty terminal emulator.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;sixel-for-terminal-graphics&quot;&gt;Sixel for Terminal Graphics&lt;/h3&gt;

&lt;p&gt;Xterm has supported graphical output for decades. It has a Tektronix 4014 mode. 
XTerm also supports Sixel (raster) and ReGIS (vector) graphics in the main window.&lt;/p&gt;

&lt;p&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pkg-query(8)&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;%O[kvdD]
    Expands to the list of options of the matched package, where k stands
    for option key, v for option value, d for option default value and D
    for option description.  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List all options (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%Ov&lt;/code&gt;) for the xterm package and whether they have been 
changed from their default values (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%Od&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg query %Ok-%Ov-%Od xterm
256COLOR-on-on
DABBREV-off-off
DECTERM-off-off
GNOME-off-off
LOGGING-off-off
LUIT-on-on
NEXTAW-off-off
PCRE2-off-off
REGIS-off-off
SCRNDUMP-off-off
SIXEL-on-on
TOOLBAR-off-off
WCHAR-on-on
XAW-on-on
XAW3D-off-off
XAW3DXFT-off-off
XINERAMA-off-off
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The SIXEL option is &lt;em&gt;on&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;XTerm terminal emulator supports sixel. You need to run it by setting the 
terminal identifier to a sixel capable terminal; for example, VT340.&lt;/p&gt;

&lt;p&gt;Reference:&lt;br /&gt;
&lt;a href=&quot;https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h3-Sixel-Graphics&quot;&gt;Sixel Graphics - XTerm Control Sequences - XTerm Documentation&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Feb 20, 2022)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xterm -ti vt340
% cd /tmp
% fetch \ 
 https://raw.githubusercontent.com/saitoha/libsixel/master/images/snake.six
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /tmp/snake.six    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/xterm-sixel-cat-snake.png&quot; alt=&quot;cat command output in xterm with sixel support&amp;quot;) &quot; title=&quot;cat command output in xterm with sixel support&quot; /&gt;&lt;/p&gt;

&lt;p&gt;References:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/thingskatedid/status/1316074032379248640&quot;&gt;FAQ about displaying stuff in a terminal&lt;/a&gt;&lt;br /&gt;
(Retrieved on Feb 20, 2002)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://konfou.xyz/posts/sixel-for-terminal-graphics/&quot;&gt;sixel for terminal graphics&lt;/a&gt; &lt;br /&gt;
(Retrieved on Feb 20, 2022)&lt;/p&gt;

</description>
        <pubDate>Sun, 20 Feb 2022 09:12:22 -0800</pubDate>
        <link>http://localhost:4000/font/x11/xorg/cli/terminal/xterm/2022/02/20/displaying-things-in-a-terminal.html</link>
        <guid isPermaLink="true">http://localhost:4000/font/x11/xorg/cli/terminal/xterm/2022/02/20/displaying-things-in-a-terminal.html</guid>
        
        
        <category>font</category>
        
        <category>x11</category>
        
        <category>xorg</category>
        
        <category>cli</category>
        
        <category>terminal</category>
        
        <category>xterm</category>
        
      </item>
    
      <item>
        <title>Sendmail Autoreply Vacation Messages (a.k.a. OOO) for an Alias</title>
        <description>&lt;p&gt;a.k.a.: Auto respond from an alias&lt;/p&gt;

&lt;p&gt;Note:  OOO = Out Of Office&lt;/p&gt;

&lt;p&gt;OS:  Red Hat Enterprise Linux Server release 6.8 (Santiago) 64-bit&lt;br /&gt;
Sendmail version:  8.14.4&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sendmail -d0.1
Version 8.14.4
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the mail server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep dusko /etc/passwd
dusko:x:1001:1001:FName Lname:/home/dusko:/bin/csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sendmail -bv myalias
myalias... User unknown
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;myalias: dusko&quot; &amp;gt;&amp;gt; /etc/aliases
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep dusko /etc/aliases
dusko: myalias
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -ld /home/dusko/
drwx------. 15 dusko mail 4096 Dec  7 11:27 /home/dusko/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ls -lh /etc/aliases.db
-rw-r--r--. 1 root root 84K Feb 15 20:16 /etc/aliases.db

# date
Sat Feb 19 21:36:28 PST 2022

# newaliases
/etc/aliases: 572 aliases, longest 60 bytes, 25488 bytes total

# ls -lh /etc/aliases.db
-rw-r--r--. 1 root root 84K Feb 19 21:36 /etc/aliases.db
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sendmail -bv myalias
dusko... deliverable: mailer local, user dusko 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The vacation program automatically replies to incoming mail. 
The reply is contained in the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.vacation.msg&lt;/code&gt; in your home directory.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.vacation.msg&lt;/code&gt; file should include a header with at least 
a ‘Subject:’ line (it should not contain a ‘To:’ line and need not contain 
a ‘From:’ line since these are generated automatically).  If the string 
&lt;strong&gt;$SUBJECT&lt;/strong&gt; appears in the .vacation.msg file, it is replaced with the 
subject of the original message when the reply is sent.&lt;/p&gt;

&lt;p&gt;In summary, it should have a “Subject:” line, possibly along with other 
headers that you want, followed by a blank line, followed by the message body.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /home/dusko/.vacation.msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /home/dusko/.vacation.msg
Subject: Re: $SUBJECT
From: AliasFName AliasLName &amp;lt;myalias@yourdomainhere.com&amp;gt;

I have received your email and it will be replied to as soon as possible.

--dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /home/dusko/.forward 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /home/dusko/.forward 
\dusko, &quot;|/usr/bin/vacation -a myalias dusko&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vacation -j -a myalias -i dusko 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chown dusko:mail /home/dusko/.vacation.msg
# chown dusko:mail /home/dusko/.forward
# chown dusko:mail /home/dusko/.vacation.db
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A list of senders is kept in the file .vacation.db in your home directory.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sendmail -bv myalias
&quot;|/usr/bin/vacation -a myalias dusko&quot;... deliverable: mailer prog, 
  user &quot;|/usr/bin/vacation -a myalias dusko&quot;
\dusko... deliverable: mailer local, user \dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sendmail -bv myalias@yourdomainhere.com
&quot;|/usr/bin/vacation -a myalias dusko&quot;... deliverable: mailer prog, 
  user &quot;|/usr/bin/vacation -a myalias dusko&quot;
\dusko... deliverable: mailer local, user \dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# su - dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;Testing.&quot; | mail -s &quot;Test 1&quot; myalias@yourdomainhere.com
$ printf %s\\n &quot;Testing.&quot; | mail -s &quot;Test 2&quot; dusko@yourdomainhere.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To stop vacation message, remove the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.forward&lt;/code&gt; file and the response 
database file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.vacation.db&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rm -i ~/.forward 
rm -i ~/.vacation.db
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Sat, 19 Feb 2022 17:41:01 -0800</pubDate>
        <link>http://localhost:4000/sendmail/mailserver/email/howto/2022/02/19/sendmail-alias-vacation-message.html</link>
        <guid isPermaLink="true">http://localhost:4000/sendmail/mailserver/email/howto/2022/02/19/sendmail-alias-vacation-message.html</guid>
        
        
        <category>sendmail</category>
        
        <category>mailserver</category>
        
        <category>email</category>
        
        <category>howto</category>
        
      </item>
    
      <item>
        <title>How to Run Docker on FreeBSD 13 with vm-bhyve and Debian GNU/Linux VM</title>
        <description>&lt;h3 id=&quot;jails-vs-docker&quot;&gt;Jails vs Docker&lt;/h3&gt;

&lt;p&gt;This post doesn’t discuss jails vs Docker.  In general, if you need to 
segregate a set of processes with containers, you would use jails. 
If your requirements ask for Docker, continue reading.&lt;/p&gt;

&lt;p&gt;Host OS: FreeBSD 13.0&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    2048M   -    No         Stopped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm start debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    512M    -    No         Running (29103)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo vm console debianvm1
Connected

debianvm1 login: dusko
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo apt-get remove docker
$ sudo apt-get remove docker-engine
$ sudo apt-get remove docker.io
$ sudo apt-get remove containerd
$ sudo apt-get remove runc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 apt-get install \
 ca-certificates \
 curl \
 gnupg \
 lsb-release
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ curl -fsSL https://download.docker.com/linux/debian/gpg \
 | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ echo \
 &quot;deb [arch=$(dpkg --print-architecture) \
 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] \
 https://download.docker.com/linux/debian \
 $(lsb_release -cs) stable&quot; \
 | sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo apt-get update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 apt-get install \
 docker-ce docker-ce-cli containerd.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo docker run hello-world
Unable to find image &apos;hello-world:latest&apos; locally
latest: Pulling from library/hello-world
2db29710123e: Pull complete
Digest: sha256:97a379f4f88575512824f3b352bc03cd75e239179eea0fecc38e597b2209f49a
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo docker volume create portainer_data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl status docker.service
* docker.service - Docker Application Container Engine
     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset:enabled)
---- snip ----
   Main PID: 2512 (dockerd)
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl status containerd.service
* containerd.service - containerd container runtime
     Loaded: loaded (/lib/systemd/system/containerd.service; enabled; vendor preset: enabled)
---- snip ----
   Main PID: 2355 (containerd)
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls -lh /etc/systemd/system/docker.service.d
ls: cannot access &apos;/etc/systemd/system/docker.service.d&apos;: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo mkdir /etc/systemd/system/docker.service.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl edit docker.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This opens GNU nano text editor. 
Add the following three lines, save and exit.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Service]
ExecStart=
ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2376
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Confirm that the file override.conf has been created.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /etc/systemd/system/docker.service.d/override.conf
[Service]
ExecStart=
ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2376
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl daemon-reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo systemctl restart docker.service
$ sudo systemctl restart containerd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -an | grep 2376
tcp   LISTEN 0      4096         *:2376                   *
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo ls -lh /var/lib/docker
total 44K
drwx--x--x  4 root root 4.0K Feb 13 20:16 buildkit
drwx--x---  4 root root 4.0K Feb 13 20:23 containers
drwx------  3 root root 4.0K Feb 13 20:16 image
drwxr-x---  3 root root 4.0K Feb 13 20:16 network
drwx--x--- 11 root root 4.0K Feb 13 20:39 overlay2
drwx------  4 root root 4.0K Feb 13 20:16 plugins
drwx------  2 root root 4.0K Feb 13 20:39 runtimes
drwx------  2 root root 4.0K Feb 13 20:16 swarm
drwx------  2 root root 4.0K Feb 13 20:39 tmp
drwx------  2 root root 4.0K Feb 13 20:16 trust
drwx-----x  3 root root 4.0K Feb 13 20:39 volumes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 docker run -d -p 9000:9000 -v \
 /var/run/docker.sock:/var/run/docker.sock -v \
 portainer_data:/data portainer/portainer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ss -an | grep 9000
tcp   LISTEN 0      4096     0.0.0.0:9000         0.0.0.0:*
tcp   LISTEN 0      4096        [::]:9000            [::]:*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nc -n -z -v &amp;lt;guest_ip_address&amp;gt; 9000
(UNKNOWN) [guest_ip_address] 2376 (?) open 9000 (?) open
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For example, if your guest VM’s IP address is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;203.0.113.1&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nc -n -z -v 203.0.113.1 9000
(UNKNOWN) [203.0.113.1] 9000 (?) open
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nc -z -v 127.0.0.1 9000 
localhost [127.0.0.1] 9000 (?) open

$ nc -z -v localhost 9000 
localhost [127.0.0.1] 9000 (?) open
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the FreeBSD host, start a Web browser, navigate to port 9000 on the IP address of your guest VM.
For example, if your guest’s IP address is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;203.0.113.1&lt;/code&gt;, open:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://203.0.113.1:9000/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That page is Portainer’s login page. Since it’s your first time using it, 
it will asks you to create admin user.&lt;/p&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
If you want to use Portainer, you have to start the Portainer Server 
container again after every docker service restart (sudo systemctl restart docker):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo \
 docker run -d -p 9000:9000 -v \
 /var/run/docker.sock:/var/run/docker.sock -v \
 portainer_data:/data portainer/portainer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;CAUTION !!:&lt;/strong&gt; &lt;br /&gt;
Exposing the docker socket (docker.sock) is a security risk. Giving an 
application access to it is equivalent to giving a unrestricted root 
access to your host. For more information see 
&lt;a href=&quot;https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-1---do-not-expose-the-docker-daemon-socket-even-to-the-containers&quot;&gt;OWASP: Do not expose the Docker daemon socket&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Logout from the guest VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the FreeBSD guest.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install docker docker-compose
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;$DOCKER_HOST&quot;
DOCKER_HOST: Undefined variable.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nc -z -v 203.0.113.1 2376
Connection to 203.0.113.1 2376 port [tcp/*] succeeded!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The shell is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csh&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ps $$
  PID TT  STAT    TIME COMMAND
30033  7  Ss   0:00.02 -csh (csh)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ set DOCKER_HOST=&quot;203.0.113.1:2376&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf %s\\n &quot;$DOCKER_HOST&quot;
203.0.113.1:2376
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 run hello-world
 
Hello from Docker!
This message shows that your installation appears to be working correctly.
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To show &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run&lt;/code&gt; usage:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker -H tcp://dusko@203.0.113.1:2376 run --help

Usage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

Run a command in a new container
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Docker run command to start an interactive bash shell session in an Ubuntu Docker image:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker -H &quot;tcp://dusko@$DOCKER_HOST&quot;:2376 run -it ubuntu bash

Unable to find image &apos;ubuntu:latest&apos; locally
latest: Pulling from library/ubuntu
08c01a0ec47e: Pull complete
Digest: sha256:669e010b58baf5beb2836b253c1fd5768333f0d1dbcb834f7c07a4dc93f474be
Status: Downloaded newer image for ubuntu:latest
root@9407014e2a92:/#
root@9407014e2a92:/#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@9407014e2a92:/# hostname
9407014e2a92

root@9407014e2a92:/# uname -a
Linux 9407014e2a92 5.10.0-11-amd64 #1 SMP Debian 5.10.92-1 (2022-01-18) 
  x86_64 x86_64 x86_64 GNU/Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Logout from the bash shel.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@9407014e2a92:/# exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the FreeBSD host, to show list of Docker images available:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker -H tcp://dusko@203.0.113.1:2376 images
REPOSITORY            TAG       IMAGE ID       CREATED        SIZE
ubuntu                latest    54c9d81cbb44   13 days ago    72.8MB
hello-world           latest    feb5d9fea6a5   4 months ago   13.3kB
portainer/portainer   latest    580c0e4e98b0   11 months ago  79.1MB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;References:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.gamsjager.nl/2019/01/11/How-to-run-Docker-on-FreeBSD-12/&quot;&gt;How to run Docker on FreeBSD 12&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://docs.docker.com/engine/install/debian/&quot;&gt;Install Docker Engine on Ubuntu&lt;/a&gt;  &lt;br /&gt;
&lt;a href=&quot;https://docs.docker.com/engine/install/linux-postinstall/&quot;&gt;Docker Post-installation steps for Linux&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://web.archive.org/web/20180615163619/https://success.docker.com/article/how-do-i-enable-the-remote-api-for-dockerd&quot;&gt;How do I enable the remote API for dockerd&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Sun, 13 Feb 2022 07:22:41 -0800</pubDate>
        <link>http://localhost:4000/freebsd/bhyve/docker/virtualization/2022/02/13/freebsd-docker-vm-bhyve.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/bhyve/docker/virtualization/2022/02/13/freebsd-docker-vm-bhyve.html</guid>
        
        
        <category>freebsd</category>
        
        <category>bhyve</category>
        
        <category>docker</category>
        
        <category>virtualization</category>
        
      </item>
    
      <item>
        <title>How To Install PlantUML and PlantUML Server Locally on FreeBSD</title>
        <description>&lt;p&gt;Operating system:  FreeBSD 13.0&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
In code excerpts and examples, the long lines are folded and then
indented to make sure they fit the page.&lt;/p&gt;

&lt;p&gt;https://plantuml.com/&lt;/p&gt;

&lt;p&gt;https://github.com/plantuml/&lt;/p&gt;

&lt;h3 id=&quot;run-plantuml-locally&quot;&gt;Run PlantUML Locally&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/plantuml/plantuml&quot;&gt;&lt;em&gt;plantuml&lt;/em&gt;&lt;/a&gt;  &lt;br /&gt;
Generate diagrams from textual description&lt;/p&gt;

&lt;p&gt;Requirements for running PlantUML locally:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Java&lt;/li&gt;
  &lt;li&gt;Graphviz&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;As of Feb 8, 2022, the latest version of PlantUML is 1.2022.1.&lt;/p&gt;

&lt;p&gt;PlantUML compiled Jar (Version 1.2022.1)&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://github.com/plantuml/plantuml/releases/tag/v1.2022.1&quot;&gt;GitHub releases&lt;/a&gt;, you can download &lt;a href=&quot;https://github.com/plantuml/plantuml/releases/download/v1.2022.1/plantuml-1.2022.1.jar&quot;&gt;plantuml.1.2022.1.jar&lt;/a&gt;. It includes GraphViz.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fetch \
 https://github.com/plantuml/plantuml/releases/download/v1.2022.1/plantuml-1.2022.1.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a text file with PlantUML commands.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat sequenceDiagram.txt
@startuml
Alice -&amp;gt; Bob: test
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% java -jar plantuml-1.2022.1.jar sequenceDiagram.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This outputs the sequence diagram to a file called sequenceDiagram.png.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file sequenceDiagram.png
sequenceDiagram.png: PNG image data, 123 x 131, 8-bit/color RGB, non-interlaced
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv sequenceDiagram.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;References:  &lt;br /&gt;
https://plantuml.com/starting
Local Installation notes &lt;a href=&quot;https://plantuml.com/en/faq-install&quot;&gt;https://plantuml.com/en/faq-install&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;plantuml-picoweb-server&quot;&gt;PlantUML PicoWeb Server&lt;/h3&gt;

&lt;p&gt;You can install PlantUML server and run it locally but you first need 
to install your own JEE web application server.&lt;/p&gt;

&lt;p&gt;If you don’t want to install a full JEE application server, you may also 
choose to run PlantUML PicoWeb Server locally, as PlantUML developers 
have decided to integrate a tiny webserver inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plantuml.jar&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You just have to launch it with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-picoweb&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% java -jar plantuml-1.2022.1.jar -picoweb
webPort=8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The server is now listening to http://localhost:8080.&lt;/p&gt;

&lt;p&gt;Then; for example, for SVG service, in a Web browser, enter:&lt;/p&gt;

&lt;p&gt;http://localhost:8080/plantuml/svg/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000&lt;/p&gt;

&lt;p&gt;or for TXT service, in a Web browser enter:&lt;/p&gt;

&lt;p&gt;http://localhost:8080/plantuml/txt/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000&lt;/p&gt;

&lt;p&gt;Reference: &lt;br /&gt;
https://plantuml.com/en/picoweb&lt;/p&gt;

&lt;h3 id=&quot;install-and-run-plantuml-server-locally&quot;&gt;Install and Run PlantUML Server Locally&lt;/h3&gt;

&lt;p&gt;Requirements for PlantUML Server:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Maven (Apache Maven)&lt;/li&gt;
  &lt;li&gt;Jetty (Jetty web server)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Install Maven.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install maven
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---- snip ----

New packages to be INSTALLED:
        java-zoneinfo: 2021.e
        maven: 3.8.4
        maven-wrapper: 1_2
        openjdk8: 8.312.07.1

Number of packages to be installed: 4

---- snip ---- 

=====
Message from openjdk8-8.312.07.1:

--
This OpenJDK implementation requires fdescfs(5) mounted on /dev/fd and
procfs(5) mounted on /proc.

If you have not done it yet, please do the following:

        mount -t fdescfs fdesc /dev/fd
        mount -t procfs proc /proc

To make it permanent, you need the following lines in /etc/fstab:

        fdesc   /dev/fd         fdescfs         rw      0       0
        proc    /proc           procfs          rw      0       0
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[TODO] cat /etc/fstab for java&lt;/p&gt;

&lt;p&gt;Install jetty.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install jetty9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---- snip ----
New packages to be INSTALLED:
        bash: 5.1.12
        jetty9: 9.4.29
---- snip ----

=====
Message from jetty9-9.4.29:

--
Jetty is now installed in /usr/local/jetty

From Jetty 9, the way to configure it has changed. You are **strongly**
advised to read the documentation found here:

http://www.eclipse.org/jetty/documentation/current/

Please pay particular attention to HOME and BASE documentation, i.e.,:

http://www.eclipse.org/jetty/documentation/current/startup-base-and-home.html

You may want to activate it in /etc/rc.conf:

    # echo jetty_enable=&quot;YES&quot; &amp;gt;&amp;gt; /etc/rc.conf

A sample configuration file can be found here:

    /usr/local/etc/jetty/jetty.sample

Please modify it to suit your needs, paying particular attention
to the value of JETTY_HOME and JETTY_BASE.

Once you are happy with the configuration file, you can start Jetty:

    # service jetty start

Once Jetty is started, point your web browser to the default home page at
http://localhost:8080/.

A demo web app is installed for your convenience.

== ADVANCED USAGE ==

If you need to pass special options to Java/Jetty, please set the appropriate
variables in the configuration file, e.g.,

  # Increase memory limit of the Java virtual machine

  JAVA_OPTIONS=&quot;-Xms32m -Xmx256m&quot;

  # Run Java with remote debugging turned on on port 8186

  JAVA_OPTIONS=&quot;-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8186&quot;

More configuration options are presented in the sample file.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TODO2 — possibly here&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
For PlantUML Server, dont’ start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jetty&lt;/code&gt; service yet.&lt;br /&gt;
It will be started with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn jetty:run&lt;/code&gt; (see below steps).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mkdir ~/scratch
% cd ~/scratch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Download the latest version of PlantUML Server.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fetch \
 https://codeload.github.com/plantuml/plantuml-server/zip/refs/heads/master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh master
-rw-r--r--  1 dusko  dusko   139K Feb  8 23:49 master

% file master
master: Zip archive data, at least v1.0 to extract

% mv master plantuml-server.zip

% unzip plantuml-server.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld plantuml-server*
drwxr-xr-x  7 dusko  dusko      18 Feb  8 23:50 plantuml-server-master
-rw-r--r--  1 dusko  dusko  142662 Feb  8 23:49 plantuml-server.zip

% mv plantuml-server-master plantuml-server

% ls -ld plantuml-server*
drwxr-xr-x  7 dusko  dusko      18 Feb  8 23:50 plantuml-server
-rw-r--r--  1 dusko  dusko  142662 Feb  8 23:49 plantuml-server.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd ~/scratch/plantuml-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pwd
/usr/home/dusko/scratch/plantuml-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mvn jetty:run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, in a Web browser, open: &lt;br /&gt;
http://localhost:8080/plantuml&lt;/p&gt;

&lt;p&gt;To run it again:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd ~/scratch/plantuml-server
% mvn jetty:run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;References:&lt;/p&gt;

&lt;p&gt;PlantUML References:  &lt;br /&gt;
&lt;a href=&quot;https://plantuml.com/en/server&quot;&gt;PlantUML Server&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://github.com/plantuml/plantuml-server&quot;&gt;PlantUML Server source code&lt;/a&gt;  &lt;br /&gt;
&lt;a href=&quot;https://github.com/mattjhayes/PlantUML-Examples/blob/master/docs/Diagram-Types/diagram-types.md&quot;&gt;PlantUML Examples&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://plantuml.com/starting&quot;&gt;PlantUML for the impatient&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://plantuml.com/activity-diagram-legacy&quot;&gt;Activity Diagram (legacy)&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://plantuml.com/activity-diagram-beta&quot;&gt;Activity Diagram (new syntax)&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://plantuml.com/command-line&quot;&gt;PlantUML - Command line&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://plantuml.com/commons&quot;&gt;PlantUML - Common commands: comment, zoom, title, footer and header, legend&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.linux-magazine.com/Issues/2020/235/PlantUML-Diagrams&quot;&gt;Drawing diagrams with PlantUML&lt;/a&gt; &lt;br /&gt;
(Linux Magazine Issue #235 - Jun 2020)&lt;br /&gt;
(Retrieved on Feb 8, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://useiconic.com/open&quot;&gt;Open Iconic, a free and open icon set&lt;/a&gt;&lt;br /&gt;
(An open source icon set with 223 marks in SVG, webfont and raster formats) &lt;br /&gt;
(Retrieved on Feb 8, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mattjhayes.com/2021/11/28/other-uses-for-plantuml/&quot;&gt;Other Uses for PlantUML&lt;/a&gt; &lt;br /&gt;
(Retrieved on Feb 8, 2022)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://plantuml.com/link&quot;&gt;Hyperlinks and tooltips&lt;/a&gt;  &lt;br /&gt;
&lt;a href=&quot;http://plantuml.com/creole&quot;&gt;Creole&lt;/a&gt;: rich text, emoticons, unicode, icons&lt;br /&gt;
&lt;a href=&quot;http://plantuml.com/openiconic&quot;&gt;OpenIconic icons&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://plantuml.com/sprite&quot;&gt;Sprite icons&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://plantuml.com/ascii-math&quot;&gt;AsciiMath mathematical expressions&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 08 Feb 2022 20:17:48 -0800</pubDate>
        <link>http://localhost:4000/freebsd/graphviz/graph/visualization/diagram/2022/02/08/freebsd-install-plantuml-server-locally.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/graphviz/graph/visualization/diagram/2022/02/08/freebsd-install-plantuml-server-locally.html</guid>
        
        
        <category>freebsd</category>
        
        <category>graphviz</category>
        
        <category>graph</category>
        
        <category>visualization</category>
        
        <category>diagram</category>
        
      </item>
    
      <item>
        <title>How To Install Graphviz Visual Editor on FreeBSD in a Linux Guest in Bhyve</title>
        <description>&lt;p&gt;Operating system:  FreeBSD 13.0&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;h3 id=&quot;install-graphviz-visual-editor&quot;&gt;Install Graphviz Visual Editor&lt;/h3&gt;

&lt;p&gt;App: &lt;br /&gt;
&lt;a href=&quot;https://github.com/magjac/graphviz-visual-editor&quot;&gt;Graphviz Visual Editor&lt;/a&gt; &lt;br /&gt;
About&lt;br /&gt;
“A web application for interactive visual editing of Graphviz graphs described in the DOT language.”&lt;br /&gt;
&lt;a href=&quot;http://magjac.com/graphviz-visual-editor&quot;&gt;http://magjac.com/graphviz-visual-editor&lt;/a&gt; &lt;br /&gt;
(Retrieved on Feb 8, 2022)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    512M    -    No         Stopped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm start -f debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to Debian GNU/Linux VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install Git and npm.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo apt install git
$ sudo apt install npm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir ~/scratch
$ cd ~/scratch
$ git clone https://github.com/magjac/graphviz-visual-editor
$ cd graphviz-visual-editor/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ npm install
$ make
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ npm run start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---- snip ----

Compiled successfully!

You can now view graphviz-visual-editor in the browser.

  Local:            http://localhost:3000/
  On Your Network:  http://192.168.8.19:3000/

Note that the development build is not optimized.
To create a production build, use npm run build.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use a Web browser - on either GNU/Linux Debian guest VM or FreeBSD host 
and open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://192.168.8.19:3000/&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To run it again:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd ~/scratch/graphviz-visual-editor
$ npm run start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Mon, 07 Feb 2022 19:53:31 -0800</pubDate>
        <link>http://localhost:4000/freebsd/bhyve/virtualization/graphviz/graph/visualization/2022/02/07/freebsd-bhyve-graph-editors.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/bhyve/virtualization/graphviz/graph/visualization/2022/02/07/freebsd-bhyve-graph-editors.html</guid>
        
        
        <category>freebsd</category>
        
        <category>bhyve</category>
        
        <category>virtualization</category>
        
        <category>graphviz</category>
        
        <category>graph</category>
        
        <category>visualization</category>
        
      </item>
    
      <item>
        <title>Setup vm-bhyve and Install a GNU/Linux Debian VM on FreeBSD 13</title>
        <description>&lt;p&gt;Operating system:  FreeBSD 13.0&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zfs list
NAME                 USED  AVAIL     REFER  MOUNTPOINT
zroot               27.9G   674G       96K  none
zroot/ROOT          5.20G   674G       96K  none
zroot/ROOT/default  5.20G   674G     5.20G  /
zroot/tmp            833M   674G      833M  /tmp
zroot/usr           21.8G   674G       96K  /usr
zroot/usr/home      21.8G   674G     21.8G  /usr/home
zroot/usr/ports       96K   674G       96K  /usr/ports
zroot/usr/src         96K   674G       96K  /usr/src
zroot/var           1.18M   674G       96K  /var
zroot/var/audit       96K   674G       96K  /var/audit
zroot/var/crash       96K   674G       96K  /var/crash
zroot/var/log        548K   674G      548K  /var/log
zroot/var/mail       216K   674G      216K  /var/mail
zroot/var/tmp        152K   674G      152K  /var/tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zpool list
NAME   SIZE  ALLOC  FREE  CKPOINT  EXPANDSZ  FRAG  CAP  DEDUP  HEALTH  ALTROOT
zroot  724G  27.9G  696G        -         -    2%   3%  1.00x  ONLINE  -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v bhyve
/usr/sbin/bhyve

% command -v bhyvectl
/usr/sbin/bhyvectl

% command -v bhyveload
/usr/sbin/bhyveload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file /usr/sbin/bhyve
/usr/sbin/bhyve: ELF 64-bit LSB executable, x86-64, version 1 (FreeBSD), 
  dynamically linked, interpreter /libexec/ld-elf.so.1, 
  for FreeBSD 13.0 (1300139), FreeBSD-style, stripped

% file /usr/sbin/bhyvectl
/usr/sbin/bhyvectl: ELF 64-bit LSB executable, x86-64, version 1 (FreeBSD), 
  dynamically linked, interpreter /libexec/ld-elf.so.1, 
  for FreeBSD 13.0 (1300139), FreeBSD-style, stripped

% file /usr/sbin/bhyveload
/usr/sbin/bhyveload: ELF 64-bit LSB executable, x86-64, version 1 (FreeBSD), 
  dynamically linked, interpreter /libexec/ld-elf.so.1, 
  for FreeBSD 13.0 (1300139), FreeBSD-style, stripped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;bhyve, bhyvectl and bhyveload binaries are part of FreeBSD 13 base system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg which /usr/sbin/bhyve
/usr/sbin/bhyve was not found in the database

% pkg which /usr/sbin/bhyvectl
/usr/sbin/bhyvectl was not found in the database

% pkg which /usr/sbin/bhyveload
/usr/sbin/bhyveload was not found in the database
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/share/examples/bhyve/
total 9
-r--r--r--  1 root  wheel   9.6K Apr  8  2021 vmrun.sh

% file /usr/share/examples/bhyve/vmrun.sh
/usr/share/examples/bhyve/vmrun.sh: POSIX shell script, ASCII text executable

% wc -l /usr/share/examples/bhyve/vmrun.sh
     395 /usr/share/examples/bhyve/vmrun.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg search bhyve
bhyve+-0.1.0                   BHyVe with unofficial extensions
bhyve-firmware-1.0_1           Collection of Firmware for bhyve
bhyve-rc-3                     FreeBSD RC script for starting bhyve guests in tmux
grub2-bhyve-0.40_8             Grub-emu loader for bhyve
rubygem-vagrant-bhyve-0.1.0    Vagrant provider plugin to support bhyve
uefi-edk2-bhyve-g20210226,2    UEFI EDK2 firmware for bhyve
uefi-edk2-bhyve-csm-0.2_3,1    UEFI EDK2 firmware for bhyve with CSM (16-bit BIOS)
vm-bhyve-1.4.2                 Management system for bhyve virtual machines
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Based on 
&lt;a href=&quot;https://github.com/churchers/vm-bhyve&quot;&gt;churchers/vm-bhyve.&lt;/a&gt;(Retrieved on Feb 6, 2022).&lt;/p&gt;

&lt;p&gt;Install vm-bhyve.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install vm-bhyve
---- snip ----

=====
Message from vm-bhyve-1.4.2:

--
To enable vm-bhyve, please add the following lines to rc.conf,
depending on whether you are using ZFS storage or not. Please note
that the directory or dataset specified should already exist.

    vm_enable=&quot;YES&quot;
    vm_dir=&quot;zfs:pool/dataset&quot;

OR

    vm_enable=&quot;YES&quot;
    vm_dir=&quot;/directory/path&quot;

Then run &apos;vm init&apos;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/share/examples/vm-bhyve/
total 85
-rw-r--r--  1 root  wheel   437B Jan 14  2020 alpine.conf
-rw-r--r--  1 root  wheel   280B Jan 14  2020 arch.conf
-rw-r--r--  1 root  wheel   354B Jan 14  2020 centos6.conf
-rw-r--r--  1 root  wheel   163B Jan 14  2020 centos7.conf
-rw-r--r--  1 root  wheel    16K Jan 14  2020 config.sample
-rw-r--r--  1 root  wheel   331B Jan 14  2020 coreos.conf
-rw-r--r--  1 root  wheel   177B Jan 14  2020 debian.conf
-rw-r--r--  1 root  wheel   136B Jan 14  2020 default.conf
-rw-r--r--  1 root  wheel   441B Jan 14  2020 dragonfly.conf
-rw-r--r--  1 root  wheel   156B Jan 14  2020 freebsd-zvol.conf
-rw-r--r--  1 root  wheel   755B Jan 14  2020 freepbx.conf
-rw-r--r--  1 root  wheel   151B Jan 14  2020 linux-zvol.conf
-rw-r--r--  1 root  wheel   213B Jan 14  2020 netbsd.conf
-rw-r--r--  1 root  wheel   243B Jan 14  2020 openbsd.conf
-rw-r--r--  1 root  wheel   222B Jan 14  2020 resflash.conf
-rw-r--r--  1 root  wheel   131B Jan 14  2020 ubuntu.conf
-rw-r--r--  1 root  wheel   566B Jan 14  2020 windows.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo zfs create zroot/vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zfs list | tail -1
zroot/vm              96K   674G       96K  none
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /vm
ls: /vm: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zfs get all zroot/vm | wc -l
      73

% zfs get all zroot/vm | grep compression
zroot/vm  compression      lz4             inherited from zroot

% zfs get all zroot/vm | grep -w atime
zroot/vm  atime            off             inherited from zroot

% zfs get all zroot/vm | grep mountpoint
zroot/vm  mountpoint       none            inherited from zroot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo zfs set mountpoint=/vm zroot/vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zfs get all zroot/vm | grep mountpoint
zroot/vm  mountpoint       /vm             local
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /vm
drwxr-xr-x  2 root  wheel  2 Jan 29 19:30 /vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% date
Sat 29 Jan 2022 19:38:49 PST

% file /vm
/vm: directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zfs get all zroot/vm
NAME      PROPERTY       VALUE                  SOURCE
zroot/vm  type           filesystem             -
zroot/vm  creation       Sat Jan 29 19:30 2022  -
zroot/vm  used           96K                    -
zroot/vm  available      674G                   -

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% zfs mount
zroot/ROOT/default              /
zroot/tmp                       /tmp
zroot/usr/ports                 /usr/ports
zroot/usr/home                  /usr/home
zroot/var/crash                 /var/crash
zroot/var/mail                  /var/mail
zroot/var/tmp                   /var/tmp
zroot/var/audit                 /var/audit
zroot/usr/src                   /usr/src
zroot/var/log                   /var/log
zroot/vm                        /vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cp -i /etc/rc.conf /etc/rc.conf.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &apos;vm_enable=&quot;YES&quot;&apos; | sudo tee -a /etc/rc.conf
% printf %s\\n &apos;vm_dir=&quot;zfs:zroot/vm&quot;&apos; | sudo tee -a /etc/rc.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /etc/rc.conf.original.bak \
 /etc/rc.conf
--- /etc/rc.conf.original.bak   2022-01-29 19:17:50.236339000 -0800
+++ /etc/rc.conf        2022-01-29 20:24:22.277037000 -0800
@@ -7,0 +8,2 @@
+vm_enable=&quot;YES&quot;
+vm_dir=&quot;zfs:zroot/vm&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% type vm
vm is /usr/local/sbin/vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% file /usr/local/sbin/vm
/usr/local/sbin/vm: POSIX shell script, ASCII text executable

% wc -l /usr/local/sbin/vm
      51 /usr/local/sbin/vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/lib/vm-bhyve
total 133
-rw-r--r--  1 root  wheel   2.4K Jan 14  2020 vm-base
-rw-r--r--  1 root  wheel   7.7K Jan 14  2020 vm-cmd
-rw-r--r--  1 root  wheel   5.9K Jan 14  2020 vm-config
-rw-r--r--  1 root  wheel    32K Jan 14  2020 vm-core
-rw-r--r--  1 root  wheel    14K Jan 14  2020 vm-datastore
-rw-r--r--  1 root  wheel   7.3K Jan 14  2020 vm-guest
-rw-r--r--  1 root  wheel    14K Jan 14  2020 vm-info
-rw-r--r--  1 root  wheel    10K Jan 14  2020 vm-migration
-rw-r--r--  1 root  wheel   3.4K Jan 14  2020 vm-rctl
-rw-r--r--  1 root  wheel    33K Jan 14  2020 vm-run
-rw-r--r--  1 root  wheel    13K Jan 14  2020 vm-switch
-rw-r--r--  1 root  wheel   4.6K Jan 14  2020 vm-switch-manual
-rw-r--r--  1 root  wheel    11K Jan 14  2020 vm-switch-standard
-rw-r--r--  1 root  wheel   3.4K Jan 14  2020 vm-switch-vale
-rw-r--r--  1 root  wheel   6.3K Jan 14  2020 vm-switch-vxlan
-rw-r--r--  1 root  wheel    11K Jan 14  2020 vm-util
-rw-r--r--  1 root  wheel    18K Jan 14  2020 vm-zfs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm
total 9
drwxr-xr-x   2 root  wheel     2B Jan 29 19:30 .
drwxr-xr-x  19 root  wheel    25B Jan 29 19:38 ..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% kldstat | grep vmm
% kldstat | grep nmdm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Virtual machines can only be managed by root.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm
total 11
drwxr-xr-x   6 root  wheel     6B Jan 29 20:27 .
drwxr-xr-x  19 root  wheel    25B Jan 29 19:38 ..
drwxr-xr-x   2 root  wheel     4B Jan 29 20:27 .config
drwxr-xr-x   2 root  wheel     2B Jan 29 20:27 .img
drwxr-xr-x   2 root  wheel     2B Jan 29 20:27 .iso
drwxr-xr-x   2 root  wheel     3B Jan 29 20:27 .templates
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% kldstat | grep vm
25    1 0xffffffff83000000   53a420 vmm.ko

% kldstat | grep nmdm
26    1 0xffffffff82e49000     21cc nmdm.ko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% kldstat | tail -4
25    1 0xffffffff83000000   53a420 vmm.ko
26    1 0xffffffff82e49000     21cc nmdm.ko
27    1 0xffffffff82e4c000     7638 if_bridge.ko
28    1 0xffffffff82e54000     50d8 bridgestp.ko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% service vm status
vm is not running.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm list
Password:
NAME  DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm info
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm datastore list
NAME            TYPE        PATH                      ZFS DATASET
default         zfs         /vm                       zroot/vm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm switch info
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For Linux guests, install grub2-bhyve.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install grub2-bhyve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For UEFI support, install bhyve-firmware.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install bhyve-firmware
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/
total 11
drwxr-xr-x   6 root  wheel     6B Jan 29 20:27 .
drwxr-xr-x  19 root  wheel    25B Jan 29 21:58 ..
drwxr-xr-x   2 root  wheel     4B Jan 29 20:27 .config
drwxr-xr-x   2 root  wheel     2B Jan 29 20:27 .img
drwxr-xr-x   2 root  wheel     2B Jan 29 20:27 .iso
drwxr-xr-x   2 root  wheel     3B Jan 29 20:27 .templates
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/.templates/
total 6
drwxr-xr-x  2 root  wheel     3B Jan 29 20:27 .
drwxr-xr-x  6 root  wheel     6B Jan 29 20:27 ..
-rw-r--r--  1 root  wheel   136B Jan 29 20:27 default.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/share/examples/vm-bhyve/default.conf
loader=&quot;bhyveload&quot;
cpu=1
memory=256M
network0_type=&quot;virtio-net&quot;
network0_switch=&quot;public&quot;
disk0_type=&quot;virtio-blk&quot;
disk0_name=&quot;disk0.img&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /vm/.templates/default.conf
loader=&quot;bhyveload&quot;
cpu=1
memory=256M
network0_type=&quot;virtio-net&quot;
network0_switch=&quot;public&quot;
disk0_type=&quot;virtio-blk&quot;
disk0_name=&quot;disk0.img&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cp -i /usr/local/share/examples/vm-bhyve/* /vm/.templates/
overwrite /vm/.templates/default.conf? (y/n [n]) y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/.templates/
total 94
drwxr-xr-x  2 root  wheel    19B Jan 29 22:31 .
drwxr-xr-x  6 root  wheel     6B Jan 29 20:27 ..
-rw-r--r--  1 root  wheel   437B Jan 29 22:31 alpine.conf
-rw-r--r--  1 root  wheel   280B Jan 29 22:31 arch.conf
-rw-r--r--  1 root  wheel   354B Jan 29 22:31 centos6.conf
-rw-r--r--  1 root  wheel   163B Jan 29 22:31 centos7.conf
-rw-r--r--  1 root  wheel    16K Jan 29 22:31 config.sample
-rw-r--r--  1 root  wheel   331B Jan 29 22:31 coreos.conf
-rw-r--r--  1 root  wheel   177B Jan 29 22:31 debian.conf
-rw-r--r--  1 root  wheel   136B Jan 29 22:31 default.conf
-rw-r--r--  1 root  wheel   441B Jan 29 22:31 dragonfly.conf
-rw-r--r--  1 root  wheel   156B Jan 29 22:31 freebsd-zvol.conf
-rw-r--r--  1 root  wheel   755B Jan 29 22:31 freepbx.conf
-rw-r--r--  1 root  wheel   151B Jan 29 22:31 linux-zvol.conf
-rw-r--r--  1 root  wheel   213B Jan 29 22:31 netbsd.conf
-rw-r--r--  1 root  wheel   243B Jan 29 22:31 openbsd.conf
-rw-r--r--  1 root  wheel   222B Jan 29 22:31 resflash.conf
-rw-r--r--  1 root  wheel   131B Jan 29 22:31 ubuntu.conf
-rw-r--r--  1 root  wheel   566B Jan 29 22:31 windows.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig
em0: flags=8822&amp;lt;BROADCAST,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        options=481249b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,
          LRO,WOL_MAGIC,VLAN_HWFILTER,NOMAP&amp;gt;
---- snip ----
        media: Ethernet autoselect
        status: no carrier
        nd6 options=29&amp;lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&amp;gt;
lo0: flags=8049&amp;lt;UP,LOOPBACK,RUNNING,MULTICAST&amp;gt; metric 0 mtu 16384
        options=680003&amp;lt;RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
        inet 127.0.0.1 netmask 0xff000000
        groups: lo
        nd6 options=21&amp;lt;PERFORMNUD,AUTO_LINKLOCAL&amp;gt;
ue0: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        options=68009b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,
          LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
---- snip ----
        inet 192.168.1.65 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect (1000baseT &amp;lt;full-duplex&amp;gt;)
        status: active
        nd6 options=29&amp;lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm switch list
NAME  TYPE  IFACE  ADDRESS  PRIVATE  MTU  VLAN  PORTS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm switch create -a 192.168.8.1/24 public
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm switch list
Password:
NAME    TYPE      IFACE      ADDRESS         PRIVATE  MTU  VLAN  PORTS
public  standard  vm-public  192.168.8.1/24  no       -    -     -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm switch info
------------------------
Virtual Switch: public
------------------------
  type: standard
  ident: vm-public
  vlan: -
  physical-ports: -
  bytes-in: 37302 (36.427K)
  bytes-out: 5550 (5.419K)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:  Some instructions include running
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo vm switch add public ue0&lt;/code&gt; at this point but when I did it, 
the guest VM wasn’t able to obtain an IP address from dnsmasq
(although it obtained an IP address from the same DHCP server that the 
FreeBSD host obtaines it from).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig
em0: flags=8822&amp;lt;BROADCAST,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        options=481249b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,
          VLAN_HWCSUM,LRO,WOL_MAGIC,VLAN_HWFILTER,NOMAP&amp;gt;
---- snip ----  
        media: Ethernet autoselect
        status: no carrier
        nd6 options=29&amp;lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&amp;gt;
lo0: flags=8049&amp;lt;UP,LOOPBACK,RUNNING,MULTICAST&amp;gt; metric 0 mtu 16384
        options=680003&amp;lt;RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
        inet 127.0.0.1 netmask 0xff000000
        groups: lo
        nd6 options=21&amp;lt;PERFORMNUD,AUTO_LINKLOCAL&amp;gt;
ue0: flags=8943&amp;lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        options=68009b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,
          VLAN_HWCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
---- snip ---- 
        inet 192.168.1.65 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect (1000baseT &amp;lt;full-duplex&amp;gt;)
        status: active
        nd6 options=29&amp;lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&amp;gt;
vm-public: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        ether 1e:77:56:53:11:0f
        inet 192.168.8.1 netmask 0xffffff00 broadcast 192.168.8.255
        id 00:00:00:00:00:00 priority 32768 hellotime 2 fwddelay 15
        maxage 20 holdcnt 6 proto rstp maxaddr 2000 timeout 1200
        root id 00:00:00:00:00:00 priority 32768 ifcost 0 port 0
        groups: bridge vm-switch viid-4c918@
        nd6 options=9&amp;lt;PERFORMNUD,IFDISABLED&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;internal-nat-configuration&quot;&gt;Internal NAT Configuration&lt;/h3&gt;

&lt;p&gt;If you want or need to internal NAT, you need to configure it manually.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://github.com/churchers/vm-bhyve/wiki/NAT-Configuration&quot;&gt;NAT Configuration - vm-bhyve Wiki&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Feb 6, 2022)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Unfortunately, internal NAT configuration has been removed as of v1.2. 
As a shell script, we relied on configuring external systems such as 
pf and dnsmasq to provide NAT functions. Some users want to use other 
tools/firewalls, and many users found NAT broken due to existing 
pf or dnsmasq configuration they had in place. It has come to the point 
where it’s arguably easier and less error-prone to manually configure 
NAT than to try and enable it via vm-bhyve, then manually install/tweak 
the generated configuration.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vm version
vm-bhyve: Bhyve virtual machine management v1.4.2 (rev. 104002)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /etc/rc.conf
zfs_enable=&quot;YES&quot;
dumpdev=&quot;AUTO&quot;
powerd_enable=&quot;YES&quot;
ifconfig_ue0=&quot;DHCP&quot;
defaultrouter=&quot;192.168.1.254&quot;
kld_list=&quot;i915kms&quot;
hostname=&quot;fbsd1.home.arpa&quot;
vm_enable=&quot;YES&quot;
vm_dir=&quot;zfs:zroot/vm&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig
em0: flags=8822&amp;lt;BROADCAST,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        options=481249b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,
          VLAN_HWCSUM,LRO,WOL_MAGIC,VLAN_HWFILTER,NOMAP&amp;gt;
---- snip ---- 
        status: no carrier
        nd6 options=29&amp;lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&amp;gt;
lo0: flags=8049&amp;lt;UP,LOOPBACK,RUNNING,MULTICAST&amp;gt; metric 0 mtu 16384
        options=680003&amp;lt;RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
        inet 127.0.0.1 netmask 0xff000000
        groups: lo
        nd6 options=21&amp;lt;PERFORMNUD,AUTO_LINKLOCAL&amp;gt;
ue0: flags=8843&amp;lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&amp;gt; metric 0 mtu 1500
        options=68009b&amp;lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,
          VLAN_HWCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&amp;gt;
---- snip ----
        inet 192.168.1.65 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect (1000baseT &amp;lt;full-duplex&amp;gt;)
        status: active
        nd6 options=29&amp;lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List all available interfaces on the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig -l
em0 lo0 ue0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List only interfaces that are down.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig -l -d
em0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List only interfaces that are up.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ifconfig -l -u
lo0 ue0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /etc/pf.conf
ls: /etc/pf.conf: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n \
 &apos;nat on ue0 from {192.168.8.0/24} to any -&amp;gt; (ue0)&apos; \
 | sudo tee -a /etc/pf.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;br /&gt;
I use a shell script with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openconnect(8)&lt;/code&gt; (“multi-protocol VPN client 
for Cisco AnyConnect VPNs and others”) for connecting to a VPN.
This creates a network interface named &lt;strong&gt;tun0&lt;/strong&gt; so I need to add another 
line for it to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pf.conf&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n \
 &apos;nat on tun0 from {192.168.8.0/24} to any -&amp;gt; (tun0)&apos; \
 | sudo tee -a /etc/pf.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /etc/pf.conf
nat on ue0 from {192.168.8.0/24} to any -&amp;gt; (ue0)
nat on tun0 from {192.168.8.0/24} to any -&amp;gt; (tun0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bhyve networking section - based on 
&lt;a href=&quot;https://github.com/churchers/vm-bhyve/wiki/NAT-Configuration&quot;&gt;vm-bhyve wiki - NAT How-To&lt;/a&gt;
(Retrieved on Feb 6, 2022).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install dnsmasq

---- snip ----

=====
Message from dnsmasq-2.86_2,1:

--
To enable dnsmasq, edit /usr/local/etc/dnsmasq.conf and
set dnsmasq_enable=&quot;YES&quot; in /etc/rc.conf[.local]

Further options and actions are documented inside
/usr/local/etc/rc.d/dnsmasq
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/rc.d/dnsmasq
-rwxr-xr-x  1 root  wheel   2.7K Jan 13 04:03 /usr/local/etc/rc.d/dnsmasq

% file /usr/local/etc/rc.d/dnsmasq
/usr/local/etc/rc.d/dnsmasq: POSIX shell script, ASCII text executable

% wc -l /usr/local/etc/rc.d/dnsmasq
      97 /usr/local/etc/rc.d/dnsmasq
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &apos;pf_enable=&quot;YES&quot;&apos; | sudo tee -a /etc/rc.conf
% printf %s\\n &apos;gateway_enable=&quot;YES&quot;&apos; | sudo tee -a /etc/rc.conf
% printf %s\\n &apos;dnsmasq_enable=&quot;YES&quot;&apos; | sudo tee -a /etc/rc.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /etc/rc.conf.original.bak \
 /etc/rc.conf
--- /etc/rc.conf.original.bak   2022-01-29 19:17:50.236339000 -0800
+++ /etc/rc.conf        2022-01-29 21:42:58.697928000 -0800
@@ -7,0 +8,5 @@
+vm_enable=&quot;YES&quot;
+vm_dir=&quot;zfs:zroot/vm&quot;
+pf_enable=&quot;YES&quot;
+gateway_enable=&quot;YES&quot;
+dnsmasq_enable=&quot;YES&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/etc/dnsmasq*
-rw-r--r--  1 root  wheel    27K Jan 13 04:03 /usr/local/etc/dnsmasq.conf
-rw-r--r--  1 root  wheel    27K Jan 13 04:03 /usr/local/etc/dnsmasq.conf.sample

% diff \
 /usr/local/etc/dnsmasq.conf.sample \ 
 /usr/local/etc/dnsmasq.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/dnsmasq.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/dnsmasq.conf
port=0
domain-needed
no-resolv
except-interface=lo0
bind-interfaces
local-service
dhcp-authoritative
 
interface=vm-public
dhcp-range=192.168.8.10,192.168.8.254
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cp -i /boot/loader.conf /boot/loader.conf.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &apos;if_bridge_load=&quot;YES&quot;&apos; | sudo tee -a /boot/loader.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /boot/loader.conf.original.bak \
 /boot/loader.conf
--- /boot/loader.conf.original.bak      2022-01-29 21:46:19.799847000 -0800
+++ /boot/loader.conf   2022-01-29 21:47:08.625437000 -0800
@@ -5,0 +6 @@
+if_bridge_load=&quot;YES&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Based on 
&lt;a href=&quot;https://github.com/churchers/vm-bhyve/wiki/Guest-example:-Alpine-Linux&quot;&gt;vm-bhyve wiki - How-To Running Linux&lt;/a&gt;(Retrieved on Feb 6, 2022):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cp -i /etc/sysctl.conf /etc/sysctl.conf.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &apos;net.link.tap.up_on_open=1&apos; | sudo tee -a /etc/sysctl.conf
% printf %s\\n &apos;net.link.bridge.pfil_bridge=0&apos; | sudo tee -a /etc/sysctl.conf
% printf %s\\n &apos;net.link.bridge.pfil_member=0&apos; | sudo tee -a /etc/sysctl.conf
% printf %s\\n &apos;net.inet.ip.forwarding=1&apos; | sudo tee -a /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /etc/sysctl.conf.original.bak \
 /etc/sysctl.conf
--- /etc/sysctl.conf.original.bak       2022-01-29 21:51:56.741050000 -0800
+++ /etc/sysctl.conf    2022-01-29 21:53:29.508938000 -0800
@@ -9,0 +10,4 @@
+net.link.tap.up_on_open=1
+net.link.bridge.pfil_bridge=0
+net.link.bridge.pfil_member=0
+net.inet.ip.forwarding=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reboot the system.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After restart:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/.config/
total 2
drwxr-xr-x  2 root  wheel     4B Jan 29 20:27 .
drwxr-xr-x  6 root  wheel     6B Jan 29 20:27 ..
-rw-r--r--  1 root  wheel     0B Jan 29 20:27 null.iso
-rw-r--r--  1 root  wheel    63B Jan 29 22:34 system.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/.config/null.iso
-rw-r--r--  1 root  wheel     0B Jan 29 20:27 /vm/.config/null.iso

% cat /vm/.config/system.conf 
switch_list=&quot;public&quot;
type_public=&quot;standard&quot;
addr_public=&quot;192.168.8.1/24&quot;
ports_public=&quot;&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/.img/
total 1
drwxr-xr-x  2 root  wheel     2B Jan 29 20:27 .
drwxr-xr-x  6 root  wheel     6B Jan 29 20:27 ..
 
% ls -alh /vm/.iso/
total 1
drwxr-xr-x  2 root  wheel     2B Jan 29 20:27 .
drwxr-xr-x  6 root  wheel     6B Jan 29 20:27 ..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /vm/.templates/debian.conf
loader=&quot;grub&quot;
cpu=1
memory=512M
network0_type=&quot;virtio-net&quot;
network0_switch=&quot;public&quot;
disk0_type=&quot;ahci-hd&quot;
disk0_name=&quot;disk0.img&quot;
grub_run_partition=&quot;1&quot;
grub_run_dir=&quot;/boot/grub&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo \ 
 vm \
 iso \
 https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-11.2.0-amd64-netinst.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/.iso/
total 380110
drwxr-xr-x  2 root  wheel     3B Jan 29 22:52 .
drwxr-xr-x  6 root  wheel     6B Jan 29 20:27 ..
-rw-r--r--  1 root  wheel   378M Dec 18 05:24 debian-11.2.0-amd64-netinst.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a VM named ‘debianvm1’ by using a template ‘debian’.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm create -t debian debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/
total 36
drwxr-xr-x   7 root  wheel     7B Jan 29 22:58 .
drwxr-xr-x  19 root  wheel    25B Jan 29 21:58 ..
drwxr-xr-x   2 root  wheel     4B Jan 29 20:27 .config
drwxr-xr-x   2 root  wheel     2B Jan 29 20:27 .img
drwxr-xr-x   2 root  wheel     3B Jan 29 22:52 .iso
drwxr-xr-x   2 root  wheel    19B Jan 29 22:31 .templates
drwxr-xr-x   2 root  wheel     7B Jan 29 23:03 debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -alh /vm/debianvm1/
total 28
drwxr-xr-x  2 root  wheel     7B Jan 29 23:03 .
drwxr-xr-x  7 root  wheel     7B Jan 29 22:58 ..
-rw-r--r--  1 root  wheel   254B Jan 29 22:58 debianvm1.conf
-rw-r--r--  1 root  wheel    77B Jan 29 23:03 device.map
-rw-------  1 root  wheel    20G Jan 29 22:58 disk0.img
-rw-r--r--  1 root  wheel    16B Jan 29 23:03 run.lock
-rw-r--r--  1 root  wheel   1.4K Jan 29 23:12 vm-bhyve.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    512M    -    No         Stopped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install GNU Linux Debian.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm install -f debianvm1 debian-11.2.0-amd64-netinst.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;fixing-gnu-grub&quot;&gt;Fixing GNU GRUB&lt;/h3&gt;

&lt;p&gt;NOTE: Strictly speaking, it’s GRUB 2 (as opposed to GRUB, a.k.a. GRUB Legacy).&lt;/p&gt;

&lt;p&gt;After reboot, Debian booted into GRUB prompt, which means it can’t find root partition.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                     GNU GRUB  version 2.00

Minimal BASH-like line editing is supported. For the first word, TAB
lists possible command completions. Anywhere else TAB lists possible
device or file completions.

grub&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In grub prompt, press TAB:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Possible commands are:
      
. [ authenticate background_color background_image blocklist boot break 
cat clear cmp configfile continue crc cryptomount date dump echo exit 
export extract_entries_configfile extract_entries_source
extract_legacy_entries_configfile extract_legacy_entries_source false
functional_test gettext gptsync halt hashsum hello help hexdump initrd 
initrd16 insmod keymap keystatus kfreebsd kfreebsd_loadenv 
kfreebsd_module kfreebsd_module_elf knetbsd knetbsd_module 
knetbsd_module_elf kopenbsd kopenbsd_ramdisk legacy_check_password 
legacy_configfile legacy_initrd legacy_initrd_nounzip legacy_kernel 
legacy_password legacy_source linux linux16 list_env load_env 
loadfont loopback ls lsfonts lsmmap lsmod md5sum menuentry module 
multiboot net_add_addr net_add_dns net_add_route net_bootp net_del_addr
net_del_dns net_del_route net_get_dhcp_option net_ipv6_autoconf 
net_ls_addr net_ls_cards net_ls_dns net_ls_routes net_nslookup normal 
normal_exit parttool password password_pbkdf2 probe read read_byte 
read_dword read_word reboot regexp
return rmmod save_env search search.file search.fs_label search.fs_uuid 
serial set setparams sha1sum sha256sum sha512sum shift sleep source 
submenu terminal_input terminal_output terminfo test test_blockarg 
testload time true unset videoinfo videotest write_byte write_dword 
write_word xnu_uuid zfs-bootfs zfsinfo zfskey

grub&amp;gt;
grub&amp;gt; ls
(hd0) (hd0,msdos5) (hd0,msdos1) (host) (lvm/debianvm1--vg-swap_1) 
  (lvm/debianvm1--vg-root)

grub&amp;gt; ls (hd0,msdos5)
        Partition hd0,msdos5: No known filesystem detected 
        Partition start at 1001472 - Total size 40939520 sectors

grub&amp;gt; ls (hd0,msdos5)/
error: unknown filesystem.

grub&amp;gt; ls (hd0,msdos1)
        Partition hd0,msdos1: Filesystem type ext* 
        Last modification time 2022-01-30 07:47:05 Sunday, 
        UUID 650acfe0-f659-4c0d-a877-27d1fae2d455
        Partition start at 2048 - Total size 997376 sectors

grub&amp;gt; ls (hd0,msdos1)/
lost+found/ config-5.10.0-10-amd64 vmlinuz-5.10.0-10-amd64 
  config-5.10.0-11-amd64 grub/ System.map-5.10.0-10-amd64 
  initrd.img-5.10.0-10-amd64 vmlinuz-5.10.0-11-amd64 
  System.map-5.10.0-11-amd64 initrd.img-5.10.0-11-amd64

grub&amp;gt; ls (host)
Device host: Filesystem type hostfs - Total size 0 sectors

grub&amp;gt; ls (host)/
entropy var/ boot/ dev/ libexec/ media/ root/ proc/ sys COPYRIGHT tmp/ 
  mnt/ lib/ home/ vm/ sbin/ etc/ net/ bin/ usr/ rescue/

grub&amp;gt; ls (lvm/debianvm1--vg-swap_1)
Device lvm/debianvm1--vg-swap_1: No known filesystem detected
Total size 1048576 sectors

grub&amp;gt; ls (lvm/debianvm1--vg-swap_1)/
error: unknown filesystem.

grub&amp;gt; ls (lvm/debianvm1--vg-root)
Device lvm/debianvm1--vg-root: Filesystem type ext*
Last modification time 2022-01-30 07:47:05 Sunday, 
UUID b4113067-fbfd-4471-b7dc-671e3dec3483
Total size 39886848 sectors

grub&amp;gt; ls (lvm/debianvm1--vg-root)/
lost+found/ boot/ etc/ media/ vmlinuz.old var/ bin usr/ sbin lib lib32 
  lib64 libx32 dev/ home/ proc/ root/ run/ sys/ tmp/ mnt/ srv/ opt/ 
  initrd.img.old vmlinuz initrd.img

grub&amp;gt; ls (hd0,msdos1)/grub/
unicode.pf2 i386-pc/ locale/ fonts/ grubenv grub.cfg

grub&amp;gt; ls (host)/boot/
dtb/ loader.conf.original.bak efi/ firmware/ check-password.4th 
  brand-fbsd.4th loader_4th isoboot delay.4th menu-commands.4th 
  boot1 loader_4th.efi logo-orb.4th looader_4th isoboot delay.4th 
  menu-commands.4th boot1 loader_4th.efi logo-orb.4th loader.conf 
  userboot_lua.so brand.4th userboot_4th.so screen.4th support.4th 
  color.4th beastie.4th pxeboot gptboot.efi mbr frames.4th boot2 
  fonts/ uboot/ logo-beastiebw.4th entropy zfs/ lua/ loader.4th 
  loader_lua.efi loader userboot.so loader.rc version.4th boot0 
  menusets.4th cdboot kernel.old/ gptzfsboot modules/ kernel/ 
  logo-orbbw.4th boot0sio images/ loader_lua zfsloader loader_simp 
  menu.4th defaults/ zfsboot boot1.efi boot pmbr loader.efi 
  logo-fbsdbw.4th gptboot device.hints efi.4th shortcuts.4th menu.rc 
  loader.conf.d/ loader_simp.efi logo-beastie.4th

grub&amp;gt; ls (lvm/debianvm1--vg-root)/boot/

grub&amp;gt; 
grub&amp;gt; set prefix=(hd0,msdos1)/grub
grub&amp;gt; set root=(hd0,msdos1)
grub&amp;gt; insmod linux
grub&amp;gt; insmod normal
grub&amp;gt; normal
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After pressing  ENTER  (after the last line with ‘normal’), Debian started normally:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Loading Linux 5.10.0-11-amd64 ...
Loading initial ramdisk ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                   GNU GRUB  version 2.00

 +--------------------------------------------------------------+
 |Debian GNU/Linux                                              |
 |Advanced options for Debian GNU/Linux                         |
 |                                                              |
 |                                                              |
 |                                                              |
 |                                                              |
 +--------------------------------------------------------------+

  Use the ^ and v keys to select which entry is highlighted.

  Press enter to boot the selected OS, `e&apos; to edit the commands
  before booting or `c&apos; for a command-line.

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to Debian VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login:
----------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dusko@debianvm1:~$
dusko@debianvm1:~$ uptime
 00:02:34 up 1 min,  1 user,  load average: 0.08, 0.05, 0.01
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then issue command to fix grub.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ groups
dusko cdrom floppy audio dip video plugdev netdev bluetooth scanner

$ groups | grep sudo

$ su
Password:
         
# usermod -aG sudo dusko
bash: usermod: command not found

# command -v usermod

# command -V usermod
bash: command: usermod: not found

# type -a usermod
bash: type: usermod: not found

# type usermod
bash: type: usermod: not found

# which usermod

# whereis usermod
usermod: /usr/sbin/usermod /usr/share/man/man8/usermod.8.gz

# /usr/sbin/usermod -aG sudo dusko

# groups dusko
dusko : dusko cdrom floppy sudo audio dip video plugdev netdev bluetooth scanner

# groups dusko | grep sudo
dusko : dusko cdrom floppy sudo audio dip video plugdev netdev bluetooth lpadmin scanner

# exit
exit

$ groups
dusko cdrom floppy audio dip video plugdev netdev bluetooth lpadmin scanner

$ groups | grep sudo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Refresh shell environment without logging out:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exec su - dusko
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in back to Debian VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ groups | grep sudo
dusko cdrom floppy sudo audio dip video plugdev netdev bluetooth lpadmin scanner
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can now run update-grub as root with sudo(8).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo update-grub
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-5.10.0-11-amd64
Found initrd image: /boot/initrd.img-5.10.0-11-amd64
Found linux image: /boot/vmlinuz-5.10.0-10-amd64
Found initrd image: /boot/initrd.img-5.10.0-10-amd64
done
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, after reboot, the system booted into grub prompt again.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                         GNU GRUB  version 2.00

Minimal BASH-like line editing is supported. For the first word, 
TAB lists possible command completions. Anywhere else TAB lists 
possible device or file completions.


grub&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exit the GRUB prompt:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;grub&amp;gt; exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[FIX] Debian installs boot to 2nd partition but with default 
bhyve configuration, GRUB looks for boot in 1st partition.&lt;/p&gt;

&lt;p&gt;On the FreeBSD host:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cp -i /vm/debianvm1/debianvm1.conf /vm/debianvm1/debianvm1.conf.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /vm/debianvm1/debianvm1.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /vm/debianvm1/debianvm1.conf.original.bak \
 /vm/debianvm1/debianvm1.conf
--- /vm/debianvm1/debianvm1.conf.original.bak   2022-01-30 00:17:47.121434000 -0
800
+++ /vm/debianvm1/debianvm1.conf        2022-01-30 00:19:25.190592000 -0800
@@ -8,2 +8,2 @@
-grub_run_partition=&quot;1&quot;
-grub_run_dir=&quot;/boot/grub&quot;
+grub_run_partition=&quot;msdos1&quot;
+grub_run_dir=&quot;/grub&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /vm/debianvm1/debianvm1.conf
loader=&quot;grub&quot;
cpu=1
memory=512M
network0_type=&quot;virtio-net&quot;
network0_switch=&quot;public&quot;
disk0_type=&quot;ahci-hd&quot;
disk0_name=&quot;disk0.img&quot;
grub_run_partition=&quot;msdos1&quot;
grub_run_dir=&quot;/grub&quot;
uuid=&quot;fc62f0ca-8199-11ec-aa36-e86a64ba6be0&quot;
network0_mac=&quot;58:9c:fc:0a:ab:4f&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm list
NAME       DATASTORE  LOADER  CPU  MEMORY  VNC  AUTOSTART  STATE
debianvm1  default    grub    1    512M    -    No         Stopped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It worked.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm start -f debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Loading Linux 5.10.0-11-amd64 ...
Loading initial ramdisk ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                      GNU GRUB  version 2.00

 +-------------------------------------------------------------+
 |Debian GNU/Linux                                             |
 |Advanced options for Debian GNU/Linux                        |
 |                                                             |
 |                                                             |
 |                                                             |
 |                                                             |
 |                                                             |
 |                                                             |
 |                                                             |
 |                                                             |
 +-------------------------------------------------------------+

 Use the ^ and v keys to select which entry is highlighted.
 Press enter to boot the selected OS, `e&apos; to edit the commands before
 booting or `c&apos; for a command-line.

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login:
----------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in to the VM.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo reboot
[sudo] password for dusko:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login: 
----------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;starting-the-vm&quot;&gt;Starting the VM&lt;/h4&gt;

&lt;p&gt;If you specifty the -f option, the guest will start in the foreground on stdio, 
and you will not be able to access it through the console 
(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo vm console debianvm1&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm start -f debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to access it via the console (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo vm console debianvm1&lt;/code&gt;), 
start the VM without the -f option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm start debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then, you can access the vm through the console:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vm console debianvm1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output shows:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Connected
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Enter&lt;/code&gt; here, and after that the VM presents the login screen:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Debian GNU/Linux 11 debianvm1 ttyS0

debianvm1 login: 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To disconnect, that is, to exit the console and return to the host,
press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~+Ctrl-D&lt;/code&gt;  (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tilde&lt;/code&gt;, then &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+d&lt;/code&gt;). 
It’s also written as
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tilde&lt;/code&gt;, then &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^D&lt;/code&gt;; or: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tilde&lt;/code&gt;, then &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Control-d&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; ~
[EOT]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Sun, 06 Feb 2022 06:02:01 -0800</pubDate>
        <link>http://localhost:4000/freebsd/bhyve/virtualization/2022/02/06/freebsd-vm-bhyve.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/bhyve/virtualization/2022/02/06/freebsd-vm-bhyve.html</guid>
        
        
        <category>freebsd</category>
        
        <category>bhyve</category>
        
        <category>virtualization</category>
        
      </item>
    
      <item>
        <title>How To Take Screenshots with xwd(1), Pixmap Size (Depth) of 24 and 32 and Convert It To png</title>
        <description>&lt;p&gt;Operating system: FreeBSD 13.0&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;p&gt;Install &lt;strong&gt;py-png&lt;/strong&gt; package. 
At the time of writing, python version is &lt;strong&gt;3.8&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install py38-png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install &lt;strong&gt;netpbm&lt;/strong&gt; - a toolkit for conversion of images between different formats.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo pkg install netpbm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls /usr/local/include/netpbm
colorname.h     pammap.h        pgm.h           pm_system.h
mallocvar.h     pbm.h           pm_c_util.h     pm.h      
pam.h           pbmfont.h       pm_config.h     pnm.h           
pamdraw.h       pbmfontdata.h   pm_gamma.h      ppm.h           
ppmcmap.h       runlength.h
ppmdfont.h      shhopt.h
ppmdraw.h
ppmfloyd.h
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man -k netpbm | wc -l
      64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man -k pbm | wc -l
     143
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xdpyinfo | wc -l
    4270
 
% xdpyinfo | grep -n -i pixmap
10:number of supported pixmap formats:    7
11:supported pixmap formats:
 
% xdpyinfo | head -20
name of display:    :0.0
version number:    11.0
vendor string:    The X.Org Foundation
vendor release number:    12011000
X.Org version: 1.20.11
maximum request size:  16777212 bytes
motion buffer size:  256
bitmap unit, bit order, padding:    32, LSBFirst, 32
image byte order:    LSBFirst
number of supported pixmap formats:    7
supported pixmap formats:
    depth 1, bits_per_pixel 1, scanline_pad 32
    depth 4, bits_per_pixel 8, scanline_pad 32
    depth 8, bits_per_pixel 8, scanline_pad 32
    depth 15, bits_per_pixel 16, scanline_pad 32
    depth 16, bits_per_pixel 16, scanline_pad 32
    depth 24, bits_per_pixel 32, scanline_pad 32
    depth 32, bits_per_pixel 32, scanline_pad 32
keycode range:    minimum 8, maximum 255
focus:  window 0x40000c, revert to PointerRoot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwininfo -root | wc -l
      24

% xwininfo -root | grep -i depth
  Depth: 24
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For a window with a &lt;strong&gt;depth of 24&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwininfo | grep &apos;Window id&apos;
xwininfo: Window id: 0x1e0000f &quot;LibreOffice&quot;
 
% xwininfo | grep -i depth
  Depth: 24
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;piping &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xwd(1)&lt;/code&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xwdtopnm(0)&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pnmtopng(0)&lt;/code&gt; works:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwd | xwdtopnm | pnmtopng &amp;gt; screenshot.png
xwdtopnm: writing PPM file

% ls -lh screenshot.png
-rw-r--r--  1 dusko  dusko    23K Feb  6 12:01 screenshot.png

% file screenshot.png
screenshot.png: PNG image data, 830 x 391, 8-bit/color RGB, non-interlaced
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open the screenshot.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv screenshot.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For a window with a &lt;strong&gt;depth &amp;gt; 24&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwininfo | grep &apos;Window id&apos;
xwininfo: Window id: 0x1402c2d &quot;Mozilla Firefox&quot;
 
% xwininfo | grep -i depth
  Depth: 32
 
% xwd | xwdtopnm | pnmtopng &amp;gt; screenshot.png
xwdtopnm: can&apos;t handle X11 pixmap_depth &amp;gt; 24
pnmtopng: Error reading first byte of what is expected to be a Netpbm 
  magic number.  Most often, this means your input file is empty
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;piping &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xwd(1)&lt;/code&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xwdtopnm(0)&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pnmtopng(0)&lt;/code&gt; doesn’t work.&lt;/p&gt;

&lt;h4 id=&quot;workaround-for-taking-screenshots-with-xwd1-with-pixmap-size-depth-bigger-than-24&quot;&gt;Workaround for Taking Screenshots with xwd(1) with Pixmap Size (Depth) Bigger than 24&lt;/h4&gt;

&lt;p&gt;Modify and use a tool xwd2png (convert output of xwd to PNG), https://github.com/drj11/xwd2png.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
This is a quick and dirty workaround.  For example, I’m removing Python 
exception handling, NotImplementedError. although there is a possibility 
that the author of the source code left it to perhaps indicate a TODO 
placeholder, as a reminder to implement handling other cases (that is 
visual classes different than 4) later.&lt;/p&gt;

&lt;p&gt;Location where I keep my helper binaries, useful tools and scripts:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /mnt/usbflashdrive/bin
drwxr-xr-x  6 dusko  dusko  512 Dec  9 12:27 /mnt/usbflashdrive/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /mnt/usbflashdrive/bin/xwd2png
 
% fetch https://raw.githubusercontent.com/drj11/xwd2png/main/XWDFile.h
XWDFile.h                                     4031  B   22 MBps    00s
 
% fetch https://raw.githubusercontent.com/drj11/xwd2png/main/xwd.py
xwd.py                                        7958  B   34 MBps    00s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Python version:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /usr/local/bin/python*
-r-xr-xr-x  1 root  wheel  5248 Nov  3 18:13 /usr/local/bin/python3.8
-r-xr-xr-x  1 root  wheel  3153 Nov  3 18:13 /usr/local/bin/python3.8-config
lrwxr-xr-x  1 root  wheel    50 Jan  1 18:31 /usr/local/bin/pythontex -&amp;gt; ../share/texmf-dist/scripts/pythontex/pythontex.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i xwd.py xwd.py.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vi xwd.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff --unified=0 xwd.py.original.bak xwd.py
--- xwd.py.original.bak 2022-02-06 12:35:23.701781000 -0800
+++ xwd.py      2022-02-06 12:36:15.213548000 -0800
@@ -1 +1 @@
-#!/usr/bin/env python3
+#!/usr/bin/env python3.8
@@ -57,15 +56,0 @@
-        # Check visual_class.
-        # The following table from http://www.opensource.apple.com/source/tcl/tcl-87/tk/tk/xlib/X11/X.h is assumed:
-        # StaticGray    0
-        # GrayScale     1
-        # StaticColor   2
-        # PseudoColor   3
-        # TrueColor     4
-        # DirectColor   5
-
-        if self.visual_class != 4:
-            # TrueColor
-            raise NotImplemented(
-                &quot;Cannot handle visual_class {!r}&quot;.format(self.visual_class)
-            )
-
@@ -291 +276 @@
-        apng.write(out)
+        apng.save(out)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwininfo | grep &apos;Window id&apos;
xwininfo: Window id: 0x1402c2d &quot;Mozilla Firefox&quot;

% xwininfo | grep -i depth
  Depth: 32
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwd | /mnt/usbflashdrive/bin/xwd2png/xwd.py &amp;gt; ~/screenshot.png
 
% ls -lh ~/screenshot.png
-rw-r--r--  1 dusko  dusko   580K Feb  6 12:47 /home/dusko/screenshot.png
 
% file ~/screenshot.png
/home/dusko/screenshot.png: PNG image data, 1260 x 1079, 
  8-bit/color RGB, non-interlaced
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open the screenshot.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xv ~/screenshot.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively:&lt;br /&gt;
Install ImageMagick (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo pkg install ImageMagick7&lt;/code&gt;) and use one of 
its tools, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import&lt;/code&gt; for taking screenshots.&lt;/p&gt;

</description>
        <pubDate>Sat, 05 Feb 2022 13:33:21 -0800</pubDate>
        <link>http://localhost:4000/freebsd/dotfiles/x11/2022/02/05/xorg-x11-screenshots-xwd-png-netpbm.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/dotfiles/x11/2022/02/05/xorg-x11-screenshots-xwd-png-netpbm.html</guid>
        
        
        <category>freebsd</category>
        
        <category>dotfiles</category>
        
        <category>x11</category>
        
      </item>
    
      <item>
        <title>Set Up a New Machine with UEFI FreeBSD RootOnZFS Dual Boot with Windows 10</title>
        <description>&lt;p&gt;Hardware and operating systems:&lt;/p&gt;

&lt;p&gt;Laptop: &lt;a href=&quot;https://www.lenovo.com/us/en/p/laptops/thinkpad/thinkpadx/thinkpad-x280/22tp2tx2800&quot;&gt;Lenovo ThinkPad X280 - Ultraportable 12.5’’ Business Laptop&lt;/a&gt;   &lt;br /&gt;
Disk:  1 TB NVMe SSD   &lt;a href=&quot;https://www.westerndigital.com/products/internal-drives/pc-sn730-ssd#SDBQNTY-1TOO&quot;&gt;WDC PC SN730 SDBQNTY-1T00-1001 - Form Factor: M.2 2280 M-S3&lt;/a&gt;  &lt;br /&gt;
FreeBSD 13.0 &lt;br /&gt;
Windows 10 Professional&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Start with a pre-installed Windows 10 that’s already on the 
machine.  In this case, I wanted to start from a clean slate 
so I used the Lenovo factory recovery USB key to reformat the 
hard drive and reinstall Windows 10 Pro.  &lt;a href=&quot;#footnotes&quot;&gt;¹&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Some of the disk’s 1 TB capacity is used for formatting and 
other functions and is not available for data storage. 
Windows reported that the C: volume’s capacity is 953 GB.&lt;/p&gt;

&lt;p&gt;Log into Windows, and shrink the C: volume (Windows NTFS partition) to 
get some free space.&lt;/p&gt;

&lt;p&gt;After shrinking the C: volume, the disk is split like:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Reported by Windows Disk Management: 
Disk 0, Type: Basic, Size: 953.85 GB
WDC PC SN730 SDBQNTY-1T00-1001    
Device type:  Disk drives    
Location:     Location 4 (Bus Number 0, Target Id 0, LUN 0)    

+----------------------+--------+-----------+---------------+
| Volume               | File   | Capacity  | Partition     |
|                      | System |           | Type          |
+----------------------+--------+-----------+---------------+
| (Disk 0 partition 1) |        | 260 MB    | EFI           |
+----------------------+--------+-----------+---------------+
| (Disk 0 partition 4) |        | 1000 MB   | ms-recovery   |
+----------------------+--------+-----------+---------------+
| Windows (C:)         |  NTFS  | 220.20 GB | ms-basic-data |
+----------------------+--------+-----------+---------------+
| Unallocated          |        | 732.42 GB | - free -      |
+----------------------+--------+-----------+---------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you have free space so you can boot up with FreeBSD installer 
and install FreeBSD in that space.&lt;/p&gt;

&lt;p&gt;Download FreeBSD CD ISO installer image for the amd64 architecture.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ fetch \
https://download.freebsd.org/ftp/releases/amd64/amd64/ISO-IMAGES/13.0/FreeBSD-13.0-RELEASE-amd64-disc1.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Insert a USB flash drive into an available USB slot on your workstation.&lt;/p&gt;

&lt;p&gt;You can use &lt;a href=&quot;https://www.nomadbsd.org/&quot;&gt;NomadBSD&lt;/a&gt; for writing the FreeBSD 
installer image on the USB flash drive.&lt;/p&gt;

&lt;p&gt;NomadBSD is a FreeBSD-derived operating system distribution.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;It’s a persistent live system for USB flash drives.  Together with 
automatic hardware detection and setup, it is configured to be used 
as a desktop system that works out of the box, but can also be used 
for data recovery, for educational purposes, or to test FreeBSD’s 
hardware compatibility.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% dmesg | tail
umass1 on uhub2
umass1: &amp;lt;Lexar USB Flash Drive, class 0/0, rev 2.00/11.00, addr 3&amp;gt; on usbus1
umass1:  SCSI over Bulk-Only; quirks = 0x8100
umass1:6:1: Attached to scbus6
da1 at umass-sim1 bus 1 scbus6 target 0 lun 0
da1: &amp;lt;Lexar USB Flash Drive 1100&amp;gt; Removable Direct Access SPC-2 SCSI device
da1: Serial Number AA3ZKR4IVHT7LBGW
da1: 40.000MB/s transfers
da1: 15263MB (31258624 512 byte sectors)
da1: quirks=0x2&amp;lt;NO_6_BYTE&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the FreeBSD installer USB stick.&lt;br /&gt;
Write the &lt;strong&gt;.iso&lt;/strong&gt; file to the inserted USB thumb drive with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dd(1)&lt;/code&gt; command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo dd if=FreeBSD-13.0-RELEASE-amd64-disc1.iso of=/dev/da1 bs=1M conv=sync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove the installer USB stick.&lt;/p&gt;

&lt;p&gt;You might need to adjust the BIOS configuration on the computer where 
you are installing FreeBSD to boot from the FreeBSD installer USB stick. 
Insert the installer USB stick into an available USB slot on the computer 
where you are installing FreeBSD.&lt;/p&gt;

&lt;p&gt;Follow the prompts as per the FreeBSD Handbook’s instructions.  &lt;a href=&quot;#footnotes&quot;&gt;²&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The FreeBSD Boot Loader Menu similar to the following is displayed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   ______               ____   _____ _____
  |  ____|             |  _ \ / ____|  __ \
  | |___ _ __ ___  ___ | |_) | (___ | |  | |
  |  ___| &apos;__/ _ \/ _ \|  _ &amp;lt; \___ \| |  | |
  | |   | | |  __/  __/| |_) |____) | |__| |
  | |   | | |    |    ||     |      |      |
  |_|   |_|  \___|\___||____/|_____/|_____/
                                                 ```                        `
 +-----------Welcome to FreeBSD------------+    s` `.....---.......--.```   -/
 |                                         |    +o   .--`         /y:`      +.
 |  1. Boot Multi user [Enter]             |     yo`:.            :o      `+-
 |  2. Boot Single user                    |      y/               -/`   -o/
 |  3. Escape to loader prompt             |     .-                  ::/sy+:.
 |  4. Reboot                              |     /                     `--  /
 |                                         |    `:                          :`
 |  Options:                               |    `:                          :`
 |  5. Kernel: default/kernel (1 of 1)     |     /                          /
 |  6. Boot Options                        |     .-                        -.
 |                                         |      --                      -.
 |                                         |       `:`                  `:`
 |                                         |         .--             `--.
 +-----------------------------------------+            .---.....----.

   Autoboot in 9 seconds, hit [Enter] to boot or any other key to stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the FreeBSD Boot Loader Menu, select 1. Boot Multi User [Enter].&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.freebsd.org/en/books/handbook/bsdinstall/#bsdinstall-start&quot;&gt;Tip - FreeBSD Handbook&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;To review the boot messages, including the hardware device probe, 
press the upper- or lower-case &lt;strong&gt;S&lt;/strong&gt; and then &lt;strong&gt;Enter&lt;/strong&gt; to access a shell. 
At the shell prompt, type more &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/run/dmesg.boot&lt;/code&gt; and use the space 
bar to scroll through the messages.  When finished, type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exit&lt;/code&gt; to 
return to the welcome menu.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;For details, see the FreeBSD Handbook instructions:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/bsdinstall-start.html&quot;&gt;2.4.4. FreeBSD Boot Menu - Chapter 2. Installing FreeBSD&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once the boot is complete, the ``Welcome Menu’’ is displayed.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Welcome
Welcome to FreeBSD! Would you
like to begin an installation
or use the live CD?

&amp;lt;Install&amp;gt; &amp;lt; Shell &amp;gt; &amp;lt;Live CD&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Choose &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Shell&lt;/code&gt;.  (When finished, you can type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exit&lt;/code&gt; to return 
to the installer and continue installation, or to restart the system.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you would like to have a log of everything printed on your terminal 
during FreeBSD installation, start the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;script(1)&lt;/code&gt; utility.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# script
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /tmp/etc /tmp/root
# mount_unionfs /tmp/etc /etc
# mount_unionfs /tmp/root /root
# printf %s\\n &apos;PermitRootLogin yes&apos; &amp;gt;&amp;gt; /etc/ssh/sshd_config
# passwd
# service sshd onestart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add three FreeBSD slices (called partitions in other operating systems). &lt;br /&gt;
The third partition is a ZFS slice, occupying the rest of the available 
free disk space.&lt;/p&gt;

&lt;p&gt;Label all three partitions with &lt;strong&gt;GPT Labels&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# gpart add -a 4k -l swap0 -s 1G -t freebsd-swap nvd0
# gpart add -a 4k -l swap1 -s 4G -t freebsd-swap nvd0
# gpart add -a 4k -l zfs0 -t freebsd-zfs nvd0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Explanation:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-a 4k&lt;/code&gt;:                align a partition on 4KB boundaries&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-l &amp;lt;label_name&amp;gt;&lt;/code&gt;:      create the label attached to the partition &amp;lt;label_name&amp;gt;&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-s &amp;lt;partition_size&amp;gt;&lt;/code&gt;:  create a partition of size &amp;lt;partition_size&amp;gt;&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t &amp;lt;partition_type&amp;gt;&lt;/code&gt;:  create the partition type of &amp;lt;partition_type&amp;gt; &lt;br /&gt;
(List of partition types is included in the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gpart(8)&lt;/code&gt;)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# gpart show
=&amp;gt;        34  2000409197  nvd0  GPT  (954G)
          34        2014        - free -  (1.0M)
        2048      532480     1  efi  (260M)
      534528       32768     2  ms-reserved  (16M)
      567296   461793280     3  ms-basic-data  (220G)
   462360576     2097152     5  freebsd-swap  (1.0G)
   464457728     8388608     6  freebsd-swap  (4.0G)
   472846336  1525514240     7  freebsd-zfs  (727G)
  1998360576     2048000     4  ms-recovery  (1.0G)
  2000408576         655        - free -  (328K)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Load the zfs module, create a ZFS pool, and export it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# kldload zfs
# sysctl vfs.zfs.min_auto_ashift=12
# mkdir /tmp/zroot
# zpool create -f -o altroot=/tmp/zroot -O compress=lz4 -O atime=off -m none zroot /dev/gpt/zfs0
# zpool export zroot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
To force ZFS to choose 4K disk blocks when creating zpools, set the 
tunable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sysctl vfs.zfs.min_auto_ashift&lt;/code&gt; to 12.&lt;/p&gt;

&lt;p&gt;(If you want to make it permanent, add the following line 
 to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/sysctl.conf&lt;/code&gt; so that any future zpools created on 
 your system are created with 4K disk blocks):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sysctl vfs.zfs.min_auto_ashift=12
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create ZFS datasets compatible with &lt;strong&gt;BE (Boot Environment)&lt;/strong&gt; by placing 
the root dataset under ROOT.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# zpool import -o altroot=/tmp/zroot zroot
# zfs create -o mountpoint=none zroot/ROOT
# zfs create -o mountpoint=/ zroot/ROOT/default
# zfs create -o mountpoint=/tmp -o exec=on -o setuid=off zroot/tmp
# zfs create -o mountpoint=/usr -o canmount=off zroot/usr
# zfs create zroot/usr/home
# zfs create -o setuid=off zroot/usr/ports
# zfs create -o mountpoint=/var -o canmount=off zroot/var
# zfs create -o exec=off -o setuid=off zroot/var/audit
# zfs create -o exec=off -o setuid=off zroot/usr/src
# zfs create -o exec=off -o setuid=off zroot/var/crash
# zfs create -o exec=off -o setuid=off zroot/var/log
# zfs create -o atime=on zroot/var/mail
# zfs create -o setuid=off zroot/var/tmp
# zpool set bootfs=zroot/ROOT/default zroot
# chmod 1777 /tmp/zroot/tmp
# chmod 1777 /tmp/zroot/var/tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here you are installing FreeBSD manually so you need to extract a minimum 
FreeBSD installation, which includes three components:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;base&lt;/code&gt; (Base system), &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib32&lt;/code&gt; (32-bit compatibility 
libraries), &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kernel&lt;/code&gt; (Kernel).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /tmp/zroot
# ln -s usr/home home
# tar xvJpf /usr/freebsd-dist/base.txz
# tar xvJpf /usr/freebsd-dist/lib32.txz
# tar xvJpf /usr/freebsd-dist/kernel.txz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ensure the ZFS module will be loaded by the loader.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &apos;zfs_enable=&quot;YES&quot;&apos; &amp;gt;&amp;gt; /tmp/zroot/etc/rc.conf
# printf %s\\n &apos;zfs_load=&quot;YES&quot;&apos; &amp;gt;&amp;gt; /tmp/zroot/boot/loader.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To disable Disk ID labels and GPT GUID (GPT ID) labels,
add the following two lines in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/loader.conf&lt;/code&gt; 
so that disks are always &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gpt/&amp;lt;your_gpt_label_here&amp;gt;&lt;/code&gt; 
and never &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DISK-&amp;lt;disk_serial_number_here&amp;gt;&lt;/code&gt;.  &lt;a href=&quot;#footnotes&quot;&gt;³&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &apos;kern.geom.label.disk_ident.enable=&quot;0&quot;&apos; &amp;gt;&amp;gt; /tmp/zroot/boot/loader.conf
# printf %s\\n &apos;kern.geom.label.gptid.enable=&quot;0&quot;&apos;  &amp;gt;&amp;gt; /tmp/zroot/boot/loader.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &apos;dumpdev=&quot;AUTO&quot;&apos; &amp;gt;&amp;gt; /tmp/zroot/etc/rc.conf
# printf %s\\n &apos;powerd_enable=&quot;YES&quot;&apos; &amp;gt;&amp;gt; /tmp/zroot/etc/rc.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Make a note of swap partitions.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf &quot;/dev/gpt/swap0\tnone\tswap\tsw\t0\t0\n&quot; &amp;gt;&amp;gt; /tmp/zroot/etc/fstab
# printf &quot;/dev/gpt/swap1\tnone\tswap\tsw\t0\t0\n&quot; &amp;gt;&amp;gt; /tmp/zroot/etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set UTC to Yes or No, and select your time zone.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# tzsetup -C /tmp/zroot 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chroot /tmp/zroot/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# passwd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Installing the FreeBSD boot manager overwrites the Windows boot code, 
resulting in an unbootable Windows.  To work around that, install 
&lt;strong&gt;rEFInd&lt;/strong&gt;, an EFI boot manager utility, and configure it for a dual boot 
with FreeBSD and Windows 10.&lt;/p&gt;

&lt;p&gt;Note: &lt;br /&gt;
If the steps outlined below don’t work because you still don’t have 
network connection, download &lt;strong&gt;rEFInd&lt;/strong&gt; on a separate machine and copy 
it to the system you are installing FreeBSD on.  &lt;a href=&quot;#footnotes&quot;&gt;⁴&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /tmp
# fetch https://iweb.dl.sourceforge.net/project/refind/0.13.2/refind-bin-0.13.2.zip
# unzip refind-bin-0.13.2.zip 
# rm refind-bin-0.13.2.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;pre&gt;&lt;code class=&quot;language-`&quot;&gt;# mkdir /tmp/efi
# mount_msdosfs /dev/gpt/EFI%20system%20partition /tmp/efi/
# cd /tmp/efi/EFI/Boot
# mv bootx64.efi bootx64-windows-10.efi
# cp /boot/boot1.efi bootx64-freebsd.efi
# cp -a /tmp/refind-bin-0.13.2/refind/icons .
# cp -a /tmp/refind-bin-0.13.2/refind/refind_x64.efi bootx64.efi
# cp /tmp/refind-bin-0.13.2/refind/refind.conf-sample refind.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cat &amp;lt;&amp;lt; EOF &amp;gt;&amp;gt; refind.conf

menuentry &quot;FreeBSD/amd64 -RELEASE&quot; {
    loader \EFI\Boot\bootx64-freebsd.efi
    icon \EFI\Boot\icons\os_freebsd.png
}

menuentry &quot;Windows 10 x64&quot; {
    loader \EFI\Boot\bootx64-windows-10.efi
    icon \EFI\Boot\icons\os_win.png
}
EOF
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd
# reboot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;First login into FreeBSD after fresh install.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ps $$
 PID TT  STAT    TIME COMMAND
1543  0  Ss   0:00.01 /bin/csh -i
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# df -hT
Filesystem          Type     Size    Used   Avail Capacity  Mounted on
zroot/ROOT/default  zfs      701G    717M    701G     0%    /
devfs               devfs    1.0K    1.0K      0B   100%    /dev
zroot/tmp           zfs      701G    9.6M    701G     0%    /tmp
zroot/var/log       zfs      701G    140K    701G     0%    /var/log
zroot/usr/ports     zfs      701G     96K    701G     0%    /usr/ports
zroot/usr/home      zfs      701G     96K    701G     0%    /usr/home
zroot/var/crash     zfs      701G     96K    701G     0%    /var/crash
zroot/var/audit     zfs      701G     96K    701G     0%    /var/audit
zroot/usr/src       zfs      701G     96K    701G     0%    /usr/src
zroot/var/mail      zfs      701G     96K    701G     0%    /var/mail
zroot/var/tmp       zfs      701G     96K    701G     0%    /var/tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# zfs list
NAME                 USED  AVAIL     REFER  MOUNTPOINT
zroot                729M   701G       96K  none
zroot/ROOT           717M   701G       96K  none
zroot/ROOT/default   717M   701G      717M  /
zroot/tmp           9.59M   701G     9.59M  /tmp
zroot/usr            288K   701G       96K  /usr
zroot/usr/home        96K   701G       96K  /usr/home
zroot/usr/ports       96K   701G       96K  /usr/ports
zroot/usr/src         96K   701G       96K  /usr/src
zroot/var            620K   701G       96K  /var
zroot/var/audit       96K   701G       96K  /var/audit
zroot/var/crash       96K   701G       96K  /var/crash
zroot/var/log        140K   701G      140K  /var/log
zroot/var/mail        96K   701G       96K  /var/mail
zroot/var/tmp         96K   701G       96K  /var/tmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /boot/loader.conf
zfs_load=&quot;YES&quot;
kern.geom.label.disk_ident_enable=&quot;0&quot;
kern.geom.label.gptid.enable=&quot;0&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/rc.conf
zfs_enable=&quot;YES&quot;
dumpdev=&quot;AUTO&quot;
powerd_enable=&quot;YES&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:  The hostname has not been set.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# hostname

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# uname -a
FreeBSD  13.0-RELEASE FreeBSD 13.0-RELEASE #0 
  releng/13.0-n244733-ea31abc261f: Fri Apr  9 04:24:09 UTC 2021
  root@releng1.nyi.freebsd.org:/usr/obj/usr/src/amd64.amd64/sys/GENERIC  am
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sysctl -a | grep -i realtek
dev.ure.0.%desc: Realtek USB 10/100 LAN, class 0/0, rev 3.00/30.00, addr 9
dev.pcm.1.%desc: Realtek ALC257 (Right Analog Mic)
dev.pcm.0.%desc: Realtek ALC257 (Analog 2.0+HP/2.0)
dev.hdaa.0.%desc: Realtek ALC257 Audio Function Group
dev.hdacc.0.%desc: Realtek ALC257 HDA CODEC
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# man -k Ethernet | grep -i adapter | grep -i realtek
re, if_re(4) - RealTek 8139C+/8169/816xS/811xS/8168/810xE/8111 PCI/PCIe Ethernet adapter drive
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# sysctl -a | grep &apos;dev.ure.0&apos;
dev.ure.0.chipver: 5c30
dev.ure.0.%parent: uhub3
dev.ure.0.%pnpinfo: vendor=0x0bda product=0x8153 devclass=0x00 
  devsubclass=0x00 devproto=0x00 sernum=&quot;000001&quot; release=0x3000 mode=host 
  intclass=0xff intsubclass=0xff intprotocol=0x00
dev.ure.0.%location: bus=0 hubaddr=9 port=1 devaddr=10 interface=0 ugen=ugen0.10
dev.ure.0.%driver: ure
dev.ure.0.%desc: Realtek USB 10/100 LAN, class 0/0, rev 3.00/30.00, addr 9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# service netif stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &quot;nameserver 192.168.1.254&quot; &amp;gt; ure0_resolv.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat ure0_resolv.conf
nameserver 192.168.1.254
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/resolv.conf
cat: /etc/resolv.conf: No such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# resolvconf -I
# resolvconf -a ure0 &amp;lt; ure0_resolv.conf
# resolvconf -u
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/resolv.conf
# Generated by resolvconf
nameserver 192.168.1.254
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &apos;defaultrouter=&quot;192.168.1.254&quot;&apos; &amp;gt;&amp;gt; /etc/rc.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/rc.conf
zfs_enable=&quot;YES&quot;
dumpdev=&quot;AUTO&quot;
powerd_enable=&quot;YES&quot;
ifconfig_ue0=&quot;DHCP&quot;
defaultrouter=&quot;192.168.1.254&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# netstat -rn
Routing tables

Internet6:
Destination             Gateway     Flags     Netif Expire
::/96                   ::1         UGRS        lo0
::ffff:0.0.0.0/96       ::1         UGRS        lo0
fe80::/10               ::1         UGRS        lo0
ff02::/16               ::1         UGRS        lo0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: 
Not needed: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;route add default 192.168.1.254&lt;/code&gt; as with the 
following &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;netif&lt;/code&gt; restart, it will pick up the default router 
from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/rc.conf&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# service netif restart ue0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ping -c2 freebsd.org
PING freebsd.org (96.47.72.84): 56 data bytes
64 bytes from 96.47.72.84: icmp_seq=0 ttl=56 time=74.684 ms
64 bytes from 96.47.72.84: icmp_seq=1 ttl=56 time=75.789 ms

--- freebsd.org ping statistics ---
2 packets transmitted, 2 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 74.684/75.237/75.789/0.553 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /etc/resolv.conf
# Generated by resolvconf
nameserver 192.168.1.254
nameserver 75.153.176.9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# freebsd-version
13.0-RELEASE

# freebsd-version -k
13.0-RELEASE

# freebsd-version -u
13.0-RELEASE

# freebsd-version -r
13.0-RELEASE

# uname -a
FreeBSD  13.0-RELEASE FreeBSD 13.0-RELEASE #0 
  releng/13.0-n244733-ea31abc261f: Fri Apr  9 04:24:09 UTC 2021
  root@releng1.nyi.freebsd.org:/usr/obj/usr/src/amd64.amd64/sys/GENERIC  amd64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# freebsd-update fetch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# freebsd-update install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg
The package management tool is not yet installed on your system.
Do you want to fetch and install it now? [y/N]: y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg-static upgrade -f pkg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg upgrade -f
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# freebsd-version
13.0-RELEASE-p5

# freebsd-version -k
13.0-RELEASE-p4

# freebsd-version -u
13.0-RELEASE-p5

# freebsd-version -r
13.0-RELEASE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# uname -a
FreeBSD  13.0-RELEASE FreeBSD 13.0-RELEASE #0 
  releng/13.0-n244733-ea31abc261f: Fri Apr  9 04:24:09 UTC 2021
  root@releng1.nyi.freebsd.org:/usr/obj/usr/src/amd64.amd64/sys/GENERIC  amd64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Correct system time.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# date
Sat Dec 25 21:39:51 PST 2021
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# date 1342
Sat Dec 25 13:42:00 PST 2021
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# date
Sat Dec 25 13:42:02 PST 2021
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add a user and add it to group &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wheel&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pw useradd dusko -G wheel -m -s csh
# passwd dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a hostname:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# printf %s\\n &apos;hostname=&quot;fbsd1.home.arpa&quot;&apos; &amp;gt;&amp;gt; /etc/rc.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install &lt;strong&gt;xorg&lt;/strong&gt; metapackage. &lt;a href=&quot;#footnotes&quot;&gt;⁵&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg info | wc -l
1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg install xorg  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Messages from two packages mentioned two environment variables 
(which I chose not to create): Package freetype2 mentioned the environment 
variable “FREETYPE_PROPERTIES”. Package wayland mentioned “XDG_RUNTIME_DIR” 
environment variable.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
Your X Windows configuration file is typically /etc/X11/XF86Config
if you are using XFree86, and /etc/X11/xorg.conf if you are using X.Org.&lt;/p&gt;

&lt;p&gt;In FreeBSD:  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/local/etc/X11/fontpath.d/
/usr/local/etc/X11/xinit/
/usr/local/etc/X11/xorg.conf.d/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To make sure that the freetype module is loaded, add the following line 
to the “Modules” section of the X Window System configuration file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /usr/local/etc/X11/xorg.conf.d/modules.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /usr/local/etc/X11/xorg.conf.d/modules.conf
Section &quot;Module&quot;
    Load &quot;freetype&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the DejaVu fonts (font family), add the following line to the “Files” 
section of your X Window System configuration file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /usr/local/etc/X11/xorg.conf.d/fonts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /usr/local/etc/X11/xorg.conf.d/fonts.conf
Section &quot;Files&quot;
    FontPath &quot;/usr/local/share/fonts/dejavu/&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /usr/local/etc/X11/xorg.conf.d/card.conf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;br /&gt;
Did not need to add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Option &quot;DPMS&quot;&lt;/code&gt; explicitly to enable 
Display Power Management Signaling extension. 
(DPMS enables the X server to reduce monitor power consumption 
when not in use.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /usr/local/etc/X11/xorg.conf.d/card.conf 
Section &quot;Device&quot;
    Identifier &quot;Card0&quot;
    Driver &quot;modesetting&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Multi-keyboard layout.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /usr/local/etc/X11/xorg.conf.d/keyboard.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /usr/local/etc/X11/xorg.conf.d/keyboard.conf
Section &quot;InputClass&quot;
    Identifier &quot;All Keyboards&quot;
    MatchIsKeyboard &quot;yes&quot;
    Option &quot;XkbLayout&quot; &quot;us, rs(latinunicode), rs&quot;
    Option &quot;XkbOptions&quot; &quot;ctrl:nocaps,grp:rctrl_toggle&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;card.conf     (Did not need to add &quot;DPMS&quot; explicitly)
fonts.conf
module.conf
keyboard.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add your regular user to group &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;video&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pw usermod -L video -n dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install the metaport of DRM modules for the linuxkpi-based KMS components. 
Installing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;drm-kmod&lt;/code&gt; installs three packages: drm-fbsd13-kmod, 
drm-kmod, gpu-firmware-kmod.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg install drm-kmod
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Index the man pages (UNIX manuals), to make keywords available for fast 
retrieval by apropos(1), whatis(1), and man(1)’s -k option.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# makewhatis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# pkg install sudo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;visudo(8)&lt;/code&gt; to edit the sudoers file (/usr/local/etc/sudoers)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cp -i /usr/local/etc/sudoers /tmp/sudoers.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Allow members of group wheel to execute any command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# visudo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff --unified=0 /tmp/sudoers.original.bak /usr/local/etc/sudoers
--- /tmp/sudoers.original.bak   2021-12-26 21:11:43.646443000 -0800
+++ /usr/local/etc/sudoers      2021-12-26 21:12:41.517985000 -0800
@@ -90 +90 @@
-# %wheel ALL=(ALL) ALL
+%wheel ALL=(ALL) ALL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cp -i /etc/login.conf /tmp/login.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# vi /etc/login.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# diff --unified=0 /tmp/login.conf /etc/login.conf
--- /tmp/login.conf     2021-12-26 21:25:11.745352000 -0800
+++ /etc/login.conf     2021-12-26 21:27:30.345516000 -0800
@@ -332,0 +333,5 @@
+
+video:\
+       :charset=UTF-8:\
+       :lang=en_CA.UTF-8:\
+       :tc=default:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cap_mkdb /etc/login.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install xlsfonts xfontsel xfd xloadimage xv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install vdesk
% sudo pkg install slock dmenu
% sudo pkg install vim-gtk3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install tea
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[TODO]  &lt;br /&gt;
Add links to dotfiles.&lt;/p&gt;

&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.xinitrc&lt;/code&gt; (xrdb, fonts, beep, xsetroot, xrandr, twm, xclock, xload)  &lt;br /&gt;
Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.twmrc&lt;/code&gt; &lt;br /&gt;
Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.Xresources&lt;/code&gt; -&amp;gt;  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xrdb ~/.Xresources&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install taskwarrior
% sudo pkg install remind
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install cheat
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In ~/.cshrc:&lt;/p&gt;

&lt;p&gt;Modify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.cshrc&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias man man -P less -IMFXRJj4&lt;/code&gt;, prompt, 
vi key binding, taskrc, history, &lt;br /&gt;
locale -&amp;gt; LC_ALL, LC_CTYPE, LC_MESSAGES, LC_TIME, LANG &lt;br /&gt;
Add the line &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setenv  TASKRC  /mnt/usbflashdrive/mydotfiles/.taskrc&lt;/code&gt; 
to ~/.cshrc&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &quot;$CHEAT_CONFIG_PATH&quot;
CHEAT_CONFIG_PATH: Undefined variable.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep CHEAT_CONFIG_PATH ~/.cshrc
setenv CHEAT_CONFIG_PATH /mnt/usbflashdrive/mydotfiles/cheat/conf.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the line &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setenv CHEAT_CONFIG_PATH /mnt/usbflashdrive/mydotfiles/cheat/conf.yml&lt;/code&gt;
to ~/.cshrc&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vi ~/.cshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep CHEAT_CONFIG_PATH ~/.cshrc
setenv CHEAT_CONFIG_PATH /mnt/usbflashdrive/mydotfiles/cheat/conf.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% source ~/.cshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n &quot;$CHEAT_CONFIG_PATH&quot;
/mnt/usbflashdrive/mydotfiles/cheat/conf.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l /mnt/usbflashdrive/mydotfiles/cheat/conf.yml
      69 /mnt/usbflashdrive/mydotfiles/cheat/conf.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed &apos;/^[[:space:]]*$/d&apos; \
 /mnt/usbflashdrive/mydotfiles/cheat/conf.yml | grep -v \#
---
editor: vim
colorize: true
style: monokai
formatter: terminal16m
pager: less -FRX
cheatpaths:
  - name: community
    path: /mnt/usbflashdrive/mydotfiles/cheat/cheatsheets/community
    tags: [ community ]
    readonly: true
  - name: personal
    path: /mnt/usbflashdrive/mydotfiles/cheat/cheatsheets/personal
    tags: [ personal ]
    readonly: false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.taskrc&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% wc -l /mnt/usbflashdrive/mydotfiles/.taskrc
      30 /mnt/usbflashdrive/mydotfiles/.taskrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed &apos;/^[[:space:]]*$/d&apos; \
 /mnt/usbflashdrive/mydotfiles/.taskrc | \
 grep -v \#
data.location=/mnt/usbflashdrive/mydotfiles/.task
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The related directory, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.task&lt;/code&gt; will be created automatically by the 
takswarrior (note: the binary is named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;task&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -ld /mnt/usbflashdrive/mydotfiles/.task
drwxr-xr-x  3 dusko  dusko  512 Aug  7  2020 /mnt/usbflashdrive/mydotfiles/.task
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /mnt/usbflashdrive/mydotfiles/.task
total 112
-rw-r--r--  1 dusko  dusko    34K Aug  7  2020 backlog.data
-rw-r--r--  1 dusko  dusko    10K Aug  7  2020 completed.data
drwxr-xr-x  2 dusko  dusko   512B Aug  7  2020 hooks
-rw-r--r--  1 dusko  dusko   4.9K Aug  7  2020 pending.data
-rw-r--r--  1 dusko  dusko    49K Aug  7  2020 undo.data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create crontab.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% crontab -e
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% crontab -l
SHELL=/bin/sh
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin

40 9 * * * env DISPLAY=:0 /mnt/usbflashdrive/scripts/csh/showtasks.sh 2&amp;gt;&amp;amp;1
40 9 * * * env DISPLAY=:0 /mnt/usbflashdrive/scripts/csh/remindgxmsgtcsh.sh 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /mnt/usbflashdrive/scripts/csh/remindgxmsgtcsh.sh
-rwxr--r--  1 dusko  dusko   1.2K Oct 27 21:26 /mnt/usbflashdrive/scripts/csh/remindgxmsgtcsh.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /mnt/usbflashdrive/scripts/csh/remindgxmsgtcsh.sh
#!/bin/csh 

remind -c /mnt/usbflashdrive/mydotfiles/.reminders | \
 xmessage -bg black -fg gold -buttons OK:1 -default OK -file -

remind -c+1 /mnt/usbflashdrive/mydotfiles/.reminders | \
 mail -s &quot;weekly reminder&quot; dusko
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /mnt/usbflashdrive/scripts/csh/showtasks.sh
-rwxr--r--  1 dusko  dusko   1.0K Aug  5 10:04 /mnt/usbflashdrive/scripts/csh/showtasks.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /mnt/usbflashdrive/scripts/csh/showtasks.sh
#!/bin/csh

setenv DISPLAY :0
setenv TASKRC /mnt/usbflashdrive/mydotfiles/.taskrc

/usr/local/bin/xterm -fa gallant -fs 14 \
 -geometry 150x38+0+0 -hold \
 -e /bin/csh -c /usr/local/bin/task
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Modify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.shrc&lt;/code&gt;  &lt;br /&gt;
Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.vimrc&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat ~/.vimrc
set noruler
set nohlsearch
set noincsearch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install firefox
(some of dependent packages installed:
adwaita-icon-theme, cairo, cups, dbus, ffmpeg, gtk3, harfbuzz,
hicolor-icon-theme, lame, libxkbcommon, pango, wayland-protocols)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install chromium
(some of dependent packages installed:
consolekit2, flac, dconf, noto-basic, pulseaudio, xdg-utils)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install thunderbird   
(some of dependent packages installed: gtk2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add an LDAP address book. &lt;br /&gt;
Click Address Book button (inside Mail Toolbar, which is underneath Menu Bar). &lt;br /&gt;
File &amp;gt; New &amp;gt; LDAP Directory… &amp;gt; ‘General’ tab&lt;/p&gt;

&lt;p&gt;Name:  aNameMeaningfulToYou &lt;br /&gt;
Hostname:  ldap.dept.example.com &lt;br /&gt;
Base DN:  ou=People,dc=dept,dc=example,dc=com  &lt;br /&gt;
Port number: 389 &lt;br /&gt;
Bind DN:  &lt;br /&gt;
[ ]  Use secure connection (SSL)&lt;/p&gt;

&lt;p&gt;Click OK&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install libreoffice en_GB-libreoffice
(some of dependency packages installed:
apr (Apache Portable Runtime project), alsa-lib, boost-libs,  
curl, cyrus-sasl, db5, iso-codes, javavmwrapper, openjdk11, openjpeg,
openldap24-client, poppler, qt5-core, qt5-dbus, qt5-gui,
twemoji-color-font-ttf, vulkan-headers, xcb-util-image,
xcb-util-keysyms, twemoji-color-font-ttf;
fonts: linuxlibertine-g, liberation-fonts-ttf, GentiumBasic,
crosextrafonts-carlito, crosextrafonts-caladea)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add “FontPath” sections for fonts installed by LibreOffice.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/fonts.conf
Section &quot;Files&quot;
    FontPath &quot;/usr/local/share/fonts/dejavu/&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/fonts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/fonts.conf
Section &quot;Files&quot;
    FontPath &quot;/usr/local/share/fonts/dejavu/&quot;
    FontPath &quot;/usr/local/share/fonts/LinLibertineG/&quot;
    FontPath &quot;/usr/local/share/fonts/Liberation/&quot;
    FontPath &quot;/usr/local/share/fonts/GentiumBasic/&quot;
    FontPath &quot;/usr/local/share/fonts/Carlito/&quot;
    FontPath &quot;/usr/local/share/fonts/Caladea/&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The OpenJDK implementation installed by libreoffice package 
requires &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fdescfs(5)&lt;/code&gt; mounted on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/fd&lt;/code&gt; 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;procfs(5)&lt;/code&gt; mounted on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/proc&lt;/code&gt;.  You need to add the 
following two lines in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/fstab&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /etc/fstab
/dev/gpt/swap0/ none    swap    sw      0       0
/dev/gpt/swap1/ none    swap    sw      0       0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /etc/fstab
/dev/gpt/swap0/ none    swap    sw      0       0
/dev/gpt/swap1/ none    swap    sw      0       0
fdesc           /dev/fd fdescfs rw      0       0
proc            /proc   procfs  rw      0       0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install zathura zathura-pdf-poppler zathura-ps
(some of dependency packages installed:
ghostscript9-agpl-base, girara, libnotify, tex-kpathsea, tex-synctex)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Message from ghostscript9-agpl-base:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;This package installs a script named dvipdf that depends on dvips.
If you want to use this script you need to install print/tex-dvipsk.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install tex-dvipsk
(some of dependency packages installed:
libgd, libpotrace, mpfr, openjpeg15, psutils,
teckit, tex-dvipsk, tex-ptexenc, tex-web2c, texlive-base,
texlive-texmf, texlive-tlmgr, xpdfopen, zziplib)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install tex-xetex 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install jmk-x11-fonts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i /usr/local/etc/X11/xorg.conf.d/fonts.conf /tmp/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/fonts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xlsfonts | grep -i jmk | wc -l
       0

% xlsfonts | grep -i neep | wc -l
       0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset fp+ /usr/local/share/fonts/jmk-x11-fonts/
% xset fp rehash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xlsfonts | grep -i jmk | wc -l
     144

% xlsfonts | grep -i neep | wc -l
     136
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /tmp/fonts.conf.bak \
 /usr/local/etc/X11/xorg.conf.d/fonts.conf
--- /tmp/fonts.conf.bak 2022-01-02 15:33:23.417190000 -0800
+++ /usr/local/etc/X11/xorg.conf.d/fonts.conf   2022-01-02 15:49:01.359673000 -0800
@@ -7,0 +8 @@
+    FontPath &quot;/usr/local/share/fonts/jmk-x11-fonts/&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/fonts.conf
Section &quot;Files&quot;
    FontPath &quot;/usr/local/share/fonts/dejavu/&quot;
    FontPath &quot;/usr/local/share/fonts/LinLibertineG/&quot;
    FontPath &quot;/usr/local/share/fonts/Liberation/&quot;
    FontPath &quot;/usr/local/share/fonts/GentiumBasic/&quot;
    FontPath &quot;/usr/local/share/fonts/Carlito/&quot;
    FontPath &quot;/usr/local/share/fonts/Caladea/&quot;
    FontPath &quot;/usr/local/share/fonts/jmk-x11-fonts/&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install tex-luatex
(also installs the following dependency packages: 
tex-basic-engines, tex-formats, tex-libtexlua, tex-libtexluajit)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install symbola courier-prime libertinus firacode
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mkdir /tmp/toextract

% cd /tmp/toextract

% fetch https://www.fontsquirrel.com/fonts/download/courier-prime-sans
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh
total 217
-rw-r--r--  1 dusko  wheel   204K Jan  9 19:51 courier-prime-sans

% file courier-prime-sans
courier-prime-sans: Zip archive data, at least v2.0 to extract
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mv courier-prime-sans courier-prime-sans.zip
% unzip courier-prime-sans.zip
% rm -i courier-prime-sans.zip

% cd ..

% pwd
/tmp

% mv toextract courierprimesans

% sudo mv /tmp/courierprimesans /usr/local/share/fonts/
% sudo chown -R root /usr/local/share/fonts/courierprimesans/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-list | grep -i courier | grep -i prime | grep -i sans
/usr/local/share/fonts/courierprimesans/Courier Prime Sans Italic.ttf: Courier Prime Sans:style=Italic
/usr/local/share/fonts/courierprimesans/Courier Prime Sans Bold Italic.ttf: Courier Prime Sans:style=Bold Italic
/usr/local/share/fonts/courierprimesans/Courier Prime Sans Bold.ttf: Courier Prime Sans:style=Bold
/usr/local/share/fonts/courierprimesans/Courier Prime Sans.ttf: Courier Prime Sans:style=Regular 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /usr/local/share/fonts/courierprimesans/

% sudo mkfontdir
% sudo mkfontscale

% cd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset fp+ /usr/local/share/fonts/symbola/
% xset fp+ /usr/local/share/fonts/courier-prime/
% xset fp+ /usr/local/share/fonts/libertinus/
% xset fp+ /usr/local/share/fonts/firacode/
% xset fp+ /usr/local/share/fonts/courierprimesans/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xset fp rehash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cp -i /usr/local/etc/X11/xorg.conf.d/fonts.conf /tmp/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/fonts.conf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% diff \
 --unified=0 \
 /tmp/fonts.conf \
 /usr/local/etc/X11/xorg.conf.d/fonts.conf
--- /tmp/fonts.conf     2022-01-09 20:33:45.476371000 -0800
+++ /usr/local/etc/X11/xorg.conf.d/fonts.conf   2022-01-09 20:32:32.612990000 -0800
@@ -8,0 +9,5 @@
+    FontPath &quot;/usr/local/share/fonts/symbola/&quot;
+    FontPath &quot;/usr/local/share/fonts/courier-prime/&quot;
+    FontPath &quot;/usr/local/share/fonts/libertinus/&quot;
+    FontPath &quot;/usr/local/share/fonts/firacode/&quot;
+    FontPath &quot;/usr/local/share/fonts/courierprimesans/&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install Mutt, a text based MUA (Mail User Agent).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install mutt
(some of dependency packages installed:
 gnupg, gpgme, mime-support, pinentry, urlview)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttrc&lt;/code&gt; configuration file.&lt;br /&gt;
As I keep my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;muttrc&lt;/code&gt; in a non-home directory, I start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mutt&lt;/code&gt; 
with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-F&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mutt -F /path/to/my/muttrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aspell-ispell&lt;/code&gt;, Ispell compatibility script for aspell.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install aspell-ispell
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install Aspell English dictionaries.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install en-aspell
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install beadm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install keepassxc openconnect rsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install graphviz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install the netpbm suite, a toolkit for conversion of images between different formats.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install netpbm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the X Window System, the program xwd (X Window dump) captures the 
content of a screen or of a window (a.k.a. takes a screenshot). 
The file generated by xwd can then be read by various other X utilities 
such as xwud or xv.&lt;/p&gt;

&lt;p&gt;To take a screenshot (a.k.a. screen capture) and convert it to png format:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ xwd | xwdtopnm | pnmtopng &amp;gt; screenshot.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
If you get this error:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xwd | xwdtopnm | pnmtopng &amp;gt; screenshot.png
xwdtopnm: can&apos;t handle X11 pixmap_depth &amp;gt; 24
pnmtopng: Error reading first byte of what is expected to be a Netpbm 
magic number.  Most often, this means your input file is empty
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;a) try a different program (for example, instead of taking a screenshot 
of firefox browser, try taking a screenshot of chromium browser) &lt;br /&gt;
b) exit X session, and start it with a different colur depth, for example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% exec startx -- -depth 16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install wireshark.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install wireshark  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In order for wireshark be able to capture packets when used by unprivileged
user, /dev/bpf should be in network group and have read-write permissions:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo chgrp network /dev/bpf*
% sudo chmod g+r /dev/bpf*
% sudo chmod g+w /dev/bpf*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In order for this to persist across reboots, add the following to
/etc/devfs.conf:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;own  bpf* root:network
perm bpf* 0660
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cp -i /etc/devfs.conf /etc/devfs.conf.original.bak
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install dia, diagram creation program.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install dia 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s\\n | sudo tee -a /etc/devfs.conf

% printf %s\\n &apos;In order for wireshark be able to capture packets when used by&apos; \
 | sudo tee -a /etc/devfs.conf

% printf %s\\n &apos;unprivileged user, /dev/bpf should be in network group and have&apos; \
 | sudo tee -a /etc/devfs.conf

% printf %s\\n &apos;read-write permissions.&apos; | sudo tee -a /etc/devfs.conf

% printf %s\\n &apos;own  bpf* root:network&apos; | sudo tee -a /etc/devfs.conf

% printf %s\\n &apos;perm bpf* 0660&apos; | sudo tee -a /etc/devfs.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a Trash directory.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% mkdir ~/trash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install git.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% git config --global user.name &quot;duskopijetlovic&quot;
% git config --global user.email &quot;username@yourdomain.com&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Clone a git repository that you would like to update.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% git \
 clone \
 https://github.com/duskopijetlovic/duskopijetlovic.github.io.git \
 duskopijetlovic.github.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install ruby
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install ruby27-gems
% sudo pkg install rubygem-irb rubygem-rake rubygem-bundler rubygem-jekyll
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd duskopijetlovic.github.io/
% bundle exec jekyll serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Configure &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cpan(1)&lt;/code&gt; module &lt;a href=&quot;#footnotes&quot;&gt;⁶&lt;/a&gt; so that it can be used by 
non-root users for installing Perl modules.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cpan -l
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In “What approach do you want?  (Choose ‘local::lib’, ‘sudo’ or ‘manual’)”, 
enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Loading internal logger. Log::Log4perl recommended for better logging

CPAN.pm requires configuration, but most of it can be done automatically.
If you answer &apos;no&apos; below, you will enter an interactive dialog for each
configuration option instead.

Would you like to configure as much as possible automatically? [yes] yes

Warning: You do not have write permission for Perl library directories.

To install modules, you need to configure a local Perl library directory or
escalate your privileges.  CPAN can help you by bootstrapping the local::lib
module or by configuring itself to use &apos;sudo&apos; (if available).  You may also
resolve this problem manually if you need to customize your setup.

What approach do you want?  (Choose &apos;local::lib&apos;, &apos;sudo&apos; or &apos;manual&apos;)
 [local::lib] sudo

---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Configuration is written to:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/.cpan/CPAN/MyConfig.pm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;[TODO]  &lt;br /&gt;
Try dual boot without rEFInd; that is, try it with only UEFI’s boot loader: &lt;br /&gt;
&lt;a href=&quot;https://forums.freebsd.org/threads/dual-booting-windows-10-alongside-freebsd-11-0-release.59427/#post-341619&quot;&gt;Dual-booting Windows 10 alongside FreeBSD 11.0-RELEASE - FreeBSD Forum&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Adding yet another boot loader to the chain is (probably) unnecessary 
if you’re using UEFI.  Most motherboard firmwares already provide 
a menu for selecting between EFI boot entries.  The only thing that 
may not be obvious is how to add an entry for FreeBSD to this menu so 
that it lives alongside Windows Boot Manager.  Now, if you don’t have 
a fancy boot menu you can access with the press of a key at startup 
then you’re going to have to look into using something like GRUB 
or rEFInd.  You might consider using such an option even if you do 
have a working boot menu provided by your firmware.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h4&gt;

&lt;p&gt;[¹] &lt;a href=&quot;https://support.lenovo.com/ca/en/solutions/ht035659&quot;&gt;How can I create Recovery Media (DVD or USB), or order Recovery Media (DVD or USB) from Lenovo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(Retrieved on Dec 12, 2021)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Recovery Media is DVD or USB media containing a backup of the original 
factory condition of a computer as configured by Lenovo, or a PC 
system user.  Recovery Media allows you to reformat the hard drive, 
reinstall the operating system and reset the system to the original 
Lenovo factory condition.&lt;/p&gt;

  &lt;p&gt;Note:  Before you start the recovery process, back up all the data 
that you want to keep.  During the recovery, all files on your hard 
disk drive (HDD), and all system settings will be deleted.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;[²] For more details about FreeBSD boot process, see:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.freebsd.org/en/books/handbook/boot/#boot-introduction&quot;&gt;13.2. FreeBSD Boot Process - FreeBSD Handbook&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.freebsd.org/en/books/handbook/bsdinstall/#bsdinstall-start&quot;&gt;2.4. Starting the Installation - FreeBSD Handbook&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(Retrieved on Dec 12, 2021)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;2.4.1. Booting on i386(TM) and amd64&lt;/p&gt;

  &lt;p&gt;These architectures provide a BIOS menu for selecting the boot device. 
Depending upon the installation media being used, select the CD/DVD or 
USB device as the first boot device.  Most systems also provide a key 
for selecting the boot device during startup without having to enter 
the BIOS.  Typically, the key is either F10, F11, F12, or Escape.&lt;/p&gt;

  &lt;p&gt;If the computer loads the existing operating system instead of the 
FreeBSD installer, then either:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;The installation media was not inserted early enough in the boot 
process.  Leave the media inserted and try restarting the computer.&lt;/li&gt;
    &lt;li&gt;The BIOS changes were incorrect or not saved.  Double-check that 
the right boot device is selected as the first boot device.&lt;/li&gt;
    &lt;li&gt;This system is too old to support booting from the chosen media. 
In this case, 
the Plop Boot Manager (&lt;a href=&quot;http://www.plop.at/en/bootmanagers.html&quot;&gt;http://www.plop.at/en/bootmanagers.html&lt;/a&gt;) 
can be used to boot the system from the selected media.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;[³]  Disk Labeling   &lt;br /&gt;
(From “Absolute FreeBSD, 3rd Edition: The Complete Guide to FreeBSD” &lt;br /&gt;
By Michael W. Lucas):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Disk ID Labels&lt;/strong&gt;: a physical machine offers labels not available 
on virtual machines.
    &lt;ul&gt;
      &lt;li&gt;Viewing Labels &lt;br /&gt;
To view labels, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;glabel(8)&lt;/code&gt;, a shortcut for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;geom label&lt;/code&gt;.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% glabel list
Geom name: nvd0p1
Geom name: nvd0p1
Providers:
1. Name: . . . 
---- snip ----
Consumers:
1. Name: nvd0p1
---- snip ----
---- snip ----

Geom name: nvd0
Providers:
   Name: diskid/DISK-20232D8612345
   Mediasize: 1024209543168 (954G)
   Sectorsize: 512
   Mode: r0w0e0
   secoffset: 0
   offset: 0
   seclength: 2000409264
   length: 1024209543168
   index: 0
Consumers:
1. Name: nvd0
   Mediasize: 1024209543168 (954G)
   Sectorsize: 512
   Mode: r0w0e0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Names of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Disk ID Label&lt;/code&gt; geoms are in the format 
of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;diskid/DISK-&amp;lt;hard_drive_serial_number&lt;/code&gt;.  For example:&lt;/p&gt;
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /dev/diskid/
total 0
crw-r-----  1 root  operator   0xa7 Dec 31 12:42 DISK-20232D8612345
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;In this case, this partition would be labelled 
as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;diskid/DISK-20232D8612345&lt;/code&gt;.&lt;/p&gt;

    &lt;p&gt;Disk ID labels are hard to read and write.  To eliminate them, 
set the tunable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kern.geom.label.disk_ident.enable&lt;/code&gt; to 0 
in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/loader.conf&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;GPT GUID (GPT ID) Labels&lt;/strong&gt;: every GPT partition includes a GUID.  &lt;br /&gt;
FreeBSD can treat the GUID as a label.  Using a GPT ID label makes 
sense when you have many automatically configured disks, such as 
large storage arrays.  On smaller systems, the 128-bit GUID is not 
practical because of its length.   To disable these labels, set the 
tunable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kern.geom.label.gptid.enable&lt;/code&gt; to 0 
in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/loader.conf&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;GPT Labels&lt;/strong&gt;: GPT partitions let you &lt;em&gt;manually&lt;/em&gt; assign a label name 
within the partition table.  These labels are physically stored on the 
disk partition. – It’s &lt;strong&gt;recommended&lt;/strong&gt; to use GPT labels whenever possible.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;GEOM Labels&lt;/strong&gt;: The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;glabel(8)&lt;/code&gt; command lets you configure 
 GEOM labels.   A GEOM label is specific to FreeBSD’s GEOM 
 infrastructure and appears in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dev/label&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;[⁴]  Boot from &lt;a href=&quot;https://www.nomadbsd.org/&quot;&gt;NomadBSD&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Download rEFInd.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fetch https://iweb.dl.sourceforge.net/project/refind/0.13.2/refind-bin-0.13.2.zip 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Copy the &lt;strong&gt;rEFInd&lt;/strong&gt; .zip file to an external USB flash drive.&lt;/p&gt;

&lt;p&gt;Reboot.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Return to the machine on which you are installing FreeBSD.&lt;/p&gt;

&lt;p&gt;Before mounting the USB flash drive with the &lt;strong&gt;rEFInd&lt;/strong&gt;, you have to 
mount the device file system (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;devfs&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mount -t devfs devfs /dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can mount the USB flash disk as usual.&lt;/p&gt;

&lt;p&gt;[⁵]  Packages installed as dependencies of the &lt;strong&gt;xorg&lt;/strong&gt; metapackage:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;twm&lt;/strong&gt; - Tab Window Manager for the X Window System&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;Programming languages, compilers, header files, APIs&lt;/em&gt;: &lt;br /&gt;
llvm12, glib, lua53, perl5, python38, py38-evdev, py38-pyudev, 
py38-setuptools, py38-six, pcre, fontconfig, evdev-proto&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;Utilities, tools, applications&lt;/em&gt;: &lt;br /&gt;
pciids, xbitmaps, xcmsdb, xkeyboard-config, gettext-runtime, encodings, 
indexinfo, expat&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;xorg-apps (X.org apps metapackage)&lt;/em&gt;, consists of the following packages:&lt;br /&gt;
appres, bitmap, iceauth, mkfontscale, sessreg, setxkbmap, smproxy, 
x11perf, xauth, xbacklight, xcalc, xclock, xconsole, xcursor-themes, 
xcursorgen, xdpyinfo, xdriinfo, xev, xf86dga, xgamma, xgc, xhost, xinit, 
xinput, xkbcomp, xkbevd, xkbutils, xkill, xlsatoms, xlsclients, 
xmessage, xmodmap, xpr, xprop, xrandr, xrdb, xrefresh, xset, xsetroot, 
xterm, xvinfo, xwd, xwininfo, xwud&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;Drivers&lt;/em&gt;:&lt;br /&gt;
mesa-dri, mesa-libs, 
&lt;em&gt;xorg-drivers (X.org drivers metapackage)&lt;/em&gt;, consists of the following packages: &lt;br /&gt;
xf86-input-keyboard, xf86-input-libinput, xf86-input-mouse, 
xf86-video-scfb, xf86-video-vesa&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;Fonts&lt;/em&gt;: &lt;br /&gt;
font-adobe-100dpi, font-adobe-75dpi, font-adobe-utopia-100dpi, 
font-adobe-utopia-75dpi, font-adobe-utopia-type1, font-alias, 
font-arabic-misc, font-bh-100dpi, font-bh-75dpi, 
font-bh-lucidatypewriter-100dpi, font-bh-lucidatypewriter-75dpi, 
font-bh-ttf, font-bh-type1, font-bitstream-100dpi, font-bitstream-75dpi, 
font-bitstream-type1, font-cronyx-cyrillic, font-cursor-misc, 
font-daewoo-misc, font-dec-misc, font-ibm-type1, font-isas-misc, 
font-jis-misc, font-micro-misc, font-misc-cyrillic, font-misc-ethiopic, 
font-misc-meltho, font-misc-misc, font-mutt-misc, font-schumacher-misc, 
font-screen-cyrillic, font-sony-misc, font-sun-misc, 
font-winitzki-cyrillic, font-xfree86-type1, xorg-fonts, 
xorg-fonts-100dpi, xorg-fonts-75dpi, xorg-fonts-cyrillic, 
xorg-fonts-miscbitmaps, xorg-fonts-truetype, xorg-fonts-type1, dejavu&lt;/p&gt;

  &lt;p&gt;&lt;em&gt;Libraries&lt;/em&gt;:&lt;br /&gt;
libFS, libICE, libSM, libX11, libXScrnSaver, libXau, libXaw, 
libXcomposite, libXcursor, libXdamage, libXdmcp, libXext, libXfixes, 
libXfont, libXfont2, libXft, libXi, libXinerama, libXmu, libXpm, 
libXrandr, libXrender, libXres, libXt, libXtst, libXv, libXvMC, 
libXxf86dga, libXxf86vm, libdmx, libdrm, libedit, libepoll-shim, 
libepoxy, libevdev, libffi, libfontenc, libglvnd, libgudev, libiconv, 
libinput, liblz4, libmtdev, libpciaccess, libpthread-stubs, libudev-devd, 
libunwind, libwacom, libxcb, libxkbfile, libxml2, libxshmfence, pixman, 
png, readline, xcb-util, xcb-util-wm, xtrans, xorg-libraries, freetype2, 
mpdecimal&lt;/p&gt;

  &lt;p&gt;xorg-docs, xorg-server, xorgproto, wayland, zstd&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[⁶]  What is CPAN? &lt;br /&gt;
The CPAN Frequently Asked Questions - www.cpan.org&lt;br /&gt;
(Retrieved on Jan 1, 2022):&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;CPAN is the Comprehensive Perl Archive Network, a large collection of 
Perl software and documentation. You can begin exploring from either 
http://www.cpan.org/ or any of the mirrors listed at 
http://www.cpan.org/SITES.html.&lt;/p&gt;

  &lt;p&gt;CPAN is also the name of a Perl module, CPAN.pm, which is used to 
download and install Perl software from the CPAN archive.  This FAQ 
covers only a little about the CPAN module and you may find the 
documentation for it by using perldoc CPAN via the command line or on 
the web at https://metacpan.org/pod/CPAN.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;references&quot;&gt;References&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/allanjude/status/1058770910176575488&quot;&gt;Once something opens one of da or gpt/name, the other goes away&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/dlangille/be9bea06795fe60579a648863a75f659&quot;&gt;Adjusting the drive locations&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Sat, 01 Jan 2022 08:03:41 -0800</pubDate>
        <link>http://localhost:4000/freebsd/dotfiles/zfs/2022/01/01/freebsd-new-machine-setup.html</link>
        <guid isPermaLink="true">http://localhost:4000/freebsd/dotfiles/zfs/2022/01/01/freebsd-new-machine-setup.html</guid>
        
        
        <category>freebsd</category>
        
        <category>dotfiles</category>
        
        <category>zfs</category>
        
      </item>
    
      <item>
        <title>How to Compile C Programs in FreeBSD</title>
        <description>&lt;p&gt;OS:     FreeBSD 13&lt;br /&gt;
Shell:  csh&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% freebsd-version
13.0-RELEASE-p5
 
% ps $$
 PID TT  STAT    TIME COMMAND
6287  2  Ss   0:00.09 -csh (csh)
 
% printf %s\\n &quot;$SHELL&quot;
/bin/csh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fetch \
 https://master.dl.sourceforge.net/project/yest/yest/2.7.0.7/yest-2.7.0.7.tgz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% tar xf yest-2.7.0.7.tgz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh
total 22
-rwxr-xr-x  1 dusko  dusko   2.1K Jul 27  2014 README-2.7.0.7
-rw-r--r--  1 dusko  dusko    50K Jul 27  2014 yest-2.7.0.7.c
-rwxr-xr-x  1 dusko  dusko   8.4K Jul 27  2014 yest-2.7.0.7.man1
-rw-r--r--  1 dusko  dusko    17K Jul 28  2014 yest-2.7.0.7.tgz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc yest-2.7.0.7.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lhrt
total 59
-rwxr-xr-x  1 dusko  dusko   8.4K Jul 27  2014 yest-2.7.0.7.man1
-rwxr-xr-x  1 dusko  dusko   2.1K Jul 27  2014 README-2.7.0.7
-rw-r--r--  1 dusko  dusko    50K Jul 27  2014 yest-2.7.0.7.c
-rw-r--r--  1 dusko  dusko    17K Jul 28  2014 yest-2.7.0.7.tgz
-rwxr-xr-x  1 dusko  dusko    50K Dec 13 18:23 a.out
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out
13/12/2021
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% rm -i a.out
remove a.out? y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc -o yest yest-2.7.0.7.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lhrt
total 59
-rwxr-xr-x  1 dusko  dusko   8.4K Jul 27  2014 yest-2.7.0.7.man1
-rwxr-xr-x  1 dusko  dusko   2.1K Jul 27  2014 README-2.7.0.7
-rw-r--r--  1 dusko  dusko    50K Jul 27  2014 yest-2.7.0.7.c
-rw-r--r--  1 dusko  dusko    17K Jul 28  2014 yest-2.7.0.7.tgz
-rwxr-xr-x  1 dusko  dusko    50K Dec 13 18:24 yest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./yest -3h
13/12/2021-15:24
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Mon, 13 Dec 2021 17:23:42 -0800</pubDate>
        <link>http://localhost:4000/c/programming/freebsd/howto/2021/12/13/freebsd-compiling-c.html</link>
        <guid isPermaLink="true">http://localhost:4000/c/programming/freebsd/howto/2021/12/13/freebsd-compiling-c.html</guid>
        
        
        <category>c</category>
        
        <category>programming</category>
        
        <category>freebsd</category>
        
        <category>howto</category>
        
      </item>
    
      <item>
        <title>How to Configure X (X.Org, X11) for Multi-Head with Two Separate Screens aka Zaphod Method</title>
        <description>&lt;p&gt;&lt;strong&gt;tl;dr:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Goal:&lt;br /&gt;
Dual-output/single-GPU/two independent screens - a configuration called &lt;strong&gt;Zaphod&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Use two outputs from a system with a single graphics card or a single 
on-board video (integrated graphics), with a dual screen configuration 
so that there are two completely separate (independent) &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:0.0&lt;/code&gt; 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:0.1&lt;/code&gt; screens that have nothing to do with each other; that is,
the origin of each screen is (0,0).&lt;/p&gt;

&lt;p&gt;This is known as a &lt;strong&gt;multi-head&lt;/strong&gt; setup (sometimes called &lt;strong&gt;multiseat&lt;/strong&gt;,
or &lt;strong&gt;multi-seat&lt;/strong&gt;, or &lt;strong&gt;dual head&lt;/strong&gt;, or a &lt;strong&gt;Zaphod&lt;/strong&gt; configuration).&lt;/p&gt;

&lt;p&gt;One of the reasons why: &lt;br /&gt;
I don’t want a single screen so that; for example, dialogs that are 
intended to be positioned in the centre of a display always display 
in the middle of span across monitors in a dual-monitor configuration.&lt;/p&gt;

&lt;p&gt;To accomplish this, you need to:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Use two &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt; sections (in the &lt;strong&gt;xorg.conf&lt;/strong&gt; file) referring 
to the device Identifiers.  For example, you can call 
them: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Identifier &quot;Screen0&lt;/code&gt; 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Identifier &quot;Screen1&quot;&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Two &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Device&lt;/code&gt; sections (in the &lt;strong&gt;xorg.conf&lt;/strong&gt; file) with: &lt;br /&gt;
Option “ZaphodHeads” “yourdevice” &lt;br /&gt;
(yourdevice is given by xrandr(1) tool) &lt;br /&gt;
Option “AccelMethod” “sna” &lt;br /&gt;
(In my tests, AccelMethod wasn’t needed when used 
 with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modesetting&lt;/code&gt;, while it was required when used 
 with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;intel&lt;/code&gt; driver.)&lt;/li&gt;
  &lt;li&gt;(Only needed when used with graphics card drivers so you don’t need 
this step if you will use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modesetting&lt;/code&gt; driver): Install the card’s 
driver (package names: xf86-video-*).  Most xf86-video-* drivers 
support Zaphod mode, which allows for a single device to produce 
multiple X screens.  For example, for a graphics card with 
an Intel chipset, you need to install the intel graphics 
driver: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pkg installxf86-video-intel&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;On recent FreeBSD versions, including FreeBSD 13, you would typically install
&lt;a href=&quot;https://www.freshports.org/graphics/drm-kmod/&quot;&gt;drm-kmod metaport&lt;/a&gt;, 
which enables the integrated graphics chip on Intel CPUs (Intel Integrated 
Graphics, aka HD Graphics).  With &lt;strong&gt;drm-kmod&lt;/strong&gt;, X.Org autodetects the driver, 
and utilizes the &lt;a href=&quot;https://www.x.org/wiki/ModeSetting/&quot;&gt;&lt;strong&gt;modesetting&lt;/strong&gt; X.Org driver&lt;/a&gt; 
and/or &lt;a href=&quot;https://www.freedesktop.org/wiki/Software/Glamor/&quot;&gt;glamor driver&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It’s recommened to use the &lt;strong&gt;modesetting&lt;/strong&gt; driver but the use of specific 
chipset graphics drivers is not discouraged if it’s needed.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Operating system and hardware used:&lt;/p&gt;

&lt;p&gt;FreeBSD 13.0&lt;br /&gt;
&lt;strong&gt;csh&lt;/strong&gt; shell&lt;br /&gt;
&lt;a href=&quot;https://www.x.org/releases/X11R7.6/doc/man/man1/twm.1.xhtml&quot;&gt;&lt;strong&gt;twm&lt;/strong&gt; - Tab Window Manager for the X Window System&lt;/a&gt;  &lt;a href=&quot;#footnotes&quot;&gt;¹&lt;/a&gt;  &lt;br /&gt;
Laptop: &lt;a href=&quot;https://www.lenovo.com/us/en/p/laptops/thinkpad/thinkpadx/thinkpad-x280/22tp2tx2800&quot;&gt;Lenovo ThinkPad X280 | Ultraportable 12.5” Business Laptop&lt;/a&gt;  &lt;br /&gt;
External monitor: &lt;a href=&quot;https://www.lg.com/us/monitors/lg-29WL500-B-led-monitor&quot;&gt;LG 29’’ Class 21:9 UltraWide FHD IPS Monitor with HDR10 (29’’ Diagonal)&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% freebsd-version
13.0-RELEASE-p5

% ps $$
  PID TT  STAT    TIME COMMAND
19567  3  Ss   0:00.09 -tcsh (tcsh)

% uname -a
FreeBSD machine1.home.arpa 13.0-RELEASE-p4 FreeBSD 13.0-RELEASE-p4 
  #0: Tue Aug 24 07:33:27 UTC 2021     
  root@amd64-builder.daemonology.net:/usr/obj/usr/src/amd64.amd64/sys/GENERIC
  amd64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;h2 id=&quot;two-methods-of-setting-up&quot;&gt;Two Methods of Setting Up&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;br /&gt;
These methods have been tested on a laptop (notebook) with a dual-head 
&lt;strong&gt;Intel&lt;/strong&gt; graphics card with two physical monitor connections.   &lt;br /&gt;
There might be other methods available for different configurations; 
for example, with a dual-head Nvidia graphics cards or AMD Radeon 
chipsets (package name in FreeBSD: xf86-video-amdgpu).&lt;/p&gt;

&lt;p&gt;Other possibilites include Xinerama or Xypher. &lt;a href=&quot;#footnotes&quot;&gt;²&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The two methods explained here are a static setup in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xorg.conf&lt;/code&gt; with:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Intel&lt;/strong&gt; video driver - Xorg driver for Intel integrated graphics chipsets&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;modesetting&lt;/strong&gt; - video driver for framebuffer device&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Each of the two drivers has its own man page:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man modesetting&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man intel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
You can also set up dual head dynamically by using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xrandr(1)&lt;/code&gt; tool; 
however, this tool doesn’t provide support for &lt;strong&gt;Zaphod&lt;/strong&gt; mode.  In other
words, with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xrandr(1)&lt;/code&gt; you can quickly configure two monitors but 
the display is one screen, not two independent screens.&lt;/p&gt;

&lt;p&gt;xrandr(1) tool is a command line interface to RandR (Rotate and Resize) 
extension &lt;a href=&quot;#footnotes&quot;&gt;³&lt;/a&gt;, and can be used to set outputs for a screen dynamically, 
without adding any specific settings in xorg.conf.&lt;/p&gt;

&lt;p&gt;Starting with RandR 1.2, you can set up dual head and add/remove 
a monitor without restarting X.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;configuration-with-xorg-driver-for-intel-integrated-graphics-chipsets---method-1-of-2&quot;&gt;Configuration with Xorg driver for Intel Integrated Graphics Chipsets - Method 1 of 2&lt;/h3&gt;

&lt;p&gt;On FreeBSD 13, the &lt;strong&gt;xorg.conf&lt;/strong&gt; is located in the&lt;br /&gt;
directory &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf.d/&lt;/code&gt;. &lt;a href=&quot;#footnotes&quot;&gt;⁴&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;x11-window-system-configuration&quot;&gt;X11 Window System Configuration&lt;/h4&gt;

&lt;p&gt;From &lt;br /&gt;
&lt;a href=&quot;https://vermaden.wordpress.com/tag/xdm/&quot;&gt;FreeBSD Desktop – Part 3 – X11 Window System&lt;/a&gt;  &lt;br /&gt;
(Posted on May 22, 2018) &lt;br /&gt;
(Retrieved on Dec 12, 2021)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Historically you would create entire &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/X11/xorg.conf&lt;/code&gt; file 
which would include complete X11 Window System configuration.&lt;/p&gt;

  &lt;p&gt;Recently to comply with FreeBSD &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hier(7)&lt;/code&gt; directory structure and 
logic this can be also configured as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf&lt;/code&gt; 
file and even more recently you can just configure these parts of X11 
server that you need without touching other parts.&lt;/p&gt;

  &lt;p&gt;This ‘individual’ configuration is done in 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf.d&lt;/code&gt; directory with 
individual files for each setting, like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;card.conf&lt;/code&gt; for 
graphics card configuration.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pciconf -lv | grep -A4 vga
vgapci0@pci0:0:2:0:     class=0x030000 rev=0x07 hdr=0x00 vendor=0x8086 device=0x
5917 subvendor=0x17aa subdevice=0x2256
    vendor     = &apos;Intel Corporation&apos;
    device     = &apos;UHD Graphics 620&apos;
    class      = display
    subclass   = VGA
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the Lenovo x280 laptop with an external monitor plugged in:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xrandr --listproviders
Providers: number : 1
Provider 0: id: 0x47 cap: 0xa, Sink Output, 
  Sink Offload crtcs: 3 outputs: 5 associated providers: 0 name:modesetting
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install the X.Org legacy driver for Intel integrated graphics 
chipsets (package name: xf86-video-intel).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install xf86-video-intel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The content of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;card.conf&lt;/code&gt; configuration file for graphics card 
configuration (in this example, I had created this file previously, 
customizing it for &lt;strong&gt;modesetting&lt;/strong&gt; video driver).  Here’s how it looked 
before changing it to include the X.Org legacy driver for Intel 
integrated graphics chipsets:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/card.conf
Section &quot;Device&quot;
    Identifier &quot;Card0&quot;
    Driver &quot;modesetting&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;br /&gt;
You can designate the graphics card to work with the Intel driver by 
using the following &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Device&lt;/code&gt; section (but it would still be 
a &lt;strong&gt;single&lt;/strong&gt; extended display over two monitors):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/card.conf
Section &quot;Device&quot;
    Identifier &quot;Card0&quot;
    Driver     &quot;intel&quot;
    BusID      &quot;PCI:0:2:0&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The value for BusID line is obtained from the first line of the output&lt;br /&gt;
of the command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pciconf -lv | grep -A4 vga&lt;/code&gt; ran above.&lt;/p&gt;

&lt;p&gt;Modify the &lt;strong&gt;card.conf&lt;/strong&gt; to include the X.Org Intel legacy driver and 
to configure &lt;strong&gt;two&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Identifer&lt;/code&gt; sections (with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Option&lt;/code&gt; set 
to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ZaphodHeads&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/card.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Section &quot;Device&quot;
  Identifier &quot;Intel0&quot;
  Driver     &quot;intel&quot;
  Option     &quot;ZaphodHeads&quot; &quot;HDMI-2&quot;
  Option     &quot;AccelMethod&quot; &quot;sna&quot;
  Option     &quot;DPMS&quot;
  Screen     0
  #BusID      &quot;PCI:0:2:0&quot;
EndSection
 
Section &quot;Device&quot;
  Identifier &quot;Intel1&quot;
  Driver     &quot;intel&quot;
  Option     &quot;ZaphodHeads&quot; &quot;eDP-1&quot;
  Option     &quot;AccelMethod&quot; &quot;sna&quot;
  Option     &quot;DPMS&quot;
  Screen     1
  #BusID      &quot;PCI:0:2:0&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The BusID line is optional.&lt;/p&gt;

&lt;p&gt;To obtain individual screen resolutions, use the randr(1) command.&lt;/p&gt;

&lt;p&gt;On the Lenovo x280 laptop with the external monitor, 
LG 29’’ 21:9 UltraWide FHD IPS Monitor plugged in:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xrandr
Screen 0: minimum 320 x 200, current 4480 x 1080, maximum 16384 x 16384
eDP-1 connected primary 1920x1080+0+0 
  (normal left inverted right x axis y axis) 276mm x 155mm
   1920x1080     60.05*+  60.01    59.97    59.96    59.93  
---- snip ----
DP-1 disconnected (normal left inverted right x axis y axis)
HDMI-1 disconnected (normal left inverted right x axis y axis)
DP-2 disconnected (normal left inverted right x axis y axis)
HDMI-2 connected 2560x1080+1920+0 
  (normal left inverted right x axis y axis) 798mm x 334mm
   2560x1080     59.98*+  74.99    50.00  
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The dimesions (geometry), a.k.a. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x resolution&lt;/code&gt; (horizontal resolution) 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y resolution&lt;/code&gt; (vertical resolution) values:&lt;/p&gt;

&lt;p&gt;for the built-in screen (on the output &lt;strong&gt;eDP-1&lt;/strong&gt;): 1920x1080  &lt;br /&gt;
for the external monitor (on the output &lt;strong&gt;HDMI-2&lt;/strong&gt;): 2560x1080&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        |--&amp;gt; X

        0               1920                     4480
- 0     +----------------+------------------------+
|       |                |                        |
|       |     eDP-1      |        HDMI-2          |
v       |   1920x1080    |       2560x1080        |
        |                |                        |
1080    +----------------+------------------------+

        |&amp;lt;- width=1920 -&amp;gt;|&amp;lt;-     width=2560     -&amp;gt;|
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xdpyinfo | grep -A1 &apos;^screen&apos;
screen #0:
  dimensions:    4480x1080 pixels (1185x285 millimeters)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Currently, two outputs form &lt;strong&gt;a single display&lt;/strong&gt; (a.k.a. extended display) 
with the geometry (dimensions) of &lt;strong&gt;4480x1080&lt;/strong&gt;; that is, 
&lt;strong&gt;width = 4480&lt;/strong&gt; and &lt;strong&gt;height = 1080&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;The goal is to modify this setup and create a dual layout X.Org 
configuration file with two &lt;strong&gt;independent&lt;/strong&gt; outputs.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/layout.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/layout.conf
Section &quot;ServerLayout&quot;
    Identifier     &quot;DualHeadConf&quot;
    Screen      0  &quot;Screen0&quot; 1920 0
    Screen      1  &quot;Screen1&quot;    0 0
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the Intel driver kernel module to be loaded at startup in the boot process
you need to add this line in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/rc.conf&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kld_list=&quot;i915kms&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
In previous FreeBSD releases, you would need to add a line &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kern.vty=vt&lt;/code&gt;
to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/boot/loader.conf&lt;/code&gt; but that’s not needed anymore as this is the 
default in new FreeBSD releases.&lt;/p&gt;

&lt;p&gt;Resource: &lt;br /&gt;
&lt;a href=&quot;https://docs.freebsd.org/en/books/handbook/x11/&quot;&gt;FreeBSD Handbook - Chapter 5. The X Window System -  5.4.3. Kernel Mode Setting (KMS)&lt;/a&gt;  &lt;br /&gt;
(Retrieved on Dec 12, 2021)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;When the computer switches from displaying the console to a higher 
screen resolution for X, it must set the video output mode. 
Recent versions of Xorg use a system inside the kernel to do these mode 
changes more efficiently.  Older versions of FreeBSD use sc(4), which 
is not aware of the KMS system.  The end result is that after closing X, 
the system console is blank, even though it is still working. 
The newer vt(4) console avoids this problem.&lt;/p&gt;

  &lt;p&gt;Add this line to /boot/loader.conf to enable vt(4):&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kern.vty=vt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;Find out &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Modeline&lt;/code&gt; values for the output &lt;strong&gt;eDP-1&lt;/strong&gt; 
(the built-in laptop screen).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -i modeline /var/log/Xorg.0.log | wc -l
      68
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
Instead of obtaining &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Modeline&lt;/code&gt; values from Xorg log file, you can 
use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cvt(1)&lt;/code&gt; (a utility for calculating VESA Coordinated Video 
Timing modes) or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gtf(1)&lt;/code&gt; (a utility for calculating VESA GTF modes). &lt;br /&gt;
See examples below; immediately after the section showing how to 
obtain &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Modeline&lt;/code&gt; values from the Xorg log file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n &apos;Printing probed modes for output eDP-1&apos; /var/log/Xorg.0.log
179:[   106.950] (II) intel(0): Printing probed modes for output eDP-1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 179,211p Xorg.0.log | wc -l
      33
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Filtering out for the highest refresh rate, which for this output is 60 Hz:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 179,211p Xorg.0.log | grep x60 | wc -l
      10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 179,211p Xorg.0.log | grep x60 | grep &apos;1920x1080&apos; | wc -l
       2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
The long lines are folded and then indented to make sure they fit the page.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 179,211p Xorg.0.log | grep x60 | grep &apos;1920x1080&apos;
[   106.950] (II) intel(0): Modeline &quot;1920x1080&quot;x60.0  
  141.00  1920 1936 1952 2104  1080 1083 1097 1116 -hsync -vsync (67.0 kHz eP)
[   106.950] (II) intel(0): Modeline &quot;1920x1080&quot;x60.0  
  173.00  1920 2048 2248 2576  1080 1083 1088 1120 -hsync +vsync (67.2 kHz d)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, find out &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Modeline&lt;/code&gt; values for the output &lt;strong&gt;HDMI-2&lt;/strong&gt; &lt;br /&gt;
(the external 29’’ LG monitor).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -n &apos;Printing probed modes for output HDMI-2&apos; /var/log/Xorg.0.log
285:[   107.364] (II) intel(0): Printing probed modes for output HDMI-2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 285,319p /var/log/Xorg.0.log | wc -l
      35
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Filtering out for the highest refresh rate, which for this output is 75 Hz:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 285,319p /var/log/Xorg.0.log | grep x75 | wc -l
       7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 285,319p /var/log/Xorg.0.log | grep x75 | grep &apos;2560x1080&apos; | wc -l
       1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sed -n 285,319p /var/log/Xorg.0.log | grep x75 | grep &apos;2560x1080&apos;
[   107.364] (II) intel(0): Modeline &quot;2560x1080&quot;x75.0  
  228.25  2560 2608 2640 2720  1080 1083 1093 1119 +hsync -vsync (83.9 kHz e)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you wanted to calculate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Modeline&lt;/code&gt; values with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cvt(1)&lt;/code&gt; 
(usage: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cvt [-v|--verbose] [-r|--reduced] h-resolution v-resolution [refresh]&lt;/code&gt;), 
where &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--verbose&lt;/code&gt; is “Warn verbosely when a given mode does not 
completely correspond with CVT standards”, or with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gtf(1)&lt;/code&gt;
(usage: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gtf x y refresh [-v|--verbose] [-f|--fbmode] [-x|--xorgmode]&lt;/code&gt;), 
where &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--verbose&lt;/code&gt; is: “Enable verbose printouts  This shows a trace 
for each step of the computation”.  &lt;br /&gt;
For both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cvt(1)&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gtf(1)&lt;/code&gt;:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x&lt;/code&gt; : the desired horizontal resolution;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;y&lt;/code&gt; : the desired vertical resolution;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt; : the desired refresh rate.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cvt --verbose 1920 1080 60
# 1920x1080 59.96 Hz (CVT 2.07M9) hsync: 67.16 kHz; pclk: 173.00 MHz
Modeline &quot;1920x1080_60.00&quot;  
  173.00  1920 2048 2248 2576  1080 1083 1088 1120 -hsync +vsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cvt --verbose 2560 1080 75
Warning: Aspect Ratio is not CVT standard.
# 2560x1080 74.94 Hz (CVT) hsync: 84.68 kHz; pclk: 294.00 MHz
Modeline &quot;2560x1080_75.00&quot;  
  294.00  2560 2744 3016 3472  1080 1083 1093 1130 -hsync +vsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gtf 1920 1080 60 --verbose
 1: [H PIXELS RND]             :     1920.000000
 2: [V LINES RND]              :     1080.000000
 3: [V FIELD RATE RQD]         :       60.000000
 4: [TOP MARGIN (LINES)]       :        0.000000
 5: [BOT MARGIN (LINES)]       :        0.000000
 6: [INTERLACE]                :        0.000000
 7: [H PERIOD EST]             :       14.909035
 8: [V SYNC+BP]                :       37.000000
 9: [V BACK PORCH]             :       34.000000
10: [TOTAL V LINES]            :     1118.000000
11: [V FIELD RATE EST]         :       59.994118
12: [H PERIOD]                 :       14.907574
13: [V FIELD RATE]             :       59.999996
14: [V FRAME RATE]             :       59.999996
15: [LEFT MARGIN (PIXELS)]     :        0.000000
16: [RIGHT MARGIN (PIXELS)]    :        0.000000
17: [TOTAL ACTIVE PIXELS]      :     1920.000000
18: [IDEAL DUTY CYCLE]         :       25.527727
19: [H BLANK (PIXELS)]         :      656.000000
20: [TOTAL PIXELS]             :     2576.000000
21: [PIXEL FREQ]               :      172.798065
22: [H FREQ]                   :       67.079994
17: [H SYNC (PIXELS)]          :      208.000000
18: [H FRONT PORCH (PIXELS)]   :      120.000000
36: [V ODD FRONT PORCH(LINES)] :        1.000000

  # 1920x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 172.80 MHz
  Modeline &quot;1920x1080_60.00&quot;  
    172.80  1920 2040 2248 2576  1080 1081 1084 1118  -HSync +Vsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gtf 2560 1080 75 --verbose
 1: [H PIXELS RND]             :     2560.000000
 2: [V LINES RND]              :     1080.000000
 3: [V FIELD RATE RQD]         :       75.000000
 4: [TOP MARGIN (LINES)]       :        0.000000
 5: [BOT MARGIN (LINES)]       :        0.000000
 6: [INTERLACE]                :        0.000000
 7: [H PERIOD EST]             :       11.825470
 8: [V SYNC+BP]                :       47.000000
 9: [V BACK PORCH]             :       44.000000
10: [TOTAL V LINES]            :     1128.000000
11: [V FIELD RATE EST]         :       74.967407
12: [H PERIOD]                 :       11.820331
13: [V FIELD RATE]             :       75.000000
14: [V FRAME RATE]             :       75.000000
15: [LEFT MARGIN (PIXELS)]     :        0.000000
16: [RIGHT MARGIN (PIXELS)]    :        0.000000
17: [TOTAL ACTIVE PIXELS]      :     2560.000000
18: [IDEAL DUTY CYCLE]         :       26.453901
19: [H BLANK (PIXELS)]         :      928.000000
20: [TOTAL PIXELS]             :     3488.000000
21: [PIXEL FREQ]               :      295.084808
22: [H FREQ]                   :       84.600006
17: [H SYNC (PIXELS)]          :      280.000000
18: [H FRONT PORCH (PIXELS)]   :      184.000000
36: [V ODD FRONT PORCH(LINES)] :        1.000000

  # 2560x1080 @ 75.00 Hz (GTF) hsync: 84.60 kHz; pclk: 295.08 MHz
  Modeline &quot;2560x1080_75.00&quot;  
    295.08  2560 2744 3024 3488  1080 1081 1084 1128  -HSync +Vsync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monitor&lt;/code&gt; sections and a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt; section.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/monitors.conf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/monitors.conf 
Section &quot;Monitor&quot;
    Identifier &quot;eDP-1&quot;
    Modeline &quot;1920x1080x60.00&quot;  141.00  1920 1936 1952 2104  1080 1083 1097 1116 -hsync -vsync
    Option &quot;DPMS&quot; &quot;true&quot;   # DPMS (Display Power Management Signaling)
EndSection

Section &quot;Monitor&quot;
    Identifier &quot;HDMI-2&quot;
    Modeline &quot;2560x1080x75.00&quot;  228.25  2560 2608 2640 2720  1080 1083 1093 1119 +hsync -vsync 
    Option &quot;DPMS&quot; &quot;true&quot;   # DPMS (Display Power Management Signaling)
EndSection

# A Screen section ties a device (video card) to a monitor at a specific 
# colour depth and set of display resolutions. 

Section &quot;Screen&quot;
    Identifier &quot;Screen0&quot;
    Monitor &quot;HDMI-2&quot;
    DefaultDepth 24
    Device &quot;Intel0&quot;
    SubSection &quot;Display&quot;
        Modes &quot;2560x1080x75.00&quot;
        Viewport   1920 0
        Depth       24
    EndSubSection
EndSection

Section &quot;Screen&quot;
    Identifier &quot;Screen1&quot;
    Monitor &quot;eDP-1&quot;
    DefaultDepth 24
    Device &quot;Intel1&quot;
    SubSection &quot;Display&quot;
        Modes &quot;1920x1080x60.00&quot;
        Viewport   0 0
        Depth     24
    EndSubSection
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The whole &lt;strong&gt;xorg.conf&lt;/strong&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/card.conf; printf %s\\n; \
 cat /usr/local/etc/X11/xorg.conf.d/fonts.conf; printf %s\\n; \
 cat /usr/local/etc/X11/xorg.conf.d/keyboard.conf; printf %s\\n; \
 cat /usr/local/etc/X11/xorg.conf.d/layout.conf; printf %s\\n; \
 cat /usr/local/etc/X11/xorg.conf.d/modules.conf; printf %s\\n; \
 cat /usr/local/etc/X11/xorg.conf.d/monitors.conf
Section &quot;Device&quot;
  Identifier &quot;Intel0&quot;
  Driver     &quot;intel&quot;
  Option     &quot;ZaphodHeads&quot; &quot;HDMI-2&quot;
  Option     &quot;AccelMethod&quot; &quot;sna&quot;
  Option     &quot;DPMS&quot;
  Screen     0
  #BusID      &quot;PCI:0:2:0&quot;
EndSection
 
Section &quot;Device&quot;
  Identifier &quot;Intel1&quot;
  Driver     &quot;intel&quot;
  Option     &quot;ZaphodHeads&quot; &quot;eDP-1&quot;
  Option     &quot;AccelMethod&quot; &quot;sna&quot;
  Option     &quot;DPMS&quot;
  Screen     1
  #BusID      &quot;PCI:0:2:0&quot;
EndSection

Section &quot;Files&quot;
    FontPath &quot;/usr/local/share/fonts/dejavu/&quot;
EndSection

Section &quot;InputClass&quot;
    Identifier &quot;All Keyboards&quot;
    MatchIsKeyboard &quot;yes&quot;
    Option &quot;XkbLayout&quot; &quot;us, rs(latinunicode), rs&quot;
    Option &quot;XkbOptions&quot; &quot;ctrl:nocaps,grp:rctrl_toggle&quot;
EndSection

Section &quot;ServerLayout&quot;
    Identifier     &quot;DualHeadConf&quot;
    Screen      0  &quot;Screen0&quot; 1920 0
    Screen      1  &quot;Screen1&quot;    0 0
EndSection

Section &quot;Module&quot;
    Load &quot;freetype&quot;
EndSection

Section &quot;Monitor&quot;
    Identifier &quot;eDP-1&quot;
    Modeline &quot;1920x1080x60.00&quot;  141.00  1920 1936 1952 2104  1080 1083 1097 1116 -hsync -vsync
    Option &quot;DPMS&quot; &quot;true&quot;   # DPMS (Display Power Management Signaling)
EndSection

Section &quot;Monitor&quot;
    Identifier &quot;HDMI-2&quot;
    Modeline &quot;2560x1080x75.00&quot;  228.25  2560 2608 2640 2720  1080 1083 1093 1119 +hsync -vsync
    Option &quot;DPMS&quot; &quot;true&quot;   # DPMS (Display Power Management Signaling)
EndSection

# A Screen section ties a device (video card) to a monitor at a specific
# colour depth and set of display resolutions.

Section &quot;Screen&quot;
    Identifier &quot;Screen0&quot;
    Monitor &quot;HDMI-2&quot;
    DefaultDepth 24
    Device &quot;Intel0&quot;
    SubSection &quot;Display&quot;
        Modes &quot;2560x1080x75.00&quot;
        Viewport    1920 0
        Depth       24
    EndSubSection
EndSection

Section &quot;Screen&quot;
    Identifier &quot;Screen1&quot;
    Monitor &quot;eDP-1&quot;
    DefaultDepth 24
    Device &quot;Intel1&quot;
    SubSection &quot;Display&quot;
        Modes &quot;1920x1080x60.00&quot;
        Viewport   0 0
        Depth     24
    EndSubSection
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Restart Xorg.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkill Xorg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;After restarting Xorg:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xdpyinfo | grep -A1 &apos;^screen&apos;
screen #0:
  dimensions:    2560x1080 pixels (677x285 millimeters)
--
screen #1:
  dimensions:    1920x1080 pixels (508x285 millimeters)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the external monitor (output: HDMI-2):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xrandr --listproviders
Providers: number : 1
Provider 0: id: 0x43 cap: 0xb, Source Output, Sink Output, 
  Sink Offload crtcs: 2 outputs: 2 associated providers: 0 name:Intel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xrandr
Screen 0: minimum 8 x 8, current 2560 x 1080, maximum 32767 x 32767
HDMI-2 connected primary 2560x1080+0+0 
 (normal left inverted right x axis y axis) 800mm x 340mm
   2560x1080x75.00  74.99*+
   2560x1080     59.98 +  74.99    50.00  
   3840x2160     30.00    25.00    24.00    29.97    23.98  
   2560x1440     59.95  
   1920x1080     74.99    60.00    50.00    59.94  
   1680x1050     59.88  
   1600x900      60.00  
   1280x1024     75.02    60.02  
   1280x800      59.91  
   1152x864      75.00    59.97  
   1280x720      60.00    50.00    59.94  
   1024x768      75.03    60.00  
   1024x576      59.97  
   832x624       74.55  
   800x600       75.00    60.32  
   720x576       50.00  
   720x480       60.00    59.94  
   640x480       75.00    60.00    59.94  
VIRTUAL1 disconnected (normal left inverted right x axis y axis)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the laptop built-in screen (output: eDP-1):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xrandr --listproviders
Providers: number : 1
Provider 0: id: 0xcc cap: 0xb, Source Output, Sink Output, 
  Sink Offload crtcs: 2 outputs: 2 associated providers: 0 name:Intel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xrandr
Screen 1: minimum 8 x 8, current 1920 x 1080, maximum 32767 x 32767
eDP-1 connected primary 1920x1080+0+0
 (normal left inverted right x axis y axis) 280mm x 160mm
   1920x1080x60.00  60.05*+
   1920x1080     60.05 +  59.93  
   1680x1050     59.88  
   1400x1050     59.98  
   1600x900      60.00    59.95    59.82  
   1280x1024     60.02  
   1400x900      59.96    59.88  
   1280x960      60.00  
   1368x768      60.00    59.88    59.85  
   1280x800      59.81    59.91  
   1280x720      59.86    60.00    59.74  
   1024x768      60.00  
   1024x576      60.00    59.97    59.90    59.82  
   960x540       60.00    59.63    59.82  
   800x600       60.32    56.25  
   864x486       60.00    59.92    59.57  
   640x480       59.94  
   720x405       59.51    60.00    58.99  
   640x360       59.84    59.32    60.00  
VIRTUAL1 disconnected (normal left inverted right x axis y axis)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;configuration-with-the-modesetting-driver---method-2-of-2&quot;&gt;Configuration with the modesetting Driver - Method 2 of 2&lt;/h3&gt;

&lt;p&gt;Use the same setup as with the configuration for the Intel video 
driver for X.Org, except for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Device&lt;/code&gt; sections (in my setup, 
in &lt;strong&gt;card.conf&lt;/strong&gt; file) and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monitor&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt; 
sections (in my setup, in &lt;strong&gt;monitors.conf&lt;/strong&gt; file).&lt;/p&gt;

&lt;p&gt;Modify &lt;strong&gt;card.conf&lt;/strong&gt; xorg configuration file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/card.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/card.conf
Section &quot;Device&quot;
  Identifier &quot;Card0&quot;
  Driver     &quot;modesetting&quot;
  Option     &quot;DPMS&quot;
  Screen     0
  #BusID      &quot;PCI:0:2:0&quot;
EndSection

Section &quot;Device&quot;
  Identifier &quot;Card1&quot;
  Driver     &quot;modesetting&quot;
  Option     &quot;DPMS&quot;
  Screen     1
  #BusID      &quot;PCI:0:2:0&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Modify the &lt;strong&gt;monitors.conf&lt;/strong&gt; xorg configuration file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo vi /usr/local/etc/X11/xorg.conf.d/monitors.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/monitors.conf
Section &quot;Monitor&quot;
    Identifier &quot;eDP-1&quot;
    Modeline &quot;1920x1080x60.00&quot;  141.00  1920 1936 1952 2104  1080 1083 1097 1116 -hsync -vsync
    Option &quot;DPMS&quot; &quot;true&quot;   # DPMS (Display Power Management Signaling)
EndSection

Section &quot;Monitor&quot;
    Identifier &quot;HDMI-2&quot;
    Modeline &quot;2560x1080x75.00&quot;  228.25  2560 2608 2640 2720  1080 1083 1093 1119 +hsync -vsync
    Option &quot;DPMS&quot; &quot;true&quot;   # DPMS (Display Power Management Signaling)
EndSection

# A Screen section ties a device (video card) to a monitor at a specific
# colour depth and set of display resolutions.

Section &quot;Screen&quot;
    Identifier &quot;Screen0&quot;
    Monitor &quot;HDMI-2&quot;
    DefaultDepth 24
    Device &quot;Card0&quot;
    Option      &quot;ZaphodHeads&quot; &quot;HDMI-2&quot;
    SubSection &quot;Display&quot;
        Depth       24
    EndSubSection
EndSection

Section &quot;Screen&quot;
    Identifier &quot;Screen1&quot;
    Monitor &quot;eDP-1&quot;
    DefaultDepth 24
    Device &quot;Card1&quot;
    Option      &quot;ZaphodHeads&quot; &quot;eDP-1&quot;
    SubSection &quot;Display&quot;
        Depth     24
    EndSubSection
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Restart Xorg (a.k.a. X, or X11, or X.Org).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkill Xorg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h4&gt;

&lt;p&gt;[¹] The default window manager supplied with X11 since the X11R4 release in 1989.&lt;/p&gt;

&lt;p&gt;[²] Xephyr &lt;br /&gt;
(&lt;a href=&quot;https://www.freedesktop.org/wiki/Software/Xephyr/&quot;&gt;https://www.freedesktop.org/wiki/Software/Xephyr/&lt;/a&gt;)&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;Xephyr is a kdrive based X Server which targets a window on a host 
X Server as its framebuffer.  Unlike Xnest it supports modern 
X extensions ( even if host server doesn’t ) such as Composite, Damage, 
randr etc (no GLX support now).  It uses SHM Images and shadow 
framebuffer updates to provide good performance. It also has a visual 
debugging mode for observing screen updates.&lt;/p&gt;

  &lt;p&gt;Possible uses include:&lt;/p&gt;

  &lt;p&gt;Xnest replacement - Window manager, Composite ‘gadget’, etc. development tool. &lt;br /&gt;
Toolkit debugging - rendundant toolkit paints can be observered easily 
via the debugging mode. &lt;br /&gt;
X Server internals development - develop without the need for an extra 
machine / display. &lt;br /&gt;
Multiterminal with Xephyr - configuration is a single computer which 
supports multiple users at the same time.&lt;/p&gt;

  &lt;p&gt;More information &lt;br /&gt;
See the README&lt;br /&gt;
&lt;a href=&quot;https://cgit.freedesktop.org/xorg/xserver/tree/hw/kdrive/ephyr/README&quot;&gt;https://cgit.freedesktop.org/xorg/xserver/tree/hw/kdrive/ephyr/README&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;[³] X Server Extensions&lt;br /&gt;
The X11 can be enhanced by adding extensions to the X server.&lt;/p&gt;

&lt;p&gt;Examples of some of the extensions:  &lt;br /&gt;
DPMS: Displays Power Management Signalling. Enables the X server 
to reduce monitor power consumption when not in use.&lt;/p&gt;

&lt;p&gt;RANDR: Rotate and Resize.  Notifies clients when the display is resized 
to a new resolution or rotated (especially useful on laptops, tablets 
and LCDs on pivot mounts) and enables the hot-plugging of monitors.&lt;/p&gt;

&lt;p&gt;[⁴] Traditionally, the most important file for Xorg has been the 
&lt;strong&gt;xorg.conf&lt;/strong&gt; configuration file.&lt;/p&gt;

&lt;p&gt;Modern versions of Xorg do not create an &lt;strong&gt;xorg.conf&lt;/strong&gt; file by default. 
In other words, using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X -configure&lt;/code&gt; is not recommended. 
Instead, on FreeBSD, various files ending in &lt;strong&gt;*.conf&lt;/strong&gt; reside in the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf.d&lt;/code&gt; directory and are automatically 
loaded by X at boot, prior to reading any &lt;strong&gt;xorg.conf&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Configuration files will also be searched for in a directory
reserved for system use.  This is to separate configuration files from
the vendor or 3rd party packages from those of local administration.
In FreeBSD, these files are found in the 
directory &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/share/X11/xorg.conf.d&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;On my system used for this document:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/share/X11/xorg.conf.d
total 14
-rw-r--r--  1 root  wheel   1.3K Jul  4 00:26 10-quirks.conf
-rw-r--r--  1 root  wheel   152B Jul  4 00:26 20-evdev-kbd.conf
-rw-r--r--  1 root  wheel   1.4K Jul  4 00:59 40-libinput.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should not change what is included for system use 
in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/share/X11/xorg.conf.d&lt;/code&gt; directory.&lt;/p&gt;

&lt;p&gt;It’s recommended to include your customizations or to override system 
settings by creating *.conf files in
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf.d&lt;/code&gt; directory.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
Names of these files are arbitrary and each file can contain one 
or more sections in the same format used by &lt;strong&gt;xorg.conf&lt;/strong&gt;.  Extension of 
the files has to be ‘&lt;strong&gt;.conf&lt;/strong&gt;’.&lt;/p&gt;

&lt;p&gt;Immediately after installing FreeBSD, I usually include the following 
two X configuration customizations:&lt;/p&gt;

&lt;p&gt;Create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Module&lt;/code&gt; X configuration file to make sure that the freetype 
module is loaded.  This file has a line &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Load &quot;freetype&quot;&lt;/code&gt; inside 
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;Modules&quot;&lt;/code&gt; section:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /usr/local/etc/X11/xorg.conf.d/modules.conf 
Section &quot;Module&quot;
    Load &quot;freetype&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a keyboard layout customization file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat /usr/local/etc/X11/xorg.conf.d/keyboard.conf
Section &quot;InputClass&quot;
    Identifier &quot;All Keyboards&quot;
    MatchIsKeyboard &quot;yes&quot;
    Option &quot;XkbLayout&quot; &quot;us, rs(latinunicode), rs&quot;
    Option &quot;XkbOptions&quot; &quot;ctrl:nocaps,grp:rctrl_toggle&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this configuration 
file (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf.d/keyboard.conf&lt;/code&gt;),
pressing the right Ctrl keyboard key cycles betweeen Serbian (latin), 
Serbian (cyrillic) and English (US) keyboard layouts, 
and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ctrl:nocaps&lt;/code&gt; to ignore the Caps Lock key.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; &lt;br /&gt;
Alternatively, you can set your keymap in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/.xinitrc&lt;/code&gt;.
For example, you can add 
a line &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setxkbmap rs -model pc105&lt;/code&gt; 
to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.xinitrc&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;br /&gt;
You can still create the xorg.conf file and continue making custom 
configurations in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/X11/xorg.conf&lt;/code&gt; as has been 
traditionally done but the file is not created by default.&lt;/p&gt;

&lt;p&gt;From &lt;br /&gt;
&lt;a href=&quot;https://docs.freebsd.org/en/books/handbook/x11/#x-config&quot;&gt;5.4. Xorg Configuration - 5.4.1. Quick Start – FreeBSD Handbook&lt;/a&gt;&lt;br /&gt;
(Retrieved on Dec 20, 2021)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;5.4.4.1. Directory&lt;/p&gt;

  &lt;p&gt;Xorg looks in several directories for configuration files.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/&lt;/code&gt; is the recommended directory for these files 
on FreeBSD.  Using this directory helps keep application files separate 
from operating system files.&lt;/p&gt;

  &lt;p&gt;Storing configuration files in the legacy &lt;strong&gt;/etc/X11/&lt;/strong&gt; still works. 
However, this mixes application files with the base FreeBSD files and 
is not recommended.&lt;/p&gt;

  &lt;p&gt;5.4.4.2. Single or Multiple Files&lt;/p&gt;

  &lt;p&gt;It is easier to use multiple files that each configure a specific 
setting than the traditional single &lt;strong&gt;xorg.conf&lt;/strong&gt;.  These files are 
stored in the &lt;strong&gt;xorg.conf.d/&lt;/strong&gt; subdirectory of the main configuration 
file directory.  The full path is typically
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/X11/xorg.conf.d/&lt;/code&gt;.&lt;/p&gt;

  &lt;p&gt;The traditional single &lt;strong&gt;xorg.conf&lt;/strong&gt; still works, but is neither 
as clear nor as flexible as multiple files in the &lt;strong&gt;xorg.conf.d/&lt;/strong&gt; 
subdirectory.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;references&quot;&gt;References:&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://nouveau.freedesktop.org/MultiMonitorDesktop.html&quot;&gt;Introduction to Multiple Monitors in X - freedesktop.org&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;. . .&lt;/p&gt;
  &lt;h3 id=&quot;dual-head-graphics-cards&quot;&gt;Dual-head Graphics Cards&lt;/h3&gt;

  &lt;p&gt;Then came dual-head graphics cards with two physical monitor connections 
and things got complicated. It did not fit the one SCREEN, one card, 
one monitor scheme, so drivers had to invent ways to circumvent 
the X server architecture limitations.&lt;/p&gt;

  &lt;p&gt;One solution for a driver (DDX) is to create one SCREEN per head, 
which is called &lt;strong&gt;Zaphod mode&lt;/strong&gt; (after Zaphod Beeblebrox, from the 
Hitchhiker’s Guide to the Galaxy).  This has the drawbacks of multiple 
SCREENs, but you get the DPI right.&lt;/p&gt;

  &lt;p&gt;Another solution is to pretend that there is only one monitor, and use 
just one SCREEN, which is what the Nvidia TwinView mode does. 
TwinView avoids the drawbacks of the &lt;em&gt;Xinerama&lt;/em&gt; feature, but has 
a completely non-standard way of configuring it. Plus, it is proprietary.&lt;/p&gt;

  &lt;p&gt;The third and the only proper way to deal with it is the RandR extension, 
which is a relatively new invention. RandR exposes the dual-head card 
as a single SCREEN, yet having a standard way of managing the multiple 
monitors.  It avoids the Xinerama feature drawbacks, but uses 
the Xinerama extension to provide applications information about the 
physical monitor layout.  RandR configuration can be controlled on the 
fly with the command xrandr, and it can be written to 
the X configuration file.  The default configuration is cloned views, 
i.e. all heads show the same image.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://www.phoronix.com/forums/forum/linux-graphics-x-org-drivers/open-source-amd-linux/14280-separate-screens-with-xrandr/page4&quot;&gt;Separate screens with xrandr&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;With RandR:&lt;/p&gt;

  &lt;p&gt;This mode gives you two viewports over a single surface and the ability 
to size and position independently. Benefit is configurability, 
disadvantage is application support.  If you are using a RANDR 1.3 
capable distribution, you can also set “–primary” to provide a hint to 
gnome-panel et al. about which monitor is your “center of the universe”.&lt;/p&gt;

  &lt;p&gt;Disadvantage here is that applications are mostly naive when it comes 
to multi-monitor modes.  They may listen to the xinerama extension and 
place things intelligently, they may not.  This goes right up and down 
the stack.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://web.archive.org/web/20130429073111/http://en.gentoo-wiki.com/wiki/X.Org/Dual_Monitors#Single_graphics_card.2C_Multiple_X_screens_with_ZaphodHeads&quot;&gt;X.Org/Dual Monitors - Single graphics card, Multiple X screens with ZaphodHeads&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;. . .&lt;/p&gt;
  &lt;h3 id=&quot;single-graphics-card-multiple-x-screens-with-zaphodheads&quot;&gt;Single graphics card, Multiple X screens with ZaphodHeads&lt;/h3&gt;

  &lt;p&gt;In the previous example, a single PCI device was used to stretch 
a screen onto two separate displays. This will demonstrate how to 
use a single PCI device to provide two separate screens on two 
separate displays.  This will, for instance, allow you to launch 
one program on a given display with DISPLAY=:0.0, and on another 
with DISPLAY=:0.1.&lt;/p&gt;

  &lt;h4 id=&quot;motivation&quot;&gt;Motivation&lt;/h4&gt;

  &lt;p&gt;It is often desirable to have multiple X screens produced by 
a single VGA controller.  Most xf86-video-* drivers support 
Zaphod mode, which allows for a single device to produce 
multiple X screens.  With intel graphics integrated onto all 
Sandy Bridge and higher CPUs, this is especially important.&lt;/p&gt;

  &lt;p&gt;For instance, on a machine with an on-chip graphics controller, 
as well as a separated video card, this would allow for one 
display for each output.&lt;/p&gt;

  &lt;p&gt;This example will focus on intel, though it should work with 
radeon and nouveau drivers that support it.   . . .&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.archive.carbon60.com/gentoo/desktop/282286&quot;&gt;Mailing List Archive: questions and sundry gripes about X11 multihead (it’s a rant)&lt;/a&gt;: &lt;br /&gt;
(Posted on Dec 29, 2013)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;After years of assuming I’d probably never set my system up with
multiple monitors, I’ve decided to go ahead and do it. I’ve watched
with some interest as various new schemes for doing it have
emerged over the years (Xinerama , and now lately RandR), but
I’ve always assumed that if nothing else, good old Zaphod mode
would always be around, since it’s built right into the way X11
numbers $DISPLAY (0:0, 0:1, 0:2…etc.).
It’s been around so long, it’s older than Linux itself.&lt;br /&gt;
. . .&lt;/p&gt;

  &lt;p&gt;Anyway, Zaphod is what I want. I don’t care that it won’t let me
drag windows between monitors. That’s precisely the advantage
of it. Many applications are written with such an assumption of
a single display that it’s best not to disappoint them.
I don’t want to worry about what a full screen game will think
of my multihead setup. I don’t want to see dialog windows
(or anything else really) popping up, half on one monitor and
half on another. I don’t want to have to setup the arrangement
of my desktop so that it’s arranged to not look ridiculous at
the point where the two monitors divide the screen. It’s all
just simpler if we have two screens that are completely
separate, and the only magic object that’s able to move
between them is the mouse pointer.&lt;/p&gt;

  &lt;p&gt;I’m not complaining that we have RandR now. I think it’s great.
One of X11’s greatest weaknesses has always been that before
now, you couldn’t really make any big configuration changes
while the X server is running. Now, thanks to RandR, you can
do almost anything with your desktop running and active,
and you don’t even need root access. You can’t configure
Zaphod type multihead that way, but that’s fine – you
couldn’t do that before either (nothing gained, nothing lost).
But RandR lets you make almost any other desktop geometry
change as a regular user without restarting X, and I think
that’s great.&lt;/p&gt;

  &lt;p&gt;RandR (and its predecessor, Xinerama) both assume though that
if you’re doing multihead, you want one big screen that spans
multiple monitors. Nice if that’s what you want, but as
detailed above, there are good reasons why you might prefer
otherwise.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Posted on Dec 29, 2013 &lt;br /&gt;
Permalink:&lt;br /&gt;
&lt;a href=&quot;https://lists.archive.carbon60.com/gentoo/desktop/282080#282080&quot;&gt;https://lists.archive.carbon60.com/gentoo/desktop/282080#282080&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.freebsd.org/Graphics&quot;&gt;Graphics FreeBSD Wiki&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://01.org/temp-linuxgraphics/documentation/how-set-dual-head-intel-graphics-randr-1.2&quot;&gt;How to Set Up Dual Head for Intel Graphics with RandR 1.2 - 01.org Intel Open Source&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.linuxquestions.org/questions/showthread.php?p=6167464&quot;&gt;How to configure X for multi-head with two separate screens?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/title/Multihead#Separate_screens&quot;&gt;Separate screens - Multihead - ArchWiki&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/365796/xorg-independent-mode&quot;&gt;Xorg: Independent Mode&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.freshports.org/x11-drivers/xf86-video-intel&quot;&gt;X.Org &lt;strong&gt;legacy driver&lt;/strong&gt; for &lt;strong&gt;Intel&lt;/strong&gt; integrated graphics chipsets – x11-drivers/xf86-video-intel&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bbs.archlinux.org/viewtopic.php?id=105450&quot;&gt;Multiseat gaming with multi-pointer X&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://superuser.com/questions/1616104/switch-monitors-in-xorg-conf-in-a-dual-screen-setup&quot;&gt;Switch monitors in xorg.conf in a dual screen setup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dmesgd.nycbug.org/index.cgi&quot;&gt;NYC*BUG dmesgd&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Launched in 2004, dmesgd aims to provide a &lt;strong&gt;user-submitted&lt;/strong&gt; repository of 
searchable *BSD dmesgs.  The dmesg(8) command displays the system message 
buffer’s content, and during boot a copy is saved to /var/run/dmesg.boot.&lt;/p&gt;

  &lt;p&gt;This buffer contains the operating system release, name and version, 
a list of devices identified, plus a whole host of other useful information.&lt;/p&gt;

  &lt;p&gt;We hope others find this resource useful and further contribute to its growth. 
Contact us at [ admin at lists dot nycbug dot org ].&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://bsd-hardware.info/&quot;&gt;Hardware for BSD&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;This is a project to anonymously collect hardware details of BSD-powered 
computers over the world and help people to collaboratively debug 
hardware related issues, check for BSD-compatibility and find drivers.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;https://bsd-hardware.info/?view=howto&quot;&gt;Probe your computer&lt;/a&gt; in order to 
participate in the project and discover your hardware in details. 
Share your probes with BSD developers to debug and fix problems with 
your computer. Please read more 
in &lt;a href=&quot;https://forum.linux-hardware.org/?cat=2&quot;&gt;our blog&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Sun, 12 Dec 2021 20:53:55 -0800</pubDate>
        <link>http://localhost:4000/x11/unix/howto/dotfiles/2021/12/12/xorg-x11-multihead-two-separate-screens.html</link>
        <guid isPermaLink="true">http://localhost:4000/x11/unix/howto/dotfiles/2021/12/12/xorg-x11-multihead-two-separate-screens.html</guid>
        
        
        <category>x11</category>
        
        <category>unix</category>
        
        <category>howto</category>
        
        <category>dotfiles</category>
        
      </item>
    
      <item>
        <title>How To List All Fonts That Contain a Particular UTF-8/Unicode Character</title>
        <description>&lt;p&gt;&lt;strong&gt;tl;dr:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;List all fonts that contain a particular character.&lt;/li&gt;
  &lt;li&gt;If your system doesn’t have a font that contain that character: 
find fonts that include the missing character.&lt;/li&gt;
  &lt;li&gt;Render the character properly.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;This page contains some uncommon Unicode characters.&lt;br /&gt;
If your web browser displays them as different unreadable symbols 
(question marks, boxes, or other symbols), you most likely need to 
install additional fonts that contain the missing characters.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Example 1:&lt;/strong&gt; List all fonts that include the Skull and Crossbones 
symbol (U+2620):&lt;/p&gt;

&lt;p&gt;Enter the following in your terminal emulator.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠ | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Example 2:&lt;/strong&gt; List all fonts that include the 
character 顠 (CJK Unified Ideograph-9860) (U+9860):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;顠 | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Example 3:&lt;/strong&gt; For &lt;strong&gt;NSM&lt;/strong&gt; (&lt;strong&gt;Non-Spacing Mark&lt;/strong&gt;) characters, which are 
problematic [¹] to display on terminal emulators. For example, 
list all fonts that include the Combining Circumflex Accent (U+0302):&lt;/p&gt;

&lt;p&gt;a) Method 1&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf  ̂ | xsel -i
% xsel -o &amp;gt; xselo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%x&quot; \&apos;`less xselo` | xargs -Ireplstr fc-list &quot;:charset=replstr&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;b) Method 2&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%x&quot; \&apos;`printf  ̂ ` | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note:&lt;br /&gt;
Quotes around &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;less&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt; above are the backtick 
character or the backquote (`), named “Grave Accent” in Unicode (U+0060).&lt;/p&gt;

&lt;p&gt;[¹] 
For example, the Combining Circumflex Accent (U+0302) is at first visible 
in xterm when displayed with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xsel -o | less&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf  ̂ | xsel -i

% xsel -o | less
 ̂
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, after scrolling off the screen/screenful in xterm, the character 
(on the last line) disappears, appearing again if you select the last line 
with the mouse but even then when you copy that line, the character 
(Combining Circumflex Accent (U+0302)) is missing when pasted into other document.&lt;/p&gt;

&lt;p&gt;Why is this? (a.k.a.: So, how to display non-spacing marks?)&lt;/p&gt;

&lt;p&gt;A: To display a non-spacing mark by itself, apply it to a space.&lt;/p&gt;

&lt;p&gt;Reference:&lt;br /&gt;
From 
Unicode Demystified
(published by Addison-Wesley Professional, 
publication date: September 2002):&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Non-spacing mark&lt;/strong&gt; &lt;br /&gt;
A combining character that takes up no space along the baseline. 
Non-spacing marks usually are drawn above or below the base character 
or overlay it.&lt;/p&gt;

&lt;p&gt;A non-spacing mark always combines with the character that &lt;strong&gt;precedes&lt;/strong&gt; it. 
If the backing store contains the character codes&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;U+006F LATIN SMALL LETTER O
U+0302 COMBINING CIRCUMFLEX ACCENT 
U+006F LATIN SMALL LETTER O
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;they represent the sequence&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;öo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and not the sequence&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;oö
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Example 4:&lt;/strong&gt; 
To show a non-spacing mark appearing by itself, apply it to a space. 
Unicode provides spacing versions of some non-spacing marks, generally 
for backward compatibility with some legacy encoding. Nevertheless, you 
can get any non-spacing mark to appear alone by preceding it with a space. 
In other words, U+0020 SPACE followed by U+0302 COMBINING CIRCUMFLEX ACCENT 
gives you a spacing (i.e., non-combining) circumflex accent.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 0302
 ̂       0302    COMBINING CIRCUMFLEX ACCENT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 0303 | cut -f1 | xxd -p
cc830a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %d 0x0a
10% 
 
% printf %o 0x0a
12% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ignore ‘0a’ - it’s ASCII hexadecimal 0a (decimal 10, octal 12).
ASCII 10 is the Line Feed character (LF).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 0303 | cut -f1 | xxd -p -l2
cc83
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %o 0xcc
314% 

% printf %o 0x83
203% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without a space, the Combining Circumflex Accent character (U+0302) is not displayed.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\314\203&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The U+0020 SPACE (040 in octal) followed by U+0302 COMBINING CIRCUMFLEX ACCENT&lt;br /&gt;
(UTF-8: 0xCC 0x83, 314 203 in octal) gives you a spacing (i.e., non-combining) 
circumflex accent.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\040\314\203&apos;
 ̃% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;`printf &apos;\40\314\203&apos;` | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; | wc -l
     632
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;ç | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; | wc -l
    1915
 
% printf &apos;%x&apos; \&apos;ç | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; | grep -i arvo
/home/dusko/.fonts/arvo.ttf: Arvo:style=Regular
/home/dusko/.fonts/arvo-bold-italic.ttf: Arvo:style=Bold Italic
/home/dusko/.fonts/arvo-bold.ttf: Arvo:style=Bold
/home/dusko/.fonts/arvo-italic.ttf: Arvo:style=Italic

% printf &apos;%x&apos; \&apos;ç
e7%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd(1)&lt;/code&gt; displays all the characters in an X font.&lt;/p&gt;

&lt;p&gt;To specify a point size, add the size before the column (:) as shown below 
for a sample for a font size of 18:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -fa &quot;IBM Plex Mono-18:style=Regular&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -start &amp;lt;decimal_value&amp;gt; -fa &amp;lt;font_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl ç
ç       00E7    LATIN SMALL LETTER C WITH CEDILLA

% ./uni.pl ç | cut -f1 | xxd -p
c3a70a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x0a&lt;/code&gt; in hex is 10 in decimal. &lt;br /&gt;
ASCII 10 is the Line Feed character (LF).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %d\\n 0x0a
10

% man ascii | grep -i 0a
   08 BS   09 HT   0a LF   0b VT   0c FF   0d CR   0e SO   0f SI
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Don’t take the LF into account (which is the third octet).
In other words, make a hexdump of the first two octets:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl ç | cut -f1 | xxd -p -l 2
c3a7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since POSIX-compatible way of printing ??? is to use octal, 
convert from hexadecimal to octal.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %o 0xc3
303% 
 
% printf %o 0xa7
247% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print the character by using printf and its octal notation.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\303\247&apos;
ç% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;strong&gt;uni.pl&lt;/strong&gt; Perl script identified Unicode code point of the 
character as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+00E7&lt;/code&gt; (see above).  As &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd(1)&lt;/code&gt; uses decimal 
for its &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-start&lt;/code&gt; option, convert it to decimal.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %d 0xE7
231%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -fa &quot;Arvo:style=Regular&quot;

% xfd -start 231 -fa &quot;Arvo:style=Regular&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;For &lt;strong&gt;non tl;dr&lt;/strong&gt;, continue reading.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;p&gt;Local &lt;strong&gt;environment&lt;/strong&gt;:&lt;br /&gt;
FreeBSD 13.0-RELEASE-p3, terminal emulator: xterm(1),
csh (tcsh) shell, user’s home directory: /home/dusko.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tcsh&lt;/code&gt; is linked to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;csh&lt;/code&gt; in FreeBSD. It doesn’t matter which 
one you type, you will still use the tcsh shell.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% freebsd-version
13.0-RELEASE-p3

% uname -a
FreeBSD fbsdx280.my.domain 13.0-RELEASE-p3 FreeBSD 13.0-RELEASE-p3 #0: 
  Tue Jun 29 19:46:20 UTC 2021 
  root@amd64-builder.daemonology.net:/usr/obj/usr/src/amd64.amd64/sys/GENERIC
  amd64

% ps $$
  PID TT  STAT    TIME COMMAND
98359  4  Ss   0:00.02 -tcsh (tcsh)

% xterm -version
XTerm(368)

% grep dusko /etc/passwd 
dusko:*:1001:1001:dusko:/home/dusko:/bin/tcsh

% cd 
 
% pwd
/usr/home/dusko
 
% ls -ld /home
lrwxr-xr-x  1 root  wheel  8 Mar 16  2019 /home -&amp;gt; usr/home
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% locale
LANG=en_CA.UTF-8
LC_CTYPE=&quot;en_CA.UTF-8&quot;
LC_COLLATE=&quot;en_CA.UTF-8&quot;
LC_TIME=&quot;en_CA.UTF-8&quot;
LC_NUMERIC=&quot;en_CA.UTF-8&quot;
LC_MONETARY=&quot;en_CA.UTF-8&quot;
LC_MESSAGES=&quot;en_CA.UTF-8&quot;
LC_ALL=
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The default &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tcsh&lt;/code&gt; prompt displays &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%&lt;/code&gt; when you’re logged in as 
a regular user and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hostname#&lt;/code&gt; when you’re logged in as the superuser.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% setxkbmap -print
xkb_keymap {
        xkb_keycodes  { include &quot;evdev+aliases(qwerty)&quot; };
        xkb_types     { include &quot;complete&quot;      };
        xkb_compat    { include &quot;complete&quot;      };
        xkb_symbols   { include &quot;pc+us+rs(latinunicode):2+rs:3+inet(evdev)+group(rctrl_toggle)&quot; };
        xkb_geometry  { include &quot;pc(pc105)&quot;     };
};
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% stty -a
speed 38400 baud; 20 rows; 80 columns;
lflags: icanon isig iexten echo echoe echok echoke -echonl echoctl
        -echoprt -altwerase -noflsh -tostop -flusho -pendin -nokerninfo
        -extproc
iflags: -istrip icrnl -inlcr -igncr ixon -ixoff ixany imaxbel -ignbrk
        brkint -inpck -ignpar -parmrk
oflags: opost onlcr -ocrnl tab0 -onocr -onlret
cflags: cread cs8 -parenb -parodd hupcl -clocal -cstopb -crtscts -dsrflow
        -dtrflow -mdmbuf rtsdtr
cchars: discard = ^O; dsusp = ^Y; eof = ^D; eol = &amp;lt;undef&amp;gt;;
        eol2 = &amp;lt;undef&amp;gt;; erase = ^H; erase2 = ^H; intr = ^C; kill = ^U;
        lnext = ^V; min = 1; quit = ^\; reprint = ^R; start = ^Q;
        status = ^T; stop = ^S; susp = ^Z; time = 0; werase = ^W;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% tty
/dev/pts/5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;TIP&lt;/strong&gt; &lt;br /&gt;
For maximum &lt;strong&gt;portability&lt;/strong&gt;, to print (display) a character’s encoded value, 
use printf utility with a backslash (\) followed by 1, 2 or 3 octal digits 
because every POSIX-compliant printf can handle &lt;strong&gt;octal&lt;/strong&gt; values. For example, 
to print the capital letter A (ASCII decimal 65, hex 0x41, octal 101):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man ascii

% printf %x\\n 65
41
 
% printf %o\\n 65
101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\101&apos;
A% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference:&lt;br /&gt;
The printf utility - The Open Group Base Specifications Issue 7, 2018 edition:&lt;br /&gt;
&lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/9699919799/utilities/printf.html&quot;&gt;https://pubs.opengroup.org/onlinepubs/9699919799/utilities/printf.html&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;useful-tools&quot;&gt;Useful Tools&lt;/h3&gt;

&lt;p&gt;iconv(1) &lt;br /&gt;
uconv(1) &lt;br /&gt;
od(1)&lt;br /&gt;
hexdump(1) &lt;br /&gt;
xxd(1)&lt;br /&gt;
fc-list(1) &lt;br /&gt;
fc-match(1) &lt;br /&gt;
fc-query(1) &lt;br /&gt;
xfd(1) &lt;br /&gt;
pango-view(1)&lt;br /&gt;
xsel(1)  &lt;br /&gt;
xkeycaps(1) &lt;br /&gt;
luit(1)&lt;/p&gt;

&lt;p&gt;Perl  Unicode::Normalize –&amp;gt; &lt;a href=&quot;http://www.inference.org.uk/dasher/download/scripts/unicodesteps&quot;&gt;http://www.inference.org.uk/dasher/download/scripts/unicodesteps&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;uni.pl Perl script - List Unicode symbols matching PATTERN&lt;br /&gt;
&lt;a href=&quot;https://leahneukirchen.org/dotfiles/bin/uni&quot;&gt;https://leahneukirchen.org/dotfiles/bin/uni&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;gucharmap - a Unicode/ISO10646 character map and font viewer. &lt;br /&gt;
It uses GTK+ 2, and supports anti-aliased, scalable fonts.&lt;br /&gt;
WWW: &lt;a href=&quot;https://wiki.gnome.org/Gucharmap&quot;&gt;https://wiki.gnome.org/Gucharmap&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://wiki.gnome.org/Apps/Gucharmap&quot;&gt;https://wiki.gnome.org/Apps/Gucharmap&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% gucharmap
% gucharmap U+00E7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;From &lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/32928589/do-modern-terminals-generally-render-all-utf-8-characters-correctly&quot;&gt;Do modern terminals generally render all utf-8 characters correctly?&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;No, you should not assume that. Even in a modern system, the set of 
fonts installed, the font used by the terminal application, and 
environment variables such as LANG, LC_*, etc. may influence whether 
certain characters can be displayed correctly on the terminal or not.&lt;/p&gt;

  &lt;p&gt;You might be able to make reasonable guesses based on the value of the 
TERM, LANG, and LC_* environment variables as to what is supported, 
but it’s still going to be a guess. I’d suggest either not relying on it 
at all or providing some means of enabling/disabling the use (via an 
environment variable and/or via commandline flags to the application).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h5 id=&quot;the-unicode-consortium-unicodedata-file---unicodeorg-unicodedatatxt&quot;&gt;The Unicode Consortium. UnicodeData File - Unicode.org UnicodeData.txt&lt;/h5&gt;

&lt;p&gt;The UnicodeData.txt file contains most of the Unicode Character Database (UCD).
It’s maintained as a simple semicolon-delimited ASCII text file. 
Each record in the database (that is, the information about each character) 
is separated from the next by a newline (Line Feed on Unix) -&amp;gt; (ASCII LF, 
hex 0x0A), and each field in a record (that is, each property of a single 
character) is separated from the next by a semicolon.&lt;/p&gt;

&lt;p&gt;You can obtain the UnicodeData.txt from unicode.org (Retrieved on Nov 12, 2021):&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt;   &lt;br /&gt;
UnicodeData.txt is also available via http(s) at:&lt;br /&gt;
&lt;a href=&quot;https://unicode.org/Public/UNIDATA/UnicodeData.txt&quot;&gt;https://unicode.org/Public/UNIDATA/UnicodeData.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ftp -a ftp://ftp.unicode.org/Public/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ftp&amp;gt; dir
229 Entering Extended Passive Mode (|||28013|)
150 Opening ASCII mode data connection for file list
dr-xr-xr-x   5 ftp      ftp          4096 Jun 19  2017 10.0.0
drwxr-xr-x   5 ftp      ftp          4096 Apr 13  2020 11.0.0
---- snip ----
drwxr-xr-x   5 ftp      ftp          4096 Apr 13  2020 13.0.0
drwxr-xr-x   5 ftp      ftp          4096 Sep 14 00:08 14.0.0
---- snip ----  
-r--r--r--   1 ftp      ftp           344 Feb 21  2014 ReadMe.txt
---- snip ----
drwxr-xr-x  23 ftp      ftp          4096 Sep 14 18:16 UCA
drwxr-xr-x   2 ftp      ftp          4096 Sep 14 16:12 UCD
lrwxrwxrwx   1 ftp      ftp            10 Sep 14 16:02 UNIDATA -&amp;gt; /UNIDATA/14.0.0/ucd
---- snip ----
226 Transfer complete
ftp&amp;gt; 

ftp&amp;gt; page ReadMe.txt
This public directory contains data files for various versions
of the Unicode Standard, as well as data tables for specific
technical standards, mapping tables, and sample code.

For further information about data files please see:

Unicode Character Database
        http://www.unicode.org/ucd/

Terms of Use
        http://www.unicode.org/copyright.html

ftp&amp;gt; dir UCD
229 Entering Extended Passive Mode (|||40366|)
150 Opening ASCII mode data connection for file list
lrwxrwxrwx   1 ftp      ftp            10 Sep 14 16:12 latest -&amp;gt; /14.0.0
226 Transfer complete
 
ftp&amp;gt; dir 14.0.0
229 Entering Extended Passive Mode (|||16769|)
150 Opening ASCII mode data connection for file list
drwxr-xr-x   3 ftp      ftp          4096 Sep 27 13:11 charts
-rw-r--r--   1 ftp      ftp           635 May 25 19:05 README.html
-rw-r--r--   1 ftp      ftp          1060 Sep 10 16:29 ReadMe.txt
drwxr-xr-x   5 ftp      ftp          4096 Sep 14 16:03 ucd
drwxr-xr-x   2 ftp      ftp          4096 May 15  2021 ucdxml
226 Transfer complete

ftp&amp;gt; page 14.0.0/ReadMe.txt
# Unicode Character Database
# Date: 2021-09-10, 17:20:00 GMT [KW]
# © 2021 Unicode®, Inc.
# Unicode and the Unicode Logo are registered trademarks of Unicode, Inc. 
#   in the U.S. and other countries.
# For terms of use, see https://www.unicode.org/terms_of_use.html
#
# For documentation, see the following:
# ucd/NamesList.html
# UAX #38, &quot;Unicode Han Database (Unihan)&quot;
# UAX #42, &quot;Unicode Character Database in XML&quot;
# UAX #44, &quot;Unicode Character Database&quot;
# UTS #51, &quot;Unicode Emoji&quot;
#
# The UAXes and UTS #51 can be accessed at 
#   https://www.unicode.org/versions/Unicode14.0.0/

This directory contains the final data files
for Version 14.0.0 of the Unicode Standard.

The &quot;ucd&quot; subdirectory contains the Unicode
Character Database data files.

The &quot;charts&quot; subdirectory contains an archival set of
pdf code charts corresponding exactly to Version 14.0.0.

The &quot;ucdxml&quot; subdirectory contains the XML version of
the Unicode Character Database.

Zipped versions of UCD data files for Version 14.0.0 are
posted in:

https://www.unicode.org/Public/zipped/14.0.0/
 
ftp&amp;gt; cd 14.0.0
250 CWD command successful

ftp&amp;gt; dir
229 Entering Extended Passive Mode (|||59590|)

150 Opening ASCII mode data connection for file list
drwxr-xr-x   3 ftp      ftp          4096 Sep 27 13:11 charts
-rw-r--r--   1 ftp      ftp           635 May 25 19:05 README.html
-rw-r--r--   1 ftp      ftp          1060 Sep 10 16:29 ReadMe.txt
drwxr-xr-x   5 ftp      ftp          4096 Sep 14 16:03 ucd
drwxr-xr-x   2 ftp      ftp          4096 May 15  2021 ucdxml
226 Transfer complete

ftp&amp;gt; cd ucd
250 CWD command successful

ftp&amp;gt; dir
229 Entering Extended Passive Mode (|||39925|)

150 Opening ASCII mode data connection for file list
-rw-r--r--   1 ftp      ftp         40528 May 21 16:47 ArabicShaping.txt
drwxr-xr-x   2 ftp      ftp          4096 Sep  8 22:58 auxiliary
---- snip ----
-rw-r--r--   1 ftp      ftp       1897793 Jul  6 17:31 UnicodeData.txt
---- snip ---- 
226 Transfer complete

ftp&amp;gt; pwd
Remote directory: /Public/14.0.0/ucd

ftp&amp;gt; get UnicodeData.txt
---- snip ----

ftp&amp;gt; quit
221 Goodbye.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
The fields for the unicode.org file &lt;strong&gt;UnicodeData.txt&lt;/strong&gt; are documented here 
(Retrieved on Nov 12, 2021):
&lt;a href=&quot;https://www.unicode.org/reports/tr44/tr44-28.html#UnicodeData.txt&quot;&gt;https://www.unicode.org/reports/tr44/tr44-28.html#UnicodeData.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The record for the letter A with the fields labeled:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^0041 UnicodeData.txt
0041;LATIN CAPITAL LETTER A;Lu;0;L;;;;;N;;;;0061;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                              +---------- General category
                              | +-------- Combining class
 Code point value             | | +------ Bidirectional category
  |                           | | |+----- Decomposition
  |    Name                   | | ||+---- Decimal digit value
  |     |                     | | |||
  v     v                     v v vvv 
 0041;LATIN CAPITAL LETTER A;Lu;0;L;;;;;N;;;;0061;
                                     ^^ ^^^^  ^  ^ 
                                     || ||||  |  |
                      Digit value ---+| ||||  |  |
                    Numeric value ----+ ||||  |  |
                         Mirrored ------+|||  |  |
                 Unicode 1.0 name -------+||  |  |
              10646 comment field --------+|  |  |
                Uppercase mapping ---------+  |  |
                Lowercase mapping ------------+  |
                Titlecase mapping ---------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Unicode code point value U+0041 has the name LATIN CAPITAL LETTER A. 
It has a general category of “uppercase letter” (abbreviated “Lu”); 
it’s not a combining mark (its combining class is 0); it’s a left-to-right 
character (abbreviated “L”); it’s not a composite character 
(no decomposition); it’s not a numeral or digit (the three digit-value 
fields are all empty); it doesn’t mirror (abbreviated “N”); its name in 
Unicode 1.0 was the same as its current name (empty field); it maps to 
itself when being converted to uppercase or titlecase (empty fields); 
and it maps to U+0061 (LATIN SMALL LETTER A) when being converted to lowercase.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;fontconfig--xft&quot;&gt;Fontconfig / Xft&lt;/h3&gt;

&lt;p&gt;Xft is the X Font library.
It uses &lt;a href=&quot;https://www.freedesktop.org/wiki/Software/fontconfig/&quot;&gt;Fontconfig&lt;/a&gt;
to select fonts and the X protocol for rendering them.&lt;/p&gt;

&lt;p&gt;Fontconfig is a library for configuring and customizing font access.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
In &lt;em&gt;X11&lt;/em&gt;, you can use &lt;em&gt;multiple font systems&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;In practice, there are two font systems:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The &lt;strong&gt;X11 core&lt;/strong&gt; font system (part of the core protocol)
    &lt;ul&gt;
      &lt;li&gt;Toolkits that use the core X font protocol include Xt, Xaw, Xaw3d, 
Motif clones, Tk and GTK+ 1 [²]&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;The &lt;strong&gt;Xft&lt;/strong&gt; font system (more recent than the core font system)
    &lt;ul&gt;
      &lt;li&gt;Toolkits that use Xft are Qt and GTK+ 2&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Over time, Fontconfig/Xft is supposed to replace the core X font subsystem.&lt;/p&gt;

&lt;p&gt;[²] The GTK team releases new versions on a regular basis.
It went through a sequence of revisions, from GTK 1 to GTK+2 and then 
to GTK+ 3 and GTK 4.&lt;/p&gt;

&lt;p&gt;As of November 2021, GTK 4 and GTK 3 are maintained, while GTK 2 is end-of-life.&lt;br /&gt;
GTK+ 3 was released in 2011 and was a major departure from GTK+ 2, which was
a major departure from GTK+ 1.&lt;/p&gt;

&lt;p&gt;The “plus” (+) was removed the GTK project name in 2019:&lt;/p&gt;

&lt;p&gt;Project rename to “GTK”
&lt;a href=&quot;https://mail.gnome.org/archives/gtk-devel-list/2019-February/msg00000.html&quot;&gt;https://mail.gnome.org/archives/gtk-devel-list/2019-February/msg00000.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;tl;dr: GTK is GTK, not GTK+. The documentation has been updated, and the 
pkg-config file for the future 4.0 major release is now called “gtk4”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As this section is about Xft and Fontconfig, it doesn’t include 
the use of X Window (X11/Xorg) font utilities like
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xlsfonts(1)&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfontsel(1)&lt;/code&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
To list how many fonts Fontconfig is aware of you can use&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-match&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-list | wc -l
    1997
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-match --all | wc -l
    1997
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
To show the ruleset files information on the system, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-conflist(1)&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-conflist
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unicode code point for the Skull and Crossbones character is U+2620.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠
2620%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;TIP&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;To find out the name of the Unicode code point, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv(1)&lt;/code&gt; utility:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ☠ | uconv -f utf-8 -x any-name
\N{SKULL AND CROSSBONES}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;List all fonts on the system that support the Skull and Crossbones character.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠ | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; | wc -l
      66
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Select a font that you would like to preview.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠ | xargs -Ireplstr fc-list &quot;:charset=replstr&quot;
---- snip ----
/usr/local/share/fonts/Monoid/Monoid-Regular.ttf: Monoid:style=Regular
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another way to find out a font’s location:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠ \
? | xargs -Ireplstr fc-list -f &quot;%{file}\n&quot; &quot;:charset=replstr&quot; \
? | wc -l
      66
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you’d like to list font names:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠ \
 | xargs -Ireplstr fc-list -f &quot;%{fullname}\n&quot; &quot;:charset=replstr&quot; \
 | wc -l
      66
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;☠ \
 | xargs -Ireplstr fc-list -f &quot;%{fullname}\n&quot; &quot;:charset=replstr&quot;
---- snip ----
Monoid
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To make sure that the font name is actually the one you want, use
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-query&lt;/code&gt; utility to confirm the font’s name and other
details; style (Regular, Bold, Italic, …), PostScript name, 
weight, width, file location, foundry, if the font is scalable or not,
character set, languagues supported, …&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
For ‘Regular’ style, the word ‘Regular’ is not added to the font name.
For example, for Monoid font family - Regular style, the font is 
named ‘Monoid’ (not ‘Monoid Regular’).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-query /usr/local/share/fonts/Monoid/Monoid-Regular.ttf | wc -l
      40

% fc-query /usr/local/share/fonts/Monoid/Monoid-Regular.ttf | grep -w -i family
        family: &quot;Monoid&quot;(s)

% fc-query /usr/local/share/fonts/Monoid/Monoid-Regular.ttf | grep -w -i style
        style: &quot;Regular&quot;(s)

% fc-query /usr/local/share/fonts/Monoid/Monoid-Regular.ttf | grep -i name
        postscriptname: &quot;Monoid-Regular&quot;(s)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-match --all | grep -i Monoid | wc -l
      24

% fc-match --all | grep -i Monoid | grep -i Regular | wc -l
       6
 
% fc-match --all | grep -i Monoid | grep -i Regular
Monoid-Regular-Tight.ttf: &quot;Monoid Tight&quot; &quot;Regular&quot;
Monoid-Regular-HalfTight.ttf: &quot;Monoid HalfTight&quot; &quot;Regular&quot;
Monoid-Regular-HalfLoose.ttf: &quot;Monoid HalfLoose&quot; &quot;Regular&quot;
Monoid-Regular.ttf: &quot;Monoid&quot; &quot;Regular&quot;
Monoid-Regular-Loose.ttf: &quot;Monoid Loose&quot; &quot;Regular&quot;
monoid-regular.ttf: &quot;Monoid&quot; &quot;Regular&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-match &apos;Monoid-Regular&apos;
monoid-regular.ttf: &quot;Monoid&quot; &quot;Regular&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To find more details about the selected font (in this example:
Monoid, style: Regular), use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list&lt;/code&gt; utility and its &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-v&lt;/code&gt; 
option for verbose output.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-list -v &apos;Monoid:style=Regular&apos; | wc -l
      84
 
% fc-list -v &apos;Monoid:style=Regular&apos; 
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For example, to check if the selected font supports Serbian character set:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-list -v &apos;Monoid:style=Regular&apos; | grep -w sr | wc -l
       2

% fc-list -v &apos;Monoid:style=Regular&apos; | grep -w sr
        lang: aa|af|av|ay|az-az|be|bg|bi|br|bs|ca|ce|ch|co|cs|da|de|el|en
	|eo|es|et|eu|fi|fj|fo|fr|fur|fy|gd|gl|gv|haw|ho|hr|hu|ia|id|ie|ik
	|io|is|it|ki|kl|kum|la|lb|lez|lt|lv|mg|mh|mk|mo|mt|nb|nds|nl|nn|no
	|nr|nso|ny|oc|om|os|pl|pt|rm|ro|ru|se|sel|sk|sl|sm|sma|smj|smn|so
	|sq|sr|ss|st|sv|sw|tk|tl|tn|to|tr|ts|uk|uz|vo|vot|wa|wen|wo|xh|yap
	|zu|an|crh|csb|fil|hsb|ht|jv|kj|ku-tr|kwm|lg|li|mn-mn|ms|na|ng|nv
	|pap-an|pap-aw|rn|rw|sc|sg|sn|su|ty|za(s)
        lang: aa|af|av|ay|az-az|be|bg|bi|br|bs|ca|ce|ch|co|cs|da|de|el|en
	|eo|es|et|eu|fi|fj|fo|fr|fur|fy|gd|gl|gv|haw|ho|hr|hu|ia|id|ie|ik
	|io|is|it|ki|kl|kum|la|lb|lez|lt|lv|mg|mh|mk|mo|mt|nb|nds|nl|nn|no
	|nr|nso|ny|oc|om|os|pl|pt|rm|ro|ru|se|sel|sk|sl|sm|sma|smj|smn|so
	|sq|sr|ss|st|sv|sw|tk|tl|tn|to|tr|ts|uk|uz|vo|vot|wa|wen|wo|xh|yap
	|zu|an|crh|csb|fil|hsb|ht|jv|kj|ku-tr|kwm|lg|li|mn-mn|ms|na|ng|nv
	|pap-an|pap-aw|rn|rw|sc|sg|sn|su|ty|za(s)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can narrow it down to, for example, charset:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fc-list -v &apos;Monoid:style=Regular&apos; charset 
Pattern has 1 elts (size 16)
        charset: 
0000: 00000000 ffffffff ffffffff 7fffffff 00000000 ffffffff ffffffff ffffffff
0001: ffffffff ffffffff ffffffff ffffffff 00008200 00000010 00000000 00000c00
0002: 0fffffff 00800000 1a000000 00000000 00000000 18000000 00000000 00000000
0003: 00269ddf 000003c0 00000000 00000000 ffffd770 fffffffb 10007fff 00000000
0004: ffffffff ffffffff ffffffff 003c0003 00030000 0000c000 00000000 00000300
0020: 773f083f 26000047 00000000 00300000 00000000 06001000 00000000 00000000
0021: 00000000 00000000 00000000 00000000 003f0000 00000000 00000000 00000000
0022: 02060140 00000800 00000100 00000033 00000000 00000000 00000000 00000000
0025: 00000000 00000000 00000000 00000000 00000100 00000000 00000000 00000000
0026: 00000000 00000001 00000000 0000e000 00000000 00000000 00000000 00000000
0030: 00000000 00000000 00000000 00000000 00000000 00000000 00000010 00000000
00e0: 00000000 00000000 00000000 00000000 00000000 000f0007 00000000 00000000
(s)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;TIP&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;To see the text (or a single character) in the font you selected
you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pango-view(1)&lt;/code&gt; Pango text viewer
and its &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt; (“text to display”) option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% env DISPLAY=:0 pango-view --font=&quot;Monoid&quot; -t ☠
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternatively, with FC_DEBUG environment variable, pango-view(1) creates 
a lot of output (in this example, around 7000 lines).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% env DISPLAY=:0 FC_DEBUG=4 pango-view --font=&quot;Monoid&quot; -t ☠
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference: &lt;br /&gt;
Beyond Linux® From Scratch (System V Edition) - Version r11.0-241&lt;br /&gt;
Chapter 24. X Window System Environment&lt;br /&gt;
&lt;a href=&quot;https://www.linuxfromscratch.org/blfs/view/svn/x/tuning-fontconfig.html&quot;&gt;Tuning Fontconfig&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env FC_DEBUG=4 pango-view --font=monospace -t xyz | grep family&lt;/code&gt;&lt;/p&gt;

  &lt;p&gt;This requires Pango and ImageMagick - it will invoke display(1) to show 
the text in a tiny window, and after closing it, the last line of the 
output will show which font was chosen.  This is particularly useful 
for &lt;strong&gt;CJK&lt;/strong&gt; (China, Japan, Korea) languages, and you can also pass 
a language, e.g.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PANGO_LANGUAGE=en;ja&lt;/code&gt; (English, then assume Japanese) or just
zh-cn (or other variants - ‘zh’ on its own is not valid).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Finally, to see all the characters in an X font, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd(1)&lt;/code&gt; utility.
For example, to see all the characters in Monoid font:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -fa &quot;Monoid&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By default, the xfd(1) displays the selected font in &lt;strong&gt;Regular&lt;/strong&gt; style and 
with pointsize &lt;strong&gt;12&lt;/strong&gt;.  In the case of Monoid, xfd(1) would by default display
&lt;strong&gt;Monoid-12:style=Regular&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;To start xterm with the selected font.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xterm -fa Monoid
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To start xterm with the selected font and to specify the pointsize of the font.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xterm -fa Monoid -fs 14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fa &amp;lt;fontname&amp;gt;&lt;/code&gt; option to specify a Xft font to be displayed.&lt;/p&gt;

&lt;p&gt;To specifiy the core X server side font to be displayed, use the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-fn &amp;lt;fontname&amp;gt;&lt;/code&gt; option.&lt;/p&gt;

&lt;p&gt;For font names without white spaces, you don’t have to use quotes around
the font name so in the case of this example the following also works:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd -fa Monoid&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For font names with more than one word, you need to enclose it in quotes.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %x \&apos;`printf &apos;\314\202&apos;` \
 | xargs -Ireplstr fc-list &quot;:charset=replstr&quot; \
 | grep -i gentium

/usr/local/share/fonts/GentiumBasic/GenBkBasI.ttf: Gentium Book Basic:style=Italic
/usr/local/share/fonts/GentiumBasic/GenBasB.ttf: Gentium Basic:style=Bold
/usr/local/share/fonts/GentiumBasic/GenBkBasB.ttf: Gentium Book Basic:style=Bold
/usr/local/share/fonts/GentiumBasic/GenBkBasR.ttf: Gentium Book Basic:style=Regular
/usr/local/share/fonts/GentiumBasic/GenBasI.ttf: Gentium Basic:style=Italic
/usr/local/share/fonts/GentiumBasic/GenBasR.ttf: Gentium Basic:style=Regular
/usr/local/share/fonts/GentiumBasic/GenBkBasBI.ttf: Gentium Book Basic:style=Bold Italic
/usr/local/share/fonts/GentiumBasic/GenBasBI.ttf: Gentium Basic:style=Bold Italic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -fa &quot;Gentium Book Basic:style=Italic&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As it displays the font in pointsize 12 by default, xfd(1) displays 
&lt;em&gt;Gentium Book Basic-12:style=Italic&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;To display the selected font in a different size, add the size at the end 
of the font name:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -fa &quot;Gentium Book Basic-20:style=Bold&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To start xterm  with this font, style and pointsize:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xterm -fa &quot;Gentium Book Basic-20:style=Bold&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;how-to-find-all-available-fontconfig-utilities&quot;&gt;How to Find All Available Fontconfig Utilities&lt;/h4&gt;

&lt;p&gt;On FreeBSD, the Fontconfig utilities are in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/bin/&lt;/code&gt; directory:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v fc-list
/usr/local/bin/fc-list
 
% command -V fc-list
fc-list is /usr/local/bin/fc-list
 
% type fc-list
fc-list is /usr/local/bin/fc-list

% which fc-list
/usr/local/bin/fc-list
 
% whereis fc-list
fc-list: /usr/local/bin/fc-list
 
% where fc-list
/usr/local/bin/fc-list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following Fontconfig utilites are available on this system:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh /usr/local/bin/fc*
-rwxr-xr-x  1 root  wheel    14K Jul  7 18:12 /usr/local/bin/fc-cache
-rwxr-xr-x  1 root  wheel    12K Jul  7 18:12 /usr/local/bin/fc-cat
-rwxr-xr-x  1 root  wheel   7.2K Jul  7 18:12 /usr/local/bin/fc-conflist
-rwxr-xr-x  1 root  wheel   9.3K Jul  7 18:12 /usr/local/bin/fc-list
-rwxr-xr-x  1 root  wheel    10K Jul  7 18:12 /usr/local/bin/fc-match
-rwxr-xr-x  1 root  wheel   8.8K Jul  7 18:12 /usr/local/bin/fc-pattern
-rwxr-xr-x  1 root  wheel   8.4K Jul  7 18:12 /usr/local/bin/fc-query
-rwxr-xr-x  1 root  wheel   9.3K Jul  7 18:12 /usr/local/bin/fc-scan
-rwxr-xr-x  1 root  wheel   9.7K Jul  7 18:12 /usr/local/bin/fc-validate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;utfs-unicode-transformation-formats&quot;&gt;UTFs (Unicode Transformation Formats)&lt;/h3&gt;

&lt;p&gt;From
&lt;a href=&quot;https://www.ibm.com/docs/en/db2-for-zos/12?topic=unicode-utfs&quot;&gt;https://www.ibm.com/docs/en/db2-for-zos/12?topic=unicode-utfs&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Each Unicode code point can be expressed in several different formats.&lt;br /&gt;
These formats are called Unicode Transformation Formats (UTFs).&lt;br /&gt;
For example, the letter M is the Unicode code point U+004D.&lt;br /&gt;
In UTF-8, this code point is represented as 0x4D. 
In UTF-16, this code point can be represented as 0x004D.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf M | hexdump -C
00000000  4d                                                |M|
00000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf M | od -t x1
0000000    4d                                                            
0000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf M | od -t x2
0000000      004d                                                        
0000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x004D&lt;/code&gt; is the UTF-16 big endian representation. 
The UTF-16 little endian representation is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x4D00&lt;/code&gt;. 
For more information about endianness, see Endianness
&lt;a href=&quot;https://www.ibm.com/docs/en/db2-for-zos/12?topic=data-endianness&quot;&gt;https://www.ibm.com/docs/en/db2-for-zos/12?topic=data-endianness&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf M | iconv -f ascii -t utf-16le | od -x
0000000      004d
0000002
 
% printf M | iconv -f ascii -t utf-16be | od -x
0000000      4d00
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also see
How iconv and od handle endianness?
&lt;a href=&quot;https://unix.stackexchange.com/questions/599582/how-iconv-and-od-handle-endianness&quot;&gt;https://unix.stackexchange.com/questions/599582/how-iconv-and-od-handle-endianness&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also see
How do I find out the Default Encoding used by a computer?
&lt;a href=&quot;https://social.msdn.microsoft.com/Forums/vstudio/en-US/a84ae865-cb2e-49cb-bdb2-1e4d55456b02/how-do-i-find-out-the-default-encoding-used-by-a-computer&quot;&gt;https://social.msdn.microsoft.com/Forums/vstudio/en-US/a84ae865-cb2e-49cb-bdb2-1e4d55456b02/how-do-i-find-out-the-default-encoding-used-by-a-computer&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;UTF-16 requires a &lt;strong&gt;byte order mark (BOM)&lt;/strong&gt; to distinguish whether the text was 
created on a Little Endian or a Big Endian machine.&lt;br /&gt;
&lt;strong&gt;Intel&lt;/strong&gt; processors are &lt;strong&gt;Little Endian&lt;/strong&gt; machines. 
So Windows is a Little Endian system.&lt;/p&gt;

  &lt;p&gt;With UTF-8 encoding, the issue of endianess doesn’t arise, because it 
will have been written one byte (8 bits) at a time. In particular, 
ISO 646’s 7 bit codes (like ASCII) are stored unchanged directly into 
the UTF-8 file.  Thus a UTF-8 file containing only invariant ISO 646 
bytes is indistinguishable from an “ASCII” file. However, to store 
remaining 1,112,064 Unicode Code Points UTF-8 introduces a marker byte, 
and then a further one, two, three or four bytes to encode the code point.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;looking-at-file-content&quot;&gt;Looking at File Content&lt;/h3&gt;
&lt;p&gt;To display the content of a file in some other format than its character 
(ASCII) format, you can use a number of different commands. 
Some of them are od (octal dump), hexdump, xxd and iconv.&lt;/p&gt;

&lt;h4 id=&quot;od1-and-cat1&quot;&gt;od(1) and cat(1)&lt;/h4&gt;
&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;od -bc&lt;/code&gt; displays a file in octal and character format.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf M | od -bc 
0000000   115                                                            
           M                                                            
0000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf M &amp;gt; testing

% file testing
testing: very short file (no magic)
 
% wc -l testing
       0 testing
 
% wc -c testing
       1 testing

% od -bc testing
0000000   115
           M
0000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the cat(1) utility:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-b&lt;/code&gt; option: number the non-blank output lines, starting at 1;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-e&lt;/code&gt; option: display non-printing characters, and display 
                 a dollar sign (‘$’) at the end of each line&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat -b testing
     1  M% 

% cat -e testing
M% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the newline character, which ends the single line of text:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%s\n&quot; M &amp;gt; testing

% file testing
testing: ASCII text
 
% wc -l testing
       1 testing
 
% wc -c testing
       2 testing

% od -bc testing
0000000   115 012
           M  \n
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The \012 at the end is the newline character (012 in octal, 0x0A in hex, 10 in decimal).&lt;/p&gt;

&lt;p&gt;With the cat(1) utility:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-b&lt;/code&gt; option: number the non-blank output lines, starting at 1;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-c&lt;/code&gt; option: display non-printing characters, and display 
                 a dollar sign (‘$’) at the end of each line&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat -b testing 
     1  M
 
% cat -e testing
M$
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the next example, modify the test file to include two characters.&lt;/p&gt;

&lt;p&gt;Now, when you view the same test file in hexadecimal (a.k.a. hex), you’ll 
notice that od(1) swapped the characters in each two-letter set.
For example, instead of A=41, A is 4d and instead of M=4d, M is 41 so for 
“AM” two-letter set, instead of “414d”, it shows as “4d41”:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf A | od -bc
0000000   101                                                            
           A                                                            
0000001
 
% printf M | od -bc
0000000   115                                                            
           M                                                            
0000001

% printf AM &amp;gt; testing
 
% file testing
testing: ASCII text, with no line terminators

wc -l testing
       0 testing
 
% wc -c testing
       2 testing
 
% od -bc testing
0000000   101 115                                                        
           A   M                                                        
0000002

% cat -b testing
     1  AM% 
 
% cat -e testing
AM% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf A | od -hc
0000000      0041
           A
0000001
 
% printf M | od -hc
0000000      004d
           M
0000001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -hc testing
0000000      4d41
           A   M
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;od -h&lt;/code&gt; outputs hexadecimal shorts.  It’s equivalent to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t x2&lt;/code&gt; 
(hexadecimal type with a byte count of 2):&lt;/p&gt;

&lt;p&gt;Also note that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-h&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt; are interchangeable in od(1).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -x testing
0000000      4d41
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -t x2 testing
0000000      4d41                                                        
0000002

% od -t x2 -c testing
0000000      4d41                                                        
           A   M                                                        
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Adding &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t x1&lt;/code&gt; to the od(1) command (x1 = byte count is 1) gets 
around the character swapping in two letter sets:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -t x1 testing
0000000    41  4d                                                        
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It outputs one hexadecimal byte at a time.&lt;/p&gt;

&lt;p&gt;It’s equivalent to a hexadecimal type with a size specifier = char (C):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% od -t xC testing
0000000    41  4d                                                        
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From 
How iconv and od handle endianness?
&lt;a href=&quot;https://unix.stackexchange.com/questions/599582/how-iconv-and-od-handle-endianness&quot;&gt;https://unix.stackexchange.com/questions/599582/how-iconv-and-od-handle-endianness&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t x1&lt;/code&gt; gives big endian because it splits words.&lt;/p&gt;

  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t x2&lt;/code&gt; give little-endian.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The big-endian and little-endian refers to whether the data 
values are ordered with the most significant (big-endian) or least 
significant (little-endian) byte first.&lt;/p&gt;

&lt;h4 id=&quot;hexdump1&quot;&gt;hexdump(1)&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
In FreeBSD, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hexdump&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hd&lt;/code&gt; are the same binary:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v hexdump
/usr/bin/hexdump
 
% command -v hd
/usr/bin/hd
 
% ls -lh /usr/bin/hexdump 
-r-xr-xr-x  3 root  wheel    30K Jul 13 14:30 /usr/bin/hexdump

% ls -lh /usr/bin/hd
-r-xr-xr-x  3 root  wheel    30K Jul 13 14:30 /usr/bin/hd
 
% diff /usr/bin/hd /usr/bin/hexdump 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use hexdump(1) to display the test file in hex, character and octal format.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% hexdump testing
0000000 4d41
0000002
 
% hexdump -c testing
0000000   A   M
0000002
 
% hexdump -b testing
0000000 101 115
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To display it with big endianess, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-C&lt;/code&gt; option.
From the man page for hexdump(1):&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-C      Canonical hex+ASCII display.  Display the input offset in
        hexadecimal, followed by sixteen space-separated, two column,
        hexadecimal bytes, followed by the same sixteen bytes in %_p
        format enclosed in ``|&apos;&apos; characters.

Calling the command hd implies this option.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% hexdump -C testing
00000000  41 4d                                             |AM|
00000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% hd testing
00000000  41 4d                                             |AM|
00000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;An example with a bigger number of characters to make the output of 
the sixteen space-separated, two column hexadecimal bytes more noticable:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;AMAMAMAMAMAMAMAMAMAMAMAM&apos; &amp;gt; testing
 
% cat testing
AMAMAMAMAMAMAMAMAMAMAMAM% 

% hexdump -C testing
00000000  41 4d 41 4d 41 4d 41 4d  41 4d 41 4d 41 4d 41 4d  |AMAMAMAMAMAMAMAM|
*
00000010
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;00000000  41 4d 41 4d 41 4d 41 4d  41 4d 41 4d 41 4d 41 4d  |AMAMAMAMAMAMAMAM|
              
          01 02 03 04 05 06 07 08  09 10 11 12 13 14 15 16 
          sixteen space separated bytes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;xxd1&quot;&gt;xxd(1)&lt;/h4&gt;

&lt;p&gt;The xxd(1) command creates a hex dump or converts a hex dump to some other format. 
It displays a file in big-endian format by default.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf AM &amp;gt; testing
 
% xxd testing
00000000: 414d                                     AM
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output in postscript continuous hexdump style. 
Also known as plain hexdump style.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xxd -p testing
414d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;iconv1&quot;&gt;iconv(1)&lt;/h4&gt;

&lt;p&gt;The iconv(1) utility converts (translates) content from one character 
encoding to another.&lt;/p&gt;

&lt;p&gt;To see how many different encoding schemes are supported by your system,
use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--list&lt;/code&gt; option:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% iconv --list | wc -l
     216
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The syntax of the iconv(1) is:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;iconv [-f from-encoding] [-t to-encoding] [inputfile]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf AM &amp;gt; testing
 
% cat testing
AM% 

% file testing
testing: ASCII text, with no line terminators

% iconv -f utf8 -t utf16 testing &amp;gt; testingutf16

% file testingutf16
testingutf16: Big-endian UTF-16 Unicode text, with no line terminators
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The UTF-16 encoded file, testingutf16, is three times the size of the UTF-8 file.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh testing*
-rw-r--r--  1 dusko  dusko     2B Nov 10 23:19 testing
-rw-r--r--  1 dusko  dusko     6B Nov 10 23:19 testingutf16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the UTF-16 encoded file, every other byte is “00”. 
The data you are displaying is not making use of the extra byte.
Also, two bytes are added at the beginning of the file.
They are used to indicate the endianess of the UTF-16 format and are not 
treated as characters.&lt;/p&gt;

&lt;p&gt;These two bytes are a BOM (Byte Order Mark).&lt;/p&gt;

&lt;p&gt;From
UTF-8, UTF-16, UTF-32 &amp;amp; BOM – Byte Order Mark (BOM) - Unicode.org FAQ
&lt;a href=&quot;http://unicode.org/faq/utf_bom.html&quot;&gt;http://unicode.org/faq/utf_bom.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;For Encoding Form UTF-16, big-endian – Bytes:  FE FF&lt;/p&gt;

  &lt;p&gt;For Encoding Form UTF-16, little-endian – Bytes:  FF FE&lt;/p&gt;

  &lt;p&gt;For Encoding Form UTF-32, big-endian – Bytes:  00 00 FE FF&lt;/p&gt;

  &lt;p&gt;For Encoding Form UTF-32, little-endian – Bytes:  FF FE 00 00&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% hexdump testingutf16
0000000 fffe 4100 4d00
0000006
 
% hexdump -C testingutf16
00000000  fe ff 00 41 00 4d                                 |...A.M|
00000006
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, for a UTF-32 encoded file (big-endian), BOM bytes are: 00 00 FE FF.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf AM &amp;gt; testing

% cat testing
AM% 

% cat -b testing
     1  AM% 

% cat -e testing
AM% 

% file testing
testing: ASCII text, with no line terminators

% iconv --list | grep -i UTF | wc -l
       8

% iconv --list | grep -i UTF | grep 32 | wc -l
       3

% iconv --list | grep -i UTF | grep 32
UTF-32-INTERNAL UCS-4-INTERNAL
UTF-32-SWAPPED UCS-4-SWAPPED
UTF-32 CSUCS4 ISO-10646-UCS-4 UCS-4 UCS-4BE UTF-32BE UTF32BE UCS-4LE 
       UTF-32LE UTF32LE

% iconv -t UTF-32 testing &amp;gt; testingutf32

% ls -lh testing*
-rw-r--r--  1 dusko  dusko     2B Nov 11 11:52 testing
-rw-r--r--  1 dusko  dusko     6B Nov 10 23:19 testingutf16
-rw-r--r--  1 dusko  dusko    12B Nov 11 11:54 testingutf32

% file testingutf32
testingutf32: Unicode text, UTF-32, big-endian

% od -bc testingutf32
0000000   000 000 376 377 000 000 000 101 000 000 000 115
          \0  \0 376 377  \0  \0  \0   A  \0  \0  \0   M 
0000014

% xxd testingutf32
00000000: 0000 feff 0000 0041 0000 004d            .......A...M

% hexdump testingutf32
0000000 0000 fffe 0000 4100 0000 4d00
000000c

% hexdump -C testingutf32
00000000  00 00 fe ff 00 00 00 41  00 00 00 4d              |.......A...M|
0000000c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From
UTF-8, UTF-16, UTF-32 &amp;amp; BOM – Byte Order Mark (BOM) FAQ
&lt;a href=&quot;http://unicode.org/faq/utf_bom.html&quot;&gt;http://unicode.org/faq/utf_bom.html&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;Q: When a BOM is used, is it only in 16-bit Unicode text?&lt;/p&gt;

  &lt;p&gt;A: No, a BOM can be used as a signature no matter how the Unicode text 
is transformed: UTF-16, UTF-8, or UTF-32. The exact bytes comprising 
the BOM will be whatever the Unicode character U+FEFF is converted into 
by that transformation format. In that form, the BOM serves to indicate 
both that it is a Unicode file, and which of the formats it is in. 
Examples:&lt;/p&gt;
  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;+-------------+-----------------------+
| Bytes       | Encoding Form         |
+-------------+-----------------------+
| 00 00 FE FF | UTF-32, big-endian    |
| FF FE 00 00 | UTF-32, little-endian |
| FE FF       | UTF-16, big-endian    |
| FF FE       | UTF-16, little-endian |
| EF BB BF    | UTF-8                 | 
+-------------+-----------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Q: Can a UTF-8 data stream contain the BOM character (in UTF-8 form)? 
If yes, then can I still assume the remaining UTF-8 bytes are in 
big-endian order?&lt;/p&gt;

  &lt;p&gt;A: Yes, UTF-8 can contain a BOM. However, it makes no difference as to 
the endianness of the byte stream. UTF-8 always has the same byte order.
An initial BOM is &lt;em&gt;only&lt;/em&gt; used as a signature - an indication that an 
otherwise unmarked text file is in UTF-8. Note that some recipients of 
UTF-8 encoded data do not expect a BOM. Where UTF-8 is used transparently
in 8-bit environments, the use of a BOM will interfere with any protocol
or file format that expects specific ASCII characters at the beginning, 
such as the use of “#!” at the beginning of Unix shell scripts.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;how-to-find-a-unicode-code-point-of-a-character&quot;&gt;How to Find a Unicode Code Point of a Character?&lt;/h3&gt;
&lt;h3 id=&quot;method-1-printf1-oneliner&quot;&gt;Method 1: printf(1) oneliner&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
For finding a Unicode code point of a &lt;strong&gt;composite Unicode character&lt;/strong&gt;, 
see the next section below ‘Unicode Normalized Formats (NFC or NFKC)’, 
a.k.a. ‘Composite Unicode Characters’, 
a.k.a. ‘Unicode Equivalence’.&lt;/p&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt; utility:&lt;/p&gt;

&lt;p&gt;For example, for a ‘check mark’ (‘checkmark’) character:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%x\n&quot; \&apos;✓
2713
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv(1)&lt;/code&gt; utility to display the name of 
the Unicode code points of the desired character:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ✓ | uconv -f utf-8 -x any-name
\N{CHECK MARK}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep 2713 UnicodeData.txt
2713;CHECK MARK;So;0;ON;;;;;N;;;;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, the Unicode for the Check Mark (Checkmark) character is 2713.&lt;/p&gt;

&lt;p&gt;A Unicode Character ‘CHECK MARK’ (U+2713)
&lt;a href=&quot;https://www.fileformat.info/info/unicode/char/2713/fontsupport.htm&quot;&gt;https://www.fileformat.info/info/unicode/char/2713/fontsupport.htm&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;how-to-find-a-unicode-code-point-of-a-character-1&quot;&gt;How to Find a Unicode Code Point of a Character?&lt;/h3&gt;
&lt;h3 id=&quot;method-2-printf1-and-xxd1hexdump1od1&quot;&gt;Method 2: printf(1) and xxd(1)/hexdump(1)/od(1)&lt;/h3&gt;

&lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv(1)&lt;/code&gt; utility to display the name of the Unicode code point 
of the desired character:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ž | uconv -f utf-8 -x any-name
\N{LATIN SMALL LETTER Z WITH CARON}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ž 
ž% 
 
% printf ž | xxd
00000000: c5be                                     ..

% printf ž | xxd -p
c5be
 
% printf ž | hexdump -C
00000000  c5 be                                             |..|
00000002

% printf ž | od -t x1
0000000    c5  be                                                        
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This character (ž) in UTF-8 encoding: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0xC5 0xBE&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In octal:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ž | od -bc
0000000   305 276
           ž  **
0000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another method of converting from hexadecimal to octal: with printf(1).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%o\n&quot; 0xc5
305
 
% printf &quot;%o\n&quot; 0xbe
276
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To confirm that the UTF-8 code is correct: convert in the opposite 
direction (with printf(1)); from the character’s UTF-8 hexadecimal code to 
UTF-8 octal code, suitable for POSIX-portable printf use:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\305&apos;
�% 

% printf &apos;\305\276&apos;
ž% 
 
% printf &apos;\305\276&apos; | xxd
00000000: c5be                                     ..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ž &amp;gt; chrtoconv
 
% ls -lh chrtoconv
-rw-r--r--  1 dusko  dusko     2B Nov 12 16:16 chrtoconv
 
% file chrtoconv
chrtoconv: UTF-8 Unicode text, with no line terminators
 
% wc -l chrtoconv
       0 chrtoconv
 
% wc -c chrtoconv
       2 chrtoconv
 
% cat -t chrtoconv
ž% 
 
% cat -b chrtoconv
     1  ž% 
 
% cat -e chrtoconv
ž% 
 
% cat -v chrtoconv
ž% 
 
% xxd chrtoconv
00000000: c5be                                     ..
 
% iconv -l | wc -l
     216
 
% iconv -l | grep -i unicode | wc -l 
       2

% iconv -l | grep -i unicode 
UTF-16 UNICODE UTF16 CSUNICODE CSUNICODE11 ISO-10646-UCS-2 UCS-2 
  UCS-2BE UNICODE-1-1 UNICODEBIG UTF-16BE UTF16BE UCS-2LE UNICODELITTLE 
  UTF-16LE UTF16LE
UTF-7 CSUNICODE11UTF7 UNICODE-1-1-UTF-7 UTF7
 
% file chrtoconv
chrtoconv: UTF-8 Unicode text, with no line terminators
 
% iconv -l | grep -i utf8
UTF-8 UTF8
 
% iconv -l | grep -i &apos;utf-8&apos;
UTF-8 UTF8
 
% file chrtoconv
chrtoconv: UTF-8 Unicode text, with no line terminators
 
% iconv -f UTF-8 -t UNICODE chrtoconv &amp;gt; chrunicode
 
% ls -lh chrunicode
-rw-r--r--  1 dusko  dusko     4B Nov 12 16:34 chrunicode
 
% file chrunicode
chrunicode: Big-endian UTF-16 Unicode text, with no line terminators
 
% wc -l chrunicode
       0 chrunicode
 
% wc -c chrunicode
       4 chrunicode
 
% cat -t chrunicode
M-~M-^?^A~% 
 
% cat -b chrunicode
     1  ��~% 
 
% cat -e chrunicode
M-~M-^?^A~% 
 
% cat -v chrunicode
M-~M-^?^A~% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xxd chrunicode
00000000: feff 017e                                ...~
 
% xxd -i chrunicode
unsigned char chrunicode[] = {
  0xfe, 0xff, 0x01, 0x7e
};
unsigned int chrunicode_len = 4;
 
% xxd -p chrunicode
feff017e

% hexdump -C chrunicode
00000000  fe ff 01 7e                                       |...~|
00000004
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This character’s (ž) Unicode code point: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+017E&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -i ^017e UnicodeData.txt 
017E;LATIN SMALL LETTER Z WITH CARON;Ll;0;L;007A 030C;;;;N;
  LATIN SMALL LETTER Z HACEK;;017D;;017D
 
% ./uni.pl 017e
ž       017E    LATIN SMALL LETTER Z WITH CARON
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^017E UnicodeData.txt 
017E;LATIN SMALL LETTER Z WITH CARON;Ll;0;L;007A 030C;;;;N;
  LATIN SMALL LETTER Z HACEK;;017D;;017D
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you know the value of a Unicode code point (U+017E in this example),
you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv(1)&lt;/code&gt; utility to print the name of a Unicode code point:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\\u017e&apos; | uconv -x &apos;hex-any; any-name&apos;; printf \\n
\N{LATIN SMALL LETTER Z WITH CARON}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-find-a-unicode-code-point-of-a-character-2&quot;&gt;How to Find a Unicode Code Point of a Character?&lt;/h3&gt;
&lt;h3 id=&quot;method-3-fc-list1-and-xfd1&quot;&gt;Method 3: fc-list(1) and xfd(1)&lt;/h3&gt;

&lt;p&gt;To list all the fonts on the system that include the character 
you are looking up, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fc-list&lt;/code&gt; as explained in tl;dr at 
the very top of the page (and in more detail under 
&lt;a href=&quot;#fontconfig--xft&quot;&gt;“Fontconfig / Xft” heading&lt;/a&gt; on this page).&lt;/p&gt;

&lt;p&gt;After that, launch &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xfd(1)&lt;/code&gt; with one of the fonts from the list.&lt;/p&gt;

&lt;p&gt;In xfd(1), browse glyphs (characters), which are displayed in a grid 
contatining one glyph per cell.  Click on the desired character and its
metrics (index, width, bearings, ascent and descent ) will be displayed. 
The first item is the character’s code.&lt;br /&gt;
In this example (selected character: ž), 
xfd(1) displayed the following code: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x00017e&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xfd -fa Monoid
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 017e
ž       017E    LATIN SMALL LETTER Z WITH CARON
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\\u017e&apos; | uconv -x &apos;hex-any; any-name&apos;; printf \\n
\N{LATIN SMALL LETTER Z WITH CARON}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-find-a-unicode-code-point---normalized-formats-nfc-or-nfkc&quot;&gt;How to Find a Unicode Code Point - Normalized Formats (NFC or NFKC)&lt;/h3&gt;

&lt;p&gt;From&lt;br /&gt;
ICU Documenation - Normalization (Retrieved on Nov 13, 2021)&lt;br /&gt;
&lt;a href=&quot;https://unicode-org.github.io/icu/userguide/transforms/normalization/&quot;&gt;https://unicode-org.github.io/icu/userguide/transforms/normalization/&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Normalization is used to convert text to a unique, equivalent form. 
Software can normalize equivalent strings to one particular sequence, 
such as normalizing composite character sequences into pre-composed 
characters.&lt;/p&gt;

  &lt;p&gt;Normalization allows for easier sorting and searching of text. The ICU 
normalization APIs support the standard normalization forms which are 
described in great detail in 
&lt;a href=&quot;http://www.unicode.org/reports/tr15&quot;&gt;Unicode Technical Report #15 (Unicode Normalization Forms)&lt;/a&gt; and the Normalization, Sorting and Searching 
sections of chapter 5 of the &lt;a href=&quot;http://www.unicode.org/versions/latest/&quot;&gt;Unicode Standard&lt;/a&gt;. ICU also supports related, additional operations. Some of them are described in &lt;a href=&quot;http://www.unicode.org/notes/tn5/&quot;&gt;Unicode Technical Note #5 (Canonical Equivalence in Applications)&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;TIP&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Normalization is a complex topic.&lt;br /&gt;
When in doubt, use the extremelly helpful ICU Normalization Browser:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ICU Demonstration - Normalization Browser&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://icu4c-demos.unicode.org/icu-bin/nbrowser&quot;&gt;https://icu4c-demos.unicode.org/icu-bin/nbrowser&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(ICU project maintains uconv(1) tool.)&lt;/p&gt;

&lt;p&gt;Also useful page is Normalization Charts - Unicode.org&lt;br /&gt;
&lt;a href=&quot;http://www.unicode.org/charts/normalization/&quot;&gt;http://www.unicode.org/charts/normalization/&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;From &lt;br /&gt;
How to find UTF-8 reference of a composite unicode character&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/30733035/how-to-find-utf-8-reference-of-a-composite-unicode-character&quot;&gt;https://stackoverflow.com/questions/30733035/how-to-find-utf-8-reference-of-a-composite-unicode-character&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;UTF-8 is a &lt;strong&gt;byte encoding&lt;/strong&gt; for a sequence of &lt;em&gt;individual&lt;/em&gt;&lt;br /&gt;
&lt;strong&gt;Unicode code points&lt;/strong&gt;.
There is no single Unicode code point defined for &lt;strong&gt;n̂&lt;/strong&gt;, not even when 
a Unicode string is normalized in NFC or NFKC formats. 
As you have noted, n̂ consists of code point
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+006E LATIN SMALL LETTER N&lt;/code&gt; followed by code point
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+0302 COMBINING CIRCUMFLEX ACCENT&lt;/code&gt;.
In UTF-8, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+006E&lt;/code&gt; is encoded as byte &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x6E&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+0302&lt;/code&gt; 
is encoded as bytes &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0xCC 0x82&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;First, find out the Unicode code point name of the character:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf n̂ | uconv -f utf-8 -x any-name
\N{LATIN SMALL LETTER N}\N{COMBINING CIRCUMFLEX ACCENT}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf n̂ | xxd
00000000: 6ecc 82                                  n..

% printf n̂ | hexdump 
0000000 cc6e 0082
0000003

% printf n̂ | hexdump -C
00000000  6e cc 82                                          |n..|
00000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf n̂ | od -bc
0000000   156 314 202
           n    ̂  **
0000003

% printf &apos;\156&apos;
n% 
 
% printf &apos;\156\314&apos;
n�% 
 
% printf &apos;\156\314\202&apos;
n̂% 

% printf &apos;\156\314\202 &apos;
n̂ %
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Convert octal 156 to hex (hexadecimal):&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %x\\n 0156
6e
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 006e
n       006E    LATIN SMALL LETTER N
𓉜       1325C   EGYPTIAN HIEROGLYPH O006E
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^006E UnicodeData.txt
006E;LATIN SMALL LETTER N;Ll;0;L;;;;;N;;;004E;;004E
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, the first Unicode code point is U+006E, which is a latin small letter n.&lt;/p&gt;

&lt;p&gt;To get a representation of the next Unicode code point,
you have to add the newline character at the end (012 in octal):&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\314&apos;
�% 

% printf &apos;\314\202&apos;
 
% printf &apos;\314\202\012&apos;
^
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\314\202\012&apos; | od -bc
0000000   314 202 012
            ̂  **  \n
0000003
 
% printf &apos;\314\202\012&apos; | hexdump -C
00000000  cc 82 0a                                          |...|
00000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To exclude the newline character (012 in octal, 0x0A in hex), 
use the &lt;strong&gt;&lt;em&gt;-n&lt;/em&gt;&lt;/strong&gt; option to interpret only two bytes of input:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\314\202\012&apos; | hexdump -C -n2
00000000  cc 82                                             |..|
00000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;How did you know that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0xCC 0x82&lt;/code&gt; (in UTF-8) is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+0302&lt;/code&gt; in Unicode?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;a.k.a.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;How to Translate (Convert) a UTF-8 Encoding to a Unicode Code Point?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;It’s a little bit convoluted.
(&lt;strong&gt;NOTE:&lt;/strong&gt; Not failsafe)&lt;/p&gt;

&lt;p&gt;I used the following:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;First saved the character I’m interested in to a file&lt;/li&gt;
  &lt;li&gt;Used uni.pl Perl utility to identify the character’s Unicode code point&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\314\202\012&apos; &amp;gt; chartocheck

% file chartocheck
chartocheck: UTF-8 Unicode text

% wc -l chartocheck
       1 chartocheck

% wc -c chartocheck
       3 chartocheck

% cat -b chartocheck
     1̂
% cat -e chartocheck
$

% cat -v chartocheck
 ̂  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xxd chartocheck
00000000: cc82 0a                                  ...
 
% od -bc chartocheck
0000000   314 202 012
            ̂  **  \n
0000003
 
% hexdump -C chartocheck
00000000  cc 82 0a                                          |...|
00000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl `cat chartocheck`
 ̂       0302    COMBINING CIRCUMFLEX ACCENT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^0302 UnicodeData.txt 
0302;COMBINING CIRCUMFLEX ACCENT;Mn;230;NSM;;;;;N;NON-SPACING CIRCUMFLEX;;;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Recap&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;In Unicode&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;So, the character (which is a composite Unicode character) &lt;strong&gt;n̂&lt;/strong&gt;
in Unicode is represented with &lt;strong&gt;two&lt;/strong&gt; Unicode code points:
code point &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+006E LATIN SMALL LETTER N&lt;/code&gt; 
followed by code point
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+0302 COMBINING CIRCUMFLEX ACCENT&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;In UTF-8&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The same character in UTF-8 is encoded as byte &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x6E&lt;/code&gt;
and Unicode &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+0302&lt;/code&gt; code point (which is in UTF-8 encoded as two bytes)
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0xCC 0x82&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;how-to-find-utf-8-encoding-of-a-character&quot;&gt;How to Find UTF-8 Encoding of a Character?&lt;/h3&gt;
&lt;h3 id=&quot;applies-to-composite-unicode-characters-too&quot;&gt;(applies to Composite Unicode Characters too)&lt;/h3&gt;

&lt;p&gt;An example with a &lt;strong&gt;composite Unicode character&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n̂&lt;/code&gt; 
from the earlier section above ‘Unicode Normalized Formats (NFC or NFKC).&lt;/p&gt;

&lt;p&gt;You can use a one-liner with xxd(1):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf n̂ | xxd -p
6ecc82
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The character &lt;strong&gt;n̂&lt;/strong&gt; encoded in UTF-8: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x6E 0xCC 0x82&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Another utility you can use is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hexdump(1)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For example, character “ỗ” - Name: Latin Small Letter O with Circumflex 
and Tilde:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ỗ | hexdump -C
00000000  e1 bb 97                                          |...|
00000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, UTF-8 encoding for the character “ỗ” (Latin Small Letter O with 
Circumflex and Tilde) is:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0xE1 0xBB 0x97&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Character “ỗ” (Latin Small Letter O with Circumflex and Tilde) Unicode 
code point is 1ED7, usually written as (U+1ED7).&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%x\n&quot; \&apos;ỗ
1ed7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^1ED7 UnicodeData.txt
1ED7;LATIN SMALL LETTER O WITH CIRCUMFLEX AND TILDE;Ll;0;L;00F4 0303;;;;N;;;1ED6;;1ED6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-print-a-character-when-its-unicode-code-point-is-known&quot;&gt;How to Print a Character when Its Unicode Code Point is Known?&lt;/h3&gt;
&lt;h3 id=&quot;method-1-printf1-xxd1-iconv1&quot;&gt;Method 1: printf(1), xxd(1), iconv(1)&lt;/h3&gt;

&lt;p&gt;For example, the known Unicode code point value is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+00D6&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 00D6&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
Ö% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Reference:&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Print unicode hex code which is part of basic latin as a symbol in Bash&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/12693970/print-unicode-hex-code-which-is-part-of-basic-latin-as-a-symbol-in-bash&quot;&gt;https://stackoverflow.com/questions/12693970/print-unicode-hex-code-which-is-part-of-basic-latin-as-a-symbol-in-bash&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;how-to-print-a-character-when-its-unicode-code-point-is-known-1&quot;&gt;How to Print a Character when Its Unicode Code Point is Known?&lt;/h3&gt;
&lt;h3 id=&quot;method-2-html-javascript-web-browser&quot;&gt;Method 2: HTML, JavaScript, Web browser&lt;/h3&gt;

&lt;p&gt;Create an HTML file similar to the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat convert.html 
&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
  var message1 = &quot;I \u2665 Unicode! \u263A \u00A9&quot;;
  var message2 = &quot;The xʷməθkʷəy\u0313əm, Tsleil-Waututh and Skwxwú7mesh peoples&quot;
  var message3 = &quot;\u00D6&quot;;

  document.write(message1);
  // For output to the page, use &quot;&amp;lt;br/&amp;gt;&quot; instead of &apos;\n&apos;
  document.write(&quot;&amp;lt;br/&amp;gt;&quot;);
  document.write(message2);
  document.write(&quot;&amp;lt;br/&amp;gt;&quot;);
  document.write(message3);
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use your Web browser to open the file convert.html.&lt;/p&gt;

&lt;h3 id=&quot;how-to-print-a-character-when-its-unicode-code-point-is-known-2&quot;&gt;How to Print a Character when Its Unicode Code Point is Known?&lt;/h3&gt;
&lt;h3 id=&quot;method-3-normalization-browser---international-components-for-unicode-icu&quot;&gt;Method 3: Normalization Browser - International Components for Unicode (ICU)&lt;/h3&gt;

&lt;p&gt;Use the extremelly helpful ICU Normalization Browser:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Normalization Browser - International Components for Unicode (ICU)&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://icu4c-demos.unicode.org/icu-bin/nbrowser&quot;&gt;https://icu4c-demos.unicode.org/icu-bin/nbrowser&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;00D6&lt;/code&gt; and press ‘Show Results’.&lt;/p&gt;

&lt;h2 id=&quot;conversions---summary-with-examples&quot;&gt;Conversions - Summary with Examples&lt;/h2&gt;

&lt;h3 id=&quot;print-a-character-based-on-its-unicode-code-point-aka-hex-code&quot;&gt;Print a Character Based on Its Unicode Code Point (a.k.a. Hex Code)&lt;/h3&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 00D6&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
Ö% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xxd(1)&lt;/code&gt; with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-r&lt;/code&gt; option converts hex text into bytes. 
It requires line numbers, which is why the leading 0 in the printf is. 
xxd(1) in this case outputs the two bytes indicated by c.&lt;/p&gt;

&lt;h3 id=&quot;print-the-unicode-name-of-a-character&quot;&gt;Print the Unicode Name of a Character&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | uconv -f utf-8 -x any-name
\N{LATIN CAPITAL LETTER O WITH DIAERESIS}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check/confirmation:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -i &apos;latin capital letter o with diaeresis&apos; UnicodeData.txt 
00D6;LATIN CAPITAL LETTER O WITH DIAERESIS;Lu;0;L;004F 0308;;;;N;
  LATIN CAPITAL LETTER O DIAERESIS;;;00F6;
022A;LATIN CAPITAL LETTER O WITH DIAERESIS AND MACRON;Lu;0;L;
  00D6 0304;;;;N;;;;022B;

% grep ^00D6 UnicodeData.txt
00D6;LATIN CAPITAL LETTER O WITH DIAERESIS;Lu;0;L;004F 0308;;;;N;
  LATIN CAPITAL LETTER O DIAERESIS;;;00F6;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;find-a-utf-8-code-of-a-character&quot;&gt;Find a UTF-8 Code of a Character&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö 
Ö% 

% printf Ö | xxd
00000000: c396                                     ..

% printf Ö | xxd -p
c396
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;UTF-8 code of this character: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0XC3 0x96&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;display-print-a-character-based-on-its-utf-8-code&quot;&gt;Display (Print) a Character Based on Its UTF-8 Code&lt;/h3&gt;

&lt;p&gt;For example, the UTF-8 code of the desired character is: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0XC3 0x96&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;First, convert to &lt;strong&gt;octal&lt;/strong&gt; as every POSIX-compliant printf can handle 
octal values.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %o 0xc3
303%

% printf %o 0x96
226%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\303\226&apos;
Ö%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;translateconvert-betweeen-a-characters-utf-8-code-to-unicode-code-point-and-back&quot;&gt;Translate/Convert betweeen a Character’s UTF-8 Code to Unicode Code Point and Back&lt;/h3&gt;
&lt;h3 id=&quot;includes-nfc-and-nfd-normalization&quot;&gt;(includes NFC and NFD Normalization)&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;NFC&lt;/strong&gt; Normalization and &lt;strong&gt;NFD&lt;/strong&gt; Normalization are &lt;strong&gt;EQUIVALENT&lt;/strong&gt; (see below).&lt;/p&gt;

&lt;p&gt;From&lt;br /&gt;
&lt;a href=&quot;https://www.win.tue.nl/~aeb/linux/uc/nfc_vs_nfd.html&quot;&gt;Unicode Normalization&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Text encoding - NFC or NFD?&lt;/p&gt;

  &lt;p&gt;In any nontrivial project, it is a good idea to standardize the data 
representation. Unfortunately, the Unicode Consortium provides us with 
two standards, and we have to choose. Does one have advantages over the 
other? This is the nfc-vs-nfd question.&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;“There is no difference”&lt;/strong&gt; &lt;br /&gt;
. . . &lt;br /&gt;
&lt;strong&gt;“Choose NFC if possible”&lt;/strong&gt; &lt;br /&gt;
. . .   &lt;br /&gt;
&lt;strong&gt;“NFD is far superior”&lt;/strong&gt;  &lt;br /&gt;
. . .&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;Conversion&lt;/strong&gt; &lt;br /&gt;
The utility &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv&lt;/code&gt; will convert from/to NFC/NFD:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv -f utf8 -t utf8 -x nfc&lt;/code&gt; converts stdin to NFC, and
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uconv -f utf8 -t utf8 -x nfd&lt;/code&gt; converts stdin to NFD.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;From:&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/26525354/nfc-or-nfd-what-is-the-difference&quot;&gt;NFC or NFD - what is the difference?&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The difference is whether the characters are composed (C) or decomposed (D).&lt;/p&gt;

  &lt;p&gt;Letters with “extra bits” like ä can be represented in different ways. 
There is a Unicode code point specially created for a with two dots. 
That is the composed form, NFC. On the other hand you could represent 
it as the usual “a” followed by a combining character that adds the 
two dots. That is the decomposed form, NFD.&lt;/p&gt;

  &lt;p&gt;The decomposed form takes more space, but the composed form makes some 
operations harder, such as comparing strings while ignoring differences 
in accents.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Method 1 - NFD Normalization with uconv(1):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 1EBF
ế       1EBF    LATIN SMALL LETTER E WITH CIRCUMFLEX AND ACUTE
 
% ./uni.pl 1EBF | cut -f1
ế
 
% printf `./uni.pl 1EBF | cut -f1`
ế% 
 
% printf `./uni.pl 1EBF | cut -f1` | uconv -f utf-8 -x any-name
\N{LATIN SMALL LETTER E WITH CIRCUMFLEX AND ACUTE}% 
 
% grep ^1EBF UnicodeData.txt 
1EBF;LATIN SMALL LETTER E WITH CIRCUMFLEX AND ACUTE;Ll;0;L;00EA 0301;;;;N;;;1EBE;;1EBE
 
% printf `./uni.pl 1EBF | cut -f1` | xxd -p
e1babf
 
% printf `./uni.pl 1EBF | cut -f1` | uconv -f utf-8 -t utf-8 -x any-nfd
ế% 
 
% printf `./uni.pl 1EBF | cut -f1` | uconv -f utf-8 -t utf-8 -x any-nfd | xxd
00000000: 65cc 82cc 81                             e....
 
% printf `./uni.pl 1EBF | cut -f1` | uconv -f utf-8 -t utf-8 -x any-nfd | xxd -p
65cc82cc81
 
% printf %o 0x65
145% 
 
% printf %o 0xcc
314% 
 
% printf %o 0x82
202% 
 
% printf %o 0xcc
314% 
 
% printf %o 0x81
201% 
 
% printf &apos;\145&apos;
e% 
 
% printf &apos;\145\314&apos;
e�% 
 
% printf &apos;\145\314\202&apos;
ê% 
 
% printf &apos;\145\314\202\314&apos;
ê�% 
 
% printf &apos;\145\314\202\314\201&apos;
ế% 
 
% printf &apos;\314\202&apos;
 
% printf &apos;\040\314\202&apos;
 ̂% 
 
% printf &apos;\314\201&apos;
 
% printf &apos;\040\314\201&apos;
 ́% 
 
% printf &apos;\040\314\202&apos; | uconv -f utf-8 -x any-name
\N{SPACE}\N{COMBINING CIRCUMFLEX ACCENT}% 
 
% printf &apos;\040\314\201&apos; | uconv -f utf-8 -x any-name
\N{SPACE}\N{COMBINING ACUTE ACCENT}% 
 
% grep -n -i &quot;COMBINING CIRCUMFLEX ACCENT&quot; UnicodeData.txt 
771:0302;COMBINING CIRCUMFLEX ACCENT;Mn;230;NSM;;;;;N;NON-SPACING CIRCUMFLEX;;;;
814:032D;COMBINING CIRCUMFLEX ACCENT BELOW;Mn;220;NSM;;;;;N;NON-SPACING CIRCUMFLEX BELOW;;;;
 
% grep -n -i &quot;COMBINING ACUTE ACCENT&quot; UnicodeData.txt
770:0301;COMBINING ACUTE ACCENT;Mn;230;NSM;;;;;N;NON-SPACING ACUTE;;;;
792:0317;COMBINING ACUTE ACCENT BELOW;Mn;220;NSM;;;;;N;NON-SPACING ACUTE BELOW;;;;
 
% grep -n -i &quot;COMBINING CIRCUMFLEX ACCENT;&quot; UnicodeData.txt
771:0302;COMBINING CIRCUMFLEX ACCENT;Mn;230;NSM;;;;;N;NON-SPACING CIRCUMFLEX;;;;
 
% grep -n -i &quot;COMBINING ACUTE ACCENT;&quot; UnicodeData.txt
770:0301;COMBINING ACUTE ACCENT;Mn;230;NSM;;;;;N;NON-SPACING ACUTE;;;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This character is composed of the three-character sequence U+0065 (e) 
U+0302 (circumflex accent) U+0301 (acute accent). The combining classes 
for the two accents are both 230, thus U+1EBF is not equivalent to 
U+0065 U+0301 U+0302.&lt;/p&gt;

&lt;p&gt;Reference:&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Unicode_equivalence&quot;&gt;Unicode equivalence - Wikipedia&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Method 2 - NFD Normalization with the uni.pl Perl script:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\040\314\202&apos; &amp;gt; chartocheck
 
% file chartocheck
chartocheck: UTF-8 Unicode text, with no line terminators
 
% wc -l chartocheck
       0 chartocheck
 
% wc -c chartocheck
       3 chartocheck
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
The character is there - squint and you’ll see it next to the prompt (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat -b chartocheck
     1   ̂% 

% cat -e chartocheck
 ̂% 
 
% cat -v chartocheck
 ̂% 
 
% xxd chartocheck
00000000: 20cc 82                                   ..
 
% od -bc chartocheck
0000000   040 314 202
                ̂  **
0000003
 
% hexdump -C chartocheck
00000000  20 cc 82                                          | ..|
00000003
 
% cut -f1 chartocheck
 ̂% 
 
% cut -f1 chartocheck | xxd
00000000: 20cc 82                                   ..
 
% cut -f1 chartocheck | xxd -p
20cc82
 
% cat chartocheck
 ̂% 
 
% ./uni.pl `cat chartocheck`
 ̂       0302    COMBINING CIRCUMFLEX ACCENT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Method 3 - NFC Normalization:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf `./uni.pl 1EBF | cut -f1` | uconv -f utf-8 -t utf-8 -x any-nfc | xxd
00000000: e1ba bf                                  ...
 
% printf `./uni.pl 1EBF | cut -f1` | uconv -f utf-8 -t utf-8 -x any-nfc | xxd -p
e1babf
 
% printf %o 0xe1
341% 
 
% printf %o 0xba
272% 
 
% printf %o 0xbf
277% 
 
% printf &apos;\341&apos;
�% 
 
% printf &apos;\341\272&apos;
�% 
 
% printf &apos;\341\272\277&apos;
ế% 
 
% printf &apos;\341\272\277&apos; | uconv -f utf-8 -x any-name
\N{LATIN SMALL LETTER E WITH CIRCUMFLEX AND ACUTE}% 

% grep -i &quot;LATIN SMALL LETTER E WITH CIRCUMFLEX AND ACUTE&quot; UnicodeData.txt 
1EBF;LATIN SMALL LETTER E WITH CIRCUMFLEX AND ACUTE;Ll;0;L;00EA 0301;;;;N;;;1EBE;;1EBE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;find-the-unicode-name-based-on-a-characters-unicode-code-point&quot;&gt;Find the Unicode Name Based On a Character’s Unicode Code Point&lt;/h3&gt;

&lt;p&gt;For example, the Unicode code point of a character is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+00D6&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;\\u00D6&apos; | uconv -x &apos;hex-any; any-name&apos;
\N{LATIN CAPITAL LETTER O WITH DIAERESIS}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;find-the-unicode-code-point-hex-code-of-a-character&quot;&gt;Find the Unicode Code Point (Hex Code) of a Character&lt;/h3&gt;

&lt;p&gt;Assuming a little-endian (Intel) CPU [³] and that all code points in the 
input fit into 16-bits (not a safe assumption).&lt;/p&gt;

&lt;p&gt;[³] Change to UTF-16BE for big-endian machines.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | iconv -t UTF-16LE | od -tx2 -An
             00d6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If some characters require more than 16-bit, a safer option is to use 32-bits for every code point:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | iconv -t UTF-16LE | od -tx4 -An
                 000000d6                                                
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;decompose-normalize-a-composite-unicode-character&quot;&gt;Decompose (Normalize) a Composite Unicode Character&lt;/h3&gt;

&lt;p&gt;For example, the character you want to decompose is: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ö&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | uconv -f utf-8 -t utf-8 -x any-nfd
Ö% 

% printf Ö | uconv -f utf-8 -t utf-8 -x any-nfd | xxd
00000000: 4fcc 88                                  O..

% printf Ö | uconv -f utf-8 -t utf-8 -x any-nfd | xxd -p
4fcc88
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This character’s UTF-8 code: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x4F 0xCC 0x88&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To check/confirm, print the character based on its UTF-8 code:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %o 0x4f
117% 

% printf %o 0xcc
314% 

% printf %o 0x88
210% 

% printf &apos;\117\314\210&apos;
Ö% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, you can see from the Unicode database, UnicodeData.txt, that this 
character’s Decomposition field (fifth field [⁴]) is not empty and that the 
character is composed of two characters.&lt;/p&gt;

&lt;p&gt;[⁴] As the Unicode database, UnicodeData.txt, is a database of characters 
listed by their Code Points, the first field (Code Point value) is not 
counted, that is, field count starts with the next field, Name.&lt;/p&gt;

&lt;p&gt;First, find the Unicode Name of the Character:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | uconv -f utf-8 -x any-name
\N{LATIN CAPITAL LETTER O WITH DIAERESIS}% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Find the character in the Unicode database, UnicodeData.txt. &lt;br /&gt;
(Note: disregard the second character since its name has an additional 
‘AND MACRON’.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep -i &apos;LATIN CAPITAL LETTER O WITH DIAERESIS&apos; UnicodeData.txt 
00D6;LATIN CAPITAL LETTER O WITH DIAERESIS;Lu;0;L;004F 0308;;;;N;
  LATIN CAPITAL LETTER O DIAERESIS;;;00F6;
022A;LATIN CAPITAL LETTER O WITH DIAERESIS AND MACRON;Lu;0;L;
  00D6 0304;;;;N;;;;022B;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The fifth field (Decomposition) specifies that the character is 
composed with two characters: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+004F&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;U+0308&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^004F UnicodeData.txt
004F;LATIN CAPITAL LETTER O;Lu;0;L;;;;;N;;;;006F;

% grep ^0308 UnicodeData.txt 
0308;COMBINING DIAERESIS;Mn;230;NSM;;;;;N;NON-SPACING DIAERESIS;;;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In other words, this character is composed of 
LATIN CAPITAL LETTER O and COMBINING DIAERESIS.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | uconv -f UTF-8 -t UTF-8 -x any-nfd | xxd
00000000: 4fcc 88                                  O..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 004F&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
O% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 0308&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This character cannot be displayed in a terminal emulator because it’s 
from Unicode character class (category) “Mark, Nonspacing”, 
signified by the &lt;strong&gt;Mn&lt;/strong&gt; designation in the UnicodeData.txt database. 
(See the output of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep ^0308 UnicodeData.txt&lt;/code&gt; command above.)&lt;/p&gt;

&lt;p&gt;To display this character (and other similar characters; from other 
combining classes, 
in a terminal emulator, apply it 
to a space; that is, place the space character (U+0020 SPACE) first 
&lt;strong&gt;followed by&lt;/strong&gt; the character itself (U+0308 COMBINING DIAERESIS).
That gives you a spacing (i.e., non-combining) combining diaeresis.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 00200308&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
 ̈% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: &lt;br /&gt;
The character is there - squint and you’ll see it next to the prompt (%).&lt;/p&gt;

&lt;p&gt;NOTE:&lt;br /&gt;
You can also display this character by placing 
(ASCII 0x0A LF, or ASCII 0x0B VT, or 0x0C FF)
after the character.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 0308000A&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
 ̈
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 0308000B&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
 ̈
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;0 0308000C&quot; | xxd -r | iconv -f UNICODEBIG -t UTF-8
 ̈
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From&lt;br /&gt;
XTerm Control Sequences  (&lt;a href=&quot;https://invisible-island.net/xterm/ctlseqs/ctlseqs.html&quot;&gt;https://invisible-island.net/xterm/ctlseqs/ctlseqs.html&lt;/a&gt;)&lt;br /&gt;
under &lt;strong&gt;VT100 Mode Single-character functions&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;FF Form Feed or New Page (NP ).  (FF  is Ctrl-L).
FF  is treated the same as LF .&lt;/li&gt;
  &lt;li&gt;LF Line Feed or New Line (NL).  (LF  is Ctrl-J).&lt;/li&gt;
  &lt;li&gt;VT Vertical Tab (VT  is Ctrl-K). This is treated the same as LF.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Also see: &lt;br /&gt;
&lt;a href=&quot;https://www.real-world-systems.com/docs/ANSIcode.html&quot;&gt;Summary of ANSI standards for ASCII terminals Joe Smith, 18-May-84, With additions by Dennis German&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Under section named &lt;br /&gt;
&lt;strong&gt;C0 set of 7-bit control characters (from ANSI X3.4-1977)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Oct Hex Control Name Description 
-- snip --
012 0A  J       LF   * Linefeed, move to same position on next line (see also NL)
013 0B  K       VT   * Vertical Tabulation, move to next predetermined line
014 0C  L       FF   * Form Feed, move to next form or page
-- snip --

* functions used in DEC VT series or LA series terminals 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;combining-class-unicode&quot;&gt;Combining Class (Unicode)&lt;/h4&gt;

&lt;p&gt;From &lt;br /&gt;
Squeak/Smalltalk – an open-source Smalltalk programming system Wiki:  &lt;br /&gt;
&lt;a href=&quot;https://wiki.squeak.org/squeak/6257&quot;&gt;Combining Class (Unicode)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Combining class: A numeric value in the range 0..254 given to each.
Unicode code point, formally defined as the property 
&lt;strong&gt;Canonical_Combining_Class&lt;/strong&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The combining class for each encoded character in the standard is 
specified in the file UnicodeData.txt in the Unicode Character Database. 
Any code point not listed in that data file defaults to 
\p{Canonical_Combining_Class = 0} (or \p{ccc = 0} for short).&lt;/li&gt;
  &lt;li&gt;An &lt;em&gt;extracted&lt;/em&gt; listing of combining classes, sorted by numeric value, 
is provided in the file &lt;strong&gt;DerivedCombiningClass.txt&lt;/strong&gt; in the Unicode 
Character Database (UCD).&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Only&lt;/em&gt; &lt;strong&gt;combining marks&lt;/strong&gt; have a combining class &lt;strong&gt;other than zero&lt;/strong&gt;. 
&lt;strong&gt;Almost all&lt;/strong&gt; combining marks with a &lt;strong&gt;class other than zero&lt;/strong&gt; are 
&lt;em&gt;also&lt;/em&gt; &lt;strong&gt;nonspacing marks&lt;/strong&gt;, with &lt;em&gt;a few exceptions&lt;/em&gt;. Also, &lt;em&gt;not all&lt;/em&gt; 
&lt;em&gt;nonspacing marks&lt;/em&gt; have a &lt;em&gt;non-zero combining class&lt;/em&gt;. Thus, while the 
&lt;em&gt;correlation&lt;/em&gt; between ^\p{ccc=0] and \p{gc=Mn} is close, it is &lt;em&gt;not exact&lt;/em&gt;, 
and implementations should not depend on the two concepts being identical.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Unicode Character Database&lt;/strong&gt;  &lt;br /&gt;
This directory contains the final Unicode data files. &lt;br /&gt;
(At the time of writing, Version 14.0.0 of the Unicode Standard.)&lt;br /&gt;
(Date: 2021-09-10, 17:20:00 GMT [KW])&lt;br /&gt;
&lt;a href=&quot;https://www.unicode.org/Public/UCD/latest/ucd/extracted/&quot;&gt;https://www.unicode.org/Public/UCD/latest/ucd/extracted/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;DerivedCombiningClass.txt &lt;br /&gt;
A file in the Unicode Character Database that lists the characters in 
each of the combining classes.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.unicode.org/Public/UCD/latest/ucd/extracted/DerivedCombiningClass.txt&quot;&gt;https://www.unicode.org/Public/UCD/latest/ucd/extracted/DerivedCombiningClass.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To find more about combining classes, and their detailed breakdown, refer to  &lt;br /&gt;
&lt;a href=&quot;https://www.unicode.org/reports/tr44/&quot;&gt;Unicode Character Database - Standard Annex #44&lt;/a&gt;&lt;br /&gt;
Version: Unicode 14.0.0 - Date: 2021-08-30 &lt;br /&gt;
(Retrieved on Nov 27, 2021)&lt;br /&gt;
under section explaning the UnicodeData.txt outlined at&lt;br /&gt;
&lt;a href=&quot;https://www.unicode.org/reports/tr44/#UnicodeData.txt&quot;&gt;https://www.unicode.org/reports/tr44/#UnicodeData.txt&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.unicode.org/reports/tr44/#Canonical_Combining_Class&quot;&gt;https://www.unicode.org/reports/tr44/#Canonical_Combining_Class&lt;/a&gt; &lt;br /&gt;
and broken down in a table under section  &lt;br /&gt;
&lt;a href=&quot;https://www.unicode.org/reports/tr44/#Canonical_Combining_Class_Values&quot;&gt;5.7.4 Canonical Combining Class Values&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This table (Table 15. Canonical_Combining_Class Values) 
lists the long symbolic aliases for Canonical_Combining_Class 
values, along with a brief description of each category. (The listing for 
fixed position classes, with long symbolic aliases of the form “Ccc10”, 
and so forth, is abbreviated, as when those labels occur they are 
predictable in form, based on the numeric values.)&lt;/p&gt;

&lt;p&gt;In this example, the combining class with value &lt;strong&gt;230&lt;/strong&gt; is for marks that 
are drawn &lt;strong&gt;above&lt;/strong&gt; (the “Description” from the table 
“Canonical_Combining_Class Values” is “Distinct marks directly above”).&lt;/p&gt;

&lt;p&gt;&lt;em&gt;A quick breakdown of the combining classes:&lt;/em&gt; &lt;br /&gt;
0 Non-combining characters, or characters that surround or become part of the base character&lt;br /&gt;
1 Marks that attach to the interior of their base characters, or overlay them&lt;br /&gt;
7–199 Various marks with language- or script-specific joining behaviour&lt;br /&gt;
200–216 Marks that attach to their base characters in various positions &lt;br /&gt;
218–232 Marks that are drawn in a specific spot relative to their base 
characters but don’t touch them  &lt;br /&gt;
233–234 Marks that appear above or below two base characters in a row &lt;br /&gt;
240 The iota subscript used in ancient Greek&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;  &lt;br /&gt;
This character (U+0308) is unique in that it’s a lead-trail; the only 
character that can be both leading and trailing:&lt;/p&gt;

&lt;p&gt;From&lt;br /&gt;
&lt;a href=&quot;https://icu.unicode.org/design/normalizing-to-shortest-form&quot;&gt;Canonically Equivalent Shortest Form&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A character is lead-trail when it can be both leading and trailing. 
There is only one such character, a non-starter.&lt;/p&gt;

  &lt;p&gt;U+0308 ( ̈ ) COMBINING DIAERESIS&lt;br /&gt;
&lt;a href=&quot;https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%5Cu0308%5D&amp;amp;g=&amp;amp;i=&quot;&gt;https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%5Cu0308%5D&amp;amp;g=&amp;amp;i=&lt;/a&gt;&lt;/p&gt;

  &lt;p&gt;(It is the lead in the decomposition of 
U+0344 ( ̈́ ) COMBINING GREEK DIALYTIKA TONOS)&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;In &lt;strong&gt;NFC&lt;/strong&gt; form:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf Ö | uconv -f UTF-8 -t UTF-8 -x any-nfc | xxd
00000000: c396                                     ..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check/confirmation:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %o 0xc3
303% 
 
% printf %o 0x96
226% 
 
% printf &apos;\303\226&apos;
Ö% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Straight with the uni.pl Perl script:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./uni.pl 00D6
Ö       00D6    LATIN CAPITAL LETTER O WITH DIAERESIS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As before, if in doubt, use&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ICU Demonstration - Normalization Browser&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://icu4c-demos.unicode.org/icu-bin/nbrowser&quot;&gt;https://icu4c-demos.unicode.org/icu-bin/nbrowser&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;or another useful tool:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UniView&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://r12a.github.io/uniview/&quot;&gt;https://r12a.github.io/uniview/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;UniView:&lt;br /&gt;
“Look up and see characters (using graphics or fonts) and property 
information, view whole character blocks or custom ranges, select 
characters to paste into your document, paste in and discover unknown 
characters, search for characters, do hex/dec/ncr conversions, 
highlight character types, etc.”&lt;/p&gt;

&lt;h3 id=&quot;list-all-possible-transliterations-in-uconvicu&quot;&gt;List All Possible Transliterations (in uconv/ICU)&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% uconv -L | tr &apos; &apos; &apos;\n&apos; | grep -i any | sort -f
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% uconv -L | tr &apos; &apos; &apos;\n&apos; | grep -i any | sort -f | wc -l
     155
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% uconv -L | tr &apos; &apos; &apos;\n&apos; | grep -i any | sort -f 
---- snip ----
Any-Hex
Any-Hex/C
Any-Hex/Java
Any-Hex/Perl
Any-Hex/Unicode
---- snip ----
Any-sr_Latn/BGN
---- snip ----
Accents-Any
---- snip ----
Any-Name
Any-NFC
Any-NFD
Any-NFKC
Any-NFKD

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Usage:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;uconv -x &apos;hex-any ; any-hex
uconv -x &apos;hex-any ; any-hex/c&apos;
uconv -x &apos;hex-any ; any-hex/java&apos;
uconv -x &apos;hex-any ; any-hex/perl&apos;
uconv -x &apos;hex-any ; any-hex/unicode&apos;

uconv -x &apos;hex-any ; Any-sr_Latn/BGN&apos;

uconv -x &apos;hex-any ; Accents-Any&apos;

uconv -x &apos;hex-any ; Any-Name&apos;
uconv -x &apos;hex-any ; Any-NFC&apos;
uconv -x &apos;hex-any ; Any-NFD&apos;
uconv -x &apos;hex-any ; Any-NFKC&apos;
uconv -x &apos;hex-any ; Any-NFKD&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;remove-accents-normalization-uconvicu&quot;&gt;Remove Accents (Normalization, uconv/ICU)&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;Ö&quot; | uconv -f utf-8 -t utf-8 -x &quot;::NFD; [:Nonspacing Mark:] &amp;gt;; ::NFC;&quot;
O%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;simplify-a-string-remove-diacritics---normalization-uconvicu-perl&quot;&gt;Simplify a String (Remove Diacritics[⁴]) - Normalization, uconv/ICU, Perl&lt;/h3&gt;
&lt;h3 id=&quot;extreme-example&quot;&gt;Extreme Example&lt;/h3&gt;

&lt;p&gt;From &lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/13542421/generic-way-to-simplify-string-remove-diacritics&quot;&gt;Generic way to simplify string, remove diacritics&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% echo &quot;ë ö ø Я Ł ɲ æ å ñ 開 당&quot; | uconv -f utf-8 -x any-name \
 | perl -wpne &apos;s/ WITH [^}]+//g;&apos; | uconv -f utf-8 -t utf-8 -x name-any \
 | uconv -f utf-8 -x any-latin -t iso-8859-1 -c \ 
 | uconv -f iso-8859-1 -t ascii -x latin-ascii -c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;e o o A L n ae a n ki dang
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note 1: Я -&amp;gt; A because that is the correct behaviour.&lt;/p&gt;

&lt;p&gt;Note 2: This fails on inputs containing diacritics without letters, 
as in ´ (acute accent) and ¨ (umlaut/diaeresis).&lt;/p&gt;

&lt;p&gt;[⁴] From Wikipedia (Retrieved on Nov 6, 2021):
&lt;a href=&quot;https://en.wikipedia.org/wiki/Diacritic&quot;&gt;https://en.wikipedia.org/wiki/Diacritic&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A diacritic (also diacritical mark, diacritical point, diacritical sign, 
or accent) is a glyph added to a letter or to a basic glyph. 
Some diacritics, such as the acute (◌́  ) and &amp;gt; grave (◌̀  ), are often 
called accents. Diacritics may appear above or below a letter or in 
some other position such as within the letter or between two letters.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;SEE ALSO:&lt;br /&gt;
&lt;strong&gt;Diacritical Marks in Unicode (gregtatum.com)&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://gregtatum.com/writing/2021/diacritical-marks/&quot;&gt;https://gregtatum.com/writing/2021/diacritical-marks/&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;character-to-value-in-a-shell&quot;&gt;Character to Value in a Shell&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf&lt;/code&gt; utility uses the leading-quote syntax (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\&apos;A&lt;/code&gt;):&lt;/p&gt;

&lt;p&gt;From The Open Group Base Specifications Issue 7, 2018 edition
IEEE Std 1003.1-2017 (Revision of IEEE Std 1003.1-2008)
Copyright © 2001-2018 IEEE and The Open Group
&lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/9699919799/utilities/printf.html&quot;&gt;https://pubs.opengroup.org/onlinepubs/9699919799/utilities/printf.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If the leading character is a single-quote or double-quote, the value 
shall be the numeric value in the underlying codeset of the character
following the single-quote or double-quote.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man ascii
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;

ASCII&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;7&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;           FreeBSD Miscellaneous Information Manual           ASCII&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;7&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

NAME
     ascii - octal, hexadecimal, decimal and binary ASCII character sets

DESCRIPTION
     The octal &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;:
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 
     100  @   101  A   102  B   103  C   104  D   105  E   106  F   107  G
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 

     The hexadecimal &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;:
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 
     40  @    41  A    42  B    43  C    44  D    45  E    46  F    47  G
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 

     The decimal &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;:
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 
      64  @    65  A    66  B    67  C    68  D    69  E    70  F    71  G
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 

     The binary &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;:

      00     01     10     11

     NUL     SP      @      &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;     00000
     SOH      &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;      A      a     00001
     &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Numeric value (in decimal) of the character ‘A’ in the 
ISO/IEC 646:1991 standard codeset:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%d\n&quot; \&apos;A
65
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In hexadecimal:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%x\n&quot; \&apos;A
41
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In octal:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%o\n&quot; \&apos;A
101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
POSIX-portable way of printing a character based on the underlying 
codeset (ASCII, UTF-8, Unicode) is to use an octal value:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %b\\n &apos;\&apos;101
A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example: the ‘Skull and Crossbones’ character.
Its Unicode code point is U+2620.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;%x\n&quot; \&apos;☠
2620
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unicode 2620 in UTF-8 is E2-98-A0.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ☠ | hexdump -C
00000000  e2 98 a0                      |...|
00000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In octal:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf ☠ | hexdump -b
0000000 342 230 240                                                    
0000003
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf (&quot;\xE2\x98\xA0&quot;)
Badly placed ()&apos;s.

% printf &quot;\xE2\x98\xA0&quot;
xE2x98xA0%

% printf &quot;%o\n&quot; &quot;0xE2&quot;
342

% printf &quot;%o\n&quot; &quot;0x98&quot;
230

% printf &quot;%o\n&quot; &quot;0xA0&quot;
240

% printf &apos;\342\230\240&apos;
☠%

% printf &apos;\342\230\240\n&apos;
☠
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;os-and-shell-specifics---printf1-and-builtins&quot;&gt;OS and Shell Specifics - printf(1) and builtins&lt;/h4&gt;

&lt;p&gt;tcsh shell’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;builtins&lt;/code&gt; prints the names of all builtin commands:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% builtins
:          @          alias      alloc      bg         bindkey    break
breaksw    builtins   case       cd         chdir      complete   continue
default    dirs       echo       echotc     else       end        endif
endsw      eval       exec       exit       fg         filetest   foreach
glob       goto       hashstat   history    hup        if         jobs
kill       limit      log        login      logout     ls-F       nice
nohup      notify     onintr     popd       printenv   pushd      rehash
repeat     sched      set        setenv     settc      setty      shift
source     stop       suspend    switch     telltc     termname   time
umask      unalias    uncomplete unhash     unlimit    unset      unsetenv
wait       where      which      while      
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man tcsh
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;
REFERENCE
    The next sections of this manual describe all of the available Builtin
    commands, Special aliases and Special shell variables.

  Builtin commands
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;
     which &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
             Displays the &lt;span class=&quot;nb&quot;&gt;command &lt;/span&gt;that will be executed by the shell after
             substitutions, path searching, etc.  The &lt;span class=&quot;nb&quot;&gt;builtin command &lt;/span&gt;is
             just like which&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, but it correctly reports tcsh aliases and
             builtins and is 10 to 100 &lt;span class=&quot;nb&quot;&gt;times &lt;/span&gt;faster.  See also the which-
             &lt;span class=&quot;nb&quot;&gt;command &lt;/span&gt;editor command.
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man 1 &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;
  Some shells may provide a &lt;span class=&quot;nb&quot;&gt;builtin printf command &lt;/span&gt;which is similar or
  identical to this utility.  Consult the &lt;span class=&quot;nb&quot;&gt;builtin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; manual page.
&lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt; snip &lt;span class=&quot;nt&quot;&gt;----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% man 1 builtin
---- snip ----
SYNOPSIS
  See the built-in command description in the appropriate shell 
  manual page.

DESCRIPTION
  Shell builtin commands are commands that can be executed within the
  running shell&apos;s process.  Note that, in the case of csh(1) builtin
  commands, the command is executed in a subshell if it occurs as any
  component of a pipeline except the last.

  If a command specified to the shell contains a slash ‘/’, the shell will
  not execute a builtin command, even if the last component of the
  specified command matches the name of a builtin command.  Thus, while
  specifying “echo” causes a builtin command to be executed under shells
  that support the echo builtin command, specifying “/bin/echo” or “./echo”
  does not.

  While some builtin commands may exist in more than one shell, their
  operation may be different under each shell which supports them.  Below
  is a table which lists shell builtin commands, the standard shells that
  support them and whether they exist as standalone utilities.
---- snip ----

    Command           External        csh(1)       sh(1)
---- snip ----
    printf            Yes             No           Yes
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
tcsh is the standard FreeBSD shell .&lt;/p&gt;

&lt;p&gt;printf is not a builtin in csh/tcsh shells. 
(It’s built into Bash and ksh93 shells.)&lt;/p&gt;

&lt;p&gt;In tcsh shell, printf is an external binary in /usr/bin/printf.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% which &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;
/usr/bin/printf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;character-to-value-inwith-perl&quot;&gt;Character to Value in/with Perl&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -e &apos;printf &quot;%c\n&quot;, 65;&apos;
A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -e &apos;print chr(65), &quot;\n&quot;&apos;
A
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;testing-the-terminal-emulator&quot;&gt;Testing the Terminal Emulator&lt;/h3&gt;

&lt;p&gt;From&lt;br /&gt;
&lt;a href=&quot;https://perlgeek.de/en/article/set-up-a-clean-utf8-environment&quot;&gt;How to set up a clean UTF-8 environment in Linux&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To test if you terminal emulator works, copy and paste this line 
in your shell:&lt;/p&gt;
&lt;div class=&quot;language-perl highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;perl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;Mcharnames&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;full&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;wle&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;print &quot;\N{EURO SIGN}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should print a Euro sign € on the console. If it prints a single 
question mark instead, your fonts might not contain it. Try installing 
additional fonts. If multiple different (nonsensical) characters are shown, 
the wrong character encoding is configured.&lt;/p&gt;

&lt;p&gt;On my system, output is&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;€
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;p&gt;TODO1&lt;/p&gt;

&lt;p&gt;LANGUAGES&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;sh; shells (sh, csh/tcsh, ksh93, bash, etc.(?) )&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/245013/get-the-display-width-of-a-string-of-characters&quot;&gt;https://unix.stackexchange.com/questions/245013/get-the-display-width-of-a-string-of-characters&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;awk&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/245013/get-the-display-width-of-a-string-of-characters&quot;&gt;https://unix.stackexchange.com/questions/245013/get-the-display-width-of-a-string-of-characters&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.codevat.com/&quot;&gt;Eric Pruitt&lt;/a&gt; wrote an implementation of 
wcwidth() and wcswidth() in Awk available at 
&lt;a href=&quot;https://github.com/ericpruitt/wcwidth.awk&quot;&gt;wcwidth.awk&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It mainly provides 4 functions&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wcscolumns(), wcstruncate(), wcwidth(), wcswidth()&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;where &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wcscolumns()&lt;/code&gt; also tolerates non-printable characters.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fetch \
https://raw.githubusercontent.com/ericpruitt/wcwidth.awk/master/wcwidth.awk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh wcwidth.awk
-rw-r--r--  1 dusko  wheel    33K Dec  5 14:20 wcwidth.awk
 
% file wcwidth.awk
wcwidth.awk: awk script, UTF-8 Unicode text executable
 
% wc -l wcwidth.awk
     698 wcwidth.awk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;wcscolumns(string)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Determine the number of columns needed to display a string.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Arguments:&lt;/strong&gt; &lt;br /&gt;
&lt;strong&gt;string:&lt;/strong&gt; A string of any length. In AWK interpreters that are not 
multi-byte safe, this argument is interpreted as a UTF-8 encoded string.&lt;br /&gt;
&lt;strong&gt;Returns:&lt;/strong&gt; The number of columns needed to display the string. 
This value will always be greater than or equal to 0.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat example1.awk
{
  printf &quot;wcscolumns(\&quot;%s\&quot;) → %s\n&quot;, $0, wcscolumns($0)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;⌚&quot; | awk -f wcwidth.awk -f example1.awk
wcscolumns(&quot;⌚&quot;) → 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;⏱&quot; | awk -f wcwidth.awk -f example1.awk
wcscolumns(&quot;⏱&quot;) → 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;wcwidth(character)&lt;/strong&gt; &lt;br /&gt;
A reimplementation of the 
&lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/9699919799/functions/wcwidth.html&quot;&gt;POSIX function of the same name&lt;/a&gt; 
to determine the number of columns needed to display a single character.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Arguments:&lt;/strong&gt; &lt;br /&gt;
&lt;strong&gt;character:&lt;/strong&gt; A single character. In AWK interpreters that are not multi-byte 
safe, this argument may consist of multiple characters that together 
represent a single UTF-8 encoded code point.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Returns:&lt;/strong&gt; The number of columns needed to display the character if it is 
printable and -1 if it is not. If the argument does not contain exactly 
one UTF-8 character, -1 is returned.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat example2.awk
{
  printf &quot;wcwidth(\&quot;%s\&quot;) → %s\n&quot;, $0, wcwidth($0)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;⌚\n⏱\n&quot; | awk -f wcwidth.awk -f example2.awk
wcwidth(&quot;⌚&quot;) → 2
wcwidth(&quot;⏱&quot;) → 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Perl&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.perlmonks.org/?node_id=923932&quot;&gt;https://www.perlmonks.org/?node_id=923932&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/9428891/what-is-the-right-way-to-get-a-grapheme/9430419&quot;&gt;https://stackoverflow.com/questions/9428891/what-is-the-right-way-to-get-a-grapheme/9430419&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;uniquote(1) is part of Perl module Unicode::Tussle so you need to install the module first:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo cpanm Unicode::Tussle
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note:&lt;br /&gt;
Instead of installing the Unicode::Tussle module, you could just download the source code for uniquote(1): &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fetch https://fastapi.metacpan.org/source/BDFOY/Unicode-Tussle-1.111/script/uniquote&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -CS -Mutf8 -MUnicode::Normalize -E &apos;say &quot;crème brûlée&quot;&apos;
crème brûlée
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -v

This is perl 5, version 32, subversion 1 (v5.32.1) built for 
amd64-freebsd-thread-multi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat getgrapheme01.pl
#!/usr/bin/env perl
use warnings;
use 5.014;
use utf8;
binmode STDOUT, &apos;:utf8&apos;;
use charnames qw(:full);

my $string = &quot;\N{LATIN CAPITAL LETTER U}\N{COMBINING DIAERESIS}&quot;;

while ( $string =~ /(\X)/g ) {
        say $1;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./getgrapheme01.pl
Ü
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat getgrapheme02.pl
#!/usr/bin/env perl

use warnings;
use 5.014;
binmode STDOUT, &apos;:utf8&apos;;

use Unicode::Normalize;

my $string = &quot;fu\N{COMBINING DIAERESIS}r&quot;;
$string = NFC($string);

while ( $string =~ /(\X)/g ) {
    say $1;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./getgrapheme02.pl
f
ü
r
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Perl - width example 
(the number of columns the string occupies when displayed)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% perl -MText::CharWidth=mbswidth -le &apos;print mbswidth shift&apos; &quot;A&quot;
1

% perl -MText::CharWidth=mbswidth -le &apos;print mbswidth shift&apos; &quot;⌚&quot;
2
 
% perl -MText::CharWidth=mbswidth -le &apos;print mbswidth shift&apos; &quot;⏱&quot;
1
% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;C&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;C - Example 1  &lt;br /&gt;
UTF-8 validator and wrapper around a small UTF-8 library.  &lt;br /&gt;
Based on Bjoern Hoehrmann’s UTF-8 decoder function written in C, 
a DFA (Deterministic Finite Automaton) parser.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd /tmp

% fetch https://github.com/howerj/utf8/archive/refs/heads/master.zip

% ls -lh master.zip
-rw-r--r--  1 dusko  wheel    13K Dec 16 16:59 master.zip

% unzip master.zip

% rm -i master.zip

% ls -ld utf8-master/
drwxr-xr-x  2 dusko  wheel  10 Dec 16 17:00 utf8-master/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cd utf8-master/

% pwd
/tmp/utf8-master

% ls -alh
total 317
drwxr-xr-x   2 dusko  wheel    10B Dec 16 17:00 .
drwxrwxrwt  90 root   wheel   1.9K Dec 16 17:00 ..
-rw-r--r--   1 dusko  wheel    33B Dec  4  2020 .gitignore
-rw-r--r--   1 dusko  wheel   1.1K Dec  4  2020 LICENSE
-rw-r--r--   1 dusko  wheel   1.4K Dec  4  2020 main.c
-rw-r--r--   1 dusko  wheel   1.1K Dec  4  2020 makefile
-rw-r--r--   1 dusko  wheel   3.5K Dec  4  2020 readme.md
-rw-r--r--   1 dusko  wheel   7.4K Dec  4  2020 utf8.c
-rw-r--r--   1 dusko  wheel   1.0K Dec  4  2020 utf8.h
-rw-r--r--   1 dusko  wheel    22K Dec  4  2020 utf8.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat readme.md
% utf8(1) | UTF8 Validator

# NAME

UTF8 - UTF-8 validator and wrapped around a small UTF-8 library

# SYNOPSES

utf8 string

utf8 &amp;lt; file

# DESCRIPTION

        Author:     Richard James Howe / Bjoern Hoehrmann
        License:    MIT
        Repository: &amp;lt;https://github.com/howerj/utf8&amp;gt;
        Email:      howe.r.j.89@gmail.com
        Copyright:  2008-2009 Bjoern Hoehrmann
        Copyright:  2020      Richard James Howe

This UTF-8 validator/decoder library is based entirely
around the (excellent) code and description available at
&amp;lt;http://bjoern.hoehrmann.de/utf-8/decoder/dfa/&amp;gt;,

Modifications are released under the same license as the original. The
executable built is mainly just there to allow the library itself to be
tested. This is a very minimal set of UTF-8 utilities, not much is provided
but it should allow you to build upon it.

# USAGE
 
The test program can either check whether a string passed in as an argument
is valid UTF-8 or it can read from stdin(3) if no argument is given and do
the same, in both cases the number of code points, if any, that have been
decoded is printed out if and only if the entire input is valid.

---- snip ----

This is a very simple library meant to deal with UTF-8 data, and converting
strings to and from code-points. It does not deal with issues like Unicode
normalization, case conversion and a whole host of horrors that occur when
not using ASCII.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc \
 -std=c99 -Wall -Wextra -pedantic -O2 -DUTF8_VERSION=&quot;0x010000ul&quot; \
 utf8.c utf8.h main.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lhrt | tail -1
-rwxr-xr-x  1 dusko  wheel    20K Dec 16 17:01 a.out
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out &quot;hello&quot;
5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf %s &quot;hello&quot; &amp;gt; file

% ./a.out &amp;lt; file
5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% echo &quot;hello&quot; &amp;gt; file

% ./a.out &amp;lt; file
6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;C - Example 2:&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/58185069/expected-encoding-of-wcwidth-argument&quot;&gt;https://stackoverflow.com/questions/58185069/expected-encoding-of-wcwidth-argument&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note:&lt;br /&gt;
See&lt;br /&gt;
&lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_02_01_02&quot;&gt;https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_02_01_02&lt;/a&gt;&lt;br /&gt;
“An XSI-conforming application shall ensure that the feature test macro _XOPEN_SOURCE is defined with the value 700 before inclusion of any header.”&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat wcwidth_c_example_1.c
#define _XOPEN_SOURCE 700

#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;locale.h&amp;gt;
#include &amp;lt;wchar.h&amp;gt;

int main(void)
{
    setlocale(LC_CTYPE, &quot;&quot;);

    wchar_t c1 = L&apos;ｈ&apos;;
    wchar_t c2 = L&apos;⌚&apos;;
    wchar_t c3 = L&apos;⏱&apos;;

    printf(&quot;Fullwidth small letter h (U+FF48) - width: %d\n&quot;, wcwidth(c1));
    printf(&quot;Watch (U+231A) - width: %d\n&quot;, wcwidth(c2));
    printf(&quot;Stopwatch (U+23F1) - width: %d\n&quot;, wcwidth(c3));

    return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc wcwidth_c_example_1.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out
Fullwidth small letter h (U+FF48) - width: 2
Watch (U+231A) - width: 2
Stopwatch (U+23F1) - width: 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;C - Example 3:&lt;br /&gt;
&lt;a href=&quot;https://www.ibm.com/docs/en/i/7.1?topic=functions-wcwidth-determine-display-width-wide-character&quot;&gt;https://www.ibm.com/docs/en/i/7.1?topic=functions-wcwidth-determine-display-width-wide-character&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat wcwidth_c_example_2.c
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;wchar.h&amp;gt;

int main(void)
{
   wint_t wc1 = L&apos;A&apos;;
   wint_t wc2 = L&apos;⌚&apos;;
   wint_t wc3 = L&apos;⏱&apos;;
   wchar_t *wcs = L&quot;ABC&quot;;

   printf(&quot;wc1 has a width of: %d\n&quot;, wcwidth(wc1));
   printf(&quot;wc2 has a width of: %d\n&quot;, wcwidth(wc2));
   printf(&quot;wc3 has a width of: %d\n&quot;, wcwidth(wc3));
   printf(&quot;wcs has a width of: %d\n&quot;, wcswidth(wcs,3));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc wcwidth_c_example_2.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Return Value&lt;br /&gt;
The wcswidth() function either returns:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;0, if wcs points to a null wide character; or&lt;/li&gt;
  &lt;li&gt;the number of printing positions occupied by the wide string pointed to 
by wcs; or&lt;/li&gt;
  &lt;li&gt;-1, the wide string pointed to by wcs is not printable&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out
wc1 has a width of: 1
wc2 has a width of: -1
wc3 has a width of: -1
wcs has a width of: 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;C - Example 4:&lt;br /&gt;
&lt;a href=&quot;https://sites.ualberta.ca/dept/chemeng/AIX-43/share/man/info/C/a_doc_lib/libs/basetrf2/wcswidth.htm&quot;&gt;https://sites.ualberta.ca/dept/chemeng/AIX-43/share/man/info/C/a_doc_lib/libs/basetrf2/wcswidth.htm&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat wcwidth_c_example_3.c 
#include &amp;lt;locale.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;wchar.h&amp;gt;

int main(void)
{
   int     retval1, retval2, n;
   
   wchar_t *pwcsWatch = L&quot;⌚&quot;;
   wchar_t *pwcsStopwatch = L&quot;⏱&quot;;
   
   (void)setlocale(LC_ALL, &quot;&quot;);
   
   /* Let pwcs point to a wide character null terminated 
   ** string. Let n be the number of wide characters whose
   ** display column width is to be determined.
   */
   retval1 = wcswidth(pwcsWatch, n);
   retval2 = wcswidth(pwcsStopwatch, n);

   if(retval1 == -1 || retval2 == -1){
           /* Error handling. Invalid wide character code 
           ** encountered in the wide character string pwcs.
           */
       printf(&quot;pwcs is not printable\n&quot;);
   }
   
   printf(&quot;pwcsWatch has a width of: %d\n&quot;, wcswidth(pwcsWatch,n));
   printf(&quot;pwcsStopwatch has a width of: %d\n&quot;, wcswidth(pwcsStopwatch,n));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc wcwidth_c_example_3.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out
pwcsWatch has a width of: 2
pwcsStopwatch has a width of: 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reference:&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/5117393/number-of-character-cells-used-by-string&quot;&gt;https://stackoverflow.com/questions/5117393/number-of-character-cells-used-by-string&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From&lt;br /&gt;
utf8everywhere.org: &lt;br /&gt;
&lt;a href=&quot;http://utf8everywhere.org/#myth.strlen&quot;&gt;Counting coded characters or code points is important.&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The size of the string as it appears on the screen is unrelated to 
the number of code points in the string. One has to communicate with 
the rendering engine for this. Code points do not occupy one column 
even in monospace fonts and terminals. POSIX takes this into account.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Also see:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Programming with wide characters - Linux.com&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.linux.com/news/programming-wide-characters/&quot;&gt;https://www.linux.com/news/programming-wide-characters/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The Unicode HOWTO - 6. Making your programs Unicode aware&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://tldp.org/HOWTO/Unicode-HOWTO-6.html&quot;&gt;https://tldp.org/HOWTO/Unicode-HOWTO-6.html&lt;/a&gt;&lt;br /&gt;
Bruno Haible - v1.0, Jan 23, 2001&lt;/p&gt;

&lt;p&gt;C - Example 5:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5117393/number-of-character-cells-used-by-string&quot;&gt;https://stackoverflow.com/questions/5117393/number-of-character-cells-used-by-string&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat wcwidth_c_example_4.c 
#define _XOPEN_SOURCE
#include &amp;lt;wchar.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;locale.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;

int measure(char *string) {
    // allocate enough memory to hold the wide string
    size_t needed = mbstowcs(NULL, string, 0) + 1;

    wchar_t *wcstring = malloc(needed * sizeof *wcstring);

    if (!wcstring) return -1;

    // change encodings
    if (mbstowcs(wcstring, string, needed) == (size_t)-1) return -2;

    // measure width
    int width = wcswidth(wcstring, needed);

    free(wcstring);
    return width;
}

int main(int argc, char **argv) {
    setlocale(LC_ALL, &quot;&quot;);

    for (int i = 1; i &amp;lt; argc; i++) {
        printf(&quot;%s: %d\n&quot;, argv[i], measure(argv[i]));
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc wcwidth_c_example_4.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out hello 莊子 cＡb ⌚ ⏱
hello: 5
莊子: 4
cＡb: 4
⌚: 2
⏱: 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ~/uni.pl watch
⌚      231A    WATCH
⏱       23F1    STOPWATCH
𝍄       1D344   TETRAGRAM FOR WATCH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ~/uni.pl watch | head -1 | cut -f1
⌚
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out `~/uni.pl watch | head -1 | cut -f1`
⌚: 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ~/uni.pl stopwatch
⏱       23F1    STOPWATCH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out `~/uni.pl stopwatch | cut -f1`
⏱: 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ~/uni.pl watch | head -1 | cut -f1 | xxd -p
e28c9a0a

% ~/uni.pl stopwatch | cut -f1 | xxd -p
e28fb10a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x\n&apos; \&apos;`~/uni.pl watch | head -1 | cut -f1`
231a
 
% printf &apos;%x\n&apos; \&apos;`~/uni.pl stopwatch | cut -f1`
23f1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &apos;%x&apos; \&apos;`~/uni.pl watch | \ 
 head -1 | \
 cut -f1` | \ 
 xargs -Irplstr fc-list &quot;:charset=rplstr&quot; | \
 wc -l
      64
 
% printf &apos;%x&apos; \&apos;`~/uni.pl stopwatch | \
 cut -f1` | \
 xargs -Irplstr fc-list &quot;:charset=rplstr&quot; | \
 wc -l
       7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^231A UnicodeData.txt
231A;WATCH;So;0;ON;;;;;N;;;;;
 
% grep ^23F1 UnicodeData.txt
23F1;STOPWATCH;So;0;ON;;;;;N;;;;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The latest released version of the UCD (Unicode Character Database) 
is always accessible at: &lt;br /&gt;
    &lt;a href=&quot;https://www.unicode.org/Public/UCD/latest/&quot;&gt;https://www.unicode.org/Public/UCD/latest/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As of Dec 3, 2021, the current version of Unicode is version 14.&lt;/p&gt;

&lt;p&gt;The UAXes and UTS #51 can be accessed at
&lt;a href=&quot;https://www.unicode.org/versions/Unicode14.0.0/&quot;&gt;https://www.unicode.org/versions/Unicode14.0.0/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From that page, under ‘14.0.0 Unicode Standard Annexes’ section, 
the link for &lt;em&gt;UAX #44, Unicode Character Database&lt;/em&gt; is listed as&lt;br /&gt;
&lt;a href=&quot;https://www.unicode.org/reports/tr44/tr44-28.html&quot;&gt;https://www.unicode.org/reports/tr44/tr44-28.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unicode Character Database&lt;br /&gt;
Unicode® Standard Annex #44&lt;br /&gt;
Date: 2021-08-30&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Because of the legacy format constraints for UnicodeData.txt, that file 
contains no specific information about default values for properties. 
The default values for fields in UnicodeData.txt are documented in 
Table 4 below if they cannot be derived from the general rules about 
default values for properties.&lt;/p&gt;

  &lt;p&gt;– snip – &lt;br /&gt;
Table 4. Default Values for Properties&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Property Name     Default Value(s)           Complex?
-- snip --
East_Asian_Width  Neutral (= N), Wide (= W)  Yes
-- snip --
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;The Table 4 indicates that the &lt;em&gt;East_Asian_Width&lt;/em&gt; property can be either&lt;br /&gt;
Neutral (= &lt;strong&gt;N&lt;/strong&gt;) or Wide (= &lt;strong&gt;W&lt;/strong&gt;).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fetch https://www.unicode.org/Public/UCD/latest/ucd/EastAsianWidth.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% grep ^231A EastAsianWidth.txt
231A..231B;W     # So     [2] WATCH..HOURGLASS

% grep ^23F1 EastAsianWidth.txt
23F1..23F2;N     # So     [2] STOPWATCH..TIMER CLOCK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Therefore, the &lt;em&gt;watch&lt;/em&gt; (U+231A) code point’s East_Asian_Width property is 
&lt;strong&gt;wide&lt;/strong&gt;, while the &lt;em&gt;stopwatch&lt;/em&gt; (U+23F1) code point’s East_Asian_Width 
property is &lt;strong&gt;neutral&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;That’s why the code point’s width for ‘watch’ symbol in xterm is &lt;strong&gt;2&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;C - Example 6&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% fetch https://raw.githubusercontent.com/notevenodd/wcswidth/master/wcswidth.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc -O2 -Wall -o wcswidth wcswidth.c
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./wcswidth TODO3 - WATCH 1 WIDTH
1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./wcswidth TODO4 - WATCH 2 WIDTH
2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Python2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/23873771/how-to-handle-combining-diacritical-marks-with-unicodeutils&quot;&gt;https://stackoverflow.com/questions/23873771/how-to-handle-combining-diacritical-marks-with-unicodeutils&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Python3&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg search cwidth
py38-cwcwidth-0.1.4            Python bindings for wc(s)width
py38-wcwidth-0.1.8             Determine the printable width of the terminal
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% sudo pkg install py38-cwcwidth
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% python3.8
Python 3.8.10 (default, Jul  4 2021, 01:12:00)
[Clang 11.0.1 (git@github.com:llvm/llvm-project.git llvmorg-11.0.1-0-g43ff75f2c on freebsd13
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt; import cwcwidth
&amp;gt;&amp;gt;&amp;gt;  
&amp;gt;&amp;gt;&amp;gt; cwcwidth.wcwidth(&quot;a&quot;)
1
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt; cwcwidth.wcswidth(&quot;コ&quot;)
2
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt; cwcwidth.wcswidth(&quot;⌚&quot;)
2
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt;
&amp;gt;&amp;gt;&amp;gt; quit()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/280843/xterm-doesnt-display-some-unicode-characters-properly&quot;&gt;https://unix.stackexchange.com/questions/280843/xterm-doesnt-display-some-unicode-characters-properly&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2352018/cant-use-unichr-in-python-3-1&quot;&gt;https://stackoverflow.com/questions/2352018/cant-use-unichr-in-python-3-1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In Python 3, you just use chr (instead of unichr() in Python 2):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat prunichr.py
#!/usr/bin/env python3.8

for x in range(0x2620, 0x2938):
        print(chr(x))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% chmod 0744 prunichr.py
 
% ./prunichr.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Java&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GB2312Unicode.java - GB2312 to Unicode Mapping&lt;br /&gt;
&lt;a href=&quot;http://www.herongyang.com/GB2312/GB2312Unicode-Java-GB2312-Unicode-Mapping.html&quot;&gt;http://www.herongyang.com/GB2312/GB2312Unicode-Java-GB2312-Unicode-Mapping.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If we compare GB2312 codes with Unicode codes of same Chinese characters, 
we will not find any mathematical relations. So if someone wants to 
convert a Chinese text file from the GB2312 encoding to a Unicode 
encoding, he/she needs to use a big mapping table that covers all 
7445 GB2312 characters.&lt;/p&gt;

  &lt;p&gt;If we search the Internet, we probably can find copies of such mapping 
table in different formats.&lt;/p&gt;

  &lt;p&gt;But if you have JDK (Java Development Kit) installed on your computer, 
you can build a GB2312 to Unicode mapping table yourself with a simple 
program.&lt;/p&gt;

  &lt;p&gt;Here is a Java program I wrote to build a GB2312 to Unicode mapping table, 
GB2312Unicode.java. The output of the program includes 5 columns per 
character:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;“Q.W.” Column: The GB2312 Location Code of the character.&lt;/li&gt;
    &lt;li&gt;Second Column: The GB2312 Encoding of the character.&lt;/li&gt;
    &lt;li&gt;“GB” Column: The GB2312 Encoding in HEX value of the character.&lt;/li&gt;
    &lt;li&gt;“Uni.” Column: The Unicode Code in HEX value of the character.&lt;/li&gt;
    &lt;li&gt;“UTF-8.” Column: The UTF-8 Encoding in HEX value of the character.&lt;/li&gt;
  &lt;/ul&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/* GB2312Unicode.java
- Copyright (c) 2015, HerongYang.com, All Rights Reserved.
*/
---- snip ----

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;Download the source code. Place it in a file; for example, called javaUnicodeGB2312.java.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% vi javaUnicodeGB2312.java
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create the Java class.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% javac javaUnicodeGB2312.java
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lhrt
total 9
-rw-r--r--  1 dusko  wheel   3.9K Dec 16 18:47 javaUnicodeGB2312.java
-rw-r--r--  1 dusko  wheel   3.8K Dec 16 18:54 UnicodeGB2312.class
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the Java program.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% java UnicodeGB2312
Number of GB characters wrote: 7445
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lhrt
total 98
-rw-r--r--  1 dusko  wheel   3.9K Dec 16 18:47 javaUnicodeGB2312.java
-rw-r--r--  1 dusko  wheel   3.8K Dec 16 18:54 UnicodeGB2312.class
-rw-r--r--  1 dusko  wheel   108K Dec 16 18:54 unicode_gb2312.gb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ls -lh unicode_gb2312.gb
-rw-r--r--  1 dusko  wheel   108K Dec 16 18:54 unicode_gb2312.gb

% file unicode_gb2312.gb
unicode_gb2312.gb: ISO-8859 text, with CRLF line terminators

% wc -l unicode_gb2312.gb
    1493 unicode_gb2312.gb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat unicode_gb2312.gb
&amp;lt;pre&amp;gt;
Uni. GB   ¡¡   Uni. GB   ¡¡   Uni. GB   ¡¡   Uni. GB   ¡¡   Uni. GB   ¡¡

00A4 A1E8 ¡è   00A7 A1EC ¡ì   00A8 A1A7 ¡§   00B0 A1E3 ¡ã   00B1 A1C0 ¡À
00B7 A1A4 ¡¤   00D7 A1C1 ¡Á   00E0 A8A4 ¨¤   00E1 A8A2 ¨¢   00E8 A8A8 ¨¨
00E9 A8A6 ¨¦   00EA A8BA ¨º   00EC A8AC ¨¬   00ED A8AA ¨ª   00F2 A8B0 ¨°
00F3 A8AE ¨®   00F7 A1C2 ¡Â   00F9 A8B4 ¨´   00FA A8B2 ¨²   00FC A8B9 ¨¹
0101 A8A1 ¨¡   0113 A8A5 ¨¥   011B A8A7 ¨§   012B A8A9 ¨©   014D A8AD ¨­
016B A8B1 ¨±   01CE A8A3 ¨£   01D0 A8AB ¨«   01D2 A8AF ¨¯   01D4 A8B3 ¨³
01D6 A8B5 ¨µ   01D8 A8B6 ¨¶   01DA A8B7 ¨·   01DC A8B8 ¨¸   02C7 A1A6 ¡¦
02C9 A1A5 ¡¥   0391 A6A1 ¦¡   0392 A6A2 ¦¢   0393 A6A3 ¦£   0394 A6A4 ¦¤
0395 A6A5 ¦¥   0396 A6A6 ¦¦   0397 A6A7 ¦§   0398 A6A8 ¦¨   0399 A6A9 ¦©
039A A6AA ¦ª   039B A6AB ¦«   039C A6AC ¦¬   039D A6AD ¦­   039E A6AE ¦®
039F A6AF ¦¯   03A0 A6B0 ¦°   03A1 A6B1 ¦±   03A3 A6B2 ¦²   03A4 A6B3 ¦³
03A5 A6B4 ¦´   03A6 A6B5 ¦µ   03A7 A6B6 ¦¶   03A8 A6B7 ¦·   03A9 A6B8 ¦¸
03B1 A6C1 ¦Á   03B2 A6C2 ¦Â   03B3 A6C3 ¦Ã   03B4 A6C4 ¦Ä   03B5 A6C5 ¦Å
---- snip ----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Ruby&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;TODO2&lt;/p&gt;

&lt;p&gt;Add: &lt;br /&gt;
mime – email messages&lt;br /&gt;
imagemagick -&amp;gt; view with: xv, sxiv, feh, meh
fc-cache&lt;br /&gt;
~/.fonts&lt;br /&gt;
~/.config&lt;br /&gt;
~/.xinitrc&lt;br /&gt;
xterm: -report-charclass, -report-colors, -report-fonts, -report-icons,
       -report-xres &lt;br /&gt;
Normalization&lt;br /&gt;
Double-width Unicode characters in xterm &lt;br /&gt;
uxterm&lt;/p&gt;

&lt;p&gt;Install PHP source code for the Unicode Searcher (a.k.a. The UniSearcher)&lt;br /&gt;
&lt;a href=&quot;http://www.isthisthingon.org/unicode/unisearch-1.1.tgz&quot;&gt;http://www.isthisthingon.org/unicode/unisearch-1.1.tgz&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg search yudit
yudit-3.0.7                    Multi-lingual Unicode text editor with TTF support
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg search ^lv 
lv-4.51.20200728               Powerful Multilingual File Viewer
lv-aspell-0.5.5.1_1,2          Aspell Latvian dictionary
lv-libreoffice-7.2.1.2         lv language pack for libreoffice
lv2-1.18.2                     Open standard for audio plugins (successor to LADSPA)
lv2file-0.84.31_1              Simple program that apples LV2 effects to audio files
lv2lint-0.14.0                 Check whether a given LV2 plugin is up to the specification
lv2proc-0.5.1_1                Simple command line effect processor using LV2 plugins
lvtk-2.0.0.r1.14               Wraps the LV2 C API and extensions into easy to use C++ classes
 
% pkg search mined
mined-2015.25                  Text mode editor with Unicode support
p5-LWP-UserAgent-Determined-1.07_1 Virtual browser that retries errors
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% pkg info --regex --full vim-gtk3
---- snip ----

FreeBSD has the following Vim packages:
* vim: Console-only Vim (vim binary) with all runtime files
* vim-gtk3, -gtk2, -athena, -motif, -x11: Console Vim plus 
  a GUI (gvim binary)
* vim-tiny: Vim binary only, with no runtime files. Not useful for most 
  people; intended for minimal (ex. jail) installations

WWW: http://www.vim.org/
WWW: https://github.com/vim/vim
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% xterm -class UXTerm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;From&lt;br /&gt;
From Bash to Z Shell: Conquering the Command Line &lt;br /&gt;
Apress November 2004 &lt;br /&gt;
By Oliver Kiddle, Jerry Peek, Peter Stephenson &lt;br /&gt;
Chapter 4 - the sidebar “The Terminal Driver”&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Terminal Driver&lt;/p&gt;

  &lt;p&gt;Why are there all these strange effects associated with terminals, 
and why do we need the stty command to control them?&lt;/p&gt;

  &lt;p&gt;In the early days of Unix, shells had no editing capabilities of their own, 
not even the basic ability to delete the previous character. 
However, a program existed that read the characters typed by the user, 
and sent them to the shell: the terminal driver. It gradually developed 
a few simple editing features of its own, until it grew to include all 
the features you can see from the output of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stty -a&lt;/code&gt;.&lt;/p&gt;

  &lt;p&gt;By default, the terminal driver accepts input a line at a time; this is 
sometimes known as “canonical” input mode. For commands that don’t know 
about terminals, such as simple shells without their own editors, 
the terminal driver usually runs in a mode sometimes known as “cooked.” 
(This is Unix humour; when not in “cooked” mode, the terminal is in “raw” 
mode.) Here, all the special keys are used. This allows you some very 
primitive editing on a line of input. For these simple editing features, 
the command stty acts as a sort of bind or bindkey command.&lt;/p&gt;

  &lt;p&gt;For example, let’s try cat, which simply copies input to output. 
Type the following:&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cat
this is a line&amp;lt;ctrl-u&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;The line disappears; that’s because of the kill stty setting. 
If it didn’t work, try setting the following first:&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% stty kill &apos;^u&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;This is handled entirely by the terminal driver; neither the program 
(cat) nor the shell knows anything about it. In “cooked” mode, the 
terminal passes a complete line to the program when you press Return. 
So cat never saw what you typed before the Ctrl-u.&lt;/p&gt;

  &lt;p&gt;Since not all programs want the terminal driver to handle their input, 
the terminal has other modes. The shell itself uses “cbreak” mode 
(not quite equivalent to “raw” mode), which means many of the characters 
which are special in “cooked” mode are passed straight through to 
the shell. Hence when you press Backspace in either bash or zsh, it’s 
the shell, not the terminal driver, that deals with it.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;unicode-combining-diacritics-in-a-terminal&quot;&gt;Unicode Combining Diacritics in a Terminal&lt;/h3&gt;

&lt;p&gt;Reference:&lt;br /&gt;
&lt;a href=&quot;https://forums.linuxmint.com/viewtopic.php?t=339238&quot;&gt;https://forums.linuxmint.com/viewtopic.php?t=339238&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;locale.h&amp;gt;

int main(void)
{
  setlocale(LC_ALL, &quot;en_CA.UTF-8&quot;);
  puts(&quot;\xc3\xab&quot;);   // e with diaeresis as one utf-8 char
  puts(&quot;e\xc2\xa8&quot;);  // e as one char, then combining diaeresis as utf-8 char
  puts(&quot;\xc2\xa8&quot;&quot;e&quot;);// combining diaeresis as utf-8 char, then e as next char
    
  return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compile and test:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% cc diacritics.c
 
% ls -lh a.out 
-rwxr-xr-x  1 dusko  wheel    15K Nov 27 13:18 a.out
 
% date
Sat 27 Nov 2021 13:18:36 PST
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% ./a.out
ë
e¨
¨e
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;print-double-width-characters---escape-characters-with-xterm&quot;&gt;Print Double Width Characters - Escape Characters with xterm&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% bash
$
$ command -v echo
echo

$ command -V echo
echo is a shell builtin

$ type -a echo
echo is a shell builtin
echo is /bin/echo

$ which echo
/bin/echo

$ whereis echo
echo: /bin/echo /usr/share/man/man1/echo.1.gz /usr/src/bin/echo

$ where echo
bash: where: command not found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print double width characters, move cursor one position left and print an ‘x’.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ echo -e &quot;你好\e[Dx&quot;
你 x
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Return back to csh:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ exit
exit
% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% command -v echo
echo
 
% command -V echo
echo is a shell builtin
 
% type echo
echo is a shell builtin
 
% type -a echo
echo is a shell builtin
-a: not found
 
% which echo
echo: shell built-in command.
 
% whereis echo
echo: /bin/echo /usr/share/man/man1/echo.1.gz /usr/src/bin/echo
 
% where echo
echo is a shell built-in
/bin/echo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% echo -e &quot;你好\e[Dx&quot;
-e 你好\e[Dx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xterm(1)&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The dump-html action can also be triggered using the
Media Copy control sequence CSI 1 0 i, for example from a
shell script with&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;printf &apos;\033[10i&apos;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;你好\033Dx&quot;
你好
    x% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To send the escape sequence from keyboard directly: &lt;br /&gt;
The character &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^[&lt;/code&gt; is typed this way&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl + v&lt;/code&gt; then &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Esc&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% printf &quot;你好^[Dx&quot;
你好
    x% 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% echo -n &quot;你好^[Dx&quot;
你好
    x%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;% echo &quot;你好^[Dx&quot;
你好
    x
%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;References:&lt;br /&gt;
&lt;a href=&quot;https://github.com/selectel/pyte/issues/9&quot;&gt;cursor behavior for full/ambiguous width characters #9&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/369845/why-i-cant-send-escape-sequences-from-keyboard-but-can-do-it-from-another-tty&quot;&gt;Why I can’t send escape sequences from keyboard, but can do it from another tty?&lt;/a&gt;&lt;br /&gt;
Posted on Jun 7, 2017 - Updated on Sep 19, 2019 - Retrieved on Nov 6, 2021&lt;/p&gt;

&lt;p&gt;The man page for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xterm(1)&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echotc [-sv] arg ... (+)
    Exercises the terminal capabilities (see termcap(5)) in args.
    For example, &apos;echotc home&apos; sends the cursor to the home
    position, &apos;echotc cm 3 10&apos; sends it to column 3 and row 10, and
    &apos;echotc ts 0; echo &quot;This is a test.&quot;; echotc fs&apos; prints &quot;This
    is a test.&quot;  in the status line.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;unichar-function-in-spreadsheets&quot;&gt;UNICHAR Function in Spreadsheets&lt;/h2&gt;

&lt;h3 id=&quot;unichar-function-in-libreoffice&quot;&gt;UNICHAR Function in LibreOffice&lt;/h3&gt;

&lt;p&gt;LibreOffice Help&lt;br /&gt;
&lt;a href=&quot;https://help.libreoffice.org/Calc/Text_Functions#UNICHAR&quot;&gt;https://help.libreoffice.org/Calc/Text_Functions#UNICHAR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Converts a code number into a Unicode character or letter&lt;/p&gt;

&lt;p&gt;UNICHAR &lt;br /&gt;
Converts a code number into a Unicode character or letter.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Syntax&lt;/em&gt;&lt;br /&gt;
UNICHAR(number)&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Example&lt;/em&gt;&lt;br /&gt;
=UNICHAR(169) returns the Copyright character ©.&lt;/p&gt;

&lt;h3 id=&quot;unichar-function-in-excel&quot;&gt;UNICHAR Function in Excel&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://exceljet.net/excel-functions/excel-unichar-function&quot;&gt;https://exceljet.net/excel-functions/excel-unichar-function&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;references&quot;&gt;References:&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode Utilities - Unicode.org: Character Properties&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://util.unicode.org/UnicodeJsps/character.jsp&quot;&gt;https://util.unicode.org/UnicodeJsps/character.jsp&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode Utilities: Description and Index&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://util.unicode.org/UnicodeJsps/&quot;&gt;https://util.unicode.org/UnicodeJsps/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UTF-8 encoding table and Unicode characters&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://utf8-chartable.de/unicode-utf8-table.pl&quot;&gt;https://utf8-chartable.de/unicode-utf8-table.pl&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UniView&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://r12a.github.io/uniview/&quot;&gt;https://r12a.github.io/uniview/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode code converter v10&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://r12a.github.io/app-conversion/&quot;&gt;https://r12a.github.io/app-conversion/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Analyse string&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://r12a.github.io/app-analysestring/&quot;&gt;https://r12a.github.io/app-analysestring/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Encoding converter (Unicode, UTF-8, hex, char, dec)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://r12a.github.io/app-encodings/&quot;&gt;https://r12a.github.io/app-encodings/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Information about a Unicode Code Point&lt;br /&gt;
For example:  SNOWMAN WITHOUT SNOW, (U+26C4)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://codepoints.net/U+26C4&quot;&gt;http://codepoints.net/U+26C4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See also:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Fileformat.info&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.fileformat.info/info/unicode/char/26C4/index.htm&quot;&gt;https://www.fileformat.info/info/unicode/char/26C4/index.htm&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The Unicode Searcher (a.k.a. The UniSearcher)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.isthisthingon.org/unicode/index.phtml?glyph=26C4&quot;&gt;http://www.isthisthingon.org/unicode/index.phtml?glyph=26C4&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.isthisthingon.org/unicode/index.php?page=02&amp;amp;subpage=6&amp;amp;glyph=026C4&quot;&gt;http://www.isthisthingon.org/unicode/index.php?page=02&amp;amp;subpage=6&amp;amp;glyph=026C4&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;All Unicoded Characters by Code Point&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.isthisthingon.org/unicode/allchars1.php&quot;&gt;http://www.isthisthingon.org/unicode/allchars1.php&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode website&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unicode.org/cldr/utility/character.jsp?a=26C4&quot;&gt;https://unicode.org/cldr/utility/character.jsp?a=26C4&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://util.unicode.org/UnicodeJsps/character.jsp?a=26C4&quot;&gt;https://util.unicode.org/UnicodeJsps/character.jsp?a=26C4&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Wikipedia&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/%E2%9B%84&quot;&gt;https://en.wikipedia.org/wiki/%E2%9B%84&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Graphemica&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://graphemica.com/%E2%9B%84&quot;&gt;https://graphemica.com/%E2%9B%84&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ScriptSource&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://scriptsource.org/cms/scripts/page.php?item_id=character_detail&amp;amp;key=U0026C4&quot;&gt;https://scriptsource.org/cms/scripts/page.php?item_id=character_detail&amp;amp;key=U0026C4&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Compart&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.compart.com/en/unicode/U+26C4&quot;&gt;https://www.compart.com/en/unicode/U+26C4&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode-table&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unicode-table.com/en/search/?q=26C4&quot;&gt;https://unicode-table.com/en/search/?q=26C4&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;X11 fonts - a tutorial&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://twiserandom.com/unix/x11-fonts-a-tutorial/index.html&quot;&gt;https://twiserandom.com/unix/x11-fonts-a-tutorial/index.html&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;X.org Fonts General&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://xpt.sourceforge.net/techdocs/nix/x/fonts/xf18-XorgFontsGeneral/single/&quot;&gt;http://xpt.sourceforge.net/techdocs/nix/x/fonts/xf18-XorgFontsGeneral/single/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A semi-brief history and overview of X fonts and font rendering technology&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://utcc.utoronto.ca/~cks/space/blog/unix/XFontTypes&quot;&gt;https://utcc.utoronto.ca/~cks/space/blog/unix/XFontTypes&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode Explained book By Jukka K. Korpela&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://learning.oreilly.com/library/view/unicode-explained/059610121X/&quot;&gt;https://learning.oreilly.com/library/view/unicode-explained/059610121X/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Fontconfig - freedesktop.org&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.freedesktop.org/wiki/Software/fontconfig/&quot;&gt;https://www.freedesktop.org/wiki/Software/fontconfig/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Xft - freedesktop.org&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://freedesktop.org/wiki/Software/Xft/&quot;&gt;https://freedesktop.org/wiki/Software/Xft/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Character Encoder / Decoder Tool – String Functions - Online String Manipulation Tools&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://string-functions.com/encodedecode.aspx&quot;&gt;https://string-functions.com/encodedecode.aspx&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&quot;what-is-a-code-page&quot;&gt;What Is a Code Page?&lt;/h5&gt;
&lt;blockquote&gt;
  &lt;p&gt;Code page is another name for character encoding. It consists of a table 
of values that describes the character set for a particular language.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;what-is-character-encoding&quot;&gt;What is Character Encoding?&lt;/h5&gt;
&lt;blockquote&gt;
  &lt;p&gt;Character encoding is the process of encoding a collection of characters 
according to an encoding system. This process normally pairs numbers with 
characters to encode information that can be used by a computer.&lt;/p&gt;

  &lt;p&gt;Character encodings allow us to understand the encoding that is taking 
place with computers. Due to there being a variety of character encodings, 
errors can spring up when encoded with one character encoding and decoding 
with another. The above tool can be used to simulate if any errors will 
come up when encoding with any character encoding and decoding with another.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;types-of-character-encodings&quot;&gt;Types of Character Encodings&lt;/h5&gt;
&lt;blockquote&gt;
  &lt;p&gt;There is a wide variety of encodings that can be used to encode or decode 
a string of characters, including UTF-8, ASCII, and ISO 9959-1.&lt;/p&gt;

  &lt;p&gt;Examples of popular character encodings:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;ASCII: American Standard Code for Information Exchange&lt;/li&gt;
    &lt;li&gt;ANSI: American National Standards Institute&lt;/li&gt;
    &lt;li&gt;Unicode (internal text codes used by operating systems)&lt;/li&gt;
    &lt;li&gt;UTF-8 (Unicode Transformation Format that uses 1 byte to represent characters)&lt;/li&gt;
    &lt;li&gt;UTF-16 (Unicode Transformation Format that uses 2 bytes to represent characters)&lt;/li&gt;
    &lt;li&gt;UTF-32 (Unicode Transformation Format that uses 4 bytes to represent characters)&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;While these are certainly popular encodings that are used, there are 
times when strings of code are encoded with encodings that aren’t as 
widely used, such as x-IA5-Norgwegian or DOS-720. This can cause confusion 
and possible errors, so it’s important to understand how to reduce these 
errors by simulating beforehand using String Functions’
character encoding/decoding tool.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Misconceptions about Unicode and UTF-8/16/32 - Daniel Miessler&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://danielmiessler.com/blog/misconceptions-about-unicode-and-utf-81632/&quot;&gt;https://danielmiessler.com/blog/misconceptions-about-unicode-and-utf-81632/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The chart above reveals a misconception about Unicode: the “8” in “UTF-8” 
doesn’t actually indicate how many bits a code point gets encoded into. 
The final size of the encoded data is based on two things: a) the code 
unit size, and b) the number of code units used. So the 8 in UTF-8 stands 
for the code unit size, not the number of bits that will be used to 
encode a code point.&lt;/p&gt;

  &lt;p&gt;As the chart indicates, UTF-8 can actually store a code point using 
between one and four bytes. I find it helpful to think of the code unit 
size as the “granularity level”, or the “building block size” you have 
available to you. So with UTF-16 you can still only have four bytes 
maximum, but your code unit size is 16 bits, so your minimum number of 
bytes is two.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Flexible and Economical UTF-8 Decoder&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://bjoern.hoehrmann.de/utf-8/decoder/dfa/&quot;&gt;http://bjoern.hoehrmann.de/utf-8/decoder/dfa/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Integer ASCII value to character in bash using printf&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/890262/integer-ascii-value-to-character-in-bash-using-printf&quot;&gt;https://stackoverflow.com/questions/890262/integer-ascii-value-to-character-in-bash-using-printf&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Find the best font for rendering a [Unicode] code point&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/162305/find-the-best-font-for-rendering-a-codepoint/393740#393740&quot;&gt;https://unix.stackexchange.com/questions/162305/find-the-best-font-for-rendering-a-codepoint/393740#393740&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;U+2620 Skull and Crossbones&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://codepoints.net/U+2620&quot;&gt;https://codepoints.net/U+2620&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode Check Mark (U+2713) Font Support (U+2713)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.fileformat.info/info/unicode/char/2713/fontsupport.htm&quot;&gt;https://www.fileformat.info/info/unicode/char/2713/fontsupport.htm&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode Character “ỗ” (U+1ED7) - Name: Latin Small Letter O with Circumflex and Tilde&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.compart.com/en/unicode/U+1ED7&quot;&gt;https://www.compart.com/en/unicode/U+1ED7&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode Character “顠” (U+9860) - Name: CJK Unified Ideograph-9860&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.compart.com/en/unicode/U+9860&quot;&gt;https://www.compart.com/en/unicode/U+9860&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Encoding Problem Table&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://string-functions.com/encodingtable.aspx?encoding=65001&amp;amp;decoding=20127&quot;&gt;https://string-functions.com/encodingtable.aspx?encoding=65001&amp;amp;decoding=20127&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;What happens if you encode a character with one encoding and then try to 
decode with another? This is often the case when you have a mix of 
operating systems and/or internationalization requirements.  Also, this 
tends to be a problem with web frameworks where the code page can be set 
in the http header or in the http head section.  Selecting the wrong 
encoding (code page) may display some characters correctly but others 
will be scrambled.  The first 256 characters in a mixed selection of 
encodings are displayed below.  Encoding a text with Unicode (UTF-8) and 
decoding with US-ASCII will sometimes produce strange characters. 
Characters may display as a box denoting binary data, another character 
or even several other characters.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;The Universal Coded Character Set (UCS, Unicode)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Universal_Coded_Character_Set&quot;&gt;https://en.wikipedia.org/wiki/Universal_Coded_Character_Set&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Squinting at ASCII on Linux&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.networkworld.com/article/3244135/squinting-at-ascii-on-linux.html&quot;&gt;https://www.networkworld.com/article/3244135/squinting-at-ascii-on-linux.html&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Multilingual form encoding - W3C Internationalization&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.w3.org/International/questions/qa-forms-utf-8&quot;&gt;https://www.w3.org/International/questions/qa-forms-utf-8&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Search for Unicode characters&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unicode-search.net/&quot;&gt;https://unicode-search.net/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode to Bytes Converter - World’s Simplest Unicode Tool&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://onlineunicodetools.com/convert-unicode-to-bytes&quot;&gt;https://onlineunicodetools.com/convert-unicode-to-bytes&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/&quot;&gt;https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Introduction to Unicode and UTF-8&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://flaviocopes.com/unicode/&quot;&gt;https://flaviocopes.com/unicode/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UTFs - IBM Db2 for z/OS Documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/docs/en/db2-for-zos/12?topic=unicode-utfs&quot;&gt;https://www.ibm.com/docs/en/db2-for-zos/12?topic=unicode-utfs&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Endianness - IBM Db2 for z/OS Documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/docs/en/db2-for-zos/12?topic=data-endianness&quot;&gt;https://www.ibm.com/docs/en/db2-for-zos/12?topic=data-endianness&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UTF-8, UTF-16, UTF-32 &amp;amp; BOM - Unicode.org FAQ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://unicode.org/faq/utf_bom.html&quot;&gt;http://unicode.org/faq/utf_bom.html&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Forms of Unicode&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://icu-project.org/docs/papers/forms_of_unicode/&quot;&gt;https://icu-project.org/docs/papers/forms_of_unicode/&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;How to find UTF-8 reference of a composite unicode character - Stack Overflow&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/30733035/how-to-find-utf-8-reference-of-a-composite-unicode-character#30733559&quot;&gt;https://stackoverflow.com/questions/30733035/how-to-find-utf-8-reference-of-a-composite-unicode-character#30733559&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Normalization Browser - ICU (International Components for Unicode)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://icu4c-demos.unicode.org/icu-bin/nbrowser&quot;&gt;https://icu4c-demos.unicode.org/icu-bin/nbrowser&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Canonically Equivalent Shortest Form&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://icu.unicode.org/design/normalizing-to-shortest-form&quot;&gt;https://icu.unicode.org/design/normalizing-to-shortest-form&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Character Normalization in IETF Protocols&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://datatracker.ietf.org/doc/html/draft-duerst-i18n-norm-04&quot;&gt;https://datatracker.ietf.org/doc/html/draft-duerst-i18n-norm-04&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Globalization Gotchas&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.macchiato.com/unicode/globalization-gotchas&quot;&gt;http://www.macchiato.com/unicode/globalization-gotchas&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;What is NFC?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.macchiato.com/unicode/nfc-faq&quot;&gt;http://www.macchiato.com/unicode/nfc-faq&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Some gotchas about Unicode that EVERY programmer should know&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://nukep.github.io/progblog/2015/02/26/some-gotchas-about-unicode-that-every-programmer-should-know.html#characters-that-appear-the-same-might-not-test-equal&quot;&gt;https://nukep.github.io/progblog/2015/02/26/some-gotchas-about-unicode-that-every-programmer-should-know.html#characters-that-appear-the-same-might-not-test-equal&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Can we use base 16, and not 85, for ASCII charset representations?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://lists.freedesktop.org/archives/fontconfig/2013-September/004915.html&quot;&gt;https://lists.freedesktop.org/archives/fontconfig/2013-September/004915.html&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;UTF-8 and Unicode FAQ for Unix/Linux&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cl.cam.ac.uk/~mgk25/unicode.html&quot;&gt;https://www.cl.cam.ac.uk/~mgk25/unicode.html&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;In bash, how can I convert a Unicode Code Point [0-9A-F] into a printable character?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/12273/in-bash-how-can-i-convert-a-unicode-codepoint-0-9a-f-into-a-printable-charact&quot;&gt;https://unix.stackexchange.com/questions/12273/in-bash-how-can-i-convert-a-unicode-codepoint-0-9a-f-into-a-printable-charact&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Unicode List of Control characters to paste as seen in Notepad++ re those funny characters&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://metadataconsulting.blogspot.com/2019/06/Unicode-List-of-Control-characters-to-paste-as-seen-in-Notepad-re-those-funny-characters.html&quot;&gt;http://metadataconsulting.blogspot.com/2019/06/Unicode-List-of-Control-characters-to-paste-as-seen-in-Notepad-re-those-funny-characters.html&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 06 Nov 2021 21:03:22 -0700</pubDate>
        <link>http://localhost:4000/xterm/font/unicode/utf-8/unix/x11/fontconfig/locale/2021/11/06/xterm-font-unicode-utf8-characters.html</link>
        <guid isPermaLink="true">http://localhost:4000/xterm/font/unicode/utf-8/unix/x11/fontconfig/locale/2021/11/06/xterm-font-unicode-utf8-characters.html</guid>
        
        
        <category>xterm</category>
        
        <category>font</category>
        
        <category>unicode</category>
        
        <category>utf-8</category>
        
        <category>unix</category>
        
        <category>x11</category>
        
        <category>fontconfig</category>
        
        <category>locale</category>
        
      </item>
    
      <item>
        <title>Use SSH Public/Private RSA or DSA key (SSH Passwordless Operation)</title>
        <description>&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;
In code excerpts and examples, the long lines are folded and then 
indented to make sure they fit the page.&lt;/p&gt;

&lt;p&gt;Components of SSH Used:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ssh-keygen(1) – authentication key generation, management and conversion&lt;/li&gt;
  &lt;li&gt;ssh-agent(1)  – authentication agent&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Local environment: bash shell, Red Hat Enterprise Linux 7.3 64-bit, 
user’s home directory: /web.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nv&quot;&gt;$$&lt;/span&gt;
  PID TTY      STAT   TIME COMMAND
11123 pts/1    Ss     0:00 &lt;span class=&quot;nt&quot;&gt;-bash&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/redhat-release
Red Hat Enterprise Linux Server release 7.3 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Maipo&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;arch
&lt;/span&gt;x86_64

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;
Linux local.example 3.10.0-514.el7.x86_64 &lt;span class=&quot;c&quot;&gt;#1 SMP&lt;/span&gt;
  Wed Oct 19 11:24:13 EDT 2016 x86_64 x86_64 x86_64
  GNU/Linux

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;user1 /etc/passwd
user1:x:1000:48::/web:/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before setting up passwordless SSH, you are prompted for a password when 
logging in to the remote system:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh user1@remote.example
Password:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;generating-the-key-pair&quot;&gt;Generating the Key Pair&lt;/h2&gt;

&lt;p&gt;The first step is to create your public- and 
private-key pair on your local machine.&lt;/p&gt;

&lt;p&gt;The following command creates a 4,096-bit RSA key pair 
and prompts you for a passphrase (which you can leave blank).&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh-keygen &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; rsa &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; 4096
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output (the key fingerprint obfuscated):&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Generating public/private rsa key pair.
Enter file &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;which to save the key &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/web/.ssh/id_rsa&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
Enter passphrase &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;empty &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;no passphrase&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
Enter same passphrase again:
Your identification has been saved &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; /web/.ssh/id_rsa.
Your public key has been saved &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; /web/.ssh/id_rsa.pub.
The key fingerprint is:
ef:94:ab:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd user1@local.example
The key&lt;span class=&quot;s1&quot;&gt;&apos;s randomart image is:
---- snip ----
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can place the public key file in any account on any remote machine 
running the SSH server (deamon), usually named &lt;em&gt;sshd&lt;/em&gt;.  Your private key 
on the local machine allows you access to the remote machines.&lt;/p&gt;

&lt;p&gt;To allow access to an account on a remote system, place the content of 
the public key file from the local system (~/.ssh/id_rsa.pub) in 
~/.ssh/authorized_keys file on the remote system.  The file contains one 
public key per line in its  ASCII representation.  If the file does not 
exist, simply make a copy of your public key file (from the local system).&lt;/p&gt;

&lt;p&gt;If the account on the remote machine doesn’t have ~/.ssh directory, 
create it by running the following on the remote machine:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; ~/.ssh
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;0700 ~/.ssh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the following command on your local machine:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;scp ~/.ssh/id_rsa.pub user1@remote.example:.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you need to add a second key, append it to the file.&lt;/p&gt;

&lt;p&gt;On the remote machine:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;0600 ~/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After you’ve set up passwordless SSH, logging in from the local machine 
to the remote system is direct, that is, without being prompted for 
the password:&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh user1@remote.example

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hostname
&lt;/span&gt;remote.example
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 02 Oct 2021 20:53:02 -0700</pubDate>
        <link>http://localhost:4000/ssh/unix/sysadmin/2021/10/02/ssh-passwordless.html</link>
        <guid isPermaLink="true">http://localhost:4000/ssh/unix/sysadmin/2021/10/02/ssh-passwordless.html</guid>
        
        
        <category>ssh</category>
        
        <category>unix</category>
        
        <category>sysadmin</category>
        
      </item>
    
      <item>
        <title>Store Your Dotfiles in a Bare Git Repository in Bitbucket</title>
        <description>&lt;p&gt;###&lt;/p&gt;

&lt;p&gt;OS: Mac OS X 10.9.5&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ printf &quot;$HOME\n&quot;
/Users/dusko

$ printf &quot;$SHELL\n&quot;
/bin/zsh

$ git init --bare $HOME/.cfg
Initialized empty Git repository in /Users/dusko/.cfg/

$ ls -ld /Users/dusko/.cfg
drwxr-xr-x  9 dusko  staff  306 22 May 15:26 /Users/dusko/.cfg

$ which git
/usr/local/bin/git

$ whereis git
/usr/bin/git

$ git --version
git version 2.6.1

$ /usr/local/bin/git --version
git version 2.6.1

$ /usr/bin/git --version
git version 1.9.5 (Apple Git-50.3)

$ ls -lh .zshrc*
lrwxr-xr-x  1 dusko  staff    35B 12 Oct  2015 .zshrc -&amp;gt; /Users/dusko/.zprezto/runcoms/zshrc
... ... ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Login into your Bitbucket account.
In Bitbucket web interface: Repositories &amp;gt; Create repository
Repository name: cfg, Access level: This is a private repository, 
Repository type: Git&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cp /Users/dusko/.zprezto/runcoms/zshrc /Users/dusko/.zprezto/runcoms/zshrc.2016-05-22_1530.bak

$ printf &quot;\n&quot; &amp;gt;&amp;gt; /Users/dusko/.zprezto/runcoms/zshrc
$ printf &quot;alias cfg=&apos;/usr/local/bin/git --git-dir=$HOME/.cfg/ --work-tree=$HOME&apos;\n&quot; &amp;gt;&amp;gt; /Users/dusko/.zprezto/runcoms/zshrc

$ whereis diff
/usr/bin/diff

$ /usr/bin/diff --unified=0 /Users/dusko/.zprezto/runcoms/zshrc.2016-05-22_1530.bak /Users/dusko/.zprezto/runcoms/zshrc
--- /Users/dusko/.zprezto/runcoms/zshrc.2016-05-22_1530.bak     2016-05-22 15:36:26.000000000 -0700
+++ /Users/dusko/.zprezto/runcoms/zshrc 2016-05-22 19:36:32.000000000 -0700
@@ -125,0 +126,2 @@
+
+alias cfg=&apos;/usr/local/bin/git --git-dir=/Users/dusko/.cfg/ --work-tree=/Users/dusko&apos;

$ pwd
/Users/dusko

$ cfg status
On branch master

Initial commit

nothing to commit (create/copy files and use &quot;git add&quot; to track)

$ which cfg
cfg: aliased to /usr/local/bin/git --git-dir=/Users/dusko/.cfg/ --work-tree=/Users/dusko

$ printf &quot;.cfg\n&quot; &amp;gt; .gitignore

$ git clone --bare https://bitbucket.org/duskop/cfg.git $HOME/.cfg
fatal: destination path &apos;/Users/dusko/.cfg&apos; already exists and is not an empty directory.

$ rm -rf ~/.cfg

$ git clone --separate-git-dir=$HOME/.cfg https://bitbucket.org/duskop/cfg.git cfg-tmp
Cloning into &apos;cfg-tmp&apos;...
Username for &apos;https://bitbucket.org&apos;: duskop
Password for &apos;https://duskop@bitbucket.org&apos;: 
warning: You appear to have cloned an empty repository.
Checking connectivity... done.

$ ls -ld ~/.cfg
drwxr-xr-x  9 dusko  staff  306 22 May 17:26 /Users/dusko/.cfg

$ cfg status
On branch master

Initial commit

Untracked files:
  (use &quot;git add &amp;lt;file&amp;gt;...&quot; to include in what will be committed)

    ... ... ... 
    ... ... ... 
    .gitignore
    ... ... ... 
    .mutt
    ... ... ... 
    .vimrc
    ... ... ... 


nothing added to commit but untracked files present (use &quot;git add&quot; to track)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cfg add .vimrc
$ cfg commit -m &quot;Add vimrc&quot;
[master (root-commit) 7afb825] Add vimrc
 Committer: Dusko Pijetlovic &amp;lt;dusko@Duskos-MacBook-Pro.local&amp;gt;
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 337 insertions(+)
 create mode 100644 .vimrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cfg status
On branch master
Your branch is based on &apos;origin/master&apos;, but the upstream is gone.
  (use &quot;git branch --unset-upstream&quot; to fixup)
Untracked files:
  (use &quot;git add &amp;lt;file&amp;gt;...&quot; to include in what will be committed)

    ... ... ...
    ... ... ...

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cfg push
warning: push.default is unset; its implicit value has changed in
Git 2.0 from &apos;matching&apos; to &apos;simple&apos;. To squelch this message
and maintain the traditional behavior, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

When push.default is set to &apos;matching&apos;, git will push local branches
to the remote branches that already exist with the same name.

Since Git 2.0, Git defaults to the more conservative &apos;simple&apos;
behavior, which only pushes the current branch to the corresponding
remote branch that &apos;git pull&apos; uses to update the current branch.

See &apos;git help config&apos; and search for &apos;push.default&apos; for further information.
(the &apos;simple&apos; mode was introduced in Git 1.7.11. Use the similar mode
&apos;current&apos; instead of &apos;simple&apos; if you sometimes use older versions of Git)

Username for &apos;https://bitbucket.org&apos;: duskop
Password for &apos;https://duskop@bitbucket.org&apos;: 
Counting objects: 3, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 6.57 KiB | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://bitbucket.org/duskop/cfg.git
 * [new branch]      master -&amp;gt; master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Log in your Bitbucket account and check whether sync worked with 
your remote repository.&lt;/p&gt;

&lt;h4 id=&quot;references&quot;&gt;References&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://news.ycombinator.com/item&amp;#63;id=11070797&quot;&gt;Ask HN: What do you use to manage dotfiles?&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://developer.atlassian.com/blog/2016/02/best-way-to-store-dotfiles-git-bare-repo/&quot;&gt;The best way to store dotfiles: A bare Git repository&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 13 Mar 2017 18:14:21 -0700</pubDate>
        <link>http://localhost:4000/dotfiles/git/applemacosx/versioncontrol/2017/03/13/store-dotfiles-in-bitbucket.html</link>
        <guid isPermaLink="true">http://localhost:4000/dotfiles/git/applemacosx/versioncontrol/2017/03/13/store-dotfiles-in-bitbucket.html</guid>
        
        
        <category>dotfiles</category>
        
        <category>git</category>
        
        <category>applemacosx</category>
        
        <category>versioncontrol</category>
        
      </item>
    
      <item>
        <title>Setup Grav CMS on NetBSD 7 VM in VirtualBox</title>
        <description>&lt;p&gt;On the host OS:&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
createvm &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--ostype&lt;/span&gt; NetBSD_64 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; NetBSDWeb &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--register&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
modifyvm NetBSDWeb &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--memory&lt;/span&gt; 2048 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--vram&lt;/span&gt; 32 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--cpus&lt;/span&gt; 1 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--audio&lt;/span&gt; coreaudio &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--audiocontroller&lt;/span&gt; ac97 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--biosbootmenu&lt;/span&gt; messageandmenu &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--clipboard&lt;/span&gt; bidirectional &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--usb&lt;/span&gt; on &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--usbehci&lt;/span&gt; on &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--nic1&lt;/span&gt; nat &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--natpf1&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;guestssh,tcp,,5555,,22&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--natpf1&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;guesthttp,tcp,,7777,,80&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--nictype1&lt;/span&gt; 82540EM
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
storagectl NetBSDWeb &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; IDE &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--add&lt;/span&gt; ide &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--controller&lt;/span&gt; PIIX4 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--bootable&lt;/span&gt; on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
createhd &lt;span class=&quot;nt&quot;&gt;--filename&lt;/span&gt; /Users/dusko/VirtualBox&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;VMs/NetBSDWeb/NetBSDWeb.vdi &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--size&lt;/span&gt; 20480 &lt;span class=&quot;nt&quot;&gt;--format&lt;/span&gt; VDI

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
storageattach NetBSDWeb &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--storagectl&lt;/span&gt; IDE &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--port&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;--device&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;--type&lt;/span&gt; hdd &lt;span class=&quot;nt&quot;&gt;--medium&lt;/span&gt; /Users/dusko/VirtualBox&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;VMs/NetBSDWeb/NetBSDWeb.vdi

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
storageattach NetBSDWeb &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--storagectl&lt;/span&gt; IDE &lt;span class=&quot;nt&quot;&gt;--port&lt;/span&gt; 0 &lt;span class=&quot;nt&quot;&gt;--device&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;--type&lt;/span&gt; dvddrive &lt;span class=&quot;nt&quot;&gt;--medium&lt;/span&gt; /Users/dusko/NetBSD-7.0-amd64.iso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;VBoxManage startvm NetBSDWeb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1. Install NetBSD
&amp;gt;a: Installation messages in English
Keyboard type:  &amp;gt;a: unchanged
&amp;gt;a: Install NetBSD to hard disk
Shall we continue?  &amp;gt;b: Yes
Available disks   &amp;gt;a: wd0 (20G, VBOX HARDDISK)
&amp;gt;a: This is the correct geometry
&amp;gt;b: Use the entire disk
Do you want to install the NetBSD bootcode?  &amp;gt;a: Yes
&amp;gt;b: Use existing partition sizes
&amp;gt;x: Partition sizes ok
Please enter a name for your NetBSD disk [VBOX HARDDISK  ]:  &amp;lt;enter&amp;gt;
Shall we continue?  &amp;gt;b: Yes
Bootblocks selection  &amp;gt;a: Use BIOS console
&amp;gt;x: Exit
&amp;gt;a: Full installation
Install from  &amp;gt;a: CD-ROM / DVD / install image media
&amp;gt;Hit enter to continue
&amp;gt;a: Configure network
Available interfaces  &amp;gt;a: wm0
Network media type [autoselect]: &amp;lt;enter&amp;gt;
Perform autoconfiguration?  &amp;gt;a: Yes
Your host name:  nbsdweb

The following are the values you entered.
DNS Domain:             telus
Host Name:              nbsdweb
Nameserver:             84.200.69.80
Primary Interface:      wm0
Media type:             autoselect
Host IP:                10.0.2.15
Netmask:                255.255.255.0
IPv4 Gateway:           10.0.2.2
IPv6 autoconf:

Are they OK?  &amp;gt;a: Yes

Is the network information you entered accurate for this machine
in regular operation and do you want it installed in /etc?
&amp;gt;a: Yes

&amp;gt;b: Timezone
&amp;gt;America &amp;gt; America/Vancouver
&amp;gt;Exit

&amp;gt;d: Change root password
&amp;gt;a: Yes
New password: ******************
Retype new password: ******************

&amp;gt;e: Enable installation of binary packages
&amp;gt;a: Host                   ftp.NetBSD.org
 b: Base directory         pub/pkgsrc/packages/NetBSD
 c: Package directory      /amd64/7.0/All
 d: User                   ftp
 e: Password 
 f: Proxy
 g: Additional packages
 h: Configure network
 i: Quit installing binary pkgs
 x: Install pkgin and update package summary

&amp;gt;x: Install pkgin and update package summary
&amp;gt;Hit enter to continue

&amp;gt;g: Enable sshd
&amp;gt;h: Enable ntpd
&amp;gt;i: Run ntpdate at boot

&amp;gt;o: Add a user
8 character username to add: dusko
Do you wish to add this user to group wheel?
&amp;gt;a: Yes
User shell  &amp;gt;a: /bin/sh
New password:
Retype new password:

&amp;gt;x: Finished configuring
&amp;gt;Hit enter to continue

&amp;gt;x: Exit Install System
# shutdown -p now 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the host OS:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ VBoxManage storageattach NetBSDWeb --storagectl IDE --port 0 --device 1 --medium emptydrive
$ VBoxManage startvm NetBSDWeb

$ ssh -p 5555 dusko@localhost
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ su
# cd /usr &amp;amp;&amp;amp; cvs -q -z2 -d anoncvs@anoncvs.NetBSD.org:/cvsroot checkout -r pkgsrc-2015Q4 -P pkgsrc &amp;gt; /home/dusko/pkgsrc_via_cvs.txt 2&amp;gt;&amp;amp;1

# echo &quot;# Recommended CVS configuration file from the pkgsrc guide&quot; &amp;gt; /root/.cvsrc
# echo &quot;#     http://www.netbsd.org/docs/pkgsrc/getting.html#getting-via-cvs&quot; &amp;gt;&amp;gt; /root/.cvsrc
# echo &quot;cvs -q -z2&quot; &amp;gt;&amp;gt; /root/.cvsrc
# echo &quot;checkout -P&quot; &amp;gt;&amp;gt; /root/.cvsrc
# echo &quot;update -dP&quot; &amp;gt;&amp;gt; /root/.cvsrc
# echo &quot;diff -upN&quot; &amp;gt;&amp;gt; /root/.cvsrc
# echo &quot;rdiff -u&quot; &amp;gt;&amp;gt; /root/.cvsrc
# echo &quot;release -d&quot; &amp;gt;&amp;gt; /root/.cvsrc

# cd /usr/pkgsrc &amp;amp;&amp;amp; cvs update -dP

# export PKG_PATH=&quot;http://ftp.NetBSD.org/pub/pkgsrc/packages/$(uname -s)/$(uname -m)/$(uname -r)/All&quot; 

# ftp -o - `echo $PKG_PATH` | grep -i php- | grep 5 
&amp;lt;a href=&quot;ap22-suphp-0.7.2.tgz&quot;&amp;gt;ap22-suphp-0.7.2.tgz&amp;lt;/a&amp;gt;                     12-Jan-2016 16:08             75kB
&amp;lt;a href=&quot;asp2php-0.77.3.tgz&quot;&amp;gt;asp2php-0.77.3.tgz&amp;lt;/a&amp;gt;                       10-Jan-2016 12:35             44kB
&amp;lt;a href=&quot;mserv-php-0.90nb1.tgz&quot;&amp;gt;mserv-php-0.90nb1.tgz&amp;lt;/a&amp;gt;                    09-Mar-2016 15:54             16kB
&amp;lt;a href=&quot;p5-PHP-Serialization-0.34nb5.tgz&quot;&amp;gt;p5-PHP-Serialization-0.34nb5.tgz&amp;lt;/a&amp;gt;         04-Jan-2016 14:54              8kB
&amp;lt;a href=&quot;php-5.5.33.tgz&quot;&amp;gt;php-5.5.33.tgz&amp;lt;/a&amp;gt;                           08-Mar-2016 20:12           5489kB
&amp;lt;a href=&quot;php-5.6.19.tgz&quot;&amp;gt;php-5.6.19.tgz&amp;lt;/a&amp;gt;                           08-Mar-2016 20:16           5543kB


# pkg_add -v php-5.6.19

# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep gd 
&amp;lt;a href=&quot;php55-gd-5.5.33.tgz&quot;&amp;gt;php55-gd-5.5.33.tgz&amp;lt;/a&amp;gt;                      08-Mar-2016 20:18            146kB
&amp;lt;a href=&quot;php56-gd-5.6.19.tgz&quot;&amp;gt;php56-gd-5.6.19.tgz&amp;lt;/a&amp;gt;                      08-Mar-2016 20:28            146kB
&amp;lt;a href=&quot;php70-gd-7.0.4.tgz&quot;&amp;gt;php70-gd-7.0.4.tgz&amp;lt;/a&amp;gt;                       09-Mar-2016 21:46            145kB

# pkg_add -v php56-gd

# cp /usr/pkg/etc/php.ini /usr/pkg/etc/php.ini.original.bak
# grep -n extension\= /usr/pkg/etc/php.ini
854:;   extension=modulename.extension
... ... ...
... ... ...
912:;extension=php_xsl.dll

# vi +854 /usr/pkg/etc/php.ini
# sed -n 868,872p /usr/pkg/etc/php.ini
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Dynamic Extensions required for Grav ;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
extension=gd.so


# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:02:32.000000000 -0700
@@ -867,0 +868,5 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+


# printf &quot;Check whether gd.so is loading fine.    \n\n&quot;
Check whether gd.so is loading fine.    

# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies

# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep curl 
&amp;lt;a href=&quot;php55-curl-5.5.33.tgz&quot;&amp;gt;php55-curl-5.5.33.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 20:34             35kB
&amp;lt;a href=&quot;php56-curl-5.6.19.tgz&quot;&amp;gt;php56-curl-5.6.19.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 20:50             35kB
&amp;lt;a href=&quot;php70-curl-7.0.4.tgz&quot;&amp;gt;php70-curl-7.0.4.tgz&amp;lt;/a&amp;gt;                     09-Mar-2016 21:53             34kB

# pkg_add -v php56-curl

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:09:54.000000000 -0700
@@ -867,0 +868,6 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+

# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies


# ftp -o - `echo $PKG_PATH` | grep -i php | grep crypt 
&amp;lt;a href=&quot;php55-mcrypt-5.5.33.tgz&quot;&amp;gt;php55-mcrypt-5.5.33.tgz&amp;lt;/a&amp;gt;                  08-Mar-2016 20:32             18kB
&amp;lt;a href=&quot;php56-mcrypt-5.6.19.tgz&quot;&amp;gt;php56-mcrypt-5.6.19.tgz&amp;lt;/a&amp;gt;                  08-Mar-2016 21:23             18kB
&amp;lt;a href=&quot;php70-mcrypt-7.0.4.tgz&quot;&amp;gt;php70-mcrypt-7.0.4.tgz&amp;lt;/a&amp;gt;                   09-Mar-2016 22:22             17kB

# pkg_add -v php56-mcrypt
# vi +872 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:18:08.000000000 -0700
@@ -867,0 +868,7 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies


# pkg_add -v openssl


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep zip 
&amp;lt;a href=&quot;php55-zip-5.5.33.tgz&quot;&amp;gt;php55-zip-5.5.33.tgz&amp;lt;/a&amp;gt;                     08-Mar-2016 20:33             46kB
&amp;lt;a href=&quot;php56-zip-5.6.19.tgz&quot;&amp;gt;php56-zip-5.6.19.tgz&amp;lt;/a&amp;gt;                     08-Mar-2016 20:45             57kB
&amp;lt;a href=&quot;php70-zip-7.0.4.tgz&quot;&amp;gt;php70-zip-7.0.4.tgz&amp;lt;/a&amp;gt;                      09-Mar-2016 21:51             63kB


# pkg_add -v php56-zip
# vi +873 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:21:57.000000000 -0700
@@ -867,0 +868,8 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep mbstring
&amp;lt;a href=&quot;php55-mbstring-5.5.33.tgz&quot;&amp;gt;php55-mbstring-5.5.33.tgz&amp;lt;/a&amp;gt;                08-Mar-2016 20:29            664kB
&amp;lt;a href=&quot;php56-mbstring-5.6.19.tgz&quot;&amp;gt;php56-mbstring-5.6.19.tgz&amp;lt;/a&amp;gt;                08-Mar-2016 20:35            664kB


# pkg_add -v php56-mbstring
# vi +874 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:24:46.000000000 -0700
@@ -867,0 +868,9 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep xml 
&amp;lt;a href=&quot;php55-xmlrpc-5.5.33.tgz&quot;&amp;gt;php55-xmlrpc-5.5.33.tgz&amp;lt;/a&amp;gt;                  08-Mar-2016 21:25             43kB
&amp;lt;a href=&quot;php56-xmlrpc-5.6.19.tgz&quot;&amp;gt;php56-xmlrpc-5.6.19.tgz&amp;lt;/a&amp;gt;                  09-Mar-2016 00:50             43kB


# pkg_add -v php56-xmlrpc
# vi +875 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:27:01.000000000 -0700
@@ -867,0 +868,10 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep apcu 
&amp;lt;a href=&quot;php55-apcu-4.0.7.tgz&quot;&amp;gt;php55-apcu-4.0.7.tgz&amp;lt;/a&amp;gt;                     09-Mar-2016 05:57             51kB
&amp;lt;a href=&quot;php56-apcu-4.0.7.tgz&quot;&amp;gt;php56-apcu-4.0.7.tgz&amp;lt;/a&amp;gt;                     09-Mar-2016 06:01             51kB

# pkg_add -v php56-apcu
# vi +876 /usr/pkg/etc/php.ini


#  diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:30:25.000000000 -0700
@@ -867,0 +868,11 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep opcache 
&amp;lt;a href=&quot;php55-opcache-5.5.33.tgz&quot;&amp;gt;php55-opcache-5.5.33.tgz&amp;lt;/a&amp;gt;                 08-Mar-2016 21:26             67kB
&amp;lt;a href=&quot;php55-zendopcache-7.0.5.tgz&quot;&amp;gt;php55-zendopcache-7.0.5.tgz&amp;lt;/a&amp;gt;              09-Mar-2016 05:57             70kB
&amp;lt;a href=&quot;php56-opcache-5.6.19.tgz&quot;&amp;gt;php56-opcache-5.6.19.tgz&amp;lt;/a&amp;gt;                 09-Mar-2016 01:12             73kB


# pkg_add -v php56-opcache
# vi +877 /usr/pkg/etc/php.ini


# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:32:44.000000000 -0700
@@ -867,0 +868,12 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies
    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep xcache 
&amp;lt;a href=&quot;php55-xcache-3.2.0nb1.tgz&quot;&amp;gt;php55-xcache-3.2.0nb1.tgz&amp;lt;/a&amp;gt;                09-Mar-2016 06:18            116kB
&amp;lt;a href=&quot;php56-xcache-3.2.0nb1.tgz&quot;&amp;gt;php56-xcache-3.2.0nb1.tgz&amp;lt;/a&amp;gt;                09-Mar-2016 06:18            117kB


# pkg_add -v php56-xcache
# vi +878 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:36:18.000000000 -0700
@@ -867,0 +868,13 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+extension=xcache.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies
    with XCache v3.2.0, Copyright (c) 2005-2014, by mOo
    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies
    with XCache Optimizer v3.2.0, Copyright (c) 2005-2014, by mOo
    with XCache Cacher v3.2.0, Copyright (c) 2005-2014, by mOo
    with XCache Coverager v3.2.0, Copyright (c) 2005-2014, by mOo


# ftp -o - `echo $PKG_PATH` | grep -i yaml
... ... ...
... ... ...
&amp;lt;a href=&quot;libyaml-0.1.6nb1.tgz&quot;&amp;gt;libyaml-0.1.6nb1.tgz&amp;lt;/a&amp;gt;                     30-Dec-2015 18:04            115kB
... ... ...
... ... ...


# pkg_add -v libyaml


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep xdebug 
&amp;lt;a href=&quot;php55-xdebug-2.3.3.tgz&quot;&amp;gt;php55-xdebug-2.3.3.tgz&amp;lt;/a&amp;gt;                   09-Mar-2016 05:59            101kB
&amp;lt;a href=&quot;php56-xdebug-2.3.3.tgz&quot;&amp;gt;php56-xdebug-2.3.3.tgz&amp;lt;/a&amp;gt;                   09-Mar-2016 06:02            101kB


# pkg_add -v php56-xdebug
# vi +880 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:43:25.000000000 -0700
@@ -867,0 +868,14 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+extension=xcache.so
+zend_extension=xdebug.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies
    with XCache v3.2.0, Copyright (c) 2005-2014, by mOo
    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies
    with Xdebug v2.3.3, Copyright (c) 2002-2015, by Derick Rethans
    with XCache Optimizer v3.2.0, Copyright (c) 2005-2014, by mOo
    with XCache Cacher v3.2.0, Copyright (c) 2005-2014, by mOo
    with XCache Coverager v3.2.0, Copyright (c) 2005-2014, by mOo


# printf &quot;PEAR (PHP Extension and Application Repository) has the PHP Yaml module.    \n\n&quot;
PEAR (PHP Extension and Application Repository) has the PHP Yaml module.    

# printf &quot;PEAR includes PECL (PHP Extension Community Library).     \n\n&quot;
PEAR includes PECL (PHP Extension Community Library).     


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep pear
&amp;lt;a href=&quot;php55-pear-1.10.1.tgz&quot;&amp;gt;php55-pear-1.10.1.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 20:17            364kB
... ... ...
... ... ...
&amp;lt;a href=&quot;php56-pear-1.10.1.tgz&quot;&amp;gt;php56-pear-1.10.1.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 20:18            364kB
... ... ...
... ... ...


# pkg_add -v php56-pear


# grep -n include_path /usr/pkg/etc/php.ini | grep pkg | grep php
710:include_path = &quot;.:/usr/pkg/lib/php&quot;


# which pear
/usr/pkg/bin/pear
# whereis pear
/usr/pkg/bin/pear

# which pecl
/usr/pkg/bin/pecl
# whereis pecl
/usr/pkg/bin/pecl


# pear search yaml 
Retrieving data...0%
no packages found that match pattern &quot;yaml&quot;, for channel pear.php.net.


# pecl search yaml 
Retrieving data...0%
Matched packages, channel pecl.php.net:
=======================================
Package Stable/(Latest) Local
yaml    2.0.0RC7 (beta)       YAML-1.1 parser and emitter


# pecl install yaml
downloading yaml-1.2.0.tar ...
Starting to download yaml-1.2.0.tar (230,400 bytes)
.................................................done: 230,400 bytes
9 source files, building
running: phpize
Configuring for:
PHP Api Version:         20131106
Zend Module Api No:      20131226
Zend Extension Api No:   220131226
Cannot find autoconf. Please check your autoconf installation and the
$PHP_AUTOCONF environment variable. Then, rerun this script.

ERROR: `phpize&apos; failed


# ftp -o - `echo $PKG_PATH` | grep -i autoconf 
&amp;lt;a href=&quot;autoconf-2.69nb6.tgz&quot;&amp;gt;autoconf-2.69nb6.tgz&amp;lt;/a&amp;gt;                     30-Dec-2015 17:21            887kB
&amp;lt;a href=&quot;autoconf-archive-2015.02.24.tgz&quot;&amp;gt;autoconf-archive-2015.02.24.tgz&amp;lt;/a&amp;gt;          10-Jan-2016 17:31            546kB
&amp;lt;a href=&quot;autoconf213-2.13nb5.tgz&quot;&amp;gt;autoconf213-2.13nb5.tgz&amp;lt;/a&amp;gt;                  01-Jan-2016 01:20            244kB
&amp;lt;a href=&quot;p5-Config-AutoConf-0.311nb1.tgz&quot;&amp;gt;p5-Config-AutoConf-0.311nb1.tgz&amp;lt;/a&amp;gt;          04-Jan-2016 02:53             36kB


# pkg_add -v autoconf

# pecl install yaml
# vi +881 /usr/pkg/etc/php.ini


# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 13:58:20.000000000 -0700
@@ -867,0 +868,15 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+extension=xcache.so
+zend_extension=xdebug.so
+extension=yaml.so
+


# php -v
PHP 5.6.19 (cli) (built: Mar  8 2016 20:15:11) 
Copyright (c) 1997-2016 The PHP Group
Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies
    with XCache v3.2.0, Copyright (c) 2005-2014, by mOo
    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies
    with Xdebug v2.3.3, Copyright (c) 2002-2015, by Derick Rethans
    with XCache Optimizer v3.2.0, Copyright (c) 2005-2014, by mOo
    with XCache Cacher v3.2.0, Copyright (c) 2005-2014, by mOo
    with XCache Coverager v3.2.0, Copyright (c) 2005-2014, by mOo


# ftp -o - `echo $PKG_PATH` | grep -i php | grep 5 | grep ap 
... ... ...
&amp;lt;a href=&quot;ap22-php56-5.6.19.tgz&quot;&amp;gt;ap22-php56-5.6.19.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 21:23           2719kB
... ... ... 
... ... ... 
&amp;lt;a href=&quot;ap24-php56-5.6.19.tgz&quot;&amp;gt;ap24-php56-5.6.19.tgz&amp;lt;/a&amp;gt;                    09-Mar-2016 06:25           2719kB
... ... ... 
... ... ... 


# pkg_add -v ap24-php56
# cp /usr/pkg/share/examples/rc.d/apache /etc/rc.d/apache
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -w name\= /etc/rc.d/apache
name=&quot;apache&quot;

# cp /etc/rc.conf /etc/rc.conf.original.bak

# printf &quot;apache=YES\n&quot; &amp;gt;&amp;gt; /etc/rc.conf

# diff --unified=0 /etc/rc.conf.original.bak /etc/rc.conf
--- /etc/rc.conf.original.bak   2016-05-07 16:46:04.000000000 -0700
+++ /etc/rc.conf        2016-05-07 16:46:25.000000000 -0700
@@ -29,0 +30 @@
+apache=YES

# /etc/rc.d/apache start
Starting apache.
AH00557: httpd: apr_sockaddr_info_get() failed for nbsdweb.telus
AH00558: httpd: Could not reliably determine the server&apos;s fully qualified domain name, using 127.0.0.1. Set the &apos;ServerName&apos; directive globally to suppress this message

# /etc/rc.d/apache status
apache is running as pid 7367.

# cp /etc/hosts /etc/hosts.original.bak
# vi /etc/hosts

# diff --unified=0 /etc/hosts.original.bak /etc/hosts
--- /etc/hosts.original.bak     2016-05-07 16:52:59.000000000 -0700
+++ /etc/hosts  2016-05-07 16:55:02.000000000 -0700
@@ -14,0 +15 @@
+127.0.0.1              mygravblog.localhost localhost.

# cp /usr/pkg/etc/httpd/httpd.conf /usr/pkg/etc/httpd/httpd.conf.original.bak
# grep -n ServerName /usr/pkg/etc/httpd/httpd.conf 
202:# ServerName gives the name and port that the server uses to identify itself.
208:#ServerName www.example.com:80

# diff --unified=0 /usr/pkg/etc/httpd/httpd.conf.original.bak /usr/pkg/etc/httpd/httpd.conf
--- /usr/pkg/etc/httpd/httpd.conf.original.bak  2016-05-07 16:56:44.000000000 -0700
+++ /usr/pkg/etc/httpd/httpd.conf       2016-05-07 16:58:17.000000000 -0700
@@ -208 +208 @@
-#ServerName www.example.com:80
+ServerName mygravblog.localhost:80

# /etc/rc.d/apache restart

# which nc
# whereis nc

# export PKG_PATH=&quot;http://ftp.NetBSD.org/pub/pkgsrc/packages/$(uname -s)/$(uname -m)/$(uname -r)/All&quot;

# ftp -o - `echo $PKG_PATH` | grep -i netcat
&amp;lt;a href=&quot;gnetcat-0.7.1nb3.tgz&quot;&amp;gt;gnetcat-0.7.1nb3.tgz&amp;lt;/a&amp;gt;                     10-Jan-2016 15:16             33kB
&amp;lt;a href=&quot;netcat-1.10nb3.tgz&quot;&amp;gt;netcat-1.10nb3.tgz&amp;lt;/a&amp;gt;                       05-Jan-2016 13:36             26kB
&amp;lt;a href=&quot;netcat-openbsd-20131208.tgz&quot;&amp;gt;netcat-openbsd-20131208.tgz&amp;lt;/a&amp;gt;              10-Jan-2016 15:05             21kB
&amp;lt;a href=&quot;netcat6-1.0nb3.tgz&quot;&amp;gt;netcat6-1.0nb3.tgz&amp;lt;/a&amp;gt;                       10-Jan-2016 15:05             31kB


# pkg_add -v netcat
# which nc
/usr/pkg/sbin/nc
# whereis nc
/usr/pkg/sbin/nc

# nc -z -v mygravblog.localhost 80
DNS fwd/rev mismatch: mygravblog.localhost != localhost
mygravblog.localhost [127.0.0.1] 80 (http) open


# nc localhost 80
GET / HTTP/1.1
HOST: mygravblog.localhost
&amp;lt;line feed&amp;gt;

** Notes: **
- No OS cursor caret, the connection is open so you just get a blank line waiting for input. 
- Press &amp;lt;enter&amp;gt; twice after the &quot;HOST:&quot;.
- To disconnect, press Ctrl-C (which the shell will display as ^C).


OUTPUT:
HTTP/1.1 200 OK
Date: Sun, 08 May 2016 00:56:38 GMT
Server: Apache/2.4.17 (Unix)
Last-Modified: Fri, 01 Jan 2016 16:32:10 GMT
ETag: &quot;2d-5284850171680&quot;
Accept-Ranges: bytes
Content-Length: 45
Content-Type: text/html

&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;h1&amp;gt;It works!&amp;lt;/h1&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
^C punt!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the host OS, with your web browser, browse to http://localhost:7777, which 
was configured to forward to guest OS’s port 80.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ lynx localhost:7777
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Print from the ‘lynx’ text web browser:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                          It works!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /usr/libexec/locate.updatedb 

# locate mod_php5.so
/usr/pkg/lib/httpd/mod_php5.so


# grep -v ^\# /usr/pkg/etc/httpd/httpd.conf | grep LoadModule
LoadModule authn_file_module lib/httpd/mod_authn_file.so
... ... ...
... ... ...
LoadModule alias_module lib/httpd/mod_alias.so


# grep -n mod_alias.so /usr/pkg/etc/httpd/httpd.conf 
165:LoadModule alias_module lib/httpd/mod_alias.so

# vi +165 /usr/pkg/etc/httpd/httpd.conf 

# diff --unified=0 /usr/pkg/etc/httpd/httpd.conf.original.bak /usr/pkg/etc/httpd/httpd.conf
--- /usr/pkg/etc/httpd/httpd.conf.original.bak  2016-05-07 21:00:34.000000000 -0700
+++ /usr/pkg/etc/httpd/httpd.conf       2016-05-07 20:52:47.000000000 -0700
@@ -165,0 +166,4 @@
+LoadModule php5_module lib/httpd/mod_php5.so
+&amp;lt;FilesMatch \.php$&amp;gt;
+    SetHandler application/x-httpd-php
+&amp;lt;/FilesMatch&amp;gt;
@@ -208 +212 @@
-#ServerName www.example.com:80
+ServerName mygravblog.localhost:80

# /etc/rc.d/apache restart
Stopping apache.
Waiting for PIDS: 2230.
Starting apache.
[Sat May 07 21:11:50.954964 2016] [:crit] [pid 1947:tid 140187566933760] Apache is running a threaded MPM, but your PHP Module is not compiled to be threadsafe.  You need to recompile PHP.
AH00013: Pre-configuration failed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fix: Switch to the prefork MPM, which does not use threads -=&amp;gt; replace mpm_event_module with mpm_prefork_module:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -n mpm /usr/pkg/etc/httpd/httpd.conf 
145:LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
146:#LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
147:#LoadModule mpm_worker_module lib/httpd/mod_mpm_worker.so
468:#Include etc/httpd/httpd-mpm.conf

# grep -n prefork /usr/pkg/etc/httpd/httpd.conf
146:#LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so

# vi +145 /usr/pkg/etc/httpd/httpd.conf

# diff --unified=0 /usr/pkg/etc/httpd/httpd.conf.original.bak /usr/pkg/etc/httpd/httpd.conf
--- /usr/pkg/etc/httpd/httpd.conf.original.bak  2016-05-07 21:00:34.000000000 -0700
+++ /usr/pkg/etc/httpd/httpd.conf       2016-05-07 21:16:06.000000000 -0700
@@ -145,2 +145,2 @@
-LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
-#LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
+#LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
+LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
@@ -165,0 +166,4 @@
+LoadModule php5_module lib/httpd/mod_php5.so
+&amp;lt;FilesMatch \.php$&amp;gt;
+    SetHandler application/x-httpd-php
+&amp;lt;/FilesMatch&amp;gt;
@@ -208 +212 @@
-#ServerName www.example.com:80
+ServerName mygravblog.localhost:80
@@ -464 +468 @@
-#Include etc/httpd/httpd-mpm.conf
+Include etc/httpd/httpd-mpm.conf


# /etc/rc.d/apache status
apache is not running.

# /etc/rc.d/apache restart
apache not running? (check /var/run/httpd.pid).
Starting apache.

# /etc/rc.d/apache status
apache is running as pid 1557.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Vhost Setup&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# grep -n vhosts /usr/pkg/etc/httpd/httpd.conf
486:#Include etc/httpd/httpd-vhosts.conf

# vi +486 /usr/pkg/etc/httpd/httpd.conf

# diff --unified=0 /usr/pkg/etc/httpd/httpd.conf.original.bak /usr/pkg/etc/httpd/httpd.conf
--- /usr/pkg/etc/httpd/httpd.conf.original.bak  2016-05-07 21:00:34.000000000 -0700
+++ /usr/pkg/etc/httpd/httpd.conf       2016-05-07 21:24:00.000000000 -0700
@@ -145,2 +145,2 @@
-LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
-#LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
+#LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
+LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
@@ -165,0 +166,4 @@
+LoadModule php5_module lib/httpd/mod_php5.so
+&amp;lt;FilesMatch \.php$&amp;gt;
+    SetHandler application/x-httpd-php
+&amp;lt;/FilesMatch&amp;gt;
@@ -208 +212 @@
-#ServerName www.example.com:80
+ServerName mygravblog.localhost:80
@@ -464 +468 @@
-#Include etc/httpd/httpd-mpm.conf
+Include etc/httpd/httpd-mpm.conf
@@ -482 +486 @@
-#Include etc/httpd/httpd-vhosts.conf
+Include etc/httpd/httpd-vhosts.conf

# grep -n -i mod_rewrite /usr/pkg/etc/httpd/httpd.conf
170:#LoadModule rewrite_module lib/httpd/mod_rewrite.so

# vi +170 /usr/pkg/etc/httpd/httpd.conf

# diff --unified=0 /usr/pkg/etc/httpd/httpd.conf.original.bak /usr/pkg/etc/httpd/httpd.conf
--- /usr/pkg/etc/httpd/httpd.conf.original.bak  2016-05-07 21:00:34.000000000 -0700
+++ /usr/pkg/etc/httpd/httpd.conf       2016-05-07 23:22:39.000000000 -0700
@@ -145,2 +145,2 @@
-LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
-#LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
+#LoadModule mpm_event_module lib/httpd/mod_mpm_event.so
+LoadModule mpm_prefork_module lib/httpd/mod_mpm_prefork.so
@@ -166 +166,5 @@
-#LoadModule rewrite_module lib/httpd/mod_rewrite.so
+LoadModule php5_module lib/httpd/mod_php5.so
+&amp;lt;FilesMatch \.php$&amp;gt;
+    SetHandler application/x-httpd-php
+&amp;lt;/FilesMatch&amp;gt;
+LoadModule rewrite_module lib/httpd/mod_rewrite.so
@@ -208 +212 @@
-#ServerName www.example.com:80
+ServerName mygravblog.localhost:80
@@ -464 +468 @@
-#Include etc/httpd/httpd-mpm.conf
+Include etc/httpd/httpd-mpm.conf
@@ -482 +486 @@
-#Include etc/httpd/httpd-vhosts.conf
+Include etc/httpd/httpd-vhosts.conf


# grep -n DocumentRoot /usr/pkg/etc/httpd/httpd.conf
232:# DocumentRoot: The directory out of which you will serve your
236:DocumentRoot &quot;/usr/pkg/share/httpd/htdocs&quot;
336:    # access content that does not live under the DocumentRoot.


# cp /usr/pkg/etc/httpd/httpd-vhosts.conf /usr/pkg/etc/httpd/httpd-vhosts.conf.original.bak
# vi /usr/pkg/etc/httpd/httpd-vhosts.conf 

# tail -13 /usr/pkg/etc/httpd/httpd-vhosts.conf
    &amp;lt;Directory /var/www/grav&amp;gt;
        Options Indexes FollowSymLinks MultiViews
        DirectoryIndex index.php
        AllowOverride all
        Require all granted
    &amp;lt;/Directory&amp;gt;

    ServerAdmin webmaster@dummy-host2.example.com
    DocumentRoot &quot;/var/www/grav&quot;
    ServerName mygravblog.localhost
    ErrorLog &quot;/var/log/httpd/mygravblog-error_log&quot;
    CustomLog &quot;/var/log/httpd/mygravblog-access_log&quot; common
&amp;lt;/VirtualHost&amp;gt;


# ls -ld /var/www
drwxr-xr-x  2 root  wheel  512 Sep 25  2015 /var/www

# mkdir -p /var/www/grav
# ls -ld /var/www/grav
drwxr-xr-x  2 root  wheel  512 May  7 21:38 /var/www/grav

# printf &quot;My Grav Blog\n&quot; &amp;gt; /var/www/grav/index.html

# /etc/rc.d/apache restart

# nc localhost 80
GET / HTTP/1.1
HOST: mygravblog.localhost

HTTP/1.1 200 OK
Date: Sun, 08 May 2016 04:47:57 GMT
Server: Apache/2.4.17 (Unix) PHP/5.6.19
Last-Modified: Sun, 08 May 2016 04:41:52 GMT
ETag: &quot;d-5324d4f971480&quot;
Accept-Ranges: bytes
Content-Length: 13
Content-Type: text/html

My Grav Blog
^C punt!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Grav Installation&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rm -i /var/www/grav/index.html
remove &apos;/var/www/grav/index.html&apos;? y

# ftp https://github.com/getgrav/grav/releases/download/1.0.10/grav-admin-v1.0.10.zip

# printf &quot;ftp saved it under name octet-stream. \n\n&quot;
ftp saved it under name octet-stream. 

# mv octet-stream grav-admin-v1.0.10.zip
# file grav-admin-v1.0.10.zip 
grav-admin-v1.0.10.zip: Zip archive data, at least v1.0 to extract

# unzip grav-admin-v1.0.10.zip 
... ... ...
... ... ...

# rmdir /var/www/grav/
# mv grav-admin /var/www/grav

# groups dusko
users wheel

# find /var/www/grav -type d -exec chmod 0775 {} \;
# find /var/www/grav -type f -exec chmod 0664 {} \;
# find /var/www/grav/bin -type f -exec chmod 0774 {} \;

# grep apache /etc/passwd
www:*:1001:1000:apache www user:/nonexistent:/sbin/nologin

# grep 1000 /etc/group 
www:*:1000:


# chown -R dusko:www /var/www/grav

# printf &quot;In order to run Grav&apos;s GPM (Grav Package Manager), you need to add your user to the group of the user running the web server.  \n\n&quot;
In order to run Grav&apos;s GPM (Grav Package Manager), you need to add your user to the group of the user running the web server.  

# usermod -G www dusko
# groups dusko
users wheel www

# exit
$ cd /var/www/grav 

$ bin/gpm index
PHP Fatal error:  Call to undefined function Grav\Common\Config\json_encode() in /var/www/grav/system/src/Grav/Common/Config/CompiledBase.php on line 112
PHP Stack trace:
PHP   1. {main}() /var/www/grav/bin/gpm:0
PHP   2. Pimple\Container-&amp;gt;offsetGet() /var/www/grav/bin/gpm:41
... ... ...
... ... ...


$ su
Password:

# ftp -o - `echo $PKG_PATH` | grep -i php | grep json 
&amp;lt;a href=&quot;php55-json-5.5.33.tgz&quot;&amp;gt;php55-json-5.5.33.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 20:30             19kB
&amp;lt;a href=&quot;php56-json-5.6.19.tgz&quot;&amp;gt;php56-json-5.6.19.tgz&amp;lt;/a&amp;gt;                    08-Mar-2016 20:38             18kB
&amp;lt;a href=&quot;php70-json-7.0.4.tgz&quot;&amp;gt;php70-json-7.0.4.tgz&amp;lt;/a&amp;gt;                     09-Mar-2016 21:49             20kB


# pkg_add -v php56-json

# vi +882 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-07 22:47:58.000000000 -0700
@@ -867,0 +868,16 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+extension=xcache.so
+zend_extension=xdebug.so
+extension=yaml.so
+extension=json.so
+

# grep -n &quot;date.timezone&quot; /usr/pkg/etc/php.ini
940:; http://php.net/date.timezone
941:;date.timezone =

# vi +941 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-08 00:01:23.000000000 -0700
@@ -867,0 +868,16 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+extension=xcache.so
+zend_extension=xdebug.so
+extension=yaml.so
+extension=json.so
+
@@ -925 +941 @@
-;date.timezone =
+date.timezone = &quot;America/Vancouver&quot; 

# exit
$ pwd
/var/www/grav

$ bin/gpm index

PHP Warning:  Invalid argument supplied for foreach() in /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php on line 110
PHP Stack trace:
PHP   1. {main}() /var/www/grav/bin/gpm:0
PHP   2. Symfony\Component\Console\Application-&amp;gt;run() /var/www/grav/bin/gpm:57
... ... ...
... ... ...


# sed -n 110,110p /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php
        foreach ($data as $type =&amp;gt; $packages) {


# cp /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php.original.bak
# vi +110 /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php

# diff --unified=0  /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php.original.bak /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php
--- /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php.original.bak     2016-05-07 22:55:14.000000000 -0700
+++ /var/www/grav/system/src/Grav/Console/Gpm/IndexCommand.php  2016-05-07 22:55:44.000000000 -0700
@@ -110 +110 @@
-        foreach ($data as $type =&amp;gt; $packages) {
+        foreach ((array) $data as $type =&amp;gt; $packages) {


# exit
$ bin/gpm index

You can either get more informations about a package by typing:
    bin/gpm info &amp;lt;package&amp;gt;

Or you can install a package by typing:
    bin/gpm install &amp;lt;package&amp;gt;


# find /var/www/grav/cache -type d -exec chmod 0775 {} \;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Troubleshooting&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sorry, something went terribly wrong!
E_ERROR - Class ‘DOMDocument’ not found
For further details please review your logs/ folder, or enable displaying of errors in your system configuration.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cat /var/www/grav/logs/grav.log 
[2016-05-08 00:34:09] grav.WARNING: Plugin &apos;jscomments&apos; enabled but not found! Try clearing cache with `bin/grav clear-cache` [] []
[2016-05-08 00:34:10] grav.CRITICAL: Class &apos;DOMDocument&apos; not found - Trace: #0 /var/www/grav/vendor/filp/whoops/src/Whoops/Run.php(357): Whoops\Run-&amp;gt;handleError(1, &apos;Class &apos;DOMDocum...&apos;, &apos;/var/www/grav/s...&apos;, 67) #1 [internal function]: Whoops\Run-&amp;gt;handleShutdown() #2 {main} [] []

# php -i | grep -i -w dom
Configure Command =&amp;gt;  &apos;./configure&apos;  &apos;--with-config-file-path=/usr/pkg/etc&apos; &apos;--with-config-file-scan-dir=/usr/pkg/etc/php.d&apos; &apos;--sysconfdir=/usr/pkg/etc&apos; &apos;--localstatedir=/var&apos; &apos;--with-regex=system&apos; &apos;--without-mysql&apos; &apos;--without-iconv&apos; &apos;--without-pear&apos; &apos;--disable-posix&apos; &apos;--disable-dom&apos; &apos;--disable-opcache&apos; &apos;--disable-pdo&apos; &apos;--disable-json&apos; &apos;--enable-cgi&apos; &apos;--enable-mysqlnd&apos; &apos;--enable-xml&apos; &apos;--with-libxml-dir=/usr/pkg&apos; &apos;--enable-ipv6&apos; &apos;--with-openssl=/usr&apos; &apos;--without-readline&apos; &apos;--prefix=/usr/pkg&apos; &apos;--build=x86_64--netbsd&apos; &apos;--host=x86_64--netbsd&apos; &apos;--mandir=/usr/pkg/man&apos; &apos;build_alias=x86_64--netbsd&apos; &apos;host_alias=x86_64--netbsd&apos; &apos;CC=gcc&apos; &apos;CFLAGS=-O2 &apos;-pthread&apos; &apos;-I/usr/pkg/include&apos; &apos;-I/usr/include&apos;&apos; &apos;LDFLAGS=-L/usr/pkg/lib &apos;-Wl,-R/usr/pkg/lib&apos; &apos;-L/usr/lib&apos; &apos;-Wl,-R/usr/lib&apos; &apos;-pthread&apos;&apos; &apos;LIBS=&apos; &apos;CPPFLAGS=-I/usr/pkg/include &apos;-I/usr/include&apos;&apos; &apos;CXX=c++&apos; &apos;CXXFLAGS=-O2 &apos;-pthread&apos; &apos;-I/usr/pkg/include&apos; &apos;-I/usr/include&apos;&apos; &apos;CXXCPP=cpp&apos;


# php -i | grep -n &quot;disable-dom&quot;
6:Configure Command =&amp;gt;  &apos;./configure&apos;  &apos;--with-config-file-path=/usr/pkg/etc&apos; &apos;--with-config-file-scan-dir=/usr/pkg/etc/php.d&apos; &apos;--sysconfdir=/usr/pkg/etc&apos; &apos;--localstatedir=/var&apos; &apos;--with-regex=system&apos; &apos;--without-mysql&apos; &apos;--without-iconv&apos; &apos;--without-pear&apos; &apos;--disable-posix&apos; &apos;--disable-dom&apos; &apos;--disable-opcache&apos; &apos;--disable-pdo&apos; &apos;--disable-json&apos; &apos;--enable-cgi&apos; &apos;--enable-mysqlnd&apos; &apos;--enable-xml&apos; &apos;--with-libxml-dir=/usr/pkg&apos; &apos;--enable-ipv6&apos; &apos;--with-openssl=/usr&apos; &apos;--without-readline&apos; &apos;--prefix=/usr/pkg&apos; &apos;--build=x86_64--netbsd&apos; &apos;--host=x86_64--netbsd&apos; &apos;--mandir=/usr/pkg/man&apos; &apos;build_alias=x86_64--netbsd&apos; &apos;host_alias=x86_64--netbsd&apos; &apos;CC=gcc&apos; &apos;CFLAGS=-O2 &apos;-pthread&apos; &apos;-I/usr/pkg/include&apos; &apos;-I/usr/include&apos;&apos; &apos;LDFLAGS=-L/usr/pkg/lib &apos;-Wl,-R/usr/pkg/lib&apos; &apos;-L/usr/lib&apos; &apos;-Wl,-R/usr/lib&apos; &apos;-pthread&apos;&apos; &apos;LIBS=&apos; &apos;CPPFLAGS=-I/usr/pkg/include &apos;-I/usr/include&apos;&apos; &apos;CXX=c++&apos; &apos;CXXFLAGS=-O2 &apos;-pthread&apos; &apos;-I/usr/pkg/include&apos; &apos;-I/usr/include&apos;&apos; &apos;CXXCPP=cpp&apos;


# ftp -o - `echo $PKG_PATH` | grep -i php | grep -i dom
&amp;lt;a href=&quot;php55-dom-5.5.33.tgz&quot;&amp;gt;php55-dom-5.5.33.tgz&amp;lt;/a&amp;gt;                     08-Mar-2016 20:21             72kB
&amp;lt;a href=&quot;php56-dom-5.6.19.tgz&quot;&amp;gt;php56-dom-5.6.19.tgz&amp;lt;/a&amp;gt;                     08-Mar-2016 20:33             73kB
&amp;lt;a href=&quot;php70-dom-7.0.4.tgz&quot;&amp;gt;php70-dom-7.0.4.tgz&amp;lt;/a&amp;gt;                      09-Mar-2016 21:47             70kB


# pkg_add -v php56-dom

# vi +883 /usr/pkg/etc/php.ini

# diff --unified=0 /usr/pkg/etc/php.ini.original.bak /usr/pkg/etc/php.ini
--- /usr/pkg/etc/php.ini.original.bak   2016-05-07 12:58:30.000000000 -0700
+++ /usr/pkg/etc/php.ini        2016-05-08 00:49:52.000000000 -0700
@@ -867,0 +868,17 @@
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+; Dynamic Extensions required for Grav ;
+;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
+extension=gd.so
+extension=curl.so
+extension=mcrypt.so
+extension=zip.so
+extension=mbstring.so
+extension=xmlrpc.so
+extension=apcu.so
+zend_extension=opcache.so
+extension=xcache.so
+zend_extension=xdebug.so
+extension=yaml.so
+extension=json.so
+extension=dom.so
+
@@ -925 +942 @@
-;date.timezone =
+date.timezone = &quot;America/Vancouver&quot; 

# /etc/rc.d/apache restart
Stopping apache.
Waiting for PIDS: 6995.
Starting apache.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;browser-check-on-the-host&quot;&gt;Browser check on the host&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Add the following line &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;127.0.0.1   mygravablog.localhost&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;With your web browser, navigate to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://mygravblog.localhost:7777/&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 12 Aug 2016 17:04:02 -0700</pubDate>
        <link>http://localhost:4000/bsd/netbsd/virtualization/php/webdevelopment/2016/08/12/netbsd-virtualbox-grav.html</link>
        <guid isPermaLink="true">http://localhost:4000/bsd/netbsd/virtualization/php/webdevelopment/2016/08/12/netbsd-virtualbox-grav.html</guid>
        
        
        <category>bsd</category>
        
        <category>netbsd</category>
        
        <category>virtualization</category>
        
        <category>php</category>
        
        <category>webdevelopment</category>
        
      </item>
    
  </channel>
</rss>
